

---

## üîß 1. –ö–∞–∫–∏–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Linux –¥–æ–ª–∂–µ–Ω –∑–Ω–∞—Ç—å Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∏ –∑–∞—á–µ–º –æ–Ω–∏ –Ω—É–∂–Ω—ã?

   
–ó–Ω–∞–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥ Linux –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å —Å–µ—Ä–≤–µ—Ä–æ–º, –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∏ —É—Å—Ç—Ä–∞–Ω—è—Ç—å –ø—Ä–æ–±–ª–µ–º—ã. Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–∞—Å—Ç–æ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ Linux-—Å–µ—Ä–≤–µ—Ä–∞—Ö, –ø–æ—ç—Ç–æ–º—É —É–º–µ–Ω–∏–µ –±—ã—Å—Ç—Ä–æ –Ω–∞–≤–∏–≥–∏—Ä–æ–≤–∞—Ç—å –ø–æ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å —Ñ–∞–π–ª–∞–º–∏ –∫—Ä–∞–π–Ω–µ –≤–∞–∂–Ω–æ. –ù–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–º–∞–Ω–¥—ã '**ls**' (–ø—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏) –∏ '**cd**' (—Å–º–µ–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏) –ø–æ–º–æ–≥–∞—é—Ç –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Ñ–∞–π–ª–æ–≤, –∞ 'pwd' –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Ä–∞–±–æ—á–∏–π –∫–∞—Ç–∞–ª–æ–≥. –ö–æ–º–∞–Ω–¥—ã 'cp' –∏ 'mv' –ø–æ–∑–≤–æ–ª—è—é—Ç –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ –ø–µ—Ä–µ–º–µ—â–∞—Ç—å —Ñ–∞–π–ª—ã, –∞ 'mkdir' –∏ 'rm' ‚Äî —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–∞—Ç–∞–ª–æ–≥–∏ –∏ —É–¥–∞–ª—è—Ç—å —Ñ–∞–π–ª—ã –∏–ª–∏ –∫–∞—Ç–∞–ª–æ–≥–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ.

–í –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π —Ä–∞–±–æ—Ç–µ —á–∞—Å—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–æ–≤ –∏–ª–∏ –ª–æ–≥–æ–≤. –ö–æ–º–∞–Ω–¥–∞ '**cat**' –≤—ã–≤–æ–¥–∏—Ç —Ñ–∞–π–ª —Ü–µ–ª–∏–∫–æ–º, –Ω–æ –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ —É–¥–æ–±–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 'less' (–ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä) –∏–ª–∏ '**tail** -f' –¥–ª—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª—è–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞ –∂—É—Ä–Ω–∞–ª–∞ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ª–æ–≥–æ–≤ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ Java-—Å–µ—Ä–≤–∏—Å–∞. –ö–æ–º–∞–Ω–¥–∞ '**grep**' –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –≤—ã–≤–æ–¥ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º ‚Äî –µ—é –ø–æ–ª—å–∑—É—é—Ç—Å—è, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –≤ –ª–æ–≥–∞—Ö –æ—à–∏–±–∫–∏ –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ —Å–ª–æ–≤—É ‚ÄúException‚Äù).

–î—Ä—É–≥–∏–µ –ø–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –≤–∫–ª—é—á–∞—é—Ç '**find**' –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ñ–∞–π–ª–æ–≤ –ø–æ –∏–º–µ–Ω–∏ –∏–ª–∏ –º–∞—Å–∫–µ ‚Äî –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏, –≥–¥–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–ª–∏ jar-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞. –ö–æ–º–∞–Ω–¥–∞ 'echo' –≤—ã–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è), 'sudo' –≤—Ä–µ–º–µ–Ω–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤ –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫). –í—Å–µ —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –ø–æ–º–æ–≥–∞—é—Ç Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ—à–∞—Ç—å –º–Ω–æ–≥–∏–µ –∑–∞–¥–∞—á–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –±–µ–∑ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, —É—Å–∫–æ—Ä—è—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –∏ –¥–µ–ø–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.



---

## üß† 2. –ö–∞–∫ Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É —É–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –≤ Linux –∏ –∫–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

   
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –≤ Linux –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å–≤–æ–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–≤–µ—Ä—à–∞—Ç—å –∑–∞–≤–∏—Å—à–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã. –û—Å–Ω–æ–≤–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–ø–∏—Å–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ ‚Äî '**ps**'. –° –∫–ª—é—á–∞–º–∏ 'aux' –æ–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –≤ —Å–∏—Å—Ç–µ–º–µ, –∏—Ö –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã (PID), –∏—Å–ø–æ–ª—å–∑—É–µ–º—É—é –ø–∞–º—è—Ç—å –∏ –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã. –î–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —É–¥–æ–±–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É '**top**' (–∏–ª–∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–æ–≥ '**htop**'), –∫–æ—Ç–æ—Ä–∞—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–∞–º—ã–µ ‚Äú—Ç—è–∂–µ–ª—ã–µ‚Äù –ø—Ä–æ—Ü–µ—Å—Å—ã –ø–æ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—é CPU –∏ –ø–∞–º—è—Ç–∏, –æ–±–Ω–æ–≤–ª—è—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω—è—Ç—å, –Ω–µ –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç –ª–∏ Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á—Ä–µ–∑–º–µ—Ä–Ω–æ —Ä–µ—Å—É—Ä—Å—ã.

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å Java, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å '**ps** aux | **grep** **java**' ‚Äî —ç—Ç–æ –≤—ã–≤–µ–¥–µ—Ç —Å—Ç—Ä–æ–∫–∏, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ ‚Äú**java**‚Äù, –∏–∑ —Å–ø–∏—Å–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, –ø–æ–∑–≤–æ–ª—è—è –≤—ã—è–≤–∏—Ç—å PID –Ω—É–∂–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ö–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å—à–µ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ), –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ 'kill'. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `kill <PID>` –ø–æ—Å—ã–ª–∞–µ—Ç SIGTERM ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Å–∏–≥–Ω–∞–ª –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è, –¥–∞—é—â–∏–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é —à–∞–Ω—Å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ—á–∏—Å—Ç–∫—É. –ï—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É—é—Ç `kill -9 <PID>` –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (SIGKILL). –í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ Java —ç—Ç–æ –ø—Ä–∏–º–µ–Ω–∏–º–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–≤–∏—Å—à–∏–π —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å, —É–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π –ø–æ—Ä—Ç.

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤–∫–ª—é—á–∞—é—Ç 'nice' –∏ 'renice' –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–Ω–∏–∑–∏—Ç—å –≤–ª–∏—è–Ω–∏–µ —Ç—è–∂—ë–ª–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –Ω–∞ —Å–∏—Å—Ç–µ–º—É) –∏ 'nohup' –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –∏–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ–æ–Ω–æ–≤—ã–π –∑–∞–ø—É—Å–∫ Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è). –î–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å 'jps' (Java Process Status, –ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å JDK) ‚Äî –æ–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ JVM-–ø—Ä–æ—Ü–µ—Å—Å—ã –∏ –∏—Ö main-–∫–ª–∞—Å—Å—ã, —á—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –Ω—É–∂–Ω–æ–≥–æ Java-–ø—Ä–æ—Ü–µ—Å—Å–∞ —Å—Ä–µ–¥–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–∞.

---

## üõ°Ô∏è 3. –ß—Ç–æ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å –æ –ø—Ä–∞–≤–∞—Ö –¥–æ—Å—Ç—É–ø–∞ (**chmod**, **chown**) –≤ Linux –∏ –∫–∞–∫ –æ–Ω–∏ –≤–ª–∏—è—é—Ç –Ω–∞ –∑–∞–ø—É—Å–∫ Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π?

   
–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –≤ Linux –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç, –∫–∞–∫–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å, –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –∏–ª–∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ñ–∞–π–ª—ã –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏. Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —Ä–∞–±–æ—Ç–∞—é—â–µ–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ—Ç –∏–º–µ–Ω–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∏ –µ–≥–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π. –ö–æ–º–∞–Ω–¥–∞ '**ls** -l' –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∞ (rwx) –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞, –≥—Ä—É–ø–ø—ã –∏ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –∏—Å–ø–æ–ª–Ω—è–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤ (—Å–∫—Ä–∏–ø—Ç–æ–≤ –∑–∞–ø—É—Å–∫–∞, *.**sh**) –Ω—É–∂–Ω–æ –∏–º–µ—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ ('**chmod** +x filename.**sh**'), –∏–Ω–∞—á–µ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –ø–æ–∑–≤–æ–ª–∏—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç, –∑–∞–ø—É—Å–∫–∞—é—â–∏–π, –∫ –ø—Ä–∏–º–µ—Ä—É, Java-—Å–µ—Ä–≤–µ—Ä.

–ö–æ–º–∞–Ω–¥–∞ '**chmod**' –∏–∑–º–µ–Ω—è–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞. Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –≤–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å, –∫–∞–∫–∏–µ –ø—Ä–∞–≤–∞ –Ω—É–∂–Ω—ã –µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é: –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é (–¥–ª—è –ª–æ–≥–æ–≤ –∏–ª–∏ —Ñ–∞–π–ª–æ–≤ –∫—ç—à–∞), –ª–∏–±–æ –¥–æ—Å—Ç—É–ø –∫ —á—Ç–µ–Ω–∏—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤. –ï—Å–ª–∏ –ø—Ä–∞–≤–∞ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω—ã –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –≤—ã–¥–∞–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –≤—Ä–æ–¥–µ ‚ÄúPermission denied‚Äù. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—ã—Ç–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç –Ω–∏–∂–µ 1024 (–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ä—Ç), —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º root –∏–ª–∏ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π (Capabilities), –∏–Ω–∞—á–µ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—ã–±—Ä–∞—Ç—å –ø–æ—Ä—Ç –≤—ã—à–µ 1024.

–ö–æ–º–∞–Ω–¥–∞ '**chown**' –º–µ–Ω—è–µ—Ç –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∏ –≥—Ä—É–ø–ø—É —Ñ–∞–π–ª–∞ –∏–ª–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏. –í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —ç—Ç–æ –≤–∞–∂–Ω–æ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ: —Ñ–∞–π–ª—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ —Å–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞ –∑–∞—á–∞—Å—Ç—É—é –¥–æ–ª–∂–Ω—ã –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–º—É —Å–∏—Å—Ç–µ–º–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, `tomcat` –¥–ª—è Tomcat-—Å–µ—Ä–≤–µ—Ä–∞ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é `appuser`), –æ—Ç –∏–º–µ–Ω–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ —Å–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω. –ü—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –≤–ª–∞–¥–µ–ª—å—Ü—ã –∏ –ø—Ä–∞–≤–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç, —á—Ç–æ —Å–µ—Ä–≤–∏—Å —Å–º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å —Å–≤–æ–∏ —Ñ–∞–π–ª—ã, –∞ –ø–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –ø–æ–ª—É—á–∞—Ç –∫ –Ω–∏–º –¥–æ—Å—Ç—É–ø–∞. –í –∫–æ–º–∞–Ω–¥–Ω–æ–π —Ä–∞–±–æ—Ç–µ —ç—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç —Ä–∏—Å–∫–∏: –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ –±—É–¥–µ—Ç —Å–ª—É—á–∞–π–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å —Ñ–∞–π–ª—ã –ø—Ä–æ–¥–∞–∫—à–µ–Ω-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±–µ–∑ –ø—Ä–∞–≤, –∞ —Å–∞–º–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Å–º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ñ–∞–π–ª—ã –≤–Ω–µ —Å–≤–æ–µ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω–æ–≥–æ –∫—Ä—É–≥–∞.

---
## ‚öôÔ∏è 4. –ß—Ç–æ —Ç–∞–∫–æ–µ systemd –∏ –∫–∞–∫ —Å –µ–≥–æ –ø–æ–º–æ—â—å—é —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–µ—Ä–≤–∏—Å–∞–º–∏ (–≤ —Ç–æ–º —á–∏—Å–ª–µ Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏) –≤ Linux?

   
systemd ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (init system) –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–æ–≤ Linux, –∫–æ—Ç–æ—Ä–∞—è —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–ª—É–∂–±–∞–º–∏ –∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–∏—Å—Ç–µ–º—ã –∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –µ—ë —Ä–∞–±–æ—Ç—ã. –î–ª—è Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∑–Ω–∞–Ω–∏–µ systemd –≤–∞–∂–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –º–Ω–æ–≥–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–ª–∏ —Å–µ—Ä–≤–∏—Å—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ Spring Boot, –∑–∞–ø–∞–∫–æ–≤–∞–Ω–Ω—ã–µ –≤ jar/war, –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π) –º–æ–∂–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ —Å–µ—Ä–≤–∏—Å systemd –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã –∏ —É–¥–æ–±–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–∑–∞–ø—É—Å–∫, –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫, –æ—Å—Ç–∞–Ω–æ–≤).

–û—Å–Ω–æ–≤–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å systemd ‚Äî '**systemctl**'. –° –µ—ë –ø–æ–º–æ—â—å—é –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å ('**systemctl** start myservice'), –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å ('**systemctl** stop myservice'), –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å ('**systemctl** restart myservice') –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç—É—Å ('**systemctl** status myservice'). –ß—Ç–æ–±—ã Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É–ø—Ä–∞–≤–ª—è–ª–æ—Å—å systemd, –¥–ª—è –Ω–µ–≥–æ –ø–∏—à—É—Ç unit-—Ñ–∞–π–ª (–æ–±—ã—á–Ω–æ –≤ /etc/systemd/system/ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º .service), –≥–¥–µ —É–∫–∞–∑—ã–≤–∞—é—Ç, –∫–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—É—Ç—å –¥–æ **java** –∏ jar-—Ñ–∞–π–ª–∞, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã JVM), –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –æ—Ç –∫–æ—Ç–æ—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞—Ç—å, –∏ –ø—Ä–æ—á–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–∞–≤—Ç–æ—Ä–µ—Å—Ç–∞—Ä—Ç –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –∏ —Ç.–¥.). –ü–æ—Å–ª–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è unit-—Ñ–∞–π–ª–∞ –≤—ã–ø–æ–ª–Ω—è—é—Ç '**systemctl** daemon-reload', —á—Ç–æ–±—ã systemd —É–≤–∏–¥–µ–ª –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å, –∞ –∑–∞—Ç–µ–º –º–æ–∂–Ω–æ –µ–≥–æ –≤–∫–ª—é—á–∏—Ç—å ('**systemctl** enable myservice'), —á—Ç–æ–±—ã –æ–Ω —Å—Ç–∞—Ä—Ç–æ–≤–∞–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–µ—Ä–∞.

–ò—Å–ø–æ–ª—å–∑—É—è systemd, –∫–æ–º–∞–Ω–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –æ–±–ª–µ–≥—á–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. Systemd –ª–æ–≥–≥–∏—Ä—É–µ—Ç –≤—ã–≤–æ–¥ —Å–µ—Ä–≤–∏—Å–∞ (stdout/stderr) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ –∂—É—Ä–Ω–∞–ª, –∏ –ø—Ä–∏ '**systemctl** status' –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –ª–æ–≥–∞. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ–ª–∂–Ω–∞ —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å –¥–æ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è) –∏–ª–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤. –î–ª—è Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —ç—Ç–æ –∑–Ω–∞—á–∏—Ç –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω—ã–π –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤ —Å–ª—É—á–∞–µ —Å–±–æ–µ–≤, —á—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω-—Å—Ä–µ–¥–∞—Ö.



---

## üìÑ 5. –ö–∞–∫ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏ –≤ Linux (systemd journal, —Ñ–∞–π–ª—ã –≤ /var/log) –∏ –ø–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ –ø—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π?

   
–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî –∫–ª—é—á–µ–≤–æ–π —Å–ø–æ—Å–æ–± —É–∑–Ω–∞—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. –í Linux —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∏ –ø—Ä–∏–∫–ª–∞–¥–Ω—ã–µ –ª–æ–≥–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–∏–±–æ –≤ —Ñ–∞–π–ª–∞—Ö (–æ–±—ã—á–Ω–æ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ /var/log), –ª–∏–±–æ –≤ —Å–∏—Å—Ç–µ–º–Ω–æ–º –∂—É—Ä–Ω–∞–ª–µ systemd (journald). Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –º–æ–≥—É—Ç –ø–∏—Å–∞—Ç—å –ª–æ–≥–∏ –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ Log4j –∏–ª–∏ Logback) –∏–ª–∏ –≤—ã–≤–æ–¥–∏—Ç—å –∏—Ö –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–≤–æ–¥, –∫–æ—Ç–æ—Ä—ã–π systemd –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–∞ —Å–æ–±–∏—Ä–∞–µ—Ç –≤ journal.

–ß—Ç–æ–±—ã –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∂—É—Ä–Ω–∞–ª—ã systemd, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ '**journalctl**'. –ù–∞–ø—Ä–∏–º–µ—Ä, '**journalctl** -u myservice' –ø–æ–∫–∞–∂–µ—Ç –ª–æ–≥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ (myservice) –∑–∞ –≤—Å–µ –≤—Ä–µ–º—è, –∞ —Å –∫–ª—é—á–æ–º '-f' –º–æ–∂–Ω–æ ‚Äú–ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è‚Äù –Ω–∞ –Ω–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ (–∞–Ω–∞–ª–æ–≥ **tail** -f). –ñ—É—Ä–Ω–∞–ª—ã systemd —É–¥–æ–±–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏ ('--since today' –∏–ª–∏ –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω—É) –∏ –ø–æ —É—Ä–æ–≤–Ω—é —Å–æ–æ–±—â–µ–Ω–∏–π. –ï—Å–ª–∏ Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –±—ã–ª–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–æ –∫–∞–∫ systemd-—Å–µ—Ä–≤–∏—Å, –µ–≥–æ –≤—ã–≤–æ–¥ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω –≤ —Ñ–∞–π–ª –ª–æ–≥–æ–≤. –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –¥–ª—è —á—Ç–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç '**tail** -f /path/to/logfile' –¥–ª—è —Å–ª–µ–∂–µ–Ω–∏—è –∑–∞ –ø–æ—è–≤–ª–µ–Ω–∏–µ–º –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π, 'less +F /path/to/logfile' –¥–ª—è –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ (–∫–ª–∞–≤–∏—à–∞ F –≤ less —Ç–æ–∂–µ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –≤ —Ä–µ–∂–∏–º live-–ø—Ä–æ—Å–º–æ—Ç—Ä–∞), –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ '**grep**' –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—à–∏–±–æ–∫) –≤ —Ñ–∞–π–ª–µ.

–ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ –ø–æ–º–æ–≥–∞–µ—Ç –ø—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ: –ø–æ —Å–æ–æ–±—â–µ–Ω–∏—è–º –æ–± –æ—à–∏–±–∫–∞—Ö –º–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å –ø—Ä–∏—á–∏–Ω—É —Å–±–æ—è –∏–ª–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä, NullPointerException —Å —Ç—Ä–µ–π—Å–æ–º –≤ –ª–æ–≥–µ –ø–æ–¥—Å–∫–∞–∂–µ—Ç, –≥–¥–µ –≤ –∫–æ–¥–µ –ø—Ä–æ–±–ª–µ–º–∞. –¢–∞–∫–∂–µ –ø–æ –ª–æ–≥–∞–º –º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–∏—Å–∞, —Ñ–∞–∫—Ç—ã –∑–∞–ø—É—Å–∫–∞ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–∞–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π. Linux –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã '**grep**', '**awk**' –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª–æ–≥–æ–≤, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –≤ –∫–æ–º–∞–Ω–¥–µ –±—ã—Å—Ç—Ä–æ –∏–∑–≤–ª–µ–∫–∞—Ç—å –Ω—É–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é. –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∂—É—Ä–Ω–∞–ª–æ–≤ –∏ —É–º–µ–Ω–∏–µ –∏—Ö —á–∏—Ç–∞—Ç—å ‚Äî –Ω–µ–æ—Ç—ä–µ–º–ª–µ–º–∞—è —á–∞—Å—Ç—å —Ä–∞–±–æ—Ç—ã –≤ DevOps-–ø—Ä–æ—Ü–µ—Å—Å–∞—Ö, –ø–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–æ –ø–µ—Ä–≤—ã–π —à–∞–≥ –≤ —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.

---
## üì¶ 6. –ß—Ç–æ —Ç–∞–∫–æ–µ Docker –∏ –∫–∞–∫–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Docker –¥–∞–µ—Ç Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É?

   
Docker ‚Äî —ç—Ç–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø–∞–∫–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –≤—Å–µ –µ–≥–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä. –î–ª—è Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ Docker —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É ‚Äú—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –º–æ–µ–π –º–∞—à–∏–Ω–µ‚Äù: –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–º–µ—Å—Ç–µ —Å –Ω—É–∂–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π JDK, –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏, —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —É–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç—Å—è –≤ –æ–±—Ä–∞–∑. –¢–∞–∫–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞ –ª—é–±–æ–º —Å–µ—Ä–≤–µ—Ä–µ —Å Docker, –∏ –æ–Ω –±—É–¥–µ—Ç –≤–µ—Å—Ç–∏ —Å–µ–±—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å ‚Äî —Å—Ä–µ–¥–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –∏–¥–µ–Ω—Ç–∏—á–Ω–∞ –Ω–∞ –º–∞—à–∏–Ω–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞, –≤ —Ç–µ—Å—Ç–æ–≤–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.

–û–¥–Ω–æ –∏–∑ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ Docker ‚Äî –∏–∑–æ–ª—è—Ü–∏—è. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞ –∏ –æ—Ç —Ö–æ—Å—Ç–∞, —É –∫–∞–∂–¥–æ–≥–æ —Å–≤–æ—ë —Ñ–∞–π–ª–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ, —Å–µ—Ç–µ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ —Ç.–¥. Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç —Å –¥—Ä—É–≥–∏–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏ –Ω–∞ —Ç–æ–º –∂–µ —Å–µ—Ä–≤–µ—Ä–µ: –º–æ–∂–Ω–æ –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏–π JVM –∏–ª–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–∞ –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ –ø–æ—Ä—Ç–∞—Ö, –∏ –æ–Ω–∏ –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, Docker –æ–±–ª–µ–≥—á–∞–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ: —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–æ–¥–Ω—è—Ç—å –µ—â—ë –æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–∑ —Ç–æ–≥–æ –∂–µ –æ–±—Ä–∞–∑–∞.

Docker —Ç–∞–∫–∂–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è –≤ DevOps-–ø—Ä–æ—Ü–µ—Å—Å—ã: –æ–±—Ä–∞–∑—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä—É—é—Ç—Å—è –∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ registry (–Ω–∞–ø—Ä–∏–º–µ—Ä, Docker Hub –∏–ª–∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π registry), —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤ CI/CD –±—ã—Å—Ç—Ä–æ —Ä–∞—Å–∫–∞—Ç—ã–≤–∞—Ç—å –Ω—É–∂–Ω—É—é –≤–µ—Ä—Å–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å—Ç–∞—Ä—Ç—É–µ—Ç –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ —Å –Ω—É–ª—è, –∏ —Ç—Ä–µ–±—É–µ—Ç –º–µ–Ω—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤. –î–ª—è –∫–æ–º–∞–Ω–¥—ã Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ Docker —Å—Ç–∞–ª —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤: –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –º–æ–∂–Ω–æ —É–ø–∞–∫–æ–≤–∞—Ç—å –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ, –∞ –≤ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Å –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏ (–∫–∞–∫ Kubernetes) ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –∏—Ö –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º.

---

## üìù 7. –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å Docker-–æ–±—Ä–∞–∑ –¥–ª—è Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è? –ß—Ç–æ —Ç–∞–∫–æ–µ Dockerfile –∏ –∫–∞–∫–∏–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ –Ω–µ–º –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è?

   
Docker-–æ–±—Ä–∞–∑ (image) ‚Äî —ç—Ç–æ —à–∞–±–ª–æ–Ω –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –≤–∫–ª—é—á–∞—é—â–∏–π –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –æ–±—Ä–∞–∑, –ø–∏—à—É—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ ‚Äî Dockerfile. –í Dockerfile –ø–æ —à–∞–≥–∞–º –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è, –∏–∑ –∫–∞–∫–æ–≥–æ –±–∞–∑–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑–∞ —Å—Ç—Ä–æ–∏—Ç—Å—è –Ω–æ–≤—ã–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ OpenJDK –∫–∞–∫ –æ—Å–Ω–æ–≤—É –¥–ª—è Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π), –∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –æ–±—Ä–∞–∑, –∫–∞–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

–û—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ Dockerfile –≤–∫–ª—é—á–∞—é—Ç:

* **FROM** ‚Äî —É–∫–∞–∑—ã–≤–∞–µ—Ç –±–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'FROM openjdk:17-jdk-alpine' –¥–ª—è –ª–µ–≥–∫–æ–≤–µ—Å–Ω–æ–≥–æ JDK –Ω–∞ –±–∞–∑–µ Alpine Linux).
* **COPY** (–∏–ª–∏ **ADD**) ‚Äî –∫–æ–ø–∏—Ä—É—é—Ç —Ñ–∞–π–ª—ã —Å —Ö–æ—Å—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π .jar –∏–ª–∏ .war –∞—Ä—Ö–∏–≤ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è) –≤–Ω—É—Ç—Ä—å –æ–±—Ä–∞–∑–∞.
* **RUN** ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'RUN apt-get update && apt-get install -y curl' —á—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –∏–ª–∏ 'RUN ./mvnw package' —á—Ç–æ–±—ã —Å–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –ø—Ä—è–º–æ –≤–Ω—É—Ç—Ä–∏ –æ–±—Ä–∞–∑–∞).
* **CMD** –∏–ª–∏ **ENTRYPOINT** ‚Äî –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –∫–æ–º–∞–Ω–¥—É, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –î–ª—è Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —ç—Ç–æ –æ–±—ã—á–Ω–æ –∑–∞–ø—É—Å–∫ '**java** -jar yourapp.jar' —Å –Ω—É–∂–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.
* –¢–∞–∫–∂–µ —á–∞—Å—Ç–æ —É–∫–∞–∑—ã–≤–∞—é—Ç **EXPOSE** (–Ω–æ–º–µ—Ä –ø–æ—Ä—Ç–∞, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–ª—É—à–∞–µ—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä 8080) ‚Äî —ç—Ç–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ—Ç –Ω–∞–º–µ—Ä–µ–Ω–∏–µ –ø—Ä–æ–∫–∏–Ω—É—Ç—å –ø–æ—Ä—Ç, –∏ **ENV** –¥–ª—è –∑–∞–¥–∞–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'ENV SPRING_PROFILES_ACTIVE=prod').

Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –≤–∞–∂–Ω–æ —Å–æ–±–ª—é–¥–∞—Ç—å –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –ø—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ Dockerfile: –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—á–∏—â–∞—Ç—å –∫–µ—à–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –ø–∞–∫–µ—Ç–æ–≤, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω—É—é —Å–±–æ—Ä–∫—É ‚Äî —Å–æ–±–∏—Ä–∞—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –≤ –æ–¥–Ω–æ–º –≤—Ä–µ–º–µ–Ω–Ω–æ–º –æ–±—Ä–∞–∑–µ, –∞ –∑–∞—Ç–µ–º –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –≤ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —á–∏—Å—Ç—ã–π –æ–±—Ä–∞–∑ —Å JRE). –¢–∞–∫–∂–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —è–≤–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å –≤–µ—Ä—Å–∏—é –±–∞–∑–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑–∞ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏. –ü–æ—Å–ª–µ –Ω–∞–ø–∏—Å–∞–Ω–∏—è Dockerfile —Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π '**docker** build -t myapp:1.0 .' (–≥–¥–µ '-t' –∑–∞–¥–∞–µ—Ç —Ç–µ–≥ –∏ –≤–µ—Ä—Å–∏—é). –ü–æ–ª—É—á–µ–Ω–Ω—ã–π –æ–±—Ä–∞–∑ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—å —Å—Ä–µ–¥–∏ –∫–æ–º–∞–Ω–¥—ã –∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ã.

---
## üóÇÔ∏è 8. –î–ª—è —á–µ–≥–æ –Ω—É–∂–Ω—ã Docker volume (—Ç–æ–º—ã) –∏ –∫–∞–∫ –∏—Ö –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏?

   
Docker volume (—Ç–æ–º) ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º Docker –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤–Ω–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –Ω–∞ —Ö–æ—Å—Ç-–º–∞—à–∏–Ω–µ, —á—Ç–æ–±—ã —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø—Ä–æ–ø–∞–¥–∞–ª–∏ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—Å–µ, —á—Ç–æ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –æ—Å—Ç–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –µ–≥–æ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –∏ –∏—Å—á–µ–∑–∞–µ—Ç –≤–º–µ—Å—Ç–µ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º. –¢–æ–º —Ä–µ—à–∞–µ—Ç —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É, –ø–æ–∑–≤–æ–ª—è—è —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ. –î–ª—è Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Ç–æ–º—ã –∞–∫—Ç—É–∞–ª—å–Ω—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤, –∫—ç—à–µ–π, –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤, –∞ —Ç–∞–∫–∂–µ –ª–æ–≥–æ–≤, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –ª–æ–≥–∏ –ø–µ—Ä–µ–∂–∏–≤–∞–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏–ª–∏ —á—Ç–æ–±—ã –∫ –Ω–∏–º –±—ã–ª —É–¥–æ–±–Ω—ã–π –¥–æ—Å—Ç—É–ø —Å —Ö–æ—Å—Ç–∞.

–¢–æ–º–∞–º–∏ —É–¥–æ–±–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö: –Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç PostgreSQL, –ø–æ—Å–ª–µ–¥–Ω–∏–π –æ–±—ã—á–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º volume –∫ /var/lib/postgresql (–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö). –¢–æ–≥–¥–∞ –ø—Ä–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ë–î –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–æ—Ç–µ—Ä—è—é—Ç—Å—è. –¢–∞–∫–∂–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –º–æ–∂–Ω–æ –ø–æ–¥–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ç–∞–ª–æ–≥ —Å –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º –∏–ª–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º–∏ –∫–∞–∫ volume, —á—Ç–æ–±—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤–∏–¥–µ–ª–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–∞ (bind-mount volume).

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ volumes –ø—Ä–æ—Å—Ç–æ–µ: –ª–∏–±–æ –æ–±—ä—è–≤–∏—Ç—å volume –≤ Dockerfile ('VOLUME /app/data'), –ª–∏–±–æ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —É–∫–∞–∑–∞—Ç—å —Ñ–ª–∞–≥ '-v host_dir:container_dir'. –í Docker Compose –º–æ–∂–Ω–æ –ø—Ä–æ–ø–∏—Å–∞—Ç—å —Ç–æ–º–∞ –≤ —Å–µ–∫—Ü–∏–∏ volumes. –í–∞–∂–Ω–æ —Ç–∞–∫–∂–µ –ø–æ–Ω–∏–º–∞—Ç—å —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–º–∏ —Ç–æ–º–∞–º–∏ –∏ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–º–∏ –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (bind mount): –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å–∞–º–∏–º Docker (–æ–Ω —Ö—Ä–∞–Ω–∏—Ç –∏—Ö –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–º –º–µ—Å—Ç–µ), –∞ bind-mount –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –ø–∞–ø–∫—É —Ö–æ—Å—Ç–∞. –î–ª—è production-–æ–∫—Ä—É–∂–µ–Ω–∏–π —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–º–∞ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö. –í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ Java –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –∏–∑–≤–ª–µ–∫–∞—Ç—å –≤—ã–≥–æ–¥—É –∏–∑ —Ç–æ–º–æ–≤, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —à–∞—Ä–∏—Ç—å —Ñ–∞–π–ª—ã –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–∏—à–µ—Ç –≤ —Ç–æ–º, –¥—Ä—É–≥–æ–π —á–∏—Ç–∞–µ—Ç) –∏–ª–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –æ–±—Ä–∞–∑–∞.



---

## üåê 9. –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Å–µ—Ç–∏ (networks) –≤ Docker –∏ –∫–∞–∫ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–µ–∂–¥—É Java-—Å–µ—Ä–≤–∏—Å–æ–º –∏ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö)?

   
Docker –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å —Å–µ—Ç–µ–≤–æ–π –∏–∑–æ–ª—è—Ü–∏–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∫–æ–≥–¥–∞ Docker —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–µ—Ç—å —Ç–∏–ø–∞ bridge (docker0), –∏ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –±–µ–∑ —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è —Å–µ—Ç–∏, –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –∫ –Ω–µ–π. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ –æ–¥–Ω–æ–π —Å–µ—Ç–∏ Docker –º–æ–≥—É—Ç –æ–±—â–∞—Ç—å—Å—è –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º –ø–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º IP-–∞–¥—Ä–µ—Å–∞–º. –ß—Ç–æ–±—ã Java-—Å–µ—Ä–≤–∏—Å —Å–º–æ–≥ –Ω–∞–π—Ç–∏ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –≤ –¥—Ä—É–≥–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, –∏—Ö –Ω—É–∂–Ω–æ –ª–∏–±–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –≤ –æ–¥–Ω–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π —Å–µ—Ç–∏, –ª–∏–±–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docker Compose, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç —Å–µ—Ç—å –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

–õ—É—á—à–µ–π –ø—Ä–∞–∫—Ç–∏–∫–æ–π —Å—á–∏—Ç–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ—é —Å–µ—Ç—å ('**docker** network create mynet') –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, —É–∫–∞–∑–∞–≤ '--network mynet'. –í —ç—Ç–æ–π —Å–µ—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –º–æ–≥—É—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –¥—Ä—É–≥ –∫ –¥—Ä—É–≥—É –ø–æ –∏–º–µ–Ω–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (Docker DNS-—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∏–º—ë–Ω): –Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –ë–î –∑–∞–ø—É—â–µ–Ω–∞ —Å –∏–º–µ–Ω–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ 'db', —Ç–æ Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —Ö–æ—Å—Ç—É 'db' (–≤–Ω—É—Ç—Ä–∏ —Å–µ—Ç–∏ Docker) –Ω–∞ –Ω—É–∂–Ω–æ–º –ø–æ—Ä—Ç—É. –ù–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –ø—Ä–æ–ø–∏—Å—ã–≤–∞—Ç—å IP ‚Äî Docker —Å–∞–º —É–ø—Ä–∞–≤–ª—è–µ—Ç –∞–¥—Ä–µ—Å–∞—Ü–∏–µ–π. –í Docker Compose –∑–∞ –∏–º—è —Ö–æ—Å—Ç–∞ –±–µ—Ä–µ—Ç—Å—è –∏–º—è —Å–µ—Ä–≤–∏—Å–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, —Å–µ—Ä–≤–∏—Å —Å –∏–º–µ–Ω–µ–º 'database' –ø–æ–∑–≤–æ–ª–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å URL –≤–∏–¥–∞ jdbc:`//database:5432/‚Ä¶` –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –∏–∑–≤–Ω–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–±—Ä–∞—Ç–∏–ª—Å—è –∫ Java-—Å–µ—Ä–≤–∏—Å—É —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä) –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏—é –ø–æ—Ä—Ç–æ–≤: '**docker** run -p 8080:8080 ...' –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç –ø–æ—Ä—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ –ø–æ—Ä—Ç —Ö–æ—Å—Ç–∞. –í Docker Compose —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Ä–∞–∑–¥–µ–ª 'ports'. –ü—Ä–∏ —ç—Ç–æ–º –≤–Ω—É—Ç—Ä–∏ —Å–∞–º–æ–π Docker-—Å–µ—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –æ–±—â–∞—é—Ç—Å—è –Ω–∞ —Å–≤–æ–∏—Ö –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ—Ä—Ç–∞—Ö –±–µ–∑ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, Docker-—Å–µ—Ç–∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏ –∏–∑–æ–ª—è—Ü–∏—é (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ç—è—Ö –Ω–µ –≤–∏–¥—è—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞), –∏ –≥–∏–±–∫–æ—Å—Ç—å —Å–≤—è–∑–∏ (–ø—Ä–æ—Å—Ç–æ–µ –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ). Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –≤–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å —Å–µ—Ç–∏ Docker, —á—Ç–æ–±—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞—Ç—å URL—ã —Å–µ—Ä–≤–∏—Å–æ–≤ (–Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å localhost, –µ—Å–ª–∏ —Å–µ—Ä–≤–∏—Å—ã –≤ —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö) –∏ —É–º–µ—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –≤–∏–¥–∏—Ç –¥—Ä—É–≥–æ–π, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –æ–Ω–∏ –Ω–∞ –æ–¥–Ω–æ–π —Å–µ—Ç–∏).

---
## üöÄ 10. –ö–∞–∫ —Å –ø–æ–º–æ—â—å—é Docker Compose —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –º–Ω–æ–≥–æ–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —Å–æ–¥–µ—Ä–∂–∞—â–µ–µ Java-—Å–µ—Ä–≤–∏—Å –∏ –¥—Ä—É–≥–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ë–î)?

    
Docker Compose ‚Äî —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø–∏—Å–∞—Ç—å –≤ YAML-—Ñ–∞–π–ª–µ (–æ–±—ã—á–Ω–æ **docker**-compose.yml) –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (—Å–µ—Ä–≤–∏—Å–æ–≤) –∏ –∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ. –î–ª—è Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ Compose —É–¥–æ–±–µ–Ω —Ç–µ–º, —á—Ç–æ –º–æ–∂–Ω–æ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π '**docker**-compose up' –ø–æ–¥–Ω—è—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–∞–º Java-—Å–µ—Ä–≤–∏—Å, –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö, –±—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –¥—Ä. –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —Ç—Ä–µ–±—É–µ–º—ã–µ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∫–∞–∂–¥–æ–≥–æ '**docker** run' –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ç–µ–π.

–í —Ñ–∞–π–ª–µ **docker**-compose.yml –æ–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —Å–µ—Ä–≤–∏—Å—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, —Å–µ—Ä–≤–∏—Å 'app' –º–æ–∂–µ—Ç –æ—Å–Ω–æ–≤—ã–≤–∞—Ç—å—Å—è –Ω–∞ –æ–±—Ä–∞–∑–µ –≤–∞—à–µ–≥–æ Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–∏–ª–∏ –Ω–∞ Dockerfile –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ), —Å–µ—Ä–≤–∏—Å 'db' ‚Äî –Ω–∞ –æ–±—Ä–∞–∑–µ –°–£–ë–î (—Å–∫–∞–∂–µ–º, postgres). –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø–æ—Ä—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è 'app' ‚Äì "8080:8080"), —Ç–æ–º–∞ (–¥–ª—è 'db' ‚Äì –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ volume –∫ /var/lib/postgresql/data), –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è 'db' —É–∫–∞–∑–∞—Ç—å POSTGRES_PASSWORD). Compose –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –æ–±—â—É—é —Å–µ—Ç—å –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–µ, –ø–æ—ç—Ç–æ–º—É 'app' —Å–º–æ–∂–µ—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ 'db' –ø–æ –∏–º–µ–Ω–∏ —Ö–æ—Å—Ç–∞ 'db'.

Compose —Ç–∞–∫–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (–∫–æ–º–∞–Ω–¥–∞ '**docker**-compose up --scale app=3' –∑–∞–ø—É—Å—Ç–∏—Ç 3 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ 'app' –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è). –≠—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –º–æ–∂–Ω–æ –æ–ø–∏—Å–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, —á—Ç–æ–±—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–Ω–∞—á–∞–ª–∞ —Å—Ç–∞—Ä—Ç–æ–≤–∞–ª–∞ –±–∞–∑–∞, –∞ –ø–æ—Ç–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (—á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä depends_on ‚Äî –æ–Ω –Ω–µ –∂–¥–µ—Ç –ø–æ–ª–Ω–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞ –ë–î, –Ω–æ –ø–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ). –í —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö Docker Compose —á–∞—Å—Ç–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: –∫–∞–∂–¥—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –º–æ–∂–µ—Ç –ø–æ–¥–Ω—è—Ç—å —É —Å–µ–±—è –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Å–µ—Ä–≤–∏—Å–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—è –µ–¥–∏–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥. –≠—Ç–æ —É—Å–∫–æ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç—É –≤ –∫–æ–º–∞–Ω–¥–µ –∏ —Å–Ω–∏–∂–∞–µ—Ç ‚Äú—ç—Ñ—Ñ–µ–∫—Ç –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ—Å—Ç–∏‚Äù –ø—Ä–∏ –¥–µ–ø–ª–æ–µ, —Ç–∞–∫ –∫–∞–∫ –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —É–∂–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤–º–µ—Å—Ç–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö.

---
## üí° 11. –ü–æ—á–µ–º—É Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –≤–∞–∂–Ω–æ –≤–ª–∞–¥–µ—Ç—å –æ—Å–Ω–æ–≤–∞–º–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏—è shell-—Å–∫—Ä–∏–ø—Ç–æ–≤ –∏ –≤ –∫–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö —ç—Ç–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è?

    
Shell-—Å–∫—Ä–∏–ø—Ç—ã –ø–æ–º–æ–≥–∞—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏, —Å–Ω–∏–º–∞—è —Ä—É—Ç–∏–Ω–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∏ —É—Å–∫–æ—Ä—è—è –ø—Ä–æ—Ü–µ—Å—Å—ã —Å–±–æ—Ä–∫–∏ –∏ –¥–µ–ø–ª–æ—è. Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫, –∑–Ω–∞–∫–æ–º—ã–π —Å Bash, –º–æ–∂–µ—Ç –Ω–∞–ø–∏—Å–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –æ—á–∏—Å—Ç–∫–∏ –ª–æ–≥–æ–≤, –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –±–∏–ª–¥–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ DevOps-–ø—Ä–∞–∫—Ç–∏–∫, –≥–¥–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ –∫–æ–¥: –≤–º–µ—Å—Ç–æ —Ä—É—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –ø–∏—à—É—Ç—Å—è —Å—Ü–µ–Ω–∞—Ä–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å. –ó–Ω–∞–Ω–∏–µ shell –¥–µ–ª–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –±–æ–ª–µ–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–º: –æ–Ω –º–æ–∂–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–≤–æ–π –ª–æ–∫–∞–ª—å–Ω—ã–π environment –∏–ª–∏ CI-—Å–µ—Ä–≤–µ—Ä –¥–ª—è —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ –±–µ–∑ –ø–æ–º–æ—â–∏ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

–ö–æ–º–∞–Ω–¥—ã CI/CD (–Ω–∞–ø—Ä–∏–º–µ—Ä, Jenkins, GitLab CI) —á–∞—Å—Ç–æ –≤—ã–ø–æ–ª–Ω—è—é—Ç —à–∞–≥–∏ –≤ shell. –ï—Å–ª–∏ pipeline —Ç—Ä–µ–±—É–µ—Ç –∫–∞–∫–æ–π-—Ç–æ –æ—Å–æ–±–æ–π –ª–æ–≥–∏–∫–∏ ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã—á–∏—Å–ª–∏—Ç—å –≤–µ—Ä—Å–∏—é –Ω–∞ –æ—Å–Ω–æ–≤–µ git-—Ç–µ–≥–∞, –æ—á–∏—Å—Ç–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏–ª–∏ —Å–∫–∞—á–∞—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã ‚Äî —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –º–æ–∂–µ—Ç –±—ã—Å—Ç—Ä–æ –Ω–∞–ø–∏—Å–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π —Å–∫—Ä–∏–ø—Ç. –ë–µ–∑ —ç—Ç–∏—Ö –Ω–∞–≤—ã–∫–æ–≤ –ø—Ä–∏—à–ª–æ—Å—å –±—ã –¥–µ–ª–∞—Ç—å –æ–¥–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –∏—Å–∫–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã, —Ç–æ–≥–¥–∞ –∫–∞–∫ –ø—Ä–æ—Å—Ç–æ–π Bash-—Å–∫—Ä–∏–ø—Ç —Ä–µ—à–∏—Ç –ø—Ä–æ–±–ª–µ–º—É –±—ã—Å—Ç—Ä–µ–µ.

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, shell-—Å–∫—Ä–∏–ø—Ç—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø—Ä–∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–∏ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä, –æ–±–Ω–∞—Ä—É–∂–∏–≤ –ø—Ä–æ–±–ª–µ–º—É, —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –º–æ–∂–µ—Ç –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π, —á—Ç–æ–±—ã —Å–æ–±—Ä–∞—Ç—å –Ω—É–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (—Å–Ω—è—Ç—å –º–µ—Ç—Ä–∏–∫–∏, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–æ–≤, —Å–¥–µ–ª–∞—Ç—å –¥–∞–º–ø—ã) —Å–æ –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≤–ª–∞–¥–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–∞–º–∏ shell ‚Äî —ç—Ç–æ –≤–∫–ª–∞–¥ –≤ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã: —Ç–∏–ø–∏—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É—é—Ç—Å—è, —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ –æ—Ç ‚Äú—á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–≥–æ —Ñ–∞–∫—Ç–æ—Ä–∞‚Äù, –∞ —Å–∞–º –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–æ–ª–µ–µ –ø–ª–∞–≤–Ω—ã–º –∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–º.

---
## üî§ 12. –ö–∞–∫ –æ–±—ä—è–≤–ª—è—é—Ç—Å—è –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ shell-—Å–∫—Ä–∏–ø—Ç–∞—Ö? –ß—Ç–æ –Ω—É–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –≤ Bash?

    
–í Bash –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–±—ä—è–≤–ª—è—é—Ç—Å—è –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è —Ç–∏–ø–∞, –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ–º: VAR=value. –í–∞–∂–Ω–æ –Ω–µ —Å—Ç–∞–≤–∏—Ç—å –ø—Ä–æ–±–µ–ª–æ–≤ –≤–æ–∫—Ä—É–≥ –∑–Ω–∞–∫–∞ '='. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∫ –∑–Ω–∞—á–µ–Ω–∏—é –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –º–æ–∂–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ $VAR. –ù–∞–ø—Ä–∏–º–µ—Ä, JAVA_HOME=/opt/jdk17 –∑–∞–¥–∞—Å—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, –∏ –∑–∞—Ç–µ–º –∫–æ–º–∞–Ω–¥–∞ 'echo $JAVA_HOME' –≤—ã–≤–µ–¥–µ—Ç –ø—É—Ç—å –∫ JDK. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ç–∞–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–º–µ—é—Ç –ª–æ–∫–∞–ª—å–Ω—É—é –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ –≤–Ω—É—Ç—Ä–∏ —Ç–µ–∫—É—â–µ–≥–æ shell –∏–ª–∏ —Å–∫—Ä–∏–ø—Ç–∞. –ß—Ç–æ–±—ã –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å—Ç–∞–ª–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–æ—á–µ—Ä–Ω–∏–º –ø—Ä–æ—Ü–µ—Å—Å–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–ø—É—â–µ–Ω–Ω–æ–º—É –≤–Ω—É—Ç—Ä–∏ —Å–∫—Ä–∏–ø—Ç–∞ Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é), –µ—ë —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç: 'export VAR'. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –Ω—É–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å –∫–∞–≤—ã—á–∫–∏. –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–æ–±–µ–ª—ã –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã, –æ–±–æ—Ä–∞—á–∏–≤–∞–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤ –∫–∞–≤—ã—á–∫–∏ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏: –Ω–∞–ø—Ä–∏–º–µ—Ä, MY_PATH="/some/path with/spaces", –∏ –≤—Å–µ–≥–¥–∞ –ø–∏—Å–∞—Ç—å "$MY_PATH" –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏, —á—Ç–æ–±—ã Bash –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞–ª –∑–Ω–∞—á–µ–Ω–∏–µ —Ü–µ–ª–∏–∫–æ–º. –û–¥–∏–Ω–∞—Ä–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏ ' ' –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—Ç –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫—É –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–Ω—É—Ç—Ä–∏ –Ω–∏—Ö, —Ç–æ–≥–¥–∞ –∫–∞–∫ –¥–≤–æ–π–Ω—ã–µ " " –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å—Å—è. –≠—Ç–æ –∏–≥—Ä–∞–µ—Ç —Ä–æ–ª—å, –∫–æ–≥–¥–∞ —Å—Ç—Ä–æ–∫–∞ –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ª–∏—Ç–µ—Ä–∞–ª—å–Ω–æ $ –∏–ª–∏ –∫–æ–≥–¥–∞ —Ö–æ—Ç–∏–º —Å–æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Ç—å, –∫–æ–º–±–∏–Ω–∏—Ä—É—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ.

–¢–∞–∫–∂–µ –≤–∞–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å –æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö Bash. –ù–∞–ø—Ä–∏–º–µ—Ä, $0 ‚Äî –∏–º—è —Å–∫—Ä–∏–ø—Ç–∞, $1, $2... ‚Äî –∞—Ä–≥—É–º–µ–Ω—Ç—ã, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –≤ —Å–∫—Ä–∏–ø—Ç, $# ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, $? ‚Äî –∫–æ–¥ –≤—ã—Ö–æ–¥–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∫–æ–º–∞–Ω–¥—ã. –ü—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å, –∑–∞–¥–∞–Ω—ã –ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è ${VAR:-default} –º–æ–∂–µ—Ç –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –µ—Å–ª–∏ VAR –ø—É—Å—Ç). –í –∫–æ–º–∞–Ω–¥–∞—Ö, –≥–¥–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞, –ø–æ–ª–µ–∑–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø—Ü–∏—é 'set -u' (—Ç–æ–≥–¥–∞ –ø–æ–ø—ã—Ç–∫–∞ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤—ã–∑–æ–≤–µ—Ç –æ—à–∏–±–∫—É –∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç —Å–∫—Ä–∏–ø—Ç). –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç—ã –Ω–∞–¥—ë–∂–Ω–µ–µ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–µ–µ, —á—Ç–æ –≤–∞–∂–Ω–æ –ø—Ä–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏.



---

## üîÅ 13. –ö–∞–∫–∏–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —É—Å–ª–æ–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –∏ —Ü–∏–∫–ª–æ–≤ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ shell-—Å–∫—Ä–∏–ø—Ç–∞—Ö –∏ –∫–∞–∫ –æ–Ω–∏ –ø–æ–º–æ–≥–∞—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á–∏?

  
–í Bash –∏–º–µ—é—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –≤–µ—Ç–≤–ª–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ (—É—Å–ª–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã) –∏ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π (—Ü–∏–∫–ª—ã). –£—Å–ª–æ–≤–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä 'if' –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –±–ª–æ–∫ –∫–æ–º–∞–Ω–¥ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —É—Å–ª–æ–≤–∏—è. –°–∏–Ω—Ç–∞–∫—Å–∏—Å:

if [ —É—Å–ª–æ–≤–∏–µ ]; then
# –∫–æ–º–∞–Ω–¥—ã
elif [ –¥—Ä—É–≥–æ–µ —É—Å–ª–æ–≤–∏–µ ]; then
# –∫–æ–º–∞–Ω–¥—ã
else
# –∫–æ–º–∞–Ω–¥—ã
fi

–£—Å–ª–æ–≤–∏—è –≤ [...] –º–æ–≥—É—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–º–∞–Ω–¥—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, [ $? -eq 0 ] ‚Äî –ø—Ä–µ–¥—ã–¥—É—â–∞—è –∫–æ–º–∞–Ω–¥–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —É—Å–ø–µ—à–Ω–æ), —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —á–∏—Å–µ–ª, —Å—Ç—Ä–æ–∫, –∏–ª–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ ([ -f file.txt ] –∏—Å—Ç–∏–Ω–∞, –µ—Å–ª–∏ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç). –ù–∞–ø—Ä–∏–º–µ—Ä, —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å, –∑–∞–ø—É—â–µ–Ω –ª–∏ —Å–µ—Ä–≤–∏—Å, –∏ –µ—Å–ª–∏ –Ω–µ—Ç ‚Äî –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å—Ç–∞—Ä—Ç.

–¶–∏–∫–ª—ã –≤ shell –ø–æ–∑–≤–æ–ª—è—é—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–º–∞–Ω–¥—ã –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ. –ö–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è 'for' –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ —Å–ø–∏—Å–∫—É –∑–Ω–∞—á–µ–Ω–∏–π:

```bash
for file in *.jar; do
echo "Found file $file"
done
```
–≠—Ç–æ—Ç —Ü–∏–∫–ª –≤—ã–≤–µ–¥–µ—Ç –≤—Å–µ jar-—Ñ–∞–π–ª—ã –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏. –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–±–∏—Ä–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã —Å–ø–∏—Å–∫–∞, –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–æ–º–∞–Ω–¥—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, for user in $(**cat** users.txt); do ...). –¶–∏–∫–ª 'while' –≤—ã–ø–æ–ª–Ω—è–µ—Ç –±–ª–æ–∫, –ø–æ–∫–∞ —É—Å–ª–æ–≤–∏–µ –∏—Å—Ç–∏–Ω–Ω–æ: –Ω–∞–ø—Ä–∏–º–µ—Ä,

```bash
while ping -c1 example.com >/dev/null 2>&1; do
echo "Server is up"; sleep 60;
done
```

–±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞ –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫—É–Ω–¥, –ø–æ–∫–∞ —Ç–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ ping. –ï—Å—Ç—å —Ç–∞–∫–∂–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è 'case', —É–¥–æ–±–Ω–∞—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–∞–∑–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –æ–¥–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π (–∞–Ω–∞–ª–æ–≥ switch-case –≤ –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–∞—Ö) ‚Äî —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ñ–ª–∞–≥–æ–≤ —Å–∫—Ä–∏–ø—Ç–∞.

–≠—Ç–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–∏—Å–∞—Ç—å –¥–æ–≤–æ–ª—å–Ω–æ —Å–ª–æ–∂–Ω—É—é –ª–æ–≥–∏–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, —Ü–∏–∫–ª –º–æ–∂–µ—Ç –ø—Ä–æ–π—Ç–∏—Å—å –ø–æ —Å–ø–∏—Å–∫—É –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É, –∞ —É—Å–ª–æ–≤–∏–µ ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ —Ä–µ—à–∏—Ç—å, –Ω—É–∂–Ω–æ –ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ shell-—Å–∫—Ä–∏–ø—Ç —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–∞—Å—Ç–æ—è—â–µ–π –ø—Ä–æ–≥—Ä–∞–º–º–æ–π —Å–æ —Å–≤–æ–∏–º–∏ –≤–µ—Ç–≤–ª–µ–Ω–∏—è–º–∏ –∏ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è–º–∏, –ø–æ–∑–≤–æ–ª—è—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä—É—Ç–∏–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –±–µ–∑ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ Java-–∫–æ–¥–∞.

---
## üß™ 14. –ö–∞–∫ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å shell-—Å–∫—Ä–∏–ø—Ç—ã? –ö–∞–∫–∏–µ –æ–ø—Ü–∏–∏ Bash (–Ω–∞–ø—Ä–∏–º–µ—Ä, -x, -e) –∏ –ø—Ä–∞–∫—Ç–∏–∫–∏ –ø–æ–º–æ–≥–∞—é—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å –∏ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å –æ—à–∏–±–∫–∏?

    
–û—Ç–ª–∞–¥–∫–∞ shell-—Å–∫—Ä–∏–ø—Ç–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–æ–∂–Ω–æ–π –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π —Å—Ä–µ–¥—ã, –Ω–æ Bash –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤. –û–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö –ø–æ–ª–µ–∑–Ω—ã—Ö ‚Äî —Ä–µ–∂–∏–º —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏. –ï—Å–ª–∏ –≤ –Ω–∞—á–∞–ª–µ —Å–∫—Ä–∏–ø—Ç–∞ (–∏–ª–∏ –ø–µ—Ä–µ–¥ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–º —É—á–∞—Å—Ç–∫–æ–º) –Ω–∞–ø–∏—Å–∞—Ç—å 'set -x', —Ç–æ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∫–∞–∂–¥—ã–π –ø–æ—Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥ —Å–∫—Ä–∏–ø—Ç–∞ –±—É–¥–µ—Ç –ø–µ—á–∞—Ç–∞—Ç—å—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å (—Å –ø–æ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫–∞—è –∫–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏ —Å –∫–∞–∫–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏, —á—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –Ω–∞–π—Ç–∏, –≥–¥–µ —Å–∫—Ä–∏–ø—Ç ‚Äú–∏–¥—ë—Ç –Ω–µ —Ç–∞–∫‚Äù. –ü–æ—Å–ª–µ —É—á–∞—Å—Ç–∫–∞ –æ—Ç–ª–∞–¥–∫–∏ –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É –∫–æ–º–∞–Ω–¥–æ–π 'set +x'.

–û–ø—Ü–∏—è 'set -e' –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç —Å–∫—Ä–∏–ø—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∑–∞–≤–µ—Ä—à–∞—Ç—å—Å—è, –µ—Å–ª–∏ –ª—é–±–∞—è –∫–æ–º–∞–Ω–¥–∞ –≤–µ—Ä–Ω—É–ª–∞ –Ω–µ–Ω—É–ª–µ–≤–æ–π –∫–æ–¥ –≤–æ–∑–≤—Ä–∞—Ç–∞ (–æ—à–∏–±–∫—É). –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –≤ CI/CD: —Å–∫—Ä–∏–ø—Ç –Ω–µ –ø–æ–π–¥—ë—Ç –¥–∞–ª—å—à–µ, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫, –∏ –≤—ã —Å—Ä–∞–∑—É —É–∑–Ω–∞–µ—Ç–µ –æ –ø—Ä–æ–±–ª–µ–º–µ. –ë–µ–∑ '-e' Bash –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–æ–¥–æ–ª–∂–∏—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, –¥–∞–∂–µ –µ—Å–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ —É–ø–∞–ª–∞, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Å–∫—Ä—ã—Ç—ã–º –æ—à–∏–±–∫–∞–º –¥–∞–ª—å—à–µ –ø–æ –ø–æ—Ç–æ–∫—É. –î—Ä—É–≥–∏–µ –æ–ø—Ü–∏–∏: 'set -u' (–∫–∞–∫ —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å, –¥–ª—è –Ω–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö) –∏ 'set -o pipefail' (–≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ—à–∏–±–∫—É, –µ—Å–ª–∏ –ª—é–±–∞—è –∏–∑ –∫–æ–º–∞–Ω–¥ –≤ –∫–æ–Ω–≤–µ–π–µ—Ä–µ '|' –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —Å –æ—à–∏–±–∫–æ–π).

–ö—Ä–æ–º–µ –æ–ø—Ü–∏–π, –ø–æ–º–æ–≥–∞—é—Ç —Ö–æ—Ä–æ—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏. –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –ª–æ–≥–∏—á–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ 'echo' –∏–ª–∏ 'printf' –≤ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö, —á—Ç–æ–±—ã –≤—ã–≤–µ—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–ª–∏ —Å–æ–æ–±—â–∏—Ç—å –æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Ç–æ—á–∫–∏. –¢–∞–∫–∂–µ —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º: '**bash** -n script.**sh**' –ø–æ–∫–∞–∂–µ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏, –Ω–µ –∏—Å–ø–æ–ª–Ω—è—è —Å–∫—Ä–∏–ø—Ç. –°—É—â–µ—Å—Ç–≤—É—é—Ç —É—Ç–∏–ª–∏—Ç—ã —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä shellcheck, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—é—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ –≤ Bash (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–±—ã—Ç—ã–µ –∫–∞–≤—ã—á–∫–∏, –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫ = –≤–º–µ—Å—Ç–æ == –∏ –ø—Ä.). –ò—Å–ø–æ–ª—å–∑—É—è —ç—Ç–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –Ω–∞–π—Ç–∏ –ø—Ä–∏—á–∏–Ω—É –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞ –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –µ—ë.

---
## üîç 15. –ö–∞–∫–∏–µ –∫–æ–º–∞–Ω–¥–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã Linux –ø–æ–º–æ–≥–∞—é—Ç –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –ª–æ–≥–æ–≤ (**grep**, **sed**, **awk**, **find**) –∏ –∫–∞–∫ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Ä–∞–±–æ—Ç–µ?

    
–í –∞—Ä—Å–µ–Ω–∞–ª–µ Linux –µ—Å—Ç—å –º–æ—â–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞, –∫–æ—Ç–æ—Ä—ã–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏ –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –ª–æ–≥–æ–≤ –∏ –¥–∞–Ω–Ω—ã—Ö. –û–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö ‚Äî '**grep**'. –û–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–∫–∞—Ç—å —Å—Ç—Ä–æ–∫–∏ –ø–æ —à–∞–±–ª–æ–Ω—É. –ù–∞–ø—Ä–∏–º–µ—Ä, '**grep** "Exception" app.log' –≤—ã–≤–µ–¥–µ—Ç –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –≤ —Ñ–∞–π–ª–µ, –≥–¥–µ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è —Å–ª–æ–≤–æ "Exception". –ö–ª—é—á '-i' –¥–µ–ª–∞–µ—Ç –ø–æ–∏—Å–∫ –Ω–µ—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É, '-R' ‚Äî —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–º –ø–æ –∫–∞—Ç–∞–ª–æ–≥—É. Grep –ø–æ–ª–µ–∑–µ–Ω, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –Ω–∞–π—Ç–∏ –≤ –±–æ–ª—å—à–æ–º —Ñ–∞–π–ª–µ –∏–ª–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ —Ñ–∞–π–ª–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏–ª–∏ —Å–ª–æ–≤–∞.

–£—Ç–∏–ª–∏—Ç–∞ '**sed**' –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ—Ç–æ–∫–æ–≤–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ ‚Äî –ø–æ —Å—É—Ç–∏, –∏—â–µ—Ç –∏ –∑–∞–º–µ–Ω—è–µ—Ç –∏–ª–∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ —à–∞–±–ª–æ–Ω—É (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è). –° –ø–æ–º–æ—â—å—é **sed** –º–æ–∂–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–º–µ–Ω–∏—Ç—å –≤–æ –≤—Å–µ—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö URL —Å—Ç–∞—Ä–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ –Ω–æ–≤—ã–π ('**sed** -i 's/old-service.example.com/new-service.example.com/g' *.properties'). –¢–∞–∫–∂–µ **sed** —É–º–µ–µ—Ç –≤—ã–±–æ—Ä–æ—á–Ω–æ –≤—ã—Ä–µ–∑–∞—Ç—å –∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫–∏, —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä—É—è —Ç–µ–∫—Å—Ç –ø–æ –∑–∞–¥–∞–Ω–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º, —á—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.

'**awk**' ‚Äî –µ—â—ë –±–æ–ª–µ–µ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä–∞–∑–±–æ—Ä–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –æ—Å–æ–±–µ–Ω–Ω–æ —Ç–∞–±–ª–∏—á–Ω–æ–≥–æ –≤–∏–¥–∞. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑–±–∏–≤–∞—Ç—å —Å—Ç—Ä–æ–∫–∏ –Ω–∞ –ø–æ–ª—è –∏ –º–∞–Ω–∏–ø—É–ª–∏—Ä–æ–≤–∞—Ç—å –∏–º–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã –∏–∑ –≤—ã–≤–æ–¥–∞ '**ps**' –∏–∑–≤–ª–µ—á—å —Ç–æ–ª—å–∫–æ PID –∏ –∏–º—è –ø—Ä–æ—Ü–µ—Å—Å–∞, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å '**ps** aux | **awk** '{print $2, $11}''. –°–∫—Ä–∏–ø—Ç—ã –Ω–∞ **awk** –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏—è, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –∏ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä—è–º–æ –ø—Ä–∏ –ø—Ä–æ—Ö–æ–¥–µ –ø–æ —Ñ–∞–π–ª—É ‚Äî —ç—Ç–æ –º–∏–Ω–∏-—è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏, –ø–æ–ª–µ–∑–Ω—ã–π –¥–ª—è –æ—Ç—á—ë—Ç–æ–≤ –ø–æ –ª–æ–≥–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–¥—Å—á–∏—Ç–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∫–∞–∂–¥—ã–π —Å—Ç–∞—Ç—É—Å-–∫–æ–¥ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è –≤ access.log –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞).

–ö–æ–º–∞–Ω–¥–∞ '**find**' –ø–æ–º–æ–≥–∞–µ—Ç –∏—Å–∫–∞—Ç—å —Ñ–∞–π–ª—ã –ø–æ –∏–º–µ–Ω–∏, —Ä–∞–∑–º–µ—Ä—É, –¥–∞—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –¥—Ä—É–≥–∏–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º. –ù–∞–ø—Ä–∏–º–µ—Ä, '**find** . -name "*.log" -size +100M' –Ω–∞–π–¥—ë—Ç –≤—Å–µ –ª–æ–≥-—Ñ–∞–π–ª—ã –±–æ–ª—å—à–µ 100 –ú–ë –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö. –í —Å–≤—è–∑–∫–µ —Å 'xargs' –∏–ª–∏ —Ç–µ–º –∂–µ **sed**/**awk** –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥–µ–π—Å—Ç–≤–∏—è –Ω–∞–¥ –Ω–∞–π–¥–µ–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ). –û—Å–≤–æ–µ–Ω–∏–µ —ç—Ç–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ–≤—ã—à–∞–µ—Ç –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: –º–Ω–æ–≥–∏–µ –∑–∞–¥–∞—á–∏ –ø–æ –æ–±—Ä–∞–±–æ—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö –∏ –ª–æ–≥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∏–Ω–∞—á–µ –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª–∏ –±—ã –Ω–∞–ø–∏—Å–∞–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã, —Ä–µ—à–∞—é—Ç—Å—è –æ–¥–Ω–æ–π-–¥–≤—É–º—è –∫–æ–º–∞–Ω–¥–∞–º–∏. –î–ª—è Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –±—ã—Å—Ç—Ä–µ–µ –Ω–∞—Ö–æ–¥–∏—Ç—å –ø—Ä–∏—á–∏–Ω—ã –æ—à–∏–±–æ–∫, —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã –≤ —Å–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏.

---
## üîé 16. –ß—Ç–æ —Ç–∞–∫–æ–µ –ø—Ä–æ—Ü–µ—Å—Å CI/CD –∏ –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –æ–±—â–∏–π —Ü–∏–∫–ª –¥–æ—Å—Ç–∞–≤–∫–∏ –∫–æ–¥–∞ –æ—Ç –∫–æ–º–º–∏—Ç–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –¥–æ –¥–µ–ø–ª–æ—è –≤ –ø—Ä–æ–¥–∞–∫—à–Ω?

    
CI/CD (Continuous Integration / Continuous Delivery) ‚Äî —ç—Ç–æ –ø—Ä–∞–∫—Ç–∏–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç –∏ —É—Å–∫–æ—Ä—è–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –¥–æ—Å—Ç–∞–≤–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ –¥–æ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–æ–Ω–Ω–æ–π —Å—Ä–µ–¥—ã. –û–±—â–∏–π —Ü–∏–∫–ª –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫: —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–º–∏—Ç–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, Git). –°–æ–±—ã—Ç–∏–µ –∫–æ–º–º–∏—Ç–∞ —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å Continuous Integration: —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (CI-—Å–µ—Ä–≤–µ—Ä, –Ω–∞–ø—Ä–∏–º–µ—Ä Jenkins –∏–ª–∏ GitLab CI) –±–µ—Ä—ë—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–¥, —Å–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç (–∫–æ–º–ø–∏–ª—è—Ü–∏—è Java-–∫–æ–¥–∞, —Å–±–æ—Ä–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä jar –∏–ª–∏ Docker-–æ–±—Ä–∞–∑), –∑–∞–ø—É—Å–∫–∞–µ—Ç –Ω–∞–±–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤ (—é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã). –ï—Å–ª–∏ –Ω–∞ —ç—Ç–∞–ø–µ —Å–±–æ—Ä–∫–∏ –∏–ª–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ—à–∏–±–∫–∞, –ø—Ä–æ—Ü–µ—Å—Å –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏ –∫–æ–º–∞–Ω–¥–∞ –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ ‚Äî —ç—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ä–∞–∑—É –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É.

–ö–æ–≥–¥–∞ –±–∏–ª–¥ –∏ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ, —Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø ‚Äî Continuous Delivery. –ê—Ä—Ç–µ—Ñ–∞–∫—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (jar/war —Ñ–∞–π–ª –∏–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–π –æ–±—Ä–∞–∑) —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ —Ü–µ–ª–µ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ, —á–∞—â–µ –≤—Å–µ–≥–æ —Å–Ω–∞—á–∞–ª–∞ –Ω–∞ staging (—Ç–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä, –∏–º–∏—Ç–∏—Ä—É—é—â–∏–π –ø—Ä–æ–¥–∞–∫—à–Ω). –ó–¥–µ—Å—å –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏: –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø—Ä–∏—ë–º–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ. –ù–∞–∫–æ–Ω–µ—Ü, –ø—Ä–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∏ –æ–¥–æ–±—Ä–µ–Ω–∏–∏, —Ç–æ—Ç –∂–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω (—ç—Ç–æ —É–∂–µ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ ‚Äî Continuous Deployment, –µ—Å–ª–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞, –ª–∏–±–æ –∂–µ —Ä—É—á–Ω–æ–π —à–∞–≥ –¥–µ–ø–ª–æ—è –ø–æ –∫–Ω–æ–ø–∫–µ –ø—Ä–∏ Continuous Delivery).

–í–∞–∂–Ω–æ, —á—Ç–æ CI/CD ‚Äî —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å. –ö–∞–∂–¥—ã–π –Ω–æ–≤—ã–π –∫–æ–º–º–∏—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ —ç—Ç–æ—Ç –∫–æ–Ω–≤–µ–π–µ—Ä, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –ø–æ—Å—Ç–æ—è–Ω–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π. –≠—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç —Ä–∏—Å–∫: –ø—Ä–æ–±–ª–µ–º—ã –≤—ã—è–≤–ª—è—é—Ç—Å—è –Ω–∞ —Ä–∞–Ω–Ω–∏—Ö —ç—Ç–∞–ø–∞—Ö, –∞ –Ω–µ –∫–æ–ø—è—Ç—Å—è –¥–æ ‚Äú–±–æ–ª—å—à–æ–≥–æ —Ä–µ–ª–∏–∑–∞‚Äù. –î–ª—è Java-–ø—Ä–æ–µ–∫—Ç–æ–≤, –≥–¥–µ —Å–±–æ—Ä–∫–∞ –≤–∫–ª—é—á–∞–µ—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏—é –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤, CI/CD –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ: –≤—Å–µ –≤–µ—Ç–∫–∏ –∫–æ–¥–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è, –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä—É—é—Ç—Å—è, –∏ –¥–µ–ø–ª–æ–π —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ä—É—Ç–∏–Ω–Ω–æ–π –∑–∞–¥–∞—á–µ–π, –∞ –Ω–µ —Å–æ–±—ã—Ç–∏–µ–º, –≤—ã–∑—ã–≤–∞—é—â–∏–º –ø—Ä–æ—Å—Ç–æ–π –∏–ª–∏ –Ω–æ—á–Ω—ã–µ –≤—ã–∫–ª–∞–¥–∫–∏.

---
## üîÑ 17. –ö–∞–∫–∏–µ –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ CI/CD –¥–ª—è Java-–ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ –ø–æ—á–µ–º—É –æ–Ω–∏ –≤–∞–∂–Ω—ã?

    
–°—É—â–µ—Å—Ç–≤—É–µ—Ç —Ä—è–¥ —É—Å—Ç–æ—è–≤—à–∏—Ö—Å—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π, –ø–æ–∑–≤–æ–ª—è—é—â–∏—Ö —Å–¥–µ–ª–∞—Ç—å CI/CD-–∫–æ–Ω–≤–µ–π–µ—Ä —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º –∏ –Ω–∞–¥—ë–∂–Ω—ã–º. –í–æ-–ø–µ—Ä–≤—ã—Ö, –±—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å: –±–∏–ª–¥ –∏ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±—ã—Å—Ç—Ä–æ, —á—Ç–æ–±—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ–ª—É—á–∞–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—Å–∫–æ—Ä–µ –ø–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞ (–∏–¥–µ–∞–ª—å–Ω–æ ‚Äî –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–∏–Ω—É—Ç). –î–ª—è —ç—Ç–æ–≥–æ –∫—Ä—É–ø–Ω—ã–µ Java-–ø—Ä–æ–µ–∫—Ç—ã —Ä–∞–∑–±–∏–≤–∞—é—Ç –Ω–∞ —ç—Ç–∞–ø—ã, –ø–∞—Ä–∞–ª–ª–µ–ª—è—Ç —Ç–µ—Å—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤—ã–Ω–æ—Å —Ç—è–∂–µ–ª—ã—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ –Ω–∞ –Ω–æ—á–Ω—ã–µ —Å–±–æ—Ä–∫–∏. –ë—ã—Å—Ç—Ä—ã–π pipeline –ø–æ–∑–≤–æ–ª—è–µ—Ç —á–∞—â–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –∏ –±—ã—Å—Ç—Ä–µ–µ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—Ç—å –¥–µ—Ñ–µ–∫—Ç—ã.

–í–æ-–≤—Ç–æ—Ä—ã—Ö, –ø–æ–ª–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –ø–∞–∫–µ—Ç: –≤ –∫–æ–Ω–≤–µ–π–µ—Ä –≤–∫–ª—é—á–∞—é—Ç unit-—Ç–µ—Å—Ç—ã, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã, –∞ –∏–Ω–æ–≥–¥–∞ –∏ end-to-end —Ç–µ—Å—Ç—ã. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∫–∞–∂–¥–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏. –î–ª—è Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –µ—Å—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤—Ä–æ–¥–µ JUnit, TestNG, Cucumber –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –¢–∞–∫–∂–µ –≤–∞–∂–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞: –æ—Ç—á—ë—Ç—ã –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ –∫–æ–¥–∞ (JaCoCo), —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–º –∞–Ω–∞–ª–∏–∑–µ (SpotBugs, PMD, –∏–ª–∏ SonarQube). –í CI/CD —ç—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚Äî —ç—Ç–æ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∫—É–ª—å—Ç—É—Ä—É –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞ –≤ –∫–æ–º–∞–Ω–¥–µ.

–ï—â—ë –æ–¥–Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞ ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–æ —Å—Ä–µ–¥—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –ö–æ–Ω–≤–µ–π–µ—Ä –¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞–≤–∞—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –æ–¥–∏–Ω —Ä–∞–∑ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö (test, stage, prod), –∞ –Ω–µ —Å–æ–±–∏—Ä–∞—Ç—å –∑–∞–Ω–æ–≤–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞, —á—Ç–æ–±—ã –∏—Å–∫–ª—é—á–∏—Ç—å ‚Äú–¥—Ä–µ–π—Ñ‚Äù –æ–∫—Ä—É–∂–µ–Ω–∏—è. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ë–î, API-–∫–ª—é—á–∏) –¥–æ–ª–∂–Ω—ã —É–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –≤–Ω–µ—à–Ω–µ, —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –∞ –Ω–µ –±—ã—Ç—å –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω—ã. –°—Ä–µ–¥—Å—Ç–≤–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –∏ —Å–µ–∫—Ä–µ—Ç–∞–º–∏ (—É–ø–æ–º—è–Ω—É—Ç—ã–µ –æ—Ç–¥–µ–ª—å–Ω–æ) –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É—é—Ç—Å—è –≤ pipeline, —á—Ç–æ–±—ã –Ω–∞ –∫–∞–∂–¥—ã–π —ç—Ç–∞–ø –ø–æ–¥—Å—Ç–∞–≤–ª—è—Ç—å –Ω—É–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.

–ù–∞–∫–æ–Ω–µ—Ü, –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º–æ—Å—Ç—å: –∫–∞–∂–¥–∞—è —Å–±–æ—Ä–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ–º–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–æ–º–µ—Ä–æ–º –±–∏–ª–¥–∞ –∏–ª–∏ git-—Ö–µ—à–µ–º) –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (Nexus/Artifactory –∏–ª–∏ Docker Registry). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –ø–æ–Ω—è—Ç—å, –∫–∞–∫–∞—è –≤–µ—Ä—Å–∏—è –∫–æ–¥–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ, –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ pipeline —Ç–æ–∂–µ –≤–∞–∂–Ω—ã: –∫–æ–º–∞–Ω–¥–∞ –¥–æ–ª–∂–Ω–∞ —Å—Ä–∞–∑—É —É–∑–Ω–∞–≤–∞—Ç—å –æ —Å–±–æ—è—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Jenkins —Å–æ Slack –∏–ª–∏ –ø–æ—á—Ç–æ–π –¥–ª—è –∞–ª–µ—Ä—Ç–æ–≤), –∞ –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏ –¥–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞. –°–æ–±–ª—é–¥–µ–Ω–∏–µ —ç—Ç–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫ –ø–æ–≤—ã—à–∞–µ—Ç –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å —Ä–µ–ª–∏–∑–æ–≤: –ø—Ä–æ—Ü–µ—Å—Å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø–æ–≤—Ç–æ—Ä—è–µ–º—ã–º, –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º, –∏ –∫–æ–º–∞–Ω–¥–∞ —Ç—Ä–∞—Ç–∏—Ç –º–µ–Ω—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –≤–Ω–µ–∑–∞–ø–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º –ø—Ä–∏ —Ä–µ–ª–∏–∑–µ.

---
## üßØ 18. –ö–∞–∫–∏–µ —Å–æ–±—ã—Ç–∏—è –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–∞–∫ —Ç—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ CI/CD –∫–æ–Ω–≤–µ–π–µ—Ä–∞, –∏ –∫–∞–∫ –≤—ã–±—Ä–∞—Ç—å –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Ç—Ä–∏–≥–≥–µ—Ä?

    
–¢—Ä–∏–≥–≥–µ—Ä–æ–º CI/CD –Ω–∞–∑—ã–≤–∞—é—Ç —Å–æ–±—ã—Ç–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–Ω–≤–µ–π–µ—Ä–∞. –ù–∞–∏–±–æ–ª–µ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç ‚Äî —Ç—Ä–∏–≥–≥–µ—Ä –ø–æ —Å–æ–±—ã—Ç–∏—é Git: –∫–æ–≥–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ø—É—à–∏—Ç –∫–æ–¥ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –æ—Å–Ω–æ–≤–Ω—É—é –≤–µ—Ç–∫—É main –∏–ª–∏ –≤ feature-–≤–µ—Ç–∫—É), —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç webhook –Ω–∞ CI-—Å–µ—Ä–≤–µ—Ä, –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å–±–æ—Ä–∫–∞. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ, —Ç—Ä–∏–≥–≥–µ—Ä–æ–º –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç–∏–µ merge-request –∏–ª–∏ pull-request: —Å–∏—Å—Ç–µ–º–∞ CI –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤–ª–∏—Ç—å –≤ –æ—Å–Ω–æ–≤–Ω—É—é –≤–µ—Ç–∫—É, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ–Ω –Ω–µ –Ω–∞—Ä—É—à–∏—Ç —Å–±–æ—Ä–∫—É (—Ç–∞–∫ –Ω–∞ GitHub/GitLab –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Å—Ç–∞—Ç—É—Å—ã –¥–ª—è PR).

–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ (schedule) ‚Äî –¥—Ä—É–≥–æ–π —Ç–∏–ø —Ç—Ä–∏–≥–≥–µ—Ä–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –Ω–æ—á–Ω—ã–µ —Å–±–æ—Ä–∫–∏ (nightly builds) –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ –≤—Ä–µ–º—è. –û–Ω–∏ –ø–æ–ª–µ–∑–Ω—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á: –ø–æ–ª–Ω—ã—Ö —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤, –∞–Ω–∞–ª–∏–∑–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏. –î–ª—è Java-–ø—Ä–æ–µ–∫—Ç–∞ —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø—É—Å–∫ —Ç—è–∂–µ–ª–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ –∏–ª–∏ —Å–±–æ—Ä–∫–∞ ‚Äú–±–æ–ª—å—à–æ–≥–æ‚Äù –æ—Ç—á—ë—Ç–∞, —á—Ç–æ –Ω–µ—Ü–µ–ª–µ—Å–æ–æ–±—Ä–∞–∑–Ω–æ –¥–µ–ª–∞—Ç—å –Ω–∞ –∫–∞–∂–¥—ã–π –∫–æ–º–º–∏—Ç.

–†—É—á–Ω–æ–π —Ç—Ä–∏–≥–≥–µ—Ä —Ç–∞–∫–∂–µ –∏–º–µ–µ—Ç –º–µ—Å—Ç–æ: –∫–æ–≥–¥–∞ –∫–æ–Ω–≤–µ–π–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –Ω–æ —Å—Ç–∞—Ä—Ç—É–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ –Ω–∞–∂–∞—Ç–∏—é –∫–Ω–æ–ø–∫–∏ (manual approval). –≠—Ç–æ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø–∞—Ö –¥–µ–ø–ª–æ—è –≤ –ø—Ä–æ–¥–∞–∫—à–Ω: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏, –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –≥–æ—Ç–æ–≤, –Ω–æ –µ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∂–¥—ë—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º –ª–∏—Ü–æ–º. –¢–∞–∫–∂–µ —Ä—É—á–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –¥–ª—è –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î –∏–ª–∏ –ø–µ—Ä–µ—Ä–∞—Å—á—ë—Ç –¥–∞–Ω–Ω—ã—Ö ‚Äî –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –¥–æ–ª–∂–Ω—ã –∏–¥—Ç–∏ –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏. –í—ã–±–æ—Ä —Ç—Ä–∏–≥–≥–µ—Ä–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∑–∞–¥–∞—á–∏: –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –¥–æ–ª–∂–Ω—ã —Å—Ä–∞–∑—É –ø—Ä–æ–≤–µ—Ä—è—Ç—å—Å—è (push/PR), –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ ‚Äì –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é, –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è ‚Äì –ø–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–µ–º —á–µ–ª–æ–≤–µ–∫–∞. –ì—Ä–∞–º–æ—Ç–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π –∏ –∫–æ–Ω—Ç—Ä–æ–ª–µ–º.

---
## ‚ôªÔ∏è 19. –ö–∞–∫–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ—Ç–∫–∞—Ç–∞ (rollback) –Ω–µ—É–¥–∞—á–Ω–æ–≥–æ –≤—ã–ø—É—Å–∫–∞ –∏ –∫–∞–∫ –æ–Ω–∏ —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ?

    
–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –∏–Ω–æ–≥–¥–∞ –Ω–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—ã–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã, –ø–æ—ç—Ç–æ–º—É –Ω–µ–æ–±—Ö–æ–¥–∏–º –ø–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞ –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏. –°–∞–º–∞—è –ø—Ä–æ—Å—Ç–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è ‚Äî –ø—Ä—è–º–æ–π –æ—Ç–∫–∞—Ç —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è: –µ—Å–ª–∏ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ–≤—Ç–æ—Ä–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç (–≤–µ—Ä—Å–∏—é) –Ω–∞ —Ç–µ –∂–µ —Å–µ—Ä–≤–µ—Ä—ã. –î–ª—è —ç—Ç–æ–≥–æ –≤ CI/CD –¥–æ–ª–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤–µ—Ä—Å–∏–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã—Å—Ç—Ä–æ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –Ω—É–∂–Ω—É—é. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤—ã –≤—ã–∫–∞—Ç—ã–≤–∞–µ—Ç–µ –≤–µ—Ä—Å–∏—é 2.0, –∞ –æ–Ω–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞, –≤—ã –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ –¥–µ–ø–ª–æ–π—Ç–µ –æ–±—Ä–∞—Ç–Ω–æ 1.9 –∏–∑ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç–µ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å.

–ë–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä—è–º–æ –≤ –ø—Ä–æ—Ü–µ—Å—Å –≤—ã–∫–ª–∞–¥–∫–∏. Blue-Green Deployment –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –Ω–∞–ª–∏—á–∏–µ –¥–≤—É—Ö –Ω–∞–±–æ—Ä–æ–≤ —Å–µ—Ä–≤–µ—Ä–æ–≤: ‚Äú—Å–∏–Ω–∏—Ö‚Äù (—Ç–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è) –∏ ‚Äú–∑–µ–ª—ë–Ω—ã—Ö‚Äù (–Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è). –í—ã —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç–µ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é –Ω–∞ –∑–µ–ª—ë–Ω—ã–π –ø—É–ª, –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç–µ —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ –Ω–µ–≥–æ. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫, —Ç—Ä–∞—Ñ–∏–∫ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ —Å–∏–Ω–∏–π –ø—É–ª, –≥–¥–µ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è. –û—Ç–∫–∞—Ç –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π, –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–º–µ–Ω–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é.

Canary Deployment ‚Äî —Å—Ç—Ä–∞—Ç–µ–≥–∏—è, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–π –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –≤—ã–∫–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ: —Å–Ω–∞—á–∞–ª–∞ –Ω–∞ –Ω–µ–±–æ–ª—å—à–æ–π –ø—Ä–æ—Ü–µ–Ω—Ç —Å–µ—Ä–≤–µ—Ä–æ–≤ –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –ï—Å–ª–∏ –æ—à–∏–±–∫–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã –Ω–∞ –º–∞–ª–æ–π –¥–æ–ª–µ —Ç—Ä–∞—Ñ–∏–∫–∞, —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç –∏–ª–∏ –æ—Ç–∫–∞—Ç—ã–≤–∞—é—Ç, –∑–∞–∫—Ä—ã–≤–∞—è ‚Äú–∫–∞–Ω–∞—Ä–µ–µ—á–Ω—ã–µ‚Äù –∏–Ω—Å—Ç–∞–Ω—Å—ã –∏ –æ—Å—Ç–∞–≤–∞—è—Å—å –Ω–∞ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏. –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç –≤–ª–∏—è–Ω–∏–µ –±–∞–≥–æ–≤: –ø—Ä–æ–±–ª–µ–º–∞ –∑–∞—Ç—Ä–æ–Ω–µ—Ç –ª–∏—à—å –º–∞–ª—É—é —á–∞—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∏ –µ—ë –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å. –í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º –ü–û (—Ç–∏–ø–∞ Kubernetes + Istio/Ingress) –º–µ—Ö–∞–Ω–∏–∑–º—ã –∫–∞–Ω–∞—Ä–µ–µ—á–Ω–æ–≥–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –≤—Å—Ç—Ä–æ–µ–Ω—ã –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω—ã.

–ï—â—ë –æ–¥–∏–Ω —É—Ä–æ–≤–µ–Ω—å –æ—Ç–∫–∞—Ç–∞ ‚Äî feature toggles (—Ñ–ª–∞–≥–∏ —Ñ—É–Ω–∫—Ü–∏–π). –ï—Å–ª–∏ –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –æ–±–µ—Ä–Ω—É—Ç–∞ —Ñ–ª–∞–≥–æ–º, –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö –µ—ë –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ, –Ω–µ –æ—Ç–∫–∞—Ç—ã–≤–∞—è –≤–µ—Å—å –¥–µ–ø–ª–æ–π. –≠—Ç–æ, –æ–¥–Ω–∞–∫–æ, –±–æ–ª—å—à–µ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –í —Ü–µ–ª–æ–º, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è rollback-—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏: –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ (—Å—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–æ—Ç–æ–∫–æ–ª—ã API), –Ω–∞–ª–∏—á–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ –∏–ª–∏ –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–µ—Ä—Å–∏–π. –ö–æ–º–∞–Ω–¥–∞ –¥–æ–ª–∂–Ω–∞ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–∏ –æ—Ç–∫–∞—Ç–∞, —á—Ç–æ–±—ã –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏ –æ–Ω –ø—Ä–æ—à—ë–ª –≥–ª–∞–¥–∫–æ.

---
## üè∑Ô∏è 20. –ö–∞–∫ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ (—Å–±–æ—Ä–æ–∫) –≤ CI/CD –∏ –∑–∞—á–µ–º –æ–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ?

    
–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –æ–∑–Ω–∞—á–∞–µ—Ç –ø—Ä–∏—Å–≤–æ–µ–Ω–∏–µ –∫–∞–∂–¥–æ–º—É —Å–±–æ—Ä–æ—á–Ω–æ–º—É –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—É —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ (–Ω–æ–º–µ—Ä–∞ –≤–µ—Ä—Å–∏–∏). –í Java-–º–∏—Ä–µ –ø—Ä–∏–≤—ã—á–Ω–∞ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –≤–µ—Ä—Å–∏—è (SemVer) –≤–∏–¥–∞ X.Y.Z, –æ—Ç—Ä–∞–∂–∞—é—â–∞—è –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∏ –º–∞—Å—à—Ç–∞–± –∏–∑–º–µ–Ω–µ–Ω–∏–π. –í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ CI/CD –ª—é–±–∞—è —Å–±–æ—Ä–∫–∞ (–±—É–¥—å —Ç–æ jar-—Ñ–∞–π–ª, –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤ –∏–ª–∏ Docker-–æ–±—Ä–∞–∑) –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –Ω–æ–º–µ—Ä –≤–µ—Ä—Å–∏–∏ –∏–ª–∏ –±–∏–ª–¥-–Ω–æ–º–µ—Ä. –≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, —á—Ç–æ–±—ã —Ç–æ—á–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å, –∫–∞–∫–æ–π –∫–æ–¥ —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥–∞—Ö, –∏ –∏–∑–±–µ–≥–∞—Ç—å –ø—É—Ç–∞–Ω–∏—Ü—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤—ã—è–≤–ª–µ–Ω –±–∞–≥ –≤ –≤–µ—Ä—Å–∏–∏ 2.3.5, –∫–æ–º–∞–Ω–¥–∞ –º–æ–∂–µ—Ç –±—ã—Å—Ç—Ä–æ –Ω–∞–π—Ç–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π git-–∫–æ–º–º–∏—Ç –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –µ–≥–æ –≤ —Å–ª–µ–¥—É—é—â–µ–π –≤–µ—Ä—Å–∏–∏.

–í –ø—Ä–∞–∫—Ç–∏–∫–µ CI/CD –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–æ. –û–¥–∏–Ω –ø–æ–¥—Ö–æ–¥: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–º–µ—Ä –±–∏–ª–¥–∞ CI –∫–∞–∫ –≤–µ—Ä—Å–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, myapp-1.0-build15). –î—Ä—É–≥–æ–π –ø–æ–¥—Ö–æ–¥: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ —Å–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, —á–∞—Å—Ç—å git commit hash –∏–ª–∏ —Ç–µ–≥. –ú–Ω–æ–≥–∏–µ –ø—Ä–æ–µ–∫—Ç—ã —Å–ª–µ–¥—É—é—Ç –ø—Ä–∏–Ω—Ü–∏–ø—É: main-–≤–µ—Ç–∫–∞ –≤—Å–µ–≥–¥–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –≥–æ—Ç–æ–≤—É—é –∫ —Ä–µ–ª–∏–∑—É –≤–µ—Ä—Å–∏—é, –∫–æ—Ç–æ—Ä—É—é –ø–æ–º–µ—á–∞—é—Ç —Ç–µ–≥–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, v2.4.0), –∞ CI-—Å–µ—Ä–≤–µ—Ä –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç —ç—Ç–æ—Ç —Ç–µ–≥ –∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –≤–µ—Ä—Å–∏—é. –í —Å–ª—É—á–∞–µ ‚Äúsnapshot‚Äù-—Å–±–æ—Ä–æ–∫ (–Ω–µ —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö —Ä–µ–ª–∏–∑–æ–≤) –¥–æ–±–∞–≤–ª—è—é—Ç —Å—É—Ñ—Ñ–∏–∫—Å —Ç–∏–ø–∞ SNAPSHOT –∏–ª–∏ –¥–∞—Ç—É/–≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏.

–•—Ä–∞–Ω–µ–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (Nexus, Artifactory, Docker Registry) —Ç–µ—Å–Ω–æ —Å–≤—è–∑–∞–Ω–æ —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º. –ê—Ä—Ç–µ—Ñ–∞–∫—Ç —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∏–º–µ–Ω–µ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'my-service:2.4.0') –º–æ–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç, –µ–≥–æ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –¥—Ä—É–≥–∏–º –∫–æ–º–∞–Ω–¥–∞–º –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å: –º–æ–∂–Ω–æ –≤ —Ç–æ—á–Ω–æ—Å—Ç–∏ –¥–µ–ø–ª–æ–π–Ω—É—Ç—å —Ç—É –∂–µ –≤–µ—Ä—Å–∏—é, —á—Ç–æ –∏ –ø—Ä–æ—à–ª–∞ —Ç–µ—Å—Ç—ã, –∏ –ø—Ä–∏ –æ—Ç–∫–∞—Ç–µ –≤–∑—è—Ç—å –Ω—É–∂–Ω—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç. –ë–µ–∑ –≤–µ—Ä—Å–∏–∏ —ç—Ç–∏ –¥–µ–π—Å—Ç–≤–∏—è –±—ã–ª–∏ –±—ã –Ω–µ–Ω–∞–¥—ë–∂–Ω—ã (‚Äú–ø–æ—Å–ª–µ–¥–Ω—è—è —Å–±–æ—Ä–∫–∞‚Äù –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è). –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî –æ—Å–Ω–æ–≤–∞ —É—Å—Ç–æ–π—á–∏–≤–æ–≥–æ CI/CD –ø—Ä–æ—Ü–µ—Å—Å–∞, –¥–∞—é—â–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –≤—ã–ø—É—Å–∫–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.

---
## ü§ñ 21. –ß—Ç–æ —Ç–∞–∫–æ–µ Jenkins –∏ –∫–∞–∫ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ CI/CD –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Å–±–æ—Ä–∫–∏ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è?

    
Jenkins ‚Äî —ç—Ç–æ –æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ CI/CD. –û–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∫–æ–Ω–≤–µ–π–µ—Ä—ã —Å–±–æ—Ä–∫–∏, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –¥–µ–ø–ª–æ—è –ø—Ä–æ–µ–∫—Ç–æ–≤. –ü—Ä–æ—â–µ –≥–æ–≤–æ—Ä—è, Jenkins –±–µ—Ä—ë—Ç –Ω–∞ —Å–µ–±—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ –∏ –∫–æ–º–∞–Ω–¥, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–Ω—å—à–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞–ª–∏ –≤—Ä—É—á–Ω—É—é. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–º–∏—Ç–∞ Jenkins –º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–±–æ—Ä–∫—É Maven-–ø—Ä–æ–µ–∫—Ç–∞, –ø—Ä–æ–≥–Ω–∞—Ç—å JUnit-—Ç–µ—Å—Ç—ã, —É–ø–∞–∫–æ–≤–∞—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –∏ –¥–∞–∂–µ –≤—ã–ª–æ–∂–∏—Ç—å –µ–≥–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏–ª–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.

Jenkins –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏ –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ job (–∑–∞–¥–∞—á): –∫–∞–∂–¥–∞—è job ‚Äî —ç—Ç–æ –Ω–∞–±–æ—Ä —à–∞–≥–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é –∏–ª–∏ –ø–æ —Å–æ–±—ã—Ç–∏—é. –í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ—Ä—Å–∏—è—Ö Jenkins –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç *pipelines* ‚Äî –æ–ø–∏—Å–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–±–æ—Ä–∫–∏/–¥–µ–ø–ª–æ—è –∫–∞–∫ –∫–æ–¥ (–Ω–∞ Groovy DSL). Jenkins –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ: –µ—Å—Ç—å –≥–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (master/controller) –∏ –∞–≥–µ–Ω—Ç—ã (nodes) ‚Äî –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å, –Ω–∞ –∫–∞–∫–∏—Ö —É–∑–ª–∞—Ö (—Ä–∞–∑–Ω—ã—Ö –º–∞—à–∏–Ω–∞—Ö –∏–ª–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö) –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –∑–∞–¥–∞—á–∏, —á—Ç–æ —É–¥–æ–±–Ω–æ –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Å–±–æ—Ä–æ–∫ –∏–ª–∏ —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥ (Linux/Windows).

–í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ Java-–ø—Ä–æ–µ–∫—Ç–∞ Jenkins —á–∞—Å—Ç–æ –≤—ã—Å—Ç—É–ø–∞–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–º –∑–≤–µ–Ω–æ–º DevOps-–ø—Ä–æ—Ü–µ—Å—Å–∞: —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–º–∏—Ç—è—Ç –∫–æ–¥, –∞ Jenkins –ª–æ–≤–∏—Ç —ç—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ webhook) –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é. –ë–ª–∞–≥–æ–¥–∞—Ä—è –º–Ω–æ–∂–µ—Å—Ç–≤—É –ø–ª–∞–≥–∏–Ω–æ–≤ Jenkins –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ª—é–±—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏: —Å–∏—Å—Ç–µ–º–∞–º–∏ –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π, –±–∏–ª–¥-—Å–∏—Å—Ç–µ–º–∞–º–∏ (Maven/Gradle), —Ç–µ—Å—Ç–æ–≤—ã–º–∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞–º–∏, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–µ–π (Docker), –æ–±–ª–∞—á–Ω—ã–º–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏ (—Ö–æ—Ç—è –∑–¥–µ—Å—å –º—ã –Ω–µ –∫–∞—Å–∞–µ–º—Å—è –æ–±–ª–∞–∫–æ–≤). –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∫–æ–º–∞–Ω–¥–∞ –ø–æ–ª—É—á–∞–µ—Ç –Ω–∞–¥—ë–∂–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º: "–Ω–∞–∂–∞–ª –∫–Ω–æ–ø–∫—É –∏–ª–∏ –∫–æ–º–º–∏—Ç–Ω—É–ª –∫–æ–¥ ‚Äî —á–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è –ø–æ–ª—É—á–∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ–µ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ".

---
## üìÇ 22. –ö–∞–∫ –ø–∏—Å–∞—Ç—å –∫–æ–Ω–≤–µ–π–µ—Ä—ã Jenkins –≤ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–º —Å—Ç–∏–ª–µ? –ß—Ç–æ —Ç–∞–∫–æ–µ Jenkinsfile –∏ –∫–∞–∫–∏–µ –∫–ª—é—á–µ–≤—ã–µ —Å–µ–∫—Ü–∏–∏ –æ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç?

–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Jenkins ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Declarative Pipeline, –æ–ø–∏—Å—ã–≤–∞—è –ø—Ä–æ—Ü–µ—Å—Å –≤ –≤–∏–¥–µ –∫–æ–¥–∞. Jenkinsfile ‚Äî —ç—Ç–æ —Ñ–∞–π–ª –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (–æ–±—ã—á–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞), –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–Ω–≤–µ–π–µ—Ä–∞. –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –≤ —Ç–æ–º, —á—Ç–æ —Å–∞–º–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CI —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä—É–µ–º–æ–π –≤–º–µ—Å—Ç–µ —Å –∫–æ–¥–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã—Ö pipeline –ø—Ä–æ—â–µ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–µ–µ, —á–µ–º –∏–º–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–π (Scripted Pipeline).

–ö–ª—é—á–µ–≤—ã–µ —Å–µ–∫—Ü–∏–∏ Jenkinsfile –≤ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–º —Å—Ç–∏–ª–µ:

* **pipeline** { ... }: –≤–µ—Ä—Ö–Ω–µ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–µ–∫—Ü–∏—è, –≤–Ω—É—Ç—Ä–∏ –∫–æ—Ç–æ—Ä–æ–π –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤–µ—Å—å –∫–æ–Ω–≤–µ–π–µ—Ä.
* **agent**: —É–∫–∞–∑—ã–≤–∞–µ—Ç, –≥–¥–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å pipeline (–Ω–∞–ø—Ä–∏–º–µ—Ä, agent any ‚Äî –Ω–∞ –ª—é–±–æ–º –¥–æ—Å—Ç—É–ø–Ω–æ–º –∞–≥–µ–Ω—Ç–µ, –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π **docker**-–æ–±—Ä–∞–∑).
* **options** –∏ **environment**: –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –∫–æ–Ω–≤–µ–π–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, options { skipStagesAfterUnstable() } –∏–ª–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ ENV_VAR).
* **stages**: –æ—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç—å, –≤ –∫–æ—Ç–æ—Ä–æ–π –ø–µ—Ä–µ—á–∏—Å–ª—è—é—Ç—Å—è —ç—Ç–∞–ø—ã (stage). –ö–∞–∂–¥—ã–π stage –∏–º–µ–µ—Ç –∏–º—è –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –±–ª–æ–∫ **steps**.
* **steps**: –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –∏–ª–∏ —Å–∫—Ä–∏–ø—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, **sh** './mvnw clean package' —á—Ç–æ–±—ã —Å–æ–±—Ä–∞—Ç—å Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∏–ª–∏ —à–∞–≥ junit 'target/surefire-reports/*.xml' –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–æ–≤.
* **post**: –±–ª–æ–∫, –≥–¥–µ –æ–ø–∏—Å–∞–Ω–æ, —á—Ç–æ –¥–µ–ª–∞—Ç—å –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–Ω–≤–µ–π–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—Å–µ–≥–¥–∞ —É–¥–∞–ª—è—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã, –∏–ª–∏ –ø—Ä–∏ —É—Å–ø–µ—Ö–µ ‚Äî —É–≤–µ–¥–æ–º–∏—Ç—å –∫–æ–º–∞–Ω–¥—É, –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥ –ø–æ email).

–ù–∞–ø—Ä–∏–º–µ—Ä, Jenkinsfile –¥–ª—è Java-–ø—Ä–æ–µ–∫—Ç–∞ –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:
```
pipeline {
agent any
stages {
stage('Checkout') { steps { git '[https://repo.url/project.git](https://repo.url/project.git)' } }
stage('Build') { steps { **sh** './mvnw clean package' } }
stage('Test') { steps { **sh** './mvnw test' } }
stage('Package') { steps { archiveArtifacts 'target/*.jar' } }
}
}
```
–≠—Ç–æ —É–ø—Ä–æ—â—ë–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä, –Ω–æ –æ–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É. Declarative Pipeline –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ (Jenkins –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ñ–∞–π–ª –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º), –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ —ç—Ç–∞–ø—ã –∏ –ø—Ä–æ—á–∏–µ —É–¥–æ–±—Å—Ç–≤–∞. Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –ø–æ–ª–µ–∑–Ω–æ —É–º–µ—Ç—å –ø–∏—Å–∞—Ç—å Jenkinsfile: —Ç–∞–∫ –æ–Ω –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç CI/CD –ø—Ä–æ—Ü–µ—Å—Å —Å–≤–æ–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä—è–º–æ –≤ –∫–æ–¥–µ, –∞ –Ω–µ —á–µ—Ä–µ–∑ —Ç–æ—á–µ—á–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ UI.



---

## üîå 23. –ö–∞–∫–∏–µ –ø–ª–∞–≥–∏–Ω—ã Jenkins –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–ª–µ–∑–Ω—ã –¥–ª—è Java-–ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ —á—Ç–æ –æ–Ω–∏ –¥–æ–±–∞–≤–ª—è—é—Ç –≤ –ø—Ä–æ—Ü–µ—Å—Å CI/CD?

    
–°–∏–ª–∞ Jenkins ‚Äî –≤ –µ–≥–æ –ø–ª–∞–≥–∏–Ω–∞—Ö: —Å–æ–æ–±—â–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞–ª–æ —Ç—ã—Å—è—á–∏ –ø–ª–∞–≥–∏–Ω–æ–≤, —Ä–∞—Å—à–∏—Ä—è—é—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å. –î–ª—è Java-–ø—Ä–æ–µ–∫—Ç–æ–≤ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ:

* **Git Plugin**: –±–∞–∑–æ–≤—ã–π –ø–ª–∞–≥–∏–Ω –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏. –ü–æ–∑–≤–æ–ª—è–µ—Ç Jenkins –∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥, –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è, —Ä–∞–±–æ—Ç–∞—Ç—å —Å –≤–µ—Ç–∫–∞–º–∏ –∏ —Ç–µ–≥–∞–º–∏. –§–∞–∫—Ç–∏—á–µ—Å–∫–∏, –æ–Ω –Ω–µ–æ–±—Ö–æ–¥–∏–º –ø–æ—á—Ç–∏ –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤, —á—Ç–æ–±—ã –ø—Ä–∏–≤—è–∑–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫ job.
* **Maven Integration Plugin** (–∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π –¥–ª—è Gradle): —É–ø—Ä–æ—â–∞–µ—Ç –∑–∞–ø—É—Å–∫ Maven-—Å–±–æ—Ä–æ–∫. –û–Ω –º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—Ç—å pom.xml, –∑–∞–ø—É—Å–∫–∞—Ç—å —Ü–µ–ª–∏ –∏ –¥–∞–∂–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–≥—Ä—É–∂–∞—Ç—å —Å–æ–±—Ä–∞–Ω–Ω—ã–π jar –≤ Nexus).
* **JUnit Plugin**: –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —é–Ω–∏—Ç-—Ç–µ—Å—Ç–æ–≤. Jenkins —É–º–µ–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å –æ—Ç—á—ë—Ç—ã Surefire (—Ñ–∞–π–ª—ã .xml) –∏ –Ω–∞ –±–∞–∑–µ –ø–ª–∞–≥–∏–Ω–∞ JUnit –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É: —Å–∫–æ–ª—å–∫–æ —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—à–ª–æ/—É–ø–∞–ª–æ, –ø—Ä–∏–∫—Ä–µ–ø–ª—è—Ç—å –ª–æ–≥–∏ –Ω–µ—É–¥–∞—á–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤. –≠—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –±–∏–ª–¥–∞.
* **JaCoCo Plugin**: –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å JaCoCo (Java Code Coverage) –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤. –í dashboard Jenkins –º–æ–∂–Ω–æ –≤–∏–¥–µ—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –ø–æ–∫—Ä—ã—Ç–∏—è, —á—Ç–æ –ø–æ–æ—â—Ä—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ö–æ—Ä–æ—à–∏–π —É—Ä–æ–≤–µ–Ω—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
* **SonarQube Scanner Plugin**: –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑) –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ SonarQube –ø—Ä—è–º–æ –∏–∑ Jenkins-–ø–∞–π–ø–ª–∞–π–Ω–∞. –ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å stage "Sonar Analysis", –∏ –ø–ª–∞–≥–∏–Ω –ø–µ—Ä–µ–¥–∞—Å—Ç –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ –∏ –º–µ—Ç—Ä–∏–∫–∏ (–ø–æ–∫—Ä—ã—Ç–∏–µ, —Å–ª–æ–∂–Ω–æ—Å—Ç—å) –Ω–∞ SonarQube-—Å–µ—Ä–≤–µ—Ä.
* **Credentials Binding Plugin**: –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø–µ—Ä–µ–¥–∞—ë—Ç —Å–µ–∫—Ä–µ—Ç—ã (–ø–∞—Ä–æ–ª–∏, —Ç–æ–∫–µ–Ω—ã) –≤ pipeline. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç Nexus –∏–ª–∏ DB –≤ Jenkins, –∞ –ø–ª–∞–≥–∏–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç –∏—Ö –∫–∞–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ —à–∞–≥–µ, –Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞—è –≤ –ª–æ–≥–∞—Ö.
* **Slack Notification Plugin** (–∏–ª–∏ Email Extension): –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∫–æ–º–∞–Ω–¥—ã. –û–Ω –æ—Ç–ø—Ä–∞–≤–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Slack-–∫–∞–Ω–∞–ª –∏–ª–∏ email —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º —Å–±–æ—Ä–∫–∏, —á—Ç–æ —É–¥–æ–±–Ω–æ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —É–ø–∞–≤—à–∏–µ –±–∏–ª–¥—ã.

–ö–æ–Ω–µ—á–Ω–æ, —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∏ –¥—Ä—É–≥–∏–µ: Docker Plugin (—É–ø—Ä–∞–≤–ª—è—Ç—å Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –∏–∑ Jenkins), Kubernetes Plugin (–∑–∞–ø—É—Å–∫–∞—Ç—å –∞–≥–µ–Ω—Ç—ã –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ Kubernetes), Pipeline Utility Steps (–Ω–∞–±–æ—Ä —É—Ç–∏–ª–∏—Ç–Ω—ã—Ö —à–∞–≥–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏, –∞—Ä—Ö–∏–≤–∞–º–∏), Blue Ocean (–Ω–æ–≤—ã–π UI –¥–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è pipeline). –í—ã–±–æ—Ä –ø–ª–∞–≥–∏–Ω–æ–≤ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π –ø—Ä–æ–µ–∫—Ç–∞. –ì–ª–∞–≤–Ω–æ–µ ‚Äî –æ–Ω–∏ —ç–∫–æ–Ω–æ–º—è—Ç –≤—Ä–µ–º—è, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –≥–æ—Ç–æ–≤—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (–≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –ø–∏—Å–∞—Ç—å —Å–≤–æ–∏ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π).



---

## üìö 24. –ß—Ç–æ —Ç–∞–∫–æ–µ Shared Libraries –≤ Jenkins –∏ –∫–∞–∫ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±–ª–µ–≥—á–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–æ–Ω–≤–µ–π–µ—Ä–æ–≤ –≤ –∫—Ä—É–ø–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö?

    
Shared Libraries ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º Jenkins, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –≤—ã–Ω–æ—Å–∏—Ç—å –æ–±—â–∏–µ –∫—É—Å–∫–∏ pipeline-–∫–æ–¥–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–∏–ª–∏ —É–ø—Ä–∞–≤–ª—è–µ–º—É—é Jenkins-–±–∏–±–ª–∏–æ—Ç–µ–∫—É) –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –≤ —Ä–∞–∑–Ω—ã—Ö Jenkinsfile. –ö–æ–≥–¥–∞ –≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –¥–µ—Å—è—Ç–∫–∏ Java-–ø—Ä–æ–µ–∫—Ç–æ–≤, —á–∞—Å—Ç–æ –∏—Ö CI/CD-–∫–æ–Ω–≤–µ–π–µ—Ä—ã –∏–º–µ—é—Ç –º–Ω–æ–≥–æ —Å—Ö–æ–∂–∏—Ö —à–∞–≥–æ–≤ ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–µ–ø–ª–æ–π –Ω–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —à–∞–≥–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, —Ç–∏–ø–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π. –í–º–µ—Å—Ç–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —ç—Ç–∏—Ö —à–∞–≥–æ–≤ –≤ –∫–∞–∂–¥—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, –∏—Ö –≤—ã–Ω–æ—Å—è—Ç –≤ Shared Library.

Shared Library ‚Äî –ø–æ —Å—É—Ç–∏, –Ω–∞–±–æ—Ä Groovy-—Å–∫—Ä–∏–ø—Ç–æ–≤, –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ, –∫–æ—Ç–æ—Ä—ã–µ Jenkins –º–æ–∂–µ—Ç –ø–æ–¥—Ç—è–Ω—É—Ç—å –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–∞–∫ —á–∞—Å—Ç—å pipeline. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–æ–≥—É—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∞–º, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ—É–Ω–∫—Ü–∏—é deployToTomcat(appName, artifact) ‚Äî –≤–Ω—É—Ç—Ä–∏ –æ–ø–∏—Å–∞—Ç—å –≤—Å–µ –¥–µ—Ç–∞–ª–∏ –¥–µ–ø–ª–æ—è, –∏ –∑–∞—Ç–µ–º –≤ Jenkinsfile –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –ø—Ä–æ—Å—Ç–æ –≤—ã–∑—ã–≤–∞—Ç—å deployToTomcat(...). –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, Jenkinsfile –æ—Å—Ç–∞—ë—Ç—Å—è –ª–∞–∫–æ–Ω–∏—á–Ω—ã–º –∏ –ø–æ–Ω—è—Ç–Ω—ã–º, –∞ –ª–æ–≥–∏–∫–∞ —Å–ø—Ä—è—Ç–∞–Ω–∞ ‚Äú–ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º‚Äù –±–∏–±–ª–∏–æ—Ç–µ–∫–∏.

–î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è Shared Library –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä Jenkins –ª–∏–±–æ –¥–æ–±–∞–≤–ª—è–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É (–¥–æ—Å—Ç—É–ø–Ω—É—é –≤—Å–µ–º job), –ª–∏–±–æ pipeline –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å –µ—ë ad-hoc –¥–∏—Ä–µ–∫—Ç–∏–≤–æ–π @Library('my-shared-lib'). –ö–æ–¥ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (—Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º), —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ. –í –∫—Ä—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥–∞—Ö Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –≤—ã–¥–µ–ª—è—é—Ç DevOps-–∏–Ω–∂–µ–Ω–µ—Ä–∞ –∏–ª–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —ç—Ç—É –±–∏–±–ª–∏–æ—Ç–µ–∫—É: –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ. –í—ã–∏–≥—Ä—ã—à ‚Äî –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ –∫–æ–Ω–≤–µ–π–µ—Ä–æ–≤: –≤—Å–µ –ø—Ä–æ–µ–∫—Ç—ã –¥–µ–ø–ª–æ—è—Ç—Å—è –ø–æ –æ–¥–Ω–æ–º—É —Å—Ü–µ–Ω–∞—Ä–∏—é, –∏ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–æ–≤—ã–π —à–∞–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É), –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–æ–ø—Ä–∞–≤–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É, –∞ –Ω–µ 50 Jenkinsfile —Å—Ä–∞–∑—É.



---

## üîó 25. –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é Jenkins —Å —Å–∏—Å—Ç–µ–º–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, Git) –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—É—Å–∫ —Å–±–æ—Ä–æ–∫ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–¥–∞?

    
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Jenkins —Å Git –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ job –∏–ª–∏ pipeline —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω –∑–Ω–∞–ª –æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏. –í –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–º Jenkinsfile, –∫–∞–∫ –º—ã —É–ø–æ–º–∏–Ω–∞–ª–∏, –æ–±—ã—á–Ω–æ –ø–µ—Ä–≤—ã–π —à–∞–≥ ‚Äî git 'URL' (–∏–ª–∏ —É–∫–∞–∑–∞–Ω–∏–µ —Ä–µ–ø–æ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Multibranch Pipeline), —á—Ç–æ —Å–æ–æ–±—â–∞–µ—Ç Jenkins, –æ—Ç–∫—É–¥–∞ –±—Ä–∞—Ç—å –∫–æ–¥. –û–¥–Ω–∞–∫–æ, –ø–æ–º–∏–º–æ –≤—ã—Ç—è–≥–∏–≤–∞–Ω–∏—è –∫–æ–¥–∞, –≤–∞–∂–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—É—Å–∫–∞. –¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ Jenkins-–¥–∂–æ–±—ã –º–æ–≥–ª–∏ –æ–ø—Ä–∞—à–∏–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (poll SCM) –∫–∞–∂–¥—ã–µ N –º–∏–Ω—É—Ç, –ø—Ä–æ–≤–µ—Ä—è—è, –Ω–µ –ø–æ—è–≤–∏–ª–∏—Å—å –ª–∏ –Ω–æ–≤—ã–µ –∫–æ–º–º–∏—Ç—ã. –ù–æ –±–æ–ª–µ–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å webhook –∏–∑ Git-—Å–µ—Ä–≤–∏—Å–∞.

–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –∫–æ–¥ —Ö—Ä–∞–Ω–∏—Ç—Å—è –Ω–∞ GitHub/GitLab/Bitbucket, –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å webhook: –ø—Ä–∏ –∫–∞–∂–¥–æ–º push –∏–ª–∏ pull-request —ç—Ç–æ—Ç —Å–µ—Ä–≤–∏—Å –ø–æ—Å—ã–ª–∞–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å –Ω–∞ Jenkins (—Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π URL). Jenkins (—Å –ø–æ–º–æ—â—å—é –ø–ª–∞–≥–∏–Ω–æ–≤ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä GitHub Plugin) –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å –∏ –∑–Ω–∞–µ—Ç, –∫–∞–∫—É—é job –∑–∞–ø—É—Å—Ç–∏—Ç—å. –¢–∞–∫ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–µ–∑ –ª–∏—à–Ω–µ–π –Ω–∞–≥—Ä—É–∑–∫–∏. –í —Å–ª—É—á–∞–µ Multibranch Pipeline, Jenkins –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –Ω–æ–≤—ã–µ –≤–µ—Ç–∫–∏ –∏ PR –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏ —Å–æ–∑–¥–∞—ë—Ç –¥–ª—è –Ω–∏—Ö –æ—Ç–¥–µ–ª—å–Ω—ã–µ pipelines. –¢–æ –µ—Å—Ç—å, –µ—Å–ª–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–∫—Ä—ã–ª –Ω–æ–≤—É—é –≤–µ—Ç–∫—É feature-X, Jenkins —É–≤–∏–¥–∏—Ç Jenkinsfile —Ç–∞–º –∏ –Ω–∞—á–Ω—ë—Ç –æ—Ç–¥–µ–ª—å–Ω—É—é job –¥–ª—è —ç—Ç–æ–π –≤–µ—Ç–∫–∏; –ø—Ä–∏ PR ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç pipeline –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–ª–∏—è–Ω–∏—è.

–ü—Ä–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Git —Ç–∞–∫–∂–µ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∫—Ä–µ–¥–µ–Ω—à–ª—ã. Jenkins –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é: –æ–±—ã—á–Ω–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç SSH-–∫–ª—é—á –∏–ª–∏ —Ç–æ–∫–µ–Ω. –ò—Ö –¥–æ–±–∞–≤–ª—è—é—Ç –≤ Jenkins Credentials, –∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø–æ–¥–∫–ª—é—á–∞—é—Ç –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —Ä–µ–ø–æ. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤–µ—Å—å —Ü–∏–∫–ª –∑–∞–º—ã–∫–∞–µ—Ç—Å—è: —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ø—É—à–∏—Ç –∫–æ–¥ ‚Äî Git-—Å–µ—Ä–≤–∏—Å —É–≤–µ–¥–æ–º–ª—è–µ—Ç Jenkins ‚Äî Jenkins –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ç–µ—Å—Ç—ã/—Å–±–æ—Ä–∫—É ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (—Å—Ç–∞—Ç—É—Å –±–∏–ª–¥–∞) –º–æ–≥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –æ–±—Ä–∞—Ç–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–º–µ—á–∞—Ç—å –∫–æ–º–º–∏—Ç –∏–ª–∏ PR –º–µ—Ç–∫–æ–π "build passed/failed". –¢–∞–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–µ—Å—à–æ–≤–Ω—ã–π –æ–ø—ã—Ç: –Ω–µ—Ç –Ω—É–∂–¥—ã –≤—Ä—É—á–Ω—É—é –¥–µ—Ä–≥–∞—Ç—å —Å–±–æ—Ä–∫–∏, –≤—Å—ë –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, —á—Ç–æ —É—Å–∫–æ—Ä—è–µ—Ç —Ü–∏–∫–ª —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø–æ–≤—ã—à–∞–µ—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å, —á—Ç–æ –∫–∞–∂–¥—ã–π –∫–æ–º–º–∏—Ç –ø—Ä–æ–≤–µ—Ä–µ–Ω.



---

## ‚ò∏Ô∏è 26. –ß—Ç–æ —Ç–∞–∫–æ–µ Kubernetes –∏ –∫–∞–∫–∏–µ –∑–∞–¥–∞—á–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–æ–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ –æ–Ω —Ä–µ—à–∞–µ—Ç –ø—Ä–∏ –¥–µ–ø–ª–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π?

    
Kubernetes (K8s) ‚Äî —ç—Ç–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è Google, –∫–æ—Ç–æ—Ä–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ, –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏. –ï—Å–ª–∏ Docker –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø–∞–∫–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, —Ç–æ Kubernetes –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ç–∏–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–¥—ë–∂–Ω–æ –≤–æ –º–Ω–æ–∂–µ—Å—Ç–≤–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –∏ –Ω–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ –º–∞—à–∏–Ω (–∫–ª–∞—Å—Ç–µ—Ä –∏–∑ —É–∑–ª–æ–≤). –û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞, –∫–æ—Ç–æ—Ä—É—é —Ä–µ—à–∞–µ—Ç Kubernetes ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∑–∞–¥–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤—ã –≥–æ–≤–æ—Ä–∏—Ç–µ, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ 5 —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –≤–∞—à–µ–≥–æ Java-—Å–µ—Ä–≤–∏—Å–∞, Kubernetes —Å–∞–º –æ–±–µ—Å–ø–µ—á–∏—Ç –∑–∞–ø—É—Å–∫ 5 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –±—É–¥–µ—Ç —Å–ª–µ–¥–∏—Ç—å, —á—Ç–æ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç, –∏ –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –∫–∞–∫–æ–≥–æ-—Ç–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç –Ω–æ–≤—ã–π –Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ–º —Ä–µ—Å—É—Ä—Å–µ.

Kubernetes –±–µ—Ä—ë—Ç –Ω–∞ —Å–µ–±—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (–º–æ–∂–Ω–æ –ª–µ–≥–∫–æ —É–≤–µ–ª–∏—á–∏—Ç—å —á–∏—Å–ª–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –Ω–æ–≤—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤), —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ (–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ —Ç—Ä–∞—Ñ–∏–∫–∞ –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ —á–µ—Ä–µ–∑ –º–µ—Ö–∞–Ω–∏–∑–º —Å–µ—Ä–≤–∏—Å–æ–≤), —Å–∞–º–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ (auto-healing: –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —É–ø–∞–≤—à–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –ø–µ—Ä–µ–Ω–æ—Å –∏—Ö –Ω–∞ –¥—Ä—É–≥–∏–µ —É–∑–ª—ã, –µ—Å–ª–∏ —Ö–æ—Å—Ç –≤—ã—à–µ–ª –∏–∑ —Å—Ç—Ä–æ—è). –¢–∞–∫–∂–µ Kubernetes —É–ø—Ä–æ—â–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π ‚Äî –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–≤–æ–¥–∏—Ç—å rolling-update: –ø–æ–æ—á–µ—Ä—ë–¥–Ω–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä—ã —Å –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π, –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞—è –æ–±—â–∏–π —Å–µ—Ä–≤–∏—Å. –ï—â—ë –æ–¥–Ω–∞ –∑–∞–¥–∞—á–∞ ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –∏ —Å–µ–∫—Ä–µ—Ç–∞–º–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö (—á–µ—Ä–µ–∑ –æ–±—ä–µ–∫—Ç—ã ConfigMap –∏ Secret), –∞ —Ç–∞–∫–∂–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ Namespaces (–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º—ë–Ω) ‚Äî –ª–æ–≥–∏—á–µ—Å–∫–∞—è –∏–∑–æ–ª—è—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏–ª–∏ —Å—Ä–µ–¥ (dev, staging, prod) –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞.

–ë–ª–∞–≥–æ–¥–∞—Ä—è Kubernetes, –∫–æ–º–∞–Ω–¥—ã –º–æ–≥—É—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ: –æ–ø–∏—Å–∞–≤ –∂–µ–ª–∞–µ–º–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ yaml-–º–∞–Ω–∏—Ñ–µ—Å—Ç–∞—Ö. –û–Ω —Å—Ç–∞–ª –¥–µ-—Ñ–∞–∫—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ —Å–Ω–∏–º–∞–µ—Ç –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å —Ä—É—Ç–∏–Ω—ã: —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –Ω–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —Å–ª–µ–¥–∏—Ç—å –∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –¥–µ—Å—è—Ç–∫–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –ø–∏—Å–∞—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ ‚Äî K8s –¥–µ–ª–∞–µ—Ç —ç—Ç–æ. –í –∏—Ç–æ–≥–µ —É—Å–∫–æ—Ä—è–µ—Ç—Å—è –¥–µ–ø–ª–æ–π (–º–∏–Ω—É—Ç—ã –≤–º–µ—Å—Ç–æ —á–∞—Å–æ–≤), –ø–æ–≤—ã—à–∞–µ—Ç—Å—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å (–º–µ–Ω—å—à–µ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–≥–æ —Ñ–∞–∫—Ç–æ—Ä–∞) –∏ –ª–µ–≥—á–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å —É—Å–ø–µ—à–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥ —Ä–æ—Å—Ç –Ω–∞–≥—Ä—É–∑–∫–∏.



---

## üß± 27. –ß—Ç–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π Pod –∏ Deployment –≤ Kubernetes, –∏ –∫–∞–∫ –æ–Ω–∏ —Å–≤—è–∑–∞–Ω—ã –º–µ–∂–¥—É —Å–æ–±–æ–π?

    
**Pod** ‚Äî —ç—Ç–æ –±–∞–∑–æ–≤–∞—è –µ–¥–∏–Ω–∏—Ü–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –≤ Kubernetes. –ü–æ–¥ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤–º–µ—Å—Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–∑–¥–µ–ª—è—é—Ç –æ–±—â—É—é —Å—Ä–µ–¥—É: —Å–µ—Ç–µ–≤–æ–π —Å—Ç–µ–∫ (IP-–∞–¥—Ä–µ—Å) –∏ —Ç–æ–º–∞ (–¥–∏—Å–∫–∏). –í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ Pod —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –≤–∞—à–∏–º Java-—Å–µ—Ä–≤–∏—Å–æ–º), –Ω–æ –º–æ–≥—É—Ç –±—ã—Ç—å –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (sidecar), –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ –ø—Ä–æ–∫—Å–∏. –ü–æ–¥ –Ω–µ–¥–æ–ª–≥–æ–≤–µ—á–µ–Ω: –µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ –ø–∞–¥–∞–µ—Ç, Kubernetes –º–æ–∂–µ—Ç –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –≤–µ—Å—å Pod –∑–∞–Ω–æ–≤–æ (—Å –Ω–æ–≤—ã–º IP). –ü–æ—ç—Ç–æ–º—É –Ω–∞–ø—Ä—è–º—É—é Pods –æ–±—ã—á–Ω–æ –Ω–µ –∞–¥—Ä–µ—Å—É—é—Ç ‚Äî –æ–Ω–∏ —Å—á–∏—Ç–∞—é—Ç—Å—è ‚Äú–æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–º–∏‚Äù —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**Deployment** ‚Äî —ç—Ç–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –≤—ã—Å—à–µ–≥–æ —É—Ä–æ–≤–Ω—è, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞–±–æ—Ä–æ–º Pod'–æ–≤, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –∏—Ö –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –≤–µ—Ä—Å–∏–∏. –í Deployment –≤—ã –æ–ø–∏—Å—ã–≤–∞–µ—Ç–µ —à–∞–±–ª–æ–Ω Pod (–∫–∞–∫–æ–π –æ–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∑–∞–ø—É—Å–∫–∞—Ç—å, –∫–∞–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, volume –∏ –ø—Ä.) –∏ –∂–µ–ª–∞–µ–º–æ–µ —á–∏—Å–ª–æ —Ä–µ–ø–ª–∏–∫. Deployment –≤ Kubernetes —Å–∞–º —Å–æ–∑–¥–∞—ë—Ç –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ Pod —á–µ—Ä–µ–∑ –æ–±—ä–µ–∫—Ç ReplicaSet –∏ —Å–ª–µ–¥–∏—Ç –∑–∞ –Ω–∏–º–∏. –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å –≤–µ—Ä—Å–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Äî –≤—ã –º–µ–Ω—è–µ—Ç–µ —à–∞–±–ª–æ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–±—Ä–∞–∑ –≤–µ—Ä—Å–∏–∏ 2 –≤–º–µ—Å—Ç–æ 1) –≤ Deployment; Kubernetes –ø—Ä–æ–≤–æ–¥–∏—Ç rolling update: –ø–ª–∞–≤–Ω–æ —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–µ Pod —Å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π –∏ —É–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ, –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—è, —á—Ç–æ–±—ã –≤ –∫–∞–∂–¥—ã–π –º–æ–º–µ–Ω—Ç —á–∞—Å—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –ø—Ä–æ–¥–æ–ª–∂–∞–ª–∞ –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫.

–°–≤—è–∑—å –º–µ–∂–¥—É Deployment –∏ Pod —Ç–∞–∫–∞—è: Deployment ‚Äî –∫–∞–∫ –º–µ–Ω–µ–¥–∂–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø–æ—Ä–æ–∂–¥–∞–µ—Ç Pods –ø–æ —Å–≤–æ–µ–º—É —à–∞–±–ª–æ–Ω—É. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –æ–±—ã—á–Ω–æ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç Pods –Ω–∞–ø—Ä—è–º—É—é, –∞ —Å–æ–∑–¥–∞—ë—Ç Deployment. –ù–∞–ø—Ä–∏–º–µ—Ä, Deployment —Å –∏–º–µ–Ω–µ–º "myapp" –º–æ–∂–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å 3 —Ä–µ–ø–ª–∏–∫–∏ Pod, –Ω–∞–∑–æ–≤—ë–º –∏—Ö "myapp-xxx1", "myapp-xxx2", "myapp-xxx3". –ï—Å–ª–∏ –æ–¥–∏–Ω Pod —É–ø–∞–¥—ë—Ç, Deployment –∑–∞–º–µ—Ç–∏—Ç —É–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–µ–ø–ª–∏–∫ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –Ω–æ–≤—ã–π Pod "myapp-xxx4" –≤–º–µ—Å—Ç–æ –Ω–µ–≥–æ. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è —Å–∞–º–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É —Ä–µ–ø–ª–∏–∫ –≤ Deployment ‚Äî Kubernetes –¥–æ–±–∞–≤–∏—Ç –∏–ª–∏ —É–±–µ—Ä—ë—Ç Pods. Deployment —É–ø—Ä–æ—â–∞–µ—Ç –∂–∏–∑–Ω—å: –Ω–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —Å–ª–µ–¥–∏—Ç—å –∑–∞ –∫–∞–∂–¥—ã–º —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–º, —Å–∏—Å—Ç–µ–º–∞ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –∑–∞ –≤–∞—Å.



---

## üß≠ 28. –ö–∞–∫—É—é —Ä–æ–ª—å –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–µ—Ä–≤–∏—Å (Service) –≤ Kubernetes –∏ —á–µ–º –æ–Ω –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç Ingress –ø—Ä–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ —Ç—Ä–∞—Ñ–∏–∫–∞?

    
**Service** –≤ Kubernetes ‚Äî —ç—Ç–æ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∞—è –ø–æ—Å—Ç–æ—è–Ω–Ω—É—é —Ç–æ—á–∫—É –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –º–µ–Ω—è—é—â–∏–º—Å—è Pod'–∞–º. –ö–∞–∫ —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å, —É Pod –∫–æ—Ä–æ—Ç–∫–∏–π –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∏ –Ω–µ–ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π IP. Service —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏: –æ–Ω –ø–æ–ª—É—á–∞–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π IP (ClusterIP) –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ –∏ DNS-–∏–º—è, –∏ –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ —ç—Ç–æ—Ç IP —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∫ —Å–µ—Ä–≤–∏—Å—É Pod'—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤—ã —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç–µ Java-—Å–µ—Ä–≤–∏—Å —Å 3 Pod, —Å–æ–∑–¥–∞—ë—Ç–µ –¥–ª—è –Ω–µ–≥–æ Service "my-service" ‚Äî –¥—Ä—É–≥–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ –º–æ–≥—É—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ "my-service" (–ø–æ DNS –∏–ª–∏ IP) –∏ –≤—Å–µ–≥–¥–∞ –ø–æ–ø–∞–¥—É—Ç –Ω–∞ –æ–¥–∏–Ω –∏–∑ 3 Pod (round-robin –ª–∏–±–æ –¥—Ä—É–≥–æ–π –∞–ª–≥–æ—Ä–∏—Ç–º). –ï—Å–ª–∏ Pod'—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∏–ª–∏ —É–±–∏—Ä–∞—é—Ç—Å—è (Deployment –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è), Service –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–≤–æ–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã.

–û–¥–Ω–∞–∫–æ Service —Å–∞–º –ø–æ —Å–µ–±–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –≥—Ä–∞–Ω–∏—Ü–∞–º–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ (—Ç–∏–ø ClusterIP –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ). –ß—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –¥–æ—Å—Ç—É–ø –≤–Ω–µ—à–Ω–∏–º –∫–ª–∏–µ–Ω—Ç–∞–º, –µ—Å—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç—ã: —Ç–∏–ø **NodePort** (Service –ø–æ–ª—É—á–∞–µ—Ç –ø–æ—Ä—Ç –Ω–∞ –∫–∞–∂–¥–æ–º —É–∑–ª–µ –∫–ª–∞—Å—Ç–µ—Ä–∞) –∏–ª–∏ **LoadBalancer** (–µ—Å–ª–∏ –∫–ª–∞—Å—Ç–µ—Ä –≤ –æ–±–ª–∞–∫–µ ‚Äî —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤–Ω–µ—à–Ω–∏–π –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫, –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞—é—â–∏–π –∫ —Å–µ—Ä–≤–∏—Å—É). –ù–æ –µ—Å–ª–∏ —É –≤–∞—Å –¥–µ—Å—è—Ç–∫–∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤, –Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–ª–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –≤–Ω–µ—à–Ω–∏–π –∞–¥—Ä–µ—Å –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ. **Ingress** —Ä–µ—à–∞–µ—Ç —ç—Ç—É –∑–∞–¥–∞—á—É: —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π –ø—Ä–∞–≤–∏–ª–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –≤–Ω–µ—à–Ω–µ–≥–æ (–æ–±—ã—á–Ω–æ HTTP/HTTPS) —Ç—Ä–∞—Ñ–∏–∫–∞ –≤–Ω—É—Ç—Ä—å –∫–ª–∞—Å—Ç–µ—Ä–∞. Ingress –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞ –æ–¥–Ω–æ–º –≤–Ω–µ—à–Ω–µ–º IP –∏–ª–∏ –¥–æ–º–µ–Ω–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ Service, –æ—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ –ø—É—Ç–∏ URL –∏–ª–∏ hostname.

–í–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ Ingress —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Å–≤—è–∑–∫–µ —Å **Ingress Controller** ‚Äî —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–º (—á–∞—â–µ –≤—Å–µ–≥–æ —ç—Ç–æ —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–π –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫/–≤–µ–±-—Å–µ—Ä–≤–µ—Ä —Ç–∏–ø–∞ Nginx, Traefik –∏–ª–∏ HAProxy), –∫–æ—Ç–æ—Ä—ã–π —á–∏—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ Ingress –∏ –Ω–∞ –∏—Ö –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç —Å–µ–±—è. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤—ã —Å–æ–∑–¥–∞—ë—Ç–µ –ø—Ä–∞–≤–∏–ª–æ: host: api.example.com -> service: my-service (–ø–æ—Ä—Ç 80). –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (Nginx) –Ω–∞—Å—Ç—Ä–æ–∏—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Ö–æ—Å—Ç api.example.com –∏ –±—É–¥–µ—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –≤—Å–µ –ø—Ä–∏—Ö–æ–¥—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –∫ —Å–µ—Ä–≤–∏—Å—É my-service. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, **Service** ‚Äì —ç—Ç–æ —Å–ø–æ—Å–æ–± –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –Ω–∞–±–æ—Ä Pod'–æ–≤ –∏ –ø–æ–ª—É—á–∏—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –∞–¥—Ä–µ—Å –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ–π –≤–Ω–µ—à–Ω–∏–π –∞–¥—Ä–µ—Å, –∞ **Ingress** ‚Äì —ç—Ç–æ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ —Å—Ä–µ–¥—Å—Ç–≤–æ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–∞—Ä—É–∂—É, –ø–æ–∑–≤–æ–ª—è—é—â–µ–µ –∑–∞ –æ–¥–Ω–∏–º IP –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –¥–µ–ª–∞—Ç—å —Ç–µ—Ä–º–∏–Ω–∞—Ü–∏—é SSL, –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å –ø—É—Ç–∏ –∏ –ø—Ä–æ—á–µ–µ. Ingress –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç Service NodePort/LoadBalancer —Ç–µ–º, —á—Ç–æ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ 7 (HTTP), –ø–æ–Ω–∏–º–∞–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (Ingress Controller). –í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –æ–±–∞: Service –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±—ç–∫–µ–Ω–¥ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –∞ Ingress –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –≤–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é.



---

## üìà 29. –ß—Ç–æ —Ç–∞–∫–æ–µ Helm –∏ –∫–∞–∫ –æ–Ω —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≤ Kubernetes?

    
Helm ‚Äî —ç—Ç–æ –ø–∞–∫–µ—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è Kubernetes, —á–∞—Å—Ç–æ –µ–≥–æ –Ω–∞–∑—ã–≤–∞—é—Ç ‚Äúapt/yum –¥–ª—è k8s‚Äù. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø–∞–∫–æ–≤–∞—Ç—å –Ω–∞–±–æ—Ä –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤ Kubernetes (Deployment, Service, ConfigMap, Ingress –∏ —Ç.–¥.) –≤ –µ–¥–∏–Ω—ã–π –ø–∞–∫–µ—Ç ‚Äî **chart** ‚Äî –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –ª–µ–≥–∫–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∏–ª–∏ –ø–µ—Ä–µ–¥–∞—Ç—å –¥—Ä—É–≥–∏–º. –î–ª—è Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ Kubernetes-–æ–±—ä–µ–∫—Ç–æ–≤, Helm –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –æ–±–ª–µ–≥—á–∞–µ—Ç –¥–µ–ø–ª–æ–π: –≤–º–µ—Å—Ç–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –¥–µ—Å—è—Ç–∫–∞ yaml-—Ñ–∞–π–ª–æ–≤ –≤—Ä—É—á–Ω—É—é, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å '**helm** install myapp ./myapp-chart' ‚Äî –∏ Helm —Ä–∞–∑–≤–µ—Ä–Ω—ë—Ç –∏—Ö –≤—Å–µ –∑–∞ –æ–¥–∏–Ω —Ä–∞–∑, –ø—Ä–∏—á—ë–º —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—Ç–∫–∞—Ç–∞.

Helm charts –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —à–∞–±–ª–æ–Ω—ã. –í –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã –º–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–ª—è—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (Values) ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ø–ª–∏–∫, URL –≤–Ω–µ—à–Ω–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ ‚Äî –∏ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π. –≠—Ç–æ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: –æ–¥–∏–Ω chart –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –Ω–∞ dev, staging, prod, –ø—Ä–æ—Å—Ç–æ –ø–æ–¥—Å—Ç–∞–≤–∏–≤ —Ä–∞–∑–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–∞–¥—Ä–µ—Å–∞ –ë–î, —Ä–∞–∑–º–µ—Ä—ã —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ —Ç.–ø.). –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–æ–≥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å chart —Ä—è–¥–æ–º —Å –∫–æ–¥–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–ª–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ chart'–æ–≤; —Ç–∞–∫–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (ArtifactHub), –≥–¥–µ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≥–æ—Ç–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ë–î, message broker), —á—Ç–æ —É—Å–∫–æ—Ä—è–µ—Ç —Å–±–æ—Ä–∫—É –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

–í –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ Helm –≤–∞–∂–Ω—ã –∫–æ–º–∞–Ω–¥—ã '**helm** install', '**helm** upgrade', '**helm** rollback': –æ–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –Ω–µ —Ç–æ–ª—å–∫–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å, –Ω–æ –∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–µ–∑ –ø—Ä–æ—Å—Ç–æ—è. –ù–∞–ø—Ä–∏–º–µ—Ä, '**helm** upgrade myapp ./my-chart' –ø—Ä–∏–º–µ–Ω–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏/–≤–µ—Ä—Å–∏–∏ –æ–±—Ä–∞–∑–∞ ‚Äî –ø—Ä–∏ —ç—Ç–æ–º –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º Helm —Å–æ–∑–¥–∞—Å—Ç –Ω–æ–≤—É—é —Ä–µ–≤–∏–∑–∏—é —Ä–µ–ª–∏–∑–∞. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥—ë—Ç –Ω–µ —Ç–∞–∫, –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å '**helm** rollback' –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Ä–µ–≤–∏–∑–∏–∏ ‚Äî —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏, –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å—Ç–∞—Ä—ã–º –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞–º. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, Helm –¥–æ–±–∞–≤–ª—è–µ—Ç —É—Ä–æ–≤–µ–Ω—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–≤–µ—Ä—Ö Kubernetes: —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (chart ‚Äî –∫–∞–∫ –µ–¥–∏–Ω–∏—Ü–∞ –ø–æ—Å—Ç–∞–≤–∫–∏), –¥–µ–ª–∞–µ—Ç –¥–µ–ø–ª–æ–π –ø–æ–≤—Ç–æ—Ä—è–µ–º—ã–º –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–º –∑–∞ —Å—á—ë—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–º–µ–Ω—ã.



---

## üìä 30. –ö–∞–∫ –∑–∞–¥–∞—é—Ç—Å—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –∑–∞–ø—Ä–æ—Å—ã —Ä–µ—Å—É—Ä—Å–æ–≤ (CPU, –ø–∞–º—è—Ç—å) –¥–ª—è Pod –≤ Kubernetes –∏ –ø–æ—á–µ–º—É –≤–∞–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Ä–µ—Å—É—Ä—Å—ã –¥–ª—è Java-—Å–µ—Ä–≤–∏—Å–æ–≤?

    
Kubernetes –ø–æ–∑–≤–æ–ª—è–µ—Ç —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ —Ä–µ—Å—É—Ä—Å–æ–≤ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É (request) –∏ —Å–∫–æ–ª—å–∫–æ –º–∞–∫—Å–∏–º—É–º –æ–Ω –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–ª—è—Ç—å (limit). –≠—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–¥–∞—é—Ç—Å—è –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤–Ω—É—Ç—Ä–∏ Pod (Deployment) –≤ —Ä–∞–∑–¥–µ–ª–µ resources. –ù–∞–ø—Ä–∏–º–µ—Ä:

resources:
requests:
memory: "512Mi"
cpu: "500m"
limits:
memory: "1Gi"
cpu: "1"

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–µ–∑–µ—Ä–≤–∏—Ä—É–µ—Ç 512 –ú–ë –ø–∞–º—è—Ç–∏ –∏ 0.5 vCPU, –∞ –º–∞–∫—Å–∏–º—É–º –µ–º—É –ø–æ–∑–≤–æ–ª–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 1 –ì–ë –∏ 1 vCPU. **Request** –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫: Kubernetes –ø–æ—Å—Ç–∞—Ä–∞–µ—Ç—Å—è —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å Pod –Ω–∞ —É–∑–ª–µ, –≥–¥–µ –µ—Å—Ç—å —Ö–æ—Ç—è –±—ã 512 –ú–ë —Å–≤–æ–±–æ–¥–Ω–æ. **Limit** –∂–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Å—Ä–µ–¥—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: –µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è —Å—ä–µ—Å—Ç—å –±–æ–ª—å—à–µ 1 –ì–ë, —Ç–æ –Ω–∞ —É—Ä–æ–≤–Ω–µ cgroup –µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å –ª–∏–±–æ –Ω–∞—á–Ω—ë—Ç –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å—Å—è (–¥–ª—è CPU –±—É–¥–µ—Ç –ø—Ä–æ—Å—Ç–æ —Ç—Ä–æ—Ç—Ç–ª–∏–Ω–≥), –ª–∏–±–æ –¥–ª—è –ø–∞–º—è—Ç–∏ ‚Äì –≤–æ–∑–º–æ–∂–µ–Ω OOM Kill.

–î–ª—è Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≥—Ä–∞–º–æ—Ç–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ –æ—Å–æ–±–µ–Ω–Ω–æ –∫—Ä–∏—Ç–∏—á–Ω–∞. JVM –∏—Å–ø–æ–ª—å–∑—É–µ—Ç garbage collector –∏ –∞–ª–ª–æ—Ü–∏—Ä—É–µ—Ç heap ‚Äî –µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–∏–º–∏—Ç –ø–∞–º—è—Ç–∏, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –≤–∑—è—Ç—å –±–æ–ª—å—à–µ, —á–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ —É–∑–ª–µ, —á—Ç–æ –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ —É–±–∏–π—Å—Ç–≤—É –ø—Ä–æ—Ü–µ—Å—Å–∞ OOM-Killer'–æ–º. –ü–æ—ç—Ç–æ–º—É —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤—ã—Å—Ç–∞–≤–ª—è—Ç—å limit –ø–∞–º—è—Ç–∏ —á—É—Ç—å –±–æ–ª—å—à–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ heap + overhead (–º–µ—Ç–∞—Å–ø–µ–π—Å, native memory), –∞ request ‚Äî –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ç–∏–ø–∏—á–Ω–æ–≥–æ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è. –ù–∞—á–∏–Ω–∞—è —Å Java 10, JVM —É–º–µ–µ—Ç —Å–∞–º –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞—Ç—å max heap –ø–æ–¥ cgroup limit (UseContainerSupport –≤–∫–ª—é—á—ë–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é), –Ω–æ –¥–ª—è Java 8 –Ω—É–∂–Ω–æ –±—ã–ª–æ —è–≤–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ, –∏–Ω–∞—á–µ JVM –º–æ–≥–ª–∞ –Ω–µ –∑–Ω–∞—Ç—å –æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è—Ö. –° CPU –ø–æ—Ö–æ–∂–∞—è –∏—Å—Ç–æ—Ä–∏—è: –µ—Å–ª–∏ —Å–µ—Ä–≤–∏—Å—É –∫—Ä–∏—Ç–∏—á–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –∏–º–µ–µ—Ç —Å–º—ã—Å–ª request —Å–¥–µ–ª–∞—Ç—å —Ä–∞–≤–Ω—ã–º limit (–ø–æ–ª—É—á–∏—Ç—å –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è CPU). –ù–æ –µ—Å–ª–∏ —Å–µ—Ä–≤–∏—Å –º–æ–∂–µ—Ç —É–∂–∞—Ç—å—Å—è, –º–æ–∂–Ω–æ request –º–µ–Ω—å—à–µ, –∞ limit –±–æ–ª—å—à–µ ‚Äî —Ç–æ–≥–¥–∞ –≤ —Å–ø–æ–∫–æ–π–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–∞ —Ä–µ—Å—É—Ä—Å—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –¥—Ä—É–≥–∏–º, –∞ –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–∏—Å —Å–º–æ–∂–µ—Ç –±—Ä–∞—Ç—å –¥–æ –ª–∏–º–∏—Ç–∞.

–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ –≤–ª–∏—è–µ—Ç –∏ –Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∫–ª–∞—Å—Ç–µ—Ä–∞, –∏ –Ω–∞ —ç–∫–æ–Ω–æ–º–∏—é. –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—ã–¥–µ–ª–∏–≤ –ø–∞–º—è—Ç—å, —Ä–∏—Å–∫—É–µ—Ç–µ —á–∞—Å—Ç—ã–º–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏ Pod –∏–∑-–∑–∞ OOM. –ü–µ—Ä–µ–≤—ã–¥–µ–ª–∏–≤ (—Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π request), –≤—ã —Å–Ω–∏–∑–∏—Ç–µ –ø–ª–æ—Ç–Ω–æ—Å—Ç—å ‚Äî —Ç.–µ. –º–µ–Ω—å—à–µ Pod –ø–æ–º–µ—Å—Ç–∏—Ç—Å—è –Ω–∞ —É–∑–ª–∞—Ö, —á—Ç–æ —É–¥–æ—Ä–æ–∂–∞–µ—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É. –í –∫–æ–º–∞–Ω–¥–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –æ–±—ã—á–Ω–æ –ø—Ä–æ–≤–æ–¥—è—Ç –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–º–µ—Ä—è—é—Ç –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –∏ CPU –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –∏ –∑–∞—Ç–µ–º –∑–∞–¥–∞—é—Ç requests/limits, –∏—Å—Ö–æ–¥—è –∏–∑ —ç—Ç–∏—Ö –¥–∞–Ω–Ω—ã—Ö –ø–ª—é—Å –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–ø–∞—Å. –ê Kubernetes —É–∂–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç, —á—Ç–æ–±—ã —Å—É–º–º–∞—Ä–Ω–æ –Ω–∞ —É–∑–ª–µ requests –Ω–µ –ø—Ä–µ–≤—ã—à–∞–ª–∏ —Ä–µ—Å—É—Ä—Å, –∏ —Ç–µ–º —Å–∞–º—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å–æ—Å–µ–¥–µ–π –Ω–µ –≤—ã—Ç–µ—Å–Ω—è—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞.



---

## üß¨ 31. –ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –∏ –∫–∞–∫–∏–µ –∫–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —Å–ª–µ–¥—É–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å?

    
–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥–µ –ø–æ–ª—É—á–∞—Ç—å –æ–±—ä–µ–∫—Ç–∏–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ —Ç–æ–º, –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –ø–æ–¥ —Ä–µ–∞–ª—å–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π. –ë–µ–∑ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–±–ª–µ–º—ã —á–∞—Å—Ç–æ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–æ–±—â–∞—Ç –æ —Å–±–æ—è—Ö. –ì—Ä–∞–º–æ—Ç–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ –¥–∞—ë—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—Ç—å –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã: –ø–æ —É—Ö—É–¥—à–∞—é—â–∏–º—Å—è –º–µ—Ç—Ä–∏–∫–∞–º –º–æ–∂–Ω–æ –∑–∞–º–µ—Ç–∏—Ç—å, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏, –∏ –ø—Ä–∏–Ω—è—Ç—å –º–µ—Ä—ã –¥–æ –ø–æ–ª–Ω–æ–≥–æ –æ—Ç–∫–∞–∑–∞. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–º–æ–≥–∞–µ—Ç –≤ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ä–∞–∑–≤–∏—Ç–∏—è: –∑–Ω–∞—è, –∫–∞–∫ —Ä–∞—Å—Ç—ë—Ç –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤, –º–æ–∂–Ω–æ –∑–∞—Ä–∞–Ω–µ–µ —É–≤–µ–ª–∏—á–∏—Ç—å –º–æ—â–Ω–æ—Å—Ç–∏ –∏–ª–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥.

–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è Java-—Å–µ—Ä–≤–∏—Å–∞ –º–æ–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≥—Ä—É–ø–ø. **–°–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU (–ø—Ä–æ—Ü–µ–Ω—Ç –∑–∞–≥—Ä—É–∑–∫–∏ CPU —è–¥—ë—Ä), –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ (–æ—Å–æ–±–µ–Ω–Ω–æ heap JVM, –æ–±—ä—ë–º –∫—É—á–∏ –∏ —á–∞—Å—Ç–æ—Ç–∞ —Å–±–æ—Ä–æ–∫ –º—É—Å–æ—Ä–∞ GC), –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞ (–µ—Å–ª–∏ —Å–µ—Ä–≤–∏—Å –ø–∏—à–µ—Ç –Ω–∞ –¥–∏—Å–∫), —Å–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫. –ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, —ç—Ç–∏ –º–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏–ª–∏ —É–∑–ª–∞. **–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É (throughput), –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ (latency) ‚Äî —Å—Ä–µ–¥–Ω–µ–µ –∏ –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 95-–π –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª—å, —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å ‚Äú—Ö–≤–æ—Å—Ç‚Äù –∑–∞–¥–µ—Ä–∂–µ–∫), —á–∏—Å–ª–æ –æ—à–∏–±–æ–∫ –∏–ª–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –≤ –µ–¥–∏–Ω–∏—Ü—É –≤—Ä–µ–º–µ–Ω–∏ (error rate, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–ª—è HTTP 5xx –æ—Ç–≤–µ—Ç–æ–≤). –î–ª—è Java-—Å–µ—Ä–≤–∏—Å–æ–≤ –≤–µ–±-–ø—Ä–æ—Ñ–∏–ª—è –≤–∞–∂–Ω—ã –º–µ—Ç—Ä–∏–∫–∏ –ø—É–ª–∞ –ø–æ—Ç–æ–∫–æ–≤ (—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤ –∞–∫—Ç–∏–≤–Ω–æ, –Ω–µ—Ç –ª–∏ –æ—á–µ—Ä–µ–¥–µ–π), –º–µ—Ç—Ä–∏–∫–∏ –ø—É–ª–æ–≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (–∑–∞–Ω—è—Ç–æ—Å—Ç—å –∫–æ–Ω–Ω–µ–∫—à–µ–Ω–æ–≤). **–ë–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏** (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã): –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤ –≤ —á–∞—Å ‚Äî –æ–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Å—É–¥–∏—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ –æ —Ç–µ—Ö–Ω–∏–∫–µ, –Ω–æ –∏ –æ —Ç–æ–º, –ø—Ä–∏–Ω–æ—Å–∏—Ç –ª–∏ —Å–∏—Å—Ç–µ–º–∞ –æ–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

–û—Ç—Å–ª–µ–∂–∏–≤–∞—è —ç—Ç–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏, –∫–æ–º–∞–Ω–¥–∞ –º–æ–∂–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç–∏–Ω–≥ ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è, –µ—Å–ª–∏ –º–µ—Ç—Ä–∏–∫–∞ –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –Ω–æ—Ä–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–∞–º—è—Ç—å –≤—ã—à–µ 90% –ø–æ—Å—Ç–æ—è–Ω–Ω–æ, –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –ø—Ä–µ–≤—ã—à–∞–µ—Ç SLA). –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ ‚Äî –≥–ª–∞–∑–∞ –∏ —É—à–∏ DevOps-–∫–æ–º–∞–Ω–¥—ã: –æ–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –ø–æ–∑–≤–æ–ª—è—è –±—ã—Å—Ç—Ä–µ–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã. –ë–µ–∑ –Ω–µ–≥–æ –ø–æ–∏—Å–∫ –ø—Ä–∏—á–∏–Ω—ã —Å–±–æ—è –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ —É–≥–∞–¥–∞–π–∫—É, –∞ —Å —Ö–æ—Ä–æ—à–∏–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ —Å—Ä–∞–∑—É –≤–∏–¥–∏—Ç, –≥–¥–µ —É–∑–∫–æ–µ –º–µ—Å—Ç–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–æ—Å—Ç –≤—Ä–µ–º–µ–Ω–∏ GC –ø–µ—Ä–µ–¥ OutOfMemoryError, –∏–ª–∏ –ø–∞–¥–µ–Ω–∏–µ RPS –ø–µ—Ä–µ–¥ —Å–±–æ–µ–º).



---

## üìâ 32. –ö–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é Prometheus –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–æ–≤ –≤ Grafana?

    
Prometheus + Grafana ‚Äî –æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã—Ö —Å—Ç–µ–∫–æ–≤ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞. **Prometheus** ‚Äî —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∞ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫ (—Ç–∞–π–º-—Å–µ—Ä–∏–∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö), –∞ **Grafana** ‚Äî —Å–∏—Å—Ç–µ–º–∞ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è —Å—Ç—Ä–æ–∏—Ç –≥—Ä–∞—Ñ–∏–∫–∏ –ø–æ –¥–∞–Ω–Ω—ã–º –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, –≤–∫–ª—é—á–∞—è Prometheus. –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã —Ç–∞–∫–∞—è: –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —ç–∫—Å–ø–æ–Ω–∏—Ä—É–µ—Ç —Å–≤–æ–∏ –º–µ—Ç—Ä–∏–∫–∏ –≤ –≤–∏–¥–µ HTTP-—ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ (–æ–±—ã—á–Ω–æ `/metrics`), –∞ Prometheus —Ä–µ–≥—É–ª—è—Ä–Ω–æ –æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç (scrape) —ç—Ç–æ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —á–∏—Å–ª–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫. –ó–∞—Ç–µ–º –≤ Grafana –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≥—Ä–∞—Ñ–∏–∫–∏ –∏ –ø–∞–Ω–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç —ç—Ç–∏ –º–µ—Ç—Ä–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –∏–ª–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥.

Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç —ç–∫—Å–ø–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏. –û–¥–∏–Ω –∏–∑ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É Micrometer (–≤ Spring Boot –æ–Ω–∞ –≤—Å—Ç—Ä–æ–µ–Ω–∞), –∫–æ—Ç–æ—Ä–∞—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —ç–∫—Å–ø–æ–∑–∏—Ü–∏—é –≤ —Ñ–æ—Ä–º–∞—Ç–µ Prometheus. –õ–∏–±–æ –Ω–∞–ø—Ä—è–º—É—é –ø–æ–¥–∫–ª—é—á–∏—Ç—å Prometheus Java Client –∏ –≤—Ä—É—á–Ω—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ (Counters, Gauges, Histograms) –≤ –∫–æ–¥–µ. –¢–∞–∫–∂–µ –µ—Å—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –∞–≥–µ–Ω—Ç–æ–º JMX Exporter ‚Äî —ç—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, –∫–æ—Ç–æ—Ä—ã–π —á–∏—Ç–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –∏–∑ JMX (–µ—Å–ª–∏ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Ö —Ç—É–¥–∞ –ø—É–±–ª–∏–∫—É–µ—Ç) –∏ —Å–∞–º –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç `/metrics` –¥–ª—è Prometheus. –ö–æ–≥–¥–∞ Prometheus –æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç `/metrics`, –æ–Ω –ø–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Å–ø–∏—Å–æ–∫ –º–µ—Ç—Ä–∏–∫: –Ω–∞–ø—Ä–∏–º–µ—Ä, 'http_server_requests_seconds_count{uri="/api/foo",status="200"} 12345' ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤, –∏–ª–∏ 'jvm_memory_used_bytes{area="heap"} 56789012' ‚Äî –æ–±—ä—ë–º –∑–∞–Ω—è—Ç–æ–π –ø–∞–º—è—Ç–∏.

Grafana –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Prometheus –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö –∏ —Å –ø–æ–º–æ—â—å—é —è–∑—ã–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ PromQL –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ç—Ä–æ–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥–∞—à–±–æ—Ä–¥—ã: –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–∞–Ω–µ–ª—å "JVM Heap Usage" —Å –≥—Ä–∞—Ñ–∏–∫–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏, "HTTP Latency" —Å –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª—è–º–∏ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞, –≥—Ä–∞—Ñ–∏–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏ CPU, –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ—à–∏–±–æ–∫. Grafana —Ç–∞–∫–∂–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ç–∞–≤–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–∞–ª–µ—Ä—Ç—ã) –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–µ—Ç—Ä–∏–∫. –î–ª—è Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ —É–º–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç–∞–∫–æ–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –æ–Ω –∏–º–µ–µ—Ç –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π –≤–∑–≥–ª—è–¥ –Ω–∞ —Å–≤–æ—ë –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –æ—Ç–∫—Ä—ã—Ç—å Grafana –∏ —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ –ø–æ—Å–ª–µ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ –∏–ª–∏ –∫–∞–∫ –≤–µ–¥—ë—Ç —Å–µ–±—è —Å–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞ –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π. Prometheus –∏ Grafana —Ö–æ—Ä–æ—à–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É—é—Ç—Å—è –∏ —è–≤–ª—è—é—Ç—Å—è open-source —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º, –ø–æ—ç—Ç–æ–º—É –º–Ω–æ–≥–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ –∏—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤ —Å–≤–æ–∏—Ö DevOps-–ø—Ä–æ—Ü–µ—Å—Å–∞—Ö.



---

## üìü 33. –ö–∞–∫ Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç —ç–∫—Å–ø–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ JMX –∏ –∫–∞–∫ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏?

    
JMX (Java Management Extensions) ‚Äî —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è –≤ Java, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: –∏–∑ JVM –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. JVM —Å–∞–º–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —á–µ—Ä–µ–∑ JMX –º–Ω–æ–≥–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞–º—è—Ç–∏ (heap/non-heap), –¥–µ—Ç–∞–ª–∏ –ø–æ garbage collection (–≤—Ä–µ–º—è –Ω–∞ —Å–±–æ—Ä–∫–∏, —á–∏—Å–ª–æ —Å–±–æ—Ä–æ–∫), –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤, –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã –∏ –¥—Ä. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –∏–ª–∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ –º–æ–≥—É—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ **MBean** (Management Bean) ‚Äî –ø–æ —Å—É—Ç–∏, –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã, –ø—É–±–ª–∏–∫—É—é—â–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ –∏ –æ–ø–µ—Ä–∞—Ü–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å MBean, –∫–æ—Ç–æ—Ä—ã–π —ç–∫—Å–ø–æ–Ω–∏—Ä—É–µ—Ç —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–ª–∏ —Å—Ç–∞—Ç—É—Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

–ß—Ç–æ–±—ã —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ —Å–Ω—è—Ç—å, –Ω—É–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ JMX. –õ–æ–∫–∞–ª—å–Ω–æ —ç—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å –ø–æ–º–æ—â—å—é —É—Ç–∏–ª–∏—Ç —Ç–∏–ø–∞ jconsole –∏–ª–∏ VisualVM (–æ–Ω–∏ –∏–¥—É—Ç –≤ JDK) ‚Äî –∑–∞–ø—É—Å—Ç–∏–≤ –∏—Ö –Ω–∞ —Ç–æ–π –∂–µ –º–∞—à–∏–Ω–µ, –≤—ã —Å—Ä–∞–∑—É —É–≤–∏–¥–∏—Ç–µ —Å–ø–∏—Å–æ–∫ MBeans –∏ –∏—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏. –î–ª—è —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ JVM –∑–∞–ø—É—Å–∫–∞—é—Ç —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏, —Ä–∞–∑—Ä–µ—à–∞—é—â–∏–º–∏ —É–¥–∞–ª—ë–Ω–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ JMX (–Ω–∞–ø—Ä–∏–º–µ—Ä, '-Dcom.sun.management.jmxremote.port=9010' –∏ –¥—Ä—É–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏). –¢–æ–≥–¥–∞ –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è jconsole –ø–æ —Å–µ—Ç–∏ –∏–ª–∏, —á—Ç–æ —á–∞—â–µ, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, –ø–æ–Ω–∏–º–∞—é—â–∏–µ JMX. –ú–Ω–æ–≥–∏–µ APM (Application Performance Management) –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ —Å–∏—Å—Ç–µ–º—ã —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ —É–º–µ—é—Ç –æ–ø—Ä–∞—à–∏–≤–∞—Ç—å MBean‚Äô—ã –ø–æ JMX.

–ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Prometheus, –µ—Å—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç **JMX Exporter**: –æ–Ω –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ JVM –ø–æ JMX –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã–µ MBean-–º–µ—Ç—Ä–∏–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç Prometheus. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –º–µ—Ç—Ä–∏–∫–∏ JMX (–Ω–∞–ø—Ä–∏–º–µ—Ä, `**java**.lang:type=GarbageCollector` MBean —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º CollectionTime) —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –æ–±—ã—á–Ω—ã–º–∏ —á–∏—Å–ª–æ–≤—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏ –Ω–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–µ `/metrics`. –í —Ü–µ–ª–æ–º, JMX –ø–æ–ª–µ–∑–µ–Ω —Ç–µ–º, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤—Å–µ –∞—Å–ø–µ–∫—Ç—ã —Ä–∞–±–æ—Ç—ã JVM –Ω–∞–±–ª—é–¥–∞—Ç—å. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ —Ä–æ—Å—Ç–µ –∑–∞–¥–µ—Ä–∂–µ–∫ –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á–µ—Ä–µ–∑ JMX, –Ω–µ —Ä–∞—Å—Ç—ë—Ç –ª–∏ —á–∏—Å–ª–æ –ø–æ—Ç–æ–∫–æ–≤ (–≤–æ–∑–º–æ–∂–Ω–æ, —É—Ç–µ—á–∫–∞), —Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –≤—Ä–µ–º–µ–Ω–∏ —Ç—Ä–∞—Ç–∏—Ç—Å—è –Ω–∞ GC, –∫–∞–∫ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∫–∞ CPU –ø–æ –ø—Ä–æ—Ü–µ—Å—Å–∞–º. –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ —É–º–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è JMX ‚Äî —ç—Ç–æ —É–º–µ–Ω–∏–µ –∑–∞–≥–ª—è–Ω—É—Ç—å "–ø–æ–¥ –∫–∞–ø–æ—Ç" JVM –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –ø–æ–ª—É—á–∏—Ç—å –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –≤—Å–µ–≥–¥–∞ –≤—ã–≤–µ–¥–µ–Ω—ã –≤ –ª–æ–≥–∏ –∏–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.



---

## ‚ùì 34. –ß—Ç–æ —Ç–∞–∫–æ–µ Java Flight Recorder (JFR) –∏ –∫–∞–∫ –µ–≥–æ –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å –¥–ª—è –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏?

    
Java Flight Recorder (JFR) ‚Äî —ç—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ JVM –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Å–±–æ—Ä–∞ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∞–∂–µ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω-—Å–∏—Å—Ç–µ–º–∞—Ö —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º overhead. –†–∞–Ω–µ–µ JFR –±—ã–ª –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–º (–≤ Oracle JDK), –Ω–æ –≤ OpenJDK —Å Java 11 —Å—Ç–∞–ª –¥–æ—Å—Ç—É–ø–µ–Ω –≤—Å–µ–º. –ï–≥–æ —Å—É—Ç—å: JFR –ø–æ—Å—Ç–æ—è–Ω–Ω–æ (–∏–ª–∏ –ø–æ –∑–∞–ø—Ä–æ—Å—É) –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –∏ –º–µ—Ç—Ä–∏–∫–∏ –∏–∑ —Ä–∞–±–æ—Ç–∞—é—â–µ–π JVM: –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ—Ç–æ–∫–∞—Ö, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –º–µ—Ç–æ–¥–æ–≤, –ø–∞—É–∑–∞—Ö GC, –≤—ã–¥–µ–ª–µ–Ω–∏—è—Ö –ø–∞–º—è—Ç–∏, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞—Ö ‚Äî —Å–æ—Ç–Ω–∏ —Ä–∞–∑–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π. –ü—Ä–∏ —ç—Ç–æ–º overhead –æ–±—ã—á–Ω–æ –º–µ–Ω–µ–µ 1‚Äì2%, —Ç–æ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π JFR –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ —Ç–æ—Ä–º–æ–∑–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

JFR –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å —Ä–∞–∑–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏. –ú–æ–∂–Ω–æ —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å JVM —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º '-XX:StartFlightRecording=...' (–∑–∞–ø–∏—Å—å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å –∑–∞–¥–∞–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∫–æ–π –ø—Ä–æ—Ñ–∏–ª—å —Å–æ–±—ã—Ç–∏–π —Å–æ–±–∏—Ä–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ —É–¥–µ—Ä–∂–∏–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä–µ, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø–∏—Å–∏). –õ–∏–±–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞—Ç—å –∏ –≤—ã–∫–ª—é—á–∞—Ç—å –∑–∞–ø–∏—Å—å —á–µ—Ä–µ–∑ JMX-–∫–æ–º–∞–Ω–¥—É –∏–ª–∏ —É—Ç–∏–ª–∏—Ç—É 'jcmd'. –ù–∞–ø—Ä–∏–º–µ—Ä, 'jcmd <pid> JFR.start name=profiling duration=60s filename=dump.jfr' –Ω–∞—á–Ω—ë—Ç —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –º–∏–Ω—É—Ç—É –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ñ–∞–π–ª. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª –º–æ–∂–Ω–æ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ **Java Mission Control (JMC)** ‚Äî –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ—Ñ–∞–π–ª–µ—Ä–∞ –æ—Ç Oracle/OpenJDK. –í JMC –≤–∏–¥–Ω—ã –≤—ã–∑–æ–≤—ã –º–µ—Ç–æ–¥–æ–≤ (call stacks) –∏ —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –æ–Ω–∏ –∑–∞–Ω—è–ª–∏, –≥–æ—Ä—è—á–∏–µ –º–µ—Å—Ç–∞ (hotspots), —Å–∫–æ–ª—å–∫–æ –æ–±—ä–µ–∫—Ç–æ–≤ –≤—ã–¥–µ–ª—è–ª–æ—Å—å –∏ –≥–¥–µ, –∫–∞–∫–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –±—Ä–æ—Å–∞–ª–∏—Å—å –∏ —Ç.–¥.

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ JFR –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –ø–æ–º–æ–≥–∞–µ—Ç –ª–æ–≤–∏—Ç—å —Ç—Ä—É–¥–Ω–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–µ –∏–ª–∏ –ø–ª–∞–≤–∞—é—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç stop-the-world –ø–∞—É–∑–∞ –∏–ª–∏ –ø–æ–¥–≤–∏—Å–∞–Ω–∏–µ, –º–æ–∂–Ω–æ –¥–µ—Ä–∂–∞—Ç—å Flight Recorder –≤–∫–ª—é—á—ë–Ω–Ω—ã–º –≤ —Ä–µ–∂–∏–º–µ —Ü–∏–∫–ª–∏—á–µ—Å–∫–æ–≥–æ –±—É—Ñ–µ—Ä–∞ (continuous recording) ‚Äî –æ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ N –º–∏–Ω—É—Ç. –ò –∫–æ–≥–¥–∞ —Å–±–æ–π —Å–ª—É—á–∏–ª—Å—è, –≤—ã–≥—Ä—É–∑–∏—Ç—å –∑–∞–ø–∏—Å—å –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ –Ω–µ–∑–∞–¥–æ–ª–≥–æ –¥–æ —ç—Ç–æ–≥–æ: –≤–æ–∑–º–æ–∂–Ω–æ, –≤—Å–ø–ª–µ—Å–∫ —Å–±–æ—Ä–æ–∫ –º—É—Å–æ—Ä–∞ –∏–ª–∏ —Ä–µ–∑–∫–∏–π —Ä–æ—Å—Ç —á–∏—Å–ª–∞ –ø–æ—Ç–æ–∫–æ–≤. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –æ–±—ã—á–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤—â–∏–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ç—è–∂–µ–ª–æ–≤–µ—Å–Ω—ã, JFR —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω –∫–∞–∫ —á–∞—Å—Ç—å JVM, –ø–æ—ç—Ç–æ–º—É –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ ‚Äî –æ–±—ã—á–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ –≤ –∫—Ä—É–ø–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏—è—Ö –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –î–ª—è mid-level Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ —É–º–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è JFR –æ–∑–Ω–∞—á–∞–µ—Ç —É–º–µ–Ω–∏–µ –ø–æ–ª—É—á–∞—Ç—å –≥–ª—É–±–æ–∫–∏–µ –∏–Ω—Å–∞–π—Ç—ã –æ —Ä–∞–±–æ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –Ω–µ –¥–æ–∂–∏–¥–∞—è—Å—å, –ø–æ–∫–∞ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–≤—Ç–æ—Ä–∏—Ç—Å—è –ø–æ–¥ –æ—Ç–ª–∞–¥—á–∏–∫–æ–º.



---

## ‚ùì 35. –ö–∞–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Å–µ–∫—Ä–µ—Ç—ã (–ø–∞—Ä–æ–ª–∏, –∫–ª—é—á–∏) –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π? –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤—Ä–æ–¥–µ HashiCorp Vault –∏ Kubernetes Sealed Secrets.

    
–°–µ–∫—Ä–µ—Ç—ã (—É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, API-–∫–ª—é—á–∏, –ø–∞—Ä–æ–ª–∏) —Ç—Ä–µ–±—É—é—Ç –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ–≥–æ –æ–±—Ä–∞—â–µ–Ω–∏—è: –∏—Ö —É—Ç–µ—á–∫–∞ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏ —Å–µ—Ä–≤–∏—Å–æ–≤. –í DevOps-–ø—Ä–∞–∫—Ç–∏–∫–µ –≤—ã—Ä–∞–±–æ—Ç–∞–Ω–æ –ø—Ä–∞–≤–∏–ª–æ: **–Ω–µ —Ö—Ä–∞–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö —Å –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º –∏–ª–∏ –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ**. –î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–∞–º–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã. **HashiCorp Vault** ‚Äî –æ–¥–Ω–æ –∏–∑ –º–æ—â–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π: —ç—Ç–æ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ —Å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º, –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –¥–æ—Å—Ç—É–ø–∞ –∏ –∂—É—Ä–Ω–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º –æ–±—Ä–∞—â–µ–Ω–∏–π. Vault –º–æ–∂–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≤—ã–¥–∞–≤–∞—Ç—å —Å–µ–∫—Ä–µ—Ç—ã: –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –≤—ã–¥–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å –∫ –±–∞–∑–µ, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ—Ç—É—Ö–Ω–µ—Ç —á–µ—Ä–µ–∑ –∑–∞–¥–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è. Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å Vault —á–µ—Ä–µ–∑ API (HTTP-–∑–∞–ø—Ä–æ—Å—ã) –∏–ª–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—É—Å–∫–∞–µ–º—ã–π —Ä—è–¥–æ–º –∞–≥–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–µ—â–∞–µ—Ç —Å–µ–∫—Ä–µ—Ç—ã –≤ —Ñ–∞–π–ª—ã –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —Å–∞–º–∏ —Å–µ–∫—Ä–µ—Ç—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—Ä–æ–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –∫–æ–¥–µ, –∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –≤–æ –≤—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞.

–í Kubernetes –µ—Å—Ç—å —Å–≤–æ–π –æ–±—ä–µ–∫—Ç Secret, –Ω–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–Ω —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –≤ etcd –ø—Ä–æ—Å—Ç–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ base64 (—Ç–æ –µ—Å—Ç—å –±–µ–∑ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è). –ü–æ—ç—Ç–æ–º—É –ø—Ä–∏ –ø—Ä–∞–∫—Ç–∏–∫–∞—Ö GitOps (–∫–æ–≥–¥–∞ –∫–æ–Ω—Ñ–∏–≥–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Git) –≤–æ–∑–Ω–∏–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç **Sealed Secrets**. Sealed Secret ‚Äî —ç—Ç–æ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç —Å–µ–∫—Ä–µ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∫–æ–º–º–∏—Ç–∏—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ (–∫–ª–∞—Å—Ç–µ—Ä—É Kubernetes –≤—ã–¥–∞—ë—Ç—Å—è –∫–ª—é—á, –∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–æ–ª—å–∫–æ –µ–º—É). –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ —à–∏—Ñ—Ä—É–µ—Ç —Å–µ–∫—Ä–µ—Ç —ç—Ç–∏–º –ø—É–±–ª–∏—á–Ω—ã–º –∫–ª—é—á–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ —É—Ç–∏–ª–∏—Ç—É kubeseal) –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–ª—É—á–µ–Ω–Ω—ã–π SealedSecret-–º–∞–Ω–∏—Ñ–µ—Å—Ç –≤ —Ä–µ–ø–æ. –ü—Ä–∏ –¥–µ–ø–ª–æ–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ (Sealed Secrets Controller) —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ—Ç –µ–≥–æ —Å–≤–æ–∏–º –ø—Ä–∏–≤–∞—Ç–Ω—ã–º –∫–ª—é—á–æ–º –∏ —Å–æ–∑–¥–∞—ë—Ç –æ–±—ã—á–Ω—ã–π Secret, –¥–æ—Å—Ç—É–ø–Ω—ã–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é. –í –∏—Ç–æ–≥–µ –¥–∞–∂–µ –µ—Å–ª–∏ –∫—Ç–æ-—Ç–æ –ø–æ–ª—É—á–∏—Ç –¥–æ—Å—Ç—É–ø –∫ Git, –æ–Ω —É–≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –Ω–µ —É–∑–Ω–∞–µ—Ç –ø–∞—Ä–æ–ª–∏.

–ü—Ä–∏ –≤—ã–±–æ—Ä–µ —Å–ø–æ—Å–æ–±–∞ –≤–∞–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å —É–¥–æ–±—Å—Ç–≤–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å. Vault –±–æ–ª–µ–µ —Å–ª–æ–∂–µ–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ, –Ω–æ –¥–∞—ë—Ç –±–æ–≥–∞—Ç—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å–µ–∫—Ä–µ—Ç—ã, —Ç–æ–Ω–∫–∏–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞, –∞—É–¥–∏—Ç). Sealed Secrets –ø—Ä–æ—â–µ –∏ –±–ª–∏–∂–µ –∫ Kubernetes-—ç–∫–æ—Å–∏—Å—Ç–µ–º–µ, –æ–Ω —Ö–æ—Ä–æ—à –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–∞—Ä–æ–ª–µ–π –∫ –ë–î, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–¥–∫–æ –º–µ–Ω—è—é—Ç—Å—è). –í –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö —Ü–µ–ª—å ‚Äî –∏—Å–∫–ª—é—á–∏—Ç—å —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–π —Ñ–∞–∫—Ç–æ—Ä –∏ —Å–ª—É—á–∞–π–Ω—É—é —É—Ç–µ—á–∫—É: —Å–µ–∫—Ä–µ—Ç—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, —Ö—Ä–∞–Ω—è—Ç—Å—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ ‚Äú–≤ –ø–æ–∫–æ–µ‚Äù (at rest) –∏ –Ω–µ –ª–µ–∂–∞—Ç –ø—Ä–æ—Å—Ç–æ –≤ –∫–æ–Ω—Ñ–∏–≥–µ –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ. Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –≤ –∫–æ–º–∞–Ω–¥–µ, –∑–Ω–∞—è —ç—Ç–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –ø–æ–∑–∞–±–æ—Ç–∏—Ç—Å—è –æ —Ç–æ–º, —á—Ç–æ–±—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ª–æ–≥–∏–Ω—ã/–ø–∞—Ä–æ–ª–∏ –∫ —Å–µ—Ä–≤–∏—Å–∞–º –±—Ä–∞–ª–∏—Å—å –∏–∑ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞, –∞ –Ω–µ —Ö–∞—Ä–¥–∫–æ–¥–∏–ª–∏—Å—å –≤ properties-—Ñ–∞–π–ª–∞—Ö.



---

## ‚ùì 36. –ö–∞–∫ –≤—ã–Ω–æ—Å–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑ –∫–æ–¥–∞ –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥? (–Ω–∞–ø—Ä–∏–º–µ—Ä, ConfigMap –≤ Kubernetes, –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã —Å–≤–æ–π—Å—Ç–≤)

    
–•–æ—Ä–æ—à–µ–π –ø—Ä–∞–∫—Ç–∏–∫–æ–π —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø—Ä–∏–Ω—Ü–∏–ø "–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–Ω–µ –∫–æ–¥–∞": –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –æ–¥–∏–Ω–∞–∫–æ–≤–æ –≤–æ –≤—Å–µ—Ö —Å—Ä–µ–¥–∞—Ö, –∞ —Ä–∞–∑–ª–∏—á–∏—è (—Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –∫—Ä–µ–¥–µ–Ω—à–ª—ã, —Ñ–∏—á–∏-—Ñ–ª–∞–≥–∏) ‚Äî –ø–æ—Å—Ç—É–ø–∞—Ç—å –∏–∑–≤–Ω–µ. –í —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–º –ø–æ–¥—Ö–æ–¥–µ Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è —Å –Ω–∞–±–æ—Ä–æ–º properties- –∏–ª–∏ YAML-—Ñ–∞–π–ª–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π (dev, test, prod) –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, Spring Boot –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏ (spring.profiles.active). –û–¥–Ω–∞–∫–æ —Ä—É—á–Ω–æ–µ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π —á—Ä–µ–≤–∞—Ç–æ –æ—à–∏–±–∫–∞–º–∏, –ø–æ—ç—Ç–æ–º—É DevOps-–ø–æ–¥—Ö–æ–¥ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏.

–í Kubernetes –¥–ª—è —ç—Ç–æ–≥–æ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω—ã **ConfigMap** (–¥–ª—è –Ω–µ—Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö) –∏ **Secret** (–¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö, –∫–∞–∫ –æ–±—Å—É–∂–¥–∞–ª–æ—Å—å). ConfigMap –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø–∞—Ä—ã "–∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ" –∏–ª–∏ –¥–∞–∂–µ —Ü–µ–ª—ã–µ —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –ü—Ä–∏ –¥–µ–ø–ª–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ConfigMap –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞–∫ —Ñ–∞–π–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, application.properties) –ª–∏–±–æ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∫–∞–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è. –≠—Ç–æ —É–¥–æ–±–Ω–æ: –º–µ–Ω—è—è ConfigMap, –º–æ–∂–Ω–æ –ø–µ—Ä–µ–Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, URL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –∞–¥—Ä–µ—Å–∞ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, —Ä–∞–∑–º–µ—Ä—ã –ø—É–ª–æ–≤ ‚Äî –≤—Å—ë —ç—Ç–æ –º–æ–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –≤ ConfigMap. –†–∞–∑–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (namespaces) –±—É–¥—É—Ç –∏–º–µ—Ç—å —Å–≤–æ–∏ ConfigMap —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –∫–ª—é—á–∞–º–∏, –Ω–æ —Ä–∞–∑–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.

–í–Ω–µ Kubernetes —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∏ –¥—Ä—É–≥–∏–µ —Ä–µ—à–µ–Ω–∏—è: –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏ –≤—Ä–æ–¥–µ Spring Cloud Config (–∫–æ–Ω—Ñ–∏–≥-—Å–µ—Ä–≤–µ—Ä, —Ä–∞–∑–¥–∞—é—â–∏–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ Git-—Ä–µ–ø–æ), –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö yaml-—Ñ–∞–π–ª–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ä–µ–¥—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ ops-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –í–∞–∂–Ω–æ, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±—ã–ª–∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã –∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä—É–µ–º—ã. –í –∫–æ–º–∞–Ω–¥–∞—Ö –ø—Ä–∞–∫—Ç–∏–∫—É—é—Ç code review –¥–∞–∂–µ –¥–ª—è –ø—Ä–∞–≤–æ–∫ –∫–æ–Ω—Ñ–∏–≥–æ–≤. Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫, —Å–ª–µ–¥—É—è —ç—Ç–æ–º—É –ø—Ä–∏–Ω—Ü–∏–ø—É, –¥–æ–±–∏–≤–∞–µ—Ç—Å—è —Ç–æ–≥–æ, —á—Ç–æ –ø—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑ dev –Ω–∞ prod –∫–æ–¥ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è –≤–æ–≤—Å–µ ‚Äî –º–µ–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã. –≠—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç —Ä–∏—Å–∫ –æ—à–∏–±–æ–∫ (–Ω–µ –∑–∞–±—É–¥—É—Ç –ø–æ–º–µ–Ω—è—Ç—å –∫–∞–∫–æ–µ-—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º) –∏ —É—Å–∫–æ—Ä—è–µ—Ç –¥–µ–ø–ª–æ–π, –≤–µ–¥—å –Ω–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –ø–æ–¥ –∫–∞–∂–¥–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ.



---

## ‚ùì 37. –ß—Ç–æ —Ç–∞–∫–æ–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è Blue-Green Deployment –∏ –∫–∞–∫ –æ–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±–µ–∑ –ø—Ä–æ—Å—Ç–æ—è?

    
Blue-Green Deployment ‚Äî —Ç–µ—Ö–Ω–∏–∫–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–π –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –¥–≤–∞ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (–¥–≤–µ –≤–µ—Ä—Å–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è) ‚Äì —É—Å–ª–æ–≤–Ω–æ "—Å–∏–Ω–µ–µ" (—Ç–µ–∫—É—â–∞—è production-–≤–µ—Ä—Å–∏—è) –∏ "–∑–µ–ª—ë–Ω–æ–µ" (–Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è). –í—Å—è –Ω–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –∏–¥—ë—Ç –Ω–∞ "—Å–∏–Ω–µ–µ" –æ–∫—Ä—É–∂–µ–Ω–∏–µ. –ö–æ–≥–¥–∞ –≤—ã—Ö–æ–¥–∏—Ç –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è, –æ–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ "–∑–µ–ª—ë–Ω–æ–º" –æ–∫—Ä—É–∂–µ–Ω–∏–∏: –ø–æ–¥–Ω–∏–º–∞—é—Ç—Å—è —Ç–µ –∂–µ —Å–µ—Ä–≤–∏—Å—ã, –Ω–∞ —Ç–æ–º –∂–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤, –Ω–æ –ø–æ–∫–∞ —á—Ç–æ —Ç—Ä–∞—Ñ–∏–∫ –∫ –Ω–∏–º –Ω–µ –∏–¥—ë—Ç. –ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥–∞ –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Å—Ç–∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∑–µ–ª—ë–Ω–æ–π –≤–µ—Ä—Å–∏–∏ (—É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—Å—Ç–∏–ª–∏—Å—å, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è).

–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞ –∏–ª–∏ DNS: –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ –∑–µ–ª—ë–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ, —Å—Ç–∞–Ω–æ–≤—è—Å—å –Ω–æ–≤–æ–π production-–≤–µ—Ä—Å–∏–µ–π. –°—Ç–∞—Ä–æ–µ "—Å–∏–Ω–µ–µ" –ø–æ–∫–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –∑–∞–ø—É—â–µ–Ω–Ω—ã–º –∫–∞–∫ —Ä–µ–∑–µ—Ä–≤. –ï—Å–ª–∏ –≤–¥—Ä—É–≥ —Å –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π –≤—ã—è–≤–ª—è–µ—Ç—Å—è –∫—Ä–∏—Ç–∏—á–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞, –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –æ—Ç–∫–∞—Ç–∏—Ç—å, –≤–µ—Ä–Ω—É–≤ —Ç—Ä–∞—Ñ–∏–∫ –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ "—Å–∏–Ω–µ–µ" –æ–∫—Ä—É–∂–µ–Ω–∏–µ. –≠—Ç–æ –¥–∞—ë—Ç –ø–æ—á—Ç–∏ –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π rollback –±–µ–∑ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å—Ç–æ—è, –≤–µ–¥—å —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è —É–∂–µ –±—ã–ª–∞ –≤ —Ä–∞–±–æ—á–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏.

–î–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Blue-Green –æ–±—ã—á–Ω–æ –Ω—É–∂–Ω—ã —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã: –¥–≤–∞ –∫–æ–º–ø–ª–µ–∫—Ç–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤ –∏–ª–∏ –¥–≤–∞ –Ω–∞–±–æ—Ä–∞ Pod'–æ–≤ –≤ Kubernetes (–º–æ–∂–Ω–æ –≤ —Ä–∞–∑–Ω—ã—Ö namespace). –≠—Ç–æ –Ω–µ –≤—Å–µ–≥–¥–∞ –¥—ë—à–µ–≤–æ, –Ω–æ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–∏—Å—Ç–µ–º –æ–ø—Ä–∞–≤–¥–∞–Ω–æ. Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –ø—Ä–∏ —Ç–∞–∫–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤–∞–∂–Ω–æ –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: –Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö, —Ç–æ –ª–∏–±–æ —Å—Ö–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –æ–±–µ –≤–µ—Ä—Å–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –≤—Ä–µ–º—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è, –ª–∏–±–æ –Ω—É–∂–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –±–µ–∑ –Ω–∞—Ä—É—à–µ–Ω–∏—è. Blue-Green Deployment —Ü–µ–Ω–∏—Ç—Å—è —Ç–µ–º, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ –∏—Å–ø—ã—Ç—ã–≤–∞—é—Ç –¥–∞—É–Ω—Ç–∞–π–º–∞: –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –∏ —á–∞—Å—Ç–æ –Ω–µ–∑–∞–º–µ—Ç–Ω–æ. –ö–æ–º–∞–Ω–¥–∞ –ø–æ–ª—É—á–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é –≤ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–Ω—ã—Ö –∫ –±–æ–µ–≤—ã–º —É—Å–ª–æ–≤–∏—è—Ö –ø–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ –Ω–∞–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –Ω–µ—ë –≤–µ—Å—å –ø–æ—Ç–æ–∫ –∑–∞–ø—Ä–æ—Å–æ–≤.



---

## ‚ùì 38. –ß—Ç–æ —Ç–∞–∫–æ–µ Canary Deployment –∏ –∫–∞–∫ –æ–Ω —É–º–µ–Ω—å—à–∞–µ—Ç —Ä–∏—Å–∫–∏ –ø—Ä–∏ –≤—ã–ø—É—Å–∫–µ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è?

    
Canary Deployment ‚Äî —ç—Ç–æ –ø–æ—ç—Ç–∞–ø–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–æ–≥–¥–∞ –Ω–∞ –Ω–µ—ë –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ª–∏—à—å –Ω–µ–±–æ–ª—å—à–∞—è —á–∞—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–ª–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤–Ω–∞—á–∞–ª–µ, –∞ –æ—Å—Ç–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å —Ç—Ä–∞—Ñ–∏–∫–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç—Å—è —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–µ–π. –ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ç—Å—ã–ª–∞–µ—Ç –∫ "–∫–∞–Ω–∞—Ä–µ–π–∫–µ –≤ —à–∞—Ö—Ç–µ": –º–∞–ª–µ–Ω—å–∫–∞—è –≥—Ä—É–ø–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–µ—Ä–≤–æ–π "–ª–æ–≤–∏—Ç" –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∑–∞—â–∏—â–µ–Ω–æ –æ—Ç –Ω–æ–≤—ã—Ö –±–∞–≥–æ–≤. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ —ç—Ç–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —Ç–∞–∫: –¥–æ–ø—É—Å—Ç–∏–º, —É –Ω–∞—Å 10 —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ —Å–µ—Ä–≤–∏—Å–∞, –¥–ª—è –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ –º—ã —Å–Ω–∞—á–∞–ª–∞ –∑–∞–ø—É—Å–∫–∞–µ–º 1 —ç–∫–∑–µ–º–ø–ª—è—Ä, –∞ 9 –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ —Å—Ç–∞—Ä–æ–π. –ß–µ—Ä–µ–∑ –º–µ—Ö–∞–Ω–∏–∑–º –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –∏–ª–∏ —Å–µ—Ä–≤–∏—Å-–º–µ—à–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, 5% –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞—á–∏–Ω–∞—é—Ç –∏–¥—Ç–∏ –Ω–∞ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é. –ö–æ–º–∞–Ω–¥–∞ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ —Å–ª–µ–¥–∏—Ç –∑–∞ –º–µ—Ç—Ä–∏–∫–∞–º–∏: –Ω–µ—Ç –ª–∏ —Ä–æ—Å—Ç–∞ –æ—à–∏–±–æ–∫, –Ω–µ —É–≤–µ–ª–∏—á–∏–ª–æ—Å—å –ª–∏ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞, –∫–∞–∫ –≤–µ–¥—ë—Ç —Å–µ–±—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π.

–ï—Å–ª–∏ –ø–æ –ø—Ä–æ—à–µ—Å—Ç–≤–∏–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –≤—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ, —Ä–∞—Å–∫–∞—Ç–∫–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è: –Ω–æ–≤—ã—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–æ–ª—å—à–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 50% –º–æ—â–Ω–æ—Å—Ç–∏ –Ω–∞ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏). –¢–∞–∫ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –≤—ã—Ç–µ—Å–Ω—è–µ—Ç —Å—Ç–∞—Ä—É—é. –ù–æ –µ—Å–ª–∏ –∫–∞–Ω–∞—Ä–µ–µ—á–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ 5% —Ç—Ä–∞—Ñ–∏–∫–∞ –∑–∞–º–µ—Ç–∏–ª–∏ —Ä–æ—Å—Ç 500-–æ—à–∏–±–æ–∫ –∏–ª–∏ –ø–∞–¥–µ–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤), —Ç–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç –∏ –æ—Ç–∫–∞—Ç—ã–≤–∞—é—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è ‚Äî –∫–∞–Ω–∞—Ä–µ–µ—á–Ω—ã–µ –∏–Ω—Å—Ç–∞–Ω—Å—ã –≤—ã–∫–ª—é—á–∞—é—Ç, —Ç—Ä–∞—Ñ–∏–∫ —Å–Ω–æ–≤–∞ –Ω–∞ 100% –∏–¥—ë—Ç –∫ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —É—â–µ—Ä–± –æ—Ç –ø—Ä–æ–±–ª–µ–º—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –º–∞–ª—ã–º –ø—Ä–æ—Ü–µ–Ω—Ç–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∞ –Ω–µ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º–æ–π.

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ Canary Deployment —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä—ã –∏ —Å–µ—Ç–µ–≤—ã–µ –ø—Ä–æ–∫—Å–∏. –í Kubernetes –µ—Å—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ç–∏–ø–∞ Argo Rollouts –∏–ª–∏ Flagger, –∫–æ—Ç–æ—Ä—ã–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É—é—Ç—Å—è —Å Ingress/Service Mesh –∏ —É–º–µ—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é, –ø—Ä–æ–≤–æ–¥—è –∞–Ω–∞–ª–∏–∑ –º–µ—Ç—Ä–∏–∫. Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –≤–∞–∂–Ω–æ –ø—Ä–∏ —ç—Ç–æ–º –ø–æ–∑–∞–±–æ—Ç–∏—Ç—å—Å—è –æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–∏: –±–µ–∑ —Ö–æ—Ä–æ—à–µ–π –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç–∏ —Å–ª–æ–∂–Ω–æ —Å—Ä–∞–≤–Ω–∏—Ç—å, —Å—Ç–∞–ª–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –ª—É—á—à–µ –∏–ª–∏ —Ö—É–∂–µ. –¢–∞–∫–∂–µ –≤ –∫–æ–¥–µ —á–∞—Å—Ç–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç feature flags ‚Äì –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–µ –≤—ã–∫–ª—é—á–∞—Ç–µ–ª–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏. –ï—Å–ª–∏ –Ω–æ–≤—ã–π —Ä–µ–ª–∏–∑ –≤–∫–ª—é—á–∞–µ—Ç –∫—Ä—É–ø–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª, –º–æ–∂–Ω–æ —Å–ø–µ—Ä–≤–∞ –≤—ã–∫–∞—Ç–∏—Ç—å –∫–æ–¥ —Å —Ñ–ª–∞–≥–æ–º "–≤—ã–∫–ª—é—á–µ–Ω–æ" –∏ –≤–∫–ª—é—á–∞—Ç—å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ, —á—Ç–æ–±—ã —Ç–æ–∂–µ –ø—Ä–æ–≤–æ–¥–∏—Ç—å –∫–∞–Ω–∞—Ä–µ–µ—á–Ω—ã–π —Ç–µ—Å—Ç –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é. –í —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç–∏ canary-—Å—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–∞—ë—Ç –±–æ–ª–µ–µ –ø–ª–∞–≤–Ω–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π, –ø–æ–∑–≤–æ–ª—è—è –∫–æ–º–∞–Ω–¥–µ —É–≤–µ—Ä–µ–Ω–Ω–æ –Ω–∞—Ä–∞—â–∏–≤–∞—Ç—å –¥–æ–ª—é –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –æ–Ω–∞ –¥–æ–∫–∞–∑–∞–ª–∞ —Å–≤–æ—é –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –Ω–∞ –º–∞–ª–æ–º —Ç—Ä–∞—Ñ–∏–∫–µ.



---

## ‚ùì 39. –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –ø–æ–Ω—è—Ç–∏–µ –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç–∏ (Observability) –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ –∫–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –ø–æ–º–æ–≥–∞—é—Ç –µ—ë –æ–±–µ—Å–ø–µ—á–∏—Ç—å?

    
–ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –≤–Ω–µ—à–Ω–∏–º –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è–º –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –µ—ë –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –í –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø–æ –¥–∞–Ω–Ω—ã–º –ª–æ–≥–æ–≤, –º–µ—Ç—Ä–∏–∫ –∏ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–æ–∫ (traces) –º–æ–∂–Ω–æ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã: "—á—Ç–æ —Å–µ–π—á–∞—Å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏?" –∏ "–ø–æ—á–µ–º—É —Å–∏—Å—Ç–µ–º–∞ –≤–µ–¥—ë—Ç —Å–µ–±—è —Ç–∞–∫?". –î–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤) –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å —Å—Ç–∞–ª–∞ –∫–ª—é—á–µ–≤—ã–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ–º: –∫–æ–≥–¥–∞ –∑–∞–ø—Ä–æ—Å –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –¥–µ—Å—è—Ç–æ–∫ —Å–µ—Ä–≤–∏—Å–æ–≤, —É–∂–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å –æ–¥–∏–Ω –ª–æ–≥ –∏–ª–∏ –æ–¥–Ω—É –º–µ—Ç—Ä–∏–∫—É ‚Äî –Ω—É–∂–µ–Ω –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –≤–∑–≥–ª—è–¥.

–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏ –≤—ã–¥–µ–ª—è—é—Ç —Ç—Ä–∏ —Å—Ç–æ–ª–ø–∞ –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç–∏: –º–µ—Ç—Ä–∏–∫–∏, –ª–æ–≥–∏ –∏ **—Ç—Ä–µ–π—Å–∏–Ω–≥ (—Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏)**. –ú–µ—Ç—Ä–∏–∫–∏ –∏ –ª–æ–≥–∏ –º—ã —É–∂–µ –æ–±—Å—É–¥–∏–ª–∏: –º–µ—Ç—Ä–∏–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–Ω–∞–≥—Ä—É–∑–∫–∞, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å), –ª–æ–≥–∏ –¥–∞—é—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –∏ –æ—à–∏–±–∫–∏. –¢—Ä–µ–π—Å–∏–Ω–≥ –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç—Ä–µ—Ç—å–µ –∏–∑–º–µ—Ä–µ–Ω–∏–µ ‚Äî —Å–∫–≤–æ–∑–Ω–æ–π –ø—É—Ç—å –∑–∞–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É. –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤—Ä–æ–¥–µ **Jaeger** –∏–ª–∏ **Zipkin** —Å–æ–±–∏—Ä–∞—é—Ç —Ç—Ä–∞—Å—Å—ã: –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–º–µ—á–∞–µ—Ç —Å–≤–æ–∏ –ª–æ–≥-–∑–∞–ø–∏—Å–∏ –∏ –º–µ—Ç—Ä–∏–∫–∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º —Ç—Ä–∞—Å—Å—ã –∏ —à–∞–≥–æ–º (span). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤ –µ–¥–∏–Ω–æ–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π —à–∫–∞–ª–µ –ø—Ä–æ—Å–ª–µ–¥–∏—Ç—å, –∫–∞–∫ –∑–∞–ø—Ä–æ—Å –ø—Ä–æ—à—ë–ª: –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–µ—Ä–≤–∏—Å –ê –≤—ã–∑–≤–∞–ª B, —Ç–æ—Ç ‚Äî C; —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–Ω—è–ª –∫–∞–∂–¥—ã–π —à–∞–≥, –≥–¥–µ –±—ã–ª–∏ –∑–∞–¥–µ—Ä–∂–∫–∏. –î–ª—è Java –µ—Å—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (OpenTelemetry, Brave –∏ –¥—Ä.), –∫–æ—Ç–æ—Ä—ã–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–ø—É–ª—è—Ä–Ω—ã–º–∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞–º–∏ (Spring, JAX-RS) –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–∫–∏–¥—ã–≤–∞—é—Ç —ç—Ç–∏ trace-id –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏.

–î–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥–∞ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —Å—Ç–µ–∫: **—Å–±–æ—Ä –ª–æ–≥–æ–≤** (–Ω–∞–ø—Ä–∏–º–µ—Ä, EFK), **–º–µ—Ç—Ä–∏–∫–∏** (Prometheus + Grafana) –∏ **—Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, Jaeger –∏–ª–∏ Grafana Tempo). –í—Å–µ —ç—Ç–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω—ã: –≤ Grafana –º–æ–∂–Ω–æ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –¥–∞—à–±–æ—Ä–¥, –æ—Ç–∫—É–¥–∞ –ø–æ –∞–Ω–æ–º–∞–ª—å–Ω–æ–π –º–µ—Ç—Ä–∏–∫–µ —Å—Ä–∞–∑—É –ø—Ä–æ–≤–∞–ª–∏—Ç—å—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ª–æ–≥–∏ –∏ —Ç—Ä–µ–π—Å—ã. –í–∞–∂–Ω–∞ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏: Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –¥–æ–ª–∂–µ–Ω –≤–Ω–µ–¥—Ä—è—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π (—Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º), —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏ (—á–µ—Ä–µ–∑ Micrometer –∏–ª–∏ Dropwizard Metrics) –∏ –≤–Ω–µ–¥—Ä—è—Ç—å —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É –≤—ã–∑–æ–≤–æ–≤. –ö–æ–≥–¥–∞ —Å–∏—Å—Ç–µ–º–∞ –Ω–∞–±–ª—é–¥–∞–µ–º–∞, –ø–æ–∏—Å–∫ –ø—Ä–∏—á–∏–Ω –ø—Ä–æ–±–ª–µ–º —É—Å–∫–æ—Ä—è–µ—Ç—Å—è –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ: –≤–º–µ—Å—Ç–æ –¥–æ–ª–≥–∏—Ö –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–π –º–æ–∂–Ω–æ –æ–ø–µ—Ä–µ—Ç—å—Å—è –Ω–∞ –¥–∞–Ω–Ω—ã–µ ‚Äì –≥–¥–µ –∏–º–µ–Ω–Ω–æ –∑–∞—Å—Ç–æ–ø–æ—Ä–∏–ª–æ—Å—å (–ø–æ —Ç—Ä–µ–π—Å—É), –∫–∞–∫–∞—è –æ—à–∏–±–∫–∞ –≤—ã–ø–∞–ª–∞ (–ø–æ –ª–æ–≥–∞–º), –Ω–∞—Å–∫–æ–ª—å–∫–æ —á–∞—Å—Ç–æ (–ø–æ –º–µ—Ç—Ä–∏–∫–∞–º).



---

## ‚ùì 40. –ö–∞–∫ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ Java-—Å–µ—Ä–≤–∏—Å–æ–≤ —Å –ø–æ–º–æ—â—å—é —Å—Ç–µ–∫–∞ ELK/EFK –∏ –∑–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ –∫–æ–º–∞–Ω–¥–µ?


    
–í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –æ–±—ã—á–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç –¥–µ—Å—è—Ç–∫–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ —Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –º–∞—à–∏–Ω–∞—Ö –∏–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö, –∏ —Å–æ–±–∏—Ä–∞—Ç—å –ª–æ–≥–∏ –≤—Ä—É—á–Ω—É—é —Å –∫–∞–∂–¥–æ–≥–æ –Ω–µ—É–¥–æ–±–Ω–æ –∏ –Ω–µ–Ω–∞–¥—ë–∂–Ω–æ. –°—Ç–µ–∫ **ELK (Elasticsearch, Logstash, Kibana)** –∏–ª–∏ –µ–≥–æ –≤–∞—Ä–∏–∞—Ü–∏—è **EFK (—Å Fluentd/FluentBit –≤–º–µ—Å—Ç–æ Logstash)** —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –ø—É—Ç—ë–º —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–∏—à—É—Ç –ª–æ–≥–∏ –∫–∞–∫ –æ–±—ã—á–Ω–æ (–≤ –∫–æ–Ω—Å–æ–ª—å stdout –∏–ª–∏ –≤ —Ñ–∞–π–ª—ã). –ê–≥–µ–Ω—Ç —Å–±–æ—Ä–∞ –ª–æ–≥–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Filebeat –∏–ª–∏ Fluent Bit) —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ –∫–∞–∂–¥–æ–º —É–∑–ª–µ –∏–ª–∏ –∫–∞–∫ sidecar –≤ –ø–æ–¥–µ Kubernetes –∏ —Å–ª–µ–¥–∏—Ç –∑–∞ –ø–æ—è–≤–ª–µ–Ω–∏–µ–º –Ω–æ–≤—ã—Ö —Å—Ç—Ä–æ–∫ –≤ –ª–æ–≥-—Ñ–∞–π–ª–∞—Ö (–∏–ª–∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–æ—Ç–æ–∫ stdout). –û–Ω –ø–æ–º–µ—á–∞–µ—Ç –∫–∞–∂–¥—É—é –∑–∞–ø–∏—Å—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ (–∏—Å—Ç–æ—á–Ω–∏–∫, —Å–µ—Ä–≤–∏—Å, –≤—Ä–µ–º—è) –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ —Å–∏—Å—Ç–µ–º—É —Ö—Ä–∞–Ω–µ–Ω–∏—è ‚Äî —á–∞—â–µ –≤—Å–µ–≥–æ **Elasticsearch**, –∫–æ—Ç–æ—Ä–∞—è —É–º–µ–µ—Ç –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –±—ã—Å—Ç—Ä–æ –ø–æ –Ω–∏–º –∏—Å–∫–∞—Ç—å.

–î–∞–ª–µ–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏ –∏–Ω–∂–µ–Ω–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç **Kibana** (–≤ —Å–ª—É—á–∞–µ ELK) –∫–∞–∫ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –ª–æ–≥–æ–≤. –ú–æ–∂–Ω–æ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏ –ø–æ —Å–µ—Ä–≤–∏—Å—É, –ø–æ —É—Ä–æ–≤–Ω—é ('ERROR', 'WARN'), –ø–æ –∫–ª—é—á–µ–≤–æ–º—É —Å–ª–æ–≤—É –∏–ª–∏ –∞—Ç—Ä–∏–±—É—Ç—É. –ú–æ–∂–Ω–æ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –¥–∞—à–±–æ—Ä–¥—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ –≤ —á–∞—Å –ø–æ –∫–∞–∂–¥–æ–º—É —Å–µ—Ä–≤–∏—Å—É. –ì–ª–∞–≤–Ω–æ–µ ‚Äî –≤—Å–µ –ª–æ–≥–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ –∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É—Å–∫–æ—Ä—è–µ—Ç –æ—Ç–ª–∞–¥–∫—É –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤: –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∑–∞—Ö–æ–¥–∏—Ç—å –Ω–∞ –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–µ—Ä –∏ —á–∏—Ç–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã, –∫–æ–º–∞–Ω–¥–∞ —Å—Ä–∞–∑—É –≤–∏–¥–∏—Ç –æ–±—â—É—é –∫–∞—Ä—Ç–∏–Ω—É. –û—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ –º–µ–∂—Å–µ—Ä–≤–∏—Å–Ω—ã—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è—Ö: –ø–æ trace-id –º–æ–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å —Ü–µ–ø–æ—á–∫—É –ª–æ–≥–æ–≤ –∏–∑ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, –æ–±—Ä–∞–±–æ—Ç–∞–≤—à–∏—Ö –æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å.

–î–ª—è Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç —Ñ–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤ –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, JSON): —Ç–∞–∫ –ø–∞—Ä—Å–µ—Ä—É Fluentd/Logstash –ª–µ–≥—á–µ –∏–∑–≤–ª–µ—á—å –ø–æ–ª—è (—É—Ä–æ–≤–µ–Ω—å, –∫–ª–∞—Å—Å, —Å–æ–æ–±—â–µ–Ω–∏–µ, trace-id, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏ —Ç.–ø.) –∏ –∑–∞–ø–∏—Å–∞—Ç—å –∏—Ö –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –≤ Elasticsearch. –¢–æ–≥–¥–∞ –≤ Kibana –º–æ–∂–Ω–æ —Å—Ç—Ä–æ–∏—Ç—å –≥–∏–±–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä: 'service: payment AND level: ERROR AND exception: NullPointerException'). –ö–æ–º–∞–Ω–¥–∞ DevOps –æ–±—ã—á–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É ELK, –∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ ‚Äî —Å–ª–µ–¥—è—Ç, —á—Ç–æ–±—ã –∏—Ö –ª–æ–≥–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã –∏ –Ω–µ —á—Ä–µ–∑–º–µ—Ä–Ω—ã –ø–æ –æ–±—ä—ë–º—É. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ EFK/ELK —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–æ—Ç—ä–µ–º–ª–µ–º—ã–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç–∏: –±–µ–∑ –Ω–µ–≥–æ —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è –≤ –ø—Ä–æ–±–ª–µ–º–∞—Ö ‚Äú–≤—Å–ª–µ–ø—É—é‚Äù –ø–æ—á—Ç–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ, –∞ —Å –Ω–∏–º ‚Äî –∫–∞–∂–¥—ã–π —É—á–∞—Å—Ç–Ω–∏–∫ –∫–æ–º–∞–Ω–¥—ã –º–æ–∂–µ—Ç —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—ã–µ —Å–≤–µ–¥–µ–Ω–∏—è –æ —Ä–∞–±–æ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.



---

## ‚ùì 41. –ö–∞–∫ —Ç—ã –Ω–∞—Ö–æ–¥–∏—à—å –Ω—É–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –ª–æ–≥–∞—Ö –∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä—É–µ—à—å —Ç–µ–∫—Å—Ç –≤ Linux? –†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ **grep**, **tail**, less –∏ –ø–æ–¥–æ–±–Ω—ã—Ö —É—Ç–∏–ª–∏—Ç.


–ü–µ—Ä–≤–æ–µ, —á—Ç–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–∞ —É–º –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞ –≤ Linux ‚Äì —ç—Ç–æ –∫–æ–º–∞–Ω–¥–∞ **grep**. –° –µ—ë –ø–æ–º–æ—â—å—é —Ç—ã –º–æ–∂–µ—à—å –∏—Å–∫–∞—Ç—å —Å—Ç—Ä–æ–∫–∏, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω, –≤ –≤—ã–≤–æ–¥–µ –∫–æ–º–∞–Ω–¥ –∏–ª–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º —Ñ–∞–π–ª–æ–≤. **grep** –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–¥–∞–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –ø–æ–∏—Å–∫–∞. –ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ñ–ª–∞–≥–∏ -i –¥–ª—è –∏–≥–Ω–æ—Ä–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞, -n —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å –Ω–æ–º–µ—Ä–∞ —Å—Ç—Ä–æ–∫, –∏ -R, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –ø—Ä–æ–π—Ç–∏—Å—å –ø–æ —Ñ–∞–π–ª–∞–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö.

–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –æ–±—ã—á–Ω–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç –∫–æ–º–∞–Ω–¥—É **tail** —Å –æ–ø—Ü–∏–µ–π -f (follow). –û–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ —Ñ–∞–π–ª–∞ –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç –≤—ã–≤–æ–¥ –ø–æ –º–µ—Ä–µ –ø–æ—è–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π ‚Äì –æ—á–µ–Ω—å —É–¥–æ–±–Ω–æ, –∫–æ–≥–¥–∞ —Ö–æ—á–µ—à—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ª–æ–≥ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ¬´–Ω–∞ –ª–µ—Ç—É¬ª. –ï—Å–ª–∏ –∂–µ –Ω—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –±—ã—Å—Ç—Ä–æ –≥–ª—è–Ω—É—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ–Ω—Ü–∞ –∏–ª–∏ –Ω–∞—á–∞–ª–∞ —Ñ–∞–π–ª–∞, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **tail** –∏–ª–∏ head –±–µ–∑ -f –¥–ª—è –≤—ã–≤–æ–¥–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —á–∏—Å–ª–∞ —Å—Ç—Ä–æ–∫. –ê –ø—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ –±–æ–ª—å—à–∏—Ö –ª–æ–≥–æ–≤ –≤—ã—Ä—É—á–∞–µ—Ç —É—Ç–∏–ª–∏—Ç–∞ less: –æ–Ω–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ñ–∞–π–ª –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ, –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞—Ç—å –≤–≤–µ—Ä—Ö-–≤–Ω–∏–∑ –∏ –∏—Å–∫–∞—Ç—å –≤–Ω—É—Ç—Ä–∏ (–Ω–∞–∂–∞–≤ "/" –∏ –≤–≤–µ–¥—è –Ω—É–∂–Ω—ã–π —Ç–µ–∫—Å—Ç).

–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –≤—Å–µ —ç—Ç–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —á–∞—Å—Ç–æ –∫–æ–º–±–∏–Ω–∏—Ä—É—é—Ç—Å—è. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å `**tail** -f application.log | **grep** "ERROR"`, —á—Ç–æ–±—ã –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –≤–∏–¥–µ—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ —Å—Ç—Ä–æ—á–∫–∏ –ª–æ–≥–∞, –≥–¥–µ –µ—Å—Ç—å —Å–ª–æ–≤–æ "ERROR". –ò–ª–∏, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ user ID –≤–æ –º–Ω–æ–∂–µ—Å—Ç–≤–µ –ª–æ–≥-—Ñ–∞–π–ª–æ–≤, —Ç—ã –º–æ–∂–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π **grep**: `**grep** -R "userId=12345" /var/log/myapp`, –∏ –æ–Ω –ø–µ—Ä–µ–±–µ—Ä—ë—Ç —Ñ–∞–π–ª—ã –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –≤—ã–≤–æ–¥—è —Å—Ç—Ä–æ–∫–∏ —Å —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è–º–∏. –¢–∞–∫–∏–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥ shell –ø–æ–∑–≤–æ–ª—è—é—Ç –±—ã—Å—Ç—Ä–æ –≤—ã—á–ª–µ–Ω–∏—Ç—å –Ω—É–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ –ø–æ—Ç–æ–∫–æ–≤ –ª–æ–≥–æ–≤, –Ω–µ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—è –∏—Ö –≤—Ä—É—á–Ω—É—é –ø–æ–ª–Ω–æ—Å—Ç—å—é.



---

## ‚ùì 42. –û–±—ä—è—Å–Ω–∏, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (permissions) –Ω–∞ —Ñ–∞–π–ª—ã –≤ Linux. –ß—Ç–æ –æ–∑–Ω–∞—á–∞—é—Ç r, w, x –¥–ª—è —Ñ–∞–π–ª–æ–≤ –∏ –ø–∞–ø–æ–∫, –∏ –∫–∞–∫ –∏—Ö –∏–∑–º–µ–Ω–∏—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –ø–æ–º–æ—â—å—é **chmod**?


–í Linux —É –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞ –∏ –ø–∞–ø–∫–∏ –µ—Å—Ç—å –Ω–∞–±–æ—Ä –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è —Ç—Ä—ë—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π: –≤–ª–∞–¥–µ–ª–µ—Ü (owner), –≥—Ä—É–ø–ø–∞ (group) –∏ –æ—Å—Ç–∞–ª—å–Ω—ã–µ (others). –ü—Ä–∞–≤–∞ –æ–±–æ–∑–Ω–∞—á–∞—é—Ç—Å—è –±—É–∫–≤–∞–º–∏ r, w, x. r (read, —á—Ç–µ–Ω–∏–µ) –¥–ª—è —Ñ–∞–π–ª–∞ –æ–∑–Ω–∞—á–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —á–∏—Ç–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ, –∞ –¥–ª—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ ‚Äî –≤–∏–¥–µ—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –≤–Ω—É—Ç—Ä–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã–ø–æ–ª–Ω—è—Ç—å **ls**). w (write, –∑–∞–ø–∏—Å—å) –¥–ª—è —Ñ–∞–π–ª–∞ –¥–∞—ë—Ç –ø—Ä–∞–≤–æ –∏–∑–º–µ–Ω—è—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ, –∞ –¥–ª—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ ‚Äî —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ –∏ —É–¥–∞–ª—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã –≤ –Ω–µ–π. x (execute, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ) –¥–ª—è —Ñ–∞–π–ª–∞ –æ–∑–Ω–∞—á–∞–µ—Ç –ø—Ä–∞–≤–æ –∑–∞–ø—É—Å–∫–∞—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª –∫–∞–∫ –ø—Ä–æ–≥—Ä–∞–º–º—É –∏–ª–∏ —Å–∫—Ä–∏–ø—Ç, –∞ –¥–ª—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ ‚Äî –ø—Ä–∞–≤–æ –∑–∞—Ö–æ–¥–∏—Ç—å –≤–Ω—É—Ç—Ä—å (—Ç–æ –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ—ë –≤ –ø—É—Ç–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä –∑–∞–π—Ç–∏ –∫–æ–º–∞–Ω–¥–æ–π **cd**).

–ü—Ä–∞–≤–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π **ls** -l, –≥–¥–µ –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫–∏ —Ç—ã –≤–∏–¥–∏—à—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ `-rwxr-x--x`. –≠—Ç–æ –∏ –µ—Å—Ç—å –Ω–∞–±–æ—Ä –ø—Ä–∞–≤: –ø–µ—Ä–≤—ã–µ —Ç—Ä–∏ —Å–∏–º–≤–æ–ª–∞ –ø–æ—Å–ª–µ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ –≤–ª–∞–¥–µ–ª—å—Ü—É, —Å–ª–µ–¥—É—é—â–∏–µ —Ç—Ä–∏ ‚Äî –∫ –≥—Ä—É–ø–ø–µ, –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Ç—Ä–∏ ‚Äî –∫ –æ—Å—Ç–∞–ª—å–Ω—ã–º. –í –ø—Ä–∏–≤–µ–¥—ë–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã rwx (–≤–ª–∞–¥–µ–ª–µ—Ü –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å, –ø–∏—Å–∞—Ç—å –∏ –∏—Å–ø–æ–ª–Ω—è—Ç—å), –¥–ª—è –≥—Ä—É–ø–ø—ã r-x (—á–ª–µ–Ω—ã –≥—Ä—É–ø–ø—ã –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å, –Ω–æ –Ω–µ –ø–∏—Å–∞—Ç—å), –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö --x (–º–æ–≥—É—Ç —Ç–æ–ª—å–∫–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å). –ï—Å–ª–∏ —Å–∏–º–≤–æ–ª –Ω–∞ –º–µ—Å—Ç–µ r, w –∏–ª–∏ x –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–∑–∞–º–µ–Ω—ë–Ω –Ω–∞ -), –∑–Ω–∞—á–∏—Ç —ç—Ç–æ –ø—Ä–∞–≤–æ –Ω–µ –≤—ã–¥–∞–Ω–æ.

–ò–∑–º–µ–Ω—è—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –º–æ–∂–Ω–æ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã **chmod**. –ï—Å—Ç—å –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–∞: —Å–∏–º–≤–æ–ª—å–Ω—ã–π –∏ —á–∏—Å–ª–æ–≤–æ–π. –°–∏–º–≤–æ–ª—å–Ω—ã–π ‚Äî —ç—Ç–æ –∫–æ–≥–¥–∞ —Ç—ã —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ—à—å, –∫–æ–º—É –∏ –∫–∞–∫–∏–µ –ø—Ä–∞–≤–∞ –¥–æ–±–∞–≤–∏—Ç—å –∏–ª–∏ —É–±—Ä–∞—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä `**chmod** u+x script.**sh**` –¥–æ–±–∞–≤–∏—Ç –≤–ª–∞–¥–µ–ª—å—Ü—É —Ñ–∞–π–ª–∞ –ø—Ä–∞–≤–æ –Ω–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ (–Ω–µ —Ç—Ä–æ–≥–∞—è –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞). –ò–ª–∏ `**chmod** go-w file.txt` —É–±–µ—Ä—ë—Ç –ø—Ä–∞–≤–æ –Ω–∞ –∑–∞–ø–∏—Å—å –¥–ª—è –≥—Ä—É–ø–ø—ã –∏ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö. –ß–∏—Å–ª–æ–≤–æ–π —Å–ø–æ—Å–æ–± –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–∫—Ç–∞–ª—å–Ω—ã–µ —á–∏—Å–ª–∞, –≥–¥–µ –∫–∞–∂–¥–∞—è —Ü–∏—Ñ—Ä–∞ ‚Äî —ç—Ç–æ —Å—É–º–º–∞ –±–∏—Ç–æ–≤ r=4, w=2, x=1 –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, `**chmod** 750 program` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –ø—Ä–∞–≤–∞ rwx –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ (4+2+1=7), r-x –¥–ª—è –≥—Ä—É–ø–ø—ã (4+0+1=5) –∏ –Ω–∏—á–µ–≥–æ –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö (0). –í —Ä–µ–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ —á–∞—Å—Ç–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –¥–µ–ª–∞—Ç—å `**chmod** +x` —Å–∫—Ä–∏–ø—Ç–∞–º, —á—Ç–æ–±—ã –æ–Ω–∏ —Å—Ç–∞–ª–∏ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º–∏, –∏–ª–∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –ø—Ä–∞–≤–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –Ω–∞ 600, —á—Ç–æ–±—ã —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü –º–æ–≥ –∏—Ö —á–∏—Ç–∞—Ç—å –∏ –∏–∑–º–µ–Ω—è—Ç—å.



---

## ‚ùì 43. –ß—Ç–æ —Ç–∞–∫–æ–µ –ø—Ä–æ—Ü–µ—Å—Å –∏ –ø–æ—Ç–æ–∫ (thread) –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ Linux? –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ —É–∑–Ω–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ —Ä–µ—Å—É—Ä—Å–æ–≤ –æ–Ω–∏ –ø–æ—Ç—Ä–µ–±–ª—è—é—Ç?


–í Linux (–∏ –≤–æ–æ–±—â–µ –≤ Unix-–ø–æ–¥–æ–±–Ω—ã—Ö –û–°) –ø—Ä–æ—Ü–µ—Å—Å ‚Äì —ç—Ç–æ —ç–∫–∑–µ–º–ø–ª—è—Ä –∑–∞–ø—É—â–µ–Ω–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã. –£ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –µ—Å—Ç—å —Å–≤–æ—ë –∞–¥—Ä–µ—Å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ (–ø–∞–º—è—Ç—å), —Å–≤–æ–∏ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã —Ñ–∞–π–ª–æ–≤, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ —Ç.–¥. –ü–æ—Ç–æ–∫ (thread) ‚Äì —ç—Ç–æ –∫–∞–∫ –±—ã "–ª—ë–≥–∫–∏–π" –ø—Ä–æ—Ü–µ—Å—Å –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞: –ø–æ—Ç–æ–∫–∏ –æ–¥–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–∞–∑–¥–µ–ª—è—é—Ç –æ–±—â–µ–µ –∞–¥—Ä–µ—Å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏ —Ä–µ—Å—É—Ä—Å—ã, –Ω–æ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ (–∏–ª–∏ –ø—Å–µ–≤–¥–æ–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –Ω–∞ –æ–¥–Ω–æ–º —è–¥—Ä–µ). –ü—Ä–æ—â–µ –≥–æ–≤–æ—Ä—è, –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤ –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ä–∞–∑–Ω—ã–µ —á–∞—Å—Ç–∏ –∑–∞–¥–∞—á–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É—è –æ–±—â–∏–µ –¥–∞–Ω–Ω—ã–µ. –° —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è Linux, –ø–æ—Ç–æ–∫–∏ —á–∞—Å—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏ (tasks) –≤ —è–¥—Ä–µ, –∏ —É—Ç–∏–ª–∏—Ç—ã –º–æ–≥—É—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏—Ö –Ω–∞—Ä—è–¥—É —Å –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –≤—ã–≤–æ–¥–µ **ps** –∏–ª–∏ **top** –ø–æ—Ç–æ–∫–∏ –º–æ–≥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∫–∞–∫ –ø—Ä–æ—Ü–µ—Å—Å—ã —Å –æ–±—â–∏–º PID –∏ —Ä–∞–∑–Ω—ã–º–∏ TID).

–ß—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É `**ps**`. –ù–∞–ø—Ä–∏–º–µ—Ä, `**ps** -ef` –ø–æ–∫–∞–∂–µ—Ç –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –≤–ª–∞–¥–µ–ª—å—Ü–µ, PID –∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π. –ö–æ–º–∞–Ω–¥–∞ `**ps** aux` –¥–µ–ª–∞–µ—Ç —Ç–æ –∂–µ —Å–∞–º–æ–µ –≤ —á—É—Ç—å –¥—Ä—É–≥–æ–º —Ñ–æ—Ä–º–∞—Ç–µ. –ï—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –º–Ω–æ–≥–æ, –∏—Ö –≤—ã–≤–æ–¥ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ—Ç—Å—è, –ø–æ—ç—Ç–æ–º—É —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫–æ–Ω–≤–µ–π–µ—Ä —Å less: `**ps** -ef | less`. –î–ª—è –±–æ–ª–µ–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –µ—Å—Ç—å —É—Ç–∏–ª–∏—Ç—ã `**top**` –∏–ª–∏ –µ—ë —É–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è `**htop**`: –æ–Ω–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç —Å–ø–∏—Å–æ–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏, –ø–æ–∫–∞–∑—ã–≤–∞—è, —Å–∫–æ–ª—å–∫–æ CPU –∏ –ø–∞–º—è—Ç–∏ –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç –∫–∞–∂–¥—ã–π –ø—Ä–æ—Ü–µ—Å—Å. –í **htop** —É–¥–æ–±–Ω–æ, —á—Ç–æ –æ–Ω —Ü–≤–µ—Ç–æ–º –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Ä–µ—Å—É—Ä—Å–æ–≤, –∞ —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ—Ç–æ–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ (–µ—Å–ª–∏ –Ω–∞–∂–∞—Ç—å F2 –∏ –≤–∫–ª—é—á–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∏—Ç–µ–π).

–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —É–∑–Ω–∞—Ç—å, –∫—Ç–æ "–µ—Å—Ç" —Ä–µ—Å—É—Ä—Å—ã, –ø–µ—Ä–≤—ã–º –¥–µ–ª–æ–º —Å–º–æ—Ç—Ä—è—Ç –Ω–∞ CPU% –∏ MEM% –≤ **top**/**htop**. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —Ç–≤–æ—ë Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –∫–∞–∫ –ø—Ä–æ—Ü–µ—Å—Å, **top** –ø–æ–∫–∞–∂–µ—Ç –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å **java** –∏ –ø—Ä–æ—Ü–µ–Ω—Ç CPU, –∫–æ—Ç–æ—Ä—ã–π –æ–Ω –±–µ—Ä—ë—Ç. –ï—Å–ª–∏ —É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –º–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–æ–≤, –≤ **top** —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–∏–¥–Ω–æ –∫–∞–∫ —Å—É–º–º–∞—Ä–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –æ–¥–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ, –ª–∏–±–æ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –≤ —Ä–µ–∂–∏–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∏—Ç–µ–π (–∫–∞–∂–¥—ã–π –ø–æ—Ç–æ–∫ –±—É–¥–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π). –î–ª—è –ø–∞–º—è—Ç–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É `free -m`, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –æ–±—â—É—é —Å–∏—Ç—É–∞—Ü–∏—é —Å –ø–∞–º—è—Ç—å—é (—Å–∫–æ–ª—å–∫–æ –∑–∞–Ω—è—Ç–æ, —Å–≤–æ–±–æ–¥–Ω–æ), –∞ **ps** –∏–ª–∏ **top** –ø–æ–º–æ–≥—É—Ç –Ω–∞–π—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, –∫–æ—Ç–æ—Ä—ã–π –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç –º–Ω–æ–≥–æ –ø–∞–º—è—Ç–∏. –í –ø—Ä–∞–∫—Ç–∏–∫–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è Linux —Å–æ—á–µ—Ç–∞–Ω–∏–µ —ç—Ç–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–Ω–∞—á–∞–ª–∞ –≤—ã—è–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, –∞ –∑–∞—Ç–µ–º —É–∂–µ —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è, —á—Ç–æ –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —ç—Ç–æ Java, –¥–∞–ª—å—à–µ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–ª–∏ —Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è).



---

## ‚ùì 44. –ö–∞–∫ —Ç—ã –±—É–¥–µ—à—å –≤—ã—è—Å–Ω—è—Ç—å, –ø–æ—á–µ–º—É —Å–µ—Ä–≤–µ—Ä –Ω–∞ Linux –Ω–∞—á–∞–ª —Ç–æ—Ä–º–æ–∑–∏—Ç—å –∏–ª–∏ –∏—Å–ø—ã—Ç—ã–≤–∞—Ç—å –≤—ã—Å–æ–∫—É—é –Ω–∞–≥—Ä—É–∑–∫—É? –ö–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –ø–æ–¥—Ö–æ–¥—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, —á—Ç–æ –Ω–∞–≥—Ä—É–∂–∞–µ—Ç CPU –∏–ª–∏ –ø–∞–º—è—Ç—å?


–ö–æ–≥–¥–∞ Linux-—Å–µ—Ä–≤–µ—Ä –Ω–∞—á–∏–Ω–∞–µ—Ç —Ç–æ—Ä–º–æ–∑–∏—Ç—å, –ø–µ—Ä–≤–æ–µ, —á—Ç–æ –Ω–∞–¥–æ –¥–µ–ª–∞—Ç—å ‚Äì –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∑–∞–≥—Ä—É–∑–∫—É CPU –∏ –ø–∞–º—è—Ç–∏ —Å –ø–æ–º–æ—â—å—é **top** –∏–ª–∏ **htop**. –≠—Ç–∏ —É—Ç–∏–ª–∏—Ç—ã —Å—Ä–∞–∑—É –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, –µ—Å–ª–∏ –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å —Å—ä–µ–¥–∞–µ—Ç 100% –æ–¥–Ω–æ–≥–æ —è–¥—Ä–∞ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∞–∫—Ç–∏–≤–Ω–æ –Ω–∞–≥—Ä—É–∂–∞—é—Ç —Å–∏—Å—Ç–µ–º—É. –í **top** —Ç–∞–∫–∂–µ –≤–∏–¥–Ω–æ load average ‚Äì —Å—Ä–µ–¥–Ω—é—é –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–∏—Å—Ç–µ–º—É –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è. –ï—Å–ª–∏ load average —Å–∏–ª—å–Ω–æ –≤—ã—à–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —è–¥–µ—Ä, –∏ –≤ —Å–ø–∏—Å–∫–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤–∏–¥–Ω—ã –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –Ω–∞ 100% CPU, –∑–Ω–∞—á–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–µ –≤—Ä–µ–º—è –∑–∞–±–∏—Ç–æ. –¢–æ–≥–¥–∞ —Å–º–æ—Ç—Ä–∏, —á—Ç–æ —ç—Ç–æ –∑–∞ –ø—Ä–æ—Ü–µ—Å—Å (–ø–æ –∏–º–µ–Ω–∏ –∏–ª–∏ PID) ‚Äì –≤–æ–∑–º–æ–∂–Ω–æ, —ç—Ç–æ –Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ; –¥–∞–ª—å—à–µ –∑–∞–ø—É—Å–∫–∞–π –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–ª–∏ –∏–∑—É—á–∞–π, –ø–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ –æ–Ω–æ –Ω–∞–≥—Ä—É–∂–∞–µ—Ç CPU.

–ï—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –Ω–µ –Ω–∞ –º–∞–∫—Å–∏–º—É–º–µ, —Å–ª–µ–¥—É—é—â–∞—è –≥–∏–ø–æ—Ç–µ–∑–∞ ‚Äì –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø–∞–º—è—Ç—å—é –∏–ª–∏ –¥–∏—Å–∫–æ–º. –ü—Ä–æ–≤–µ—Ä—è—é, –Ω–µ —É—à—ë–ª –ª–∏ —Å–µ—Ä–≤–µ—Ä –≤ swap (—Ç–æ –µ—Å—Ç—å –Ω–µ –Ω–∞—á–∞–ª –ª–∏ –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–ø-—Ñ–∞–π–ª): –≤ –≤—ã–≤–æ–¥–µ **top** –≤–∏–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º swap, –∏–ª–∏ –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å `free -m`, —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, —Å–∫–æ–ª—å–∫–æ –ø–∞–º—è—Ç–∏ —Å–≤–æ–±–æ–¥–Ω–æ –∏ —Å–∫–æ–ª—å–∫–æ –∑–∞–Ω—è—Ç–æ swap‚Äô–æ–º. –ö–æ–≥–¥–∞ –ø–∞–º—è—Ç–∏ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç, —Å–∏—Å—Ç–µ–º–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç –≤—ã–≥—Ä—É–∂–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞ –¥–∏—Å–∫, —á—Ç–æ —Å–∏–ª—å–Ω–æ —Ç–æ—Ä–º–æ–∑–∏—Ç —Ä–∞–±–æ—Ç—É. –ï—Å–ª–∏ –≤–∏–∂—É, —á—Ç–æ –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è swap –∏ –ø–∞–º—è—Ç—å –∑–∞–±–∏—Ç–∞ ‚Äì –∑–Ω–∞—á–∏—Ç, –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å, –≤–æ–∑–º–æ–∂–Ω–æ, —Ç–µ—á—ë—Ç –ø–æ –ø–∞–º—è—Ç–∏ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ RAM. –¢–æ–≥–¥–∞ –∏—â—É, –∫—Ç–æ —Å–∞–º—ã–π "—Ç—è–∂—ë–ª—ã–π" –ø–æ –ø–∞–º—è—Ç–∏ (–æ–ø—è—Ç—å –∂–µ, –≤ **top** –º–æ–∂–Ω–æ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –ø–∞–º—è—Ç–∏, –Ω–∞–∂–∞–≤ Shift+M). –í —Ç–∞–∫–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏ –Ω–∞–¥–æ –ª–∏–±–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ —ç—Ç–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É—Å—Ç—Ä–∞–Ω–∏—Ç—å —É—Ç–µ—á–∫—É), –ª–∏–±–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–∞–º—è—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

–ï—â—ë –æ–¥–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ —Ç–æ—Ä–º–æ–∑–æ–≤ ‚Äì –ø—Ä–æ–±–ª–µ–º—ã —Å –¥–∏—Å–∫–æ–º (I/O). –ï—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å—ã –∂–¥—É—Ç –æ–ø–µ—Ä–∞—Ü–∏–π –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞, CPU –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω, –Ω–æ —Å–∏—Å—Ç–µ–º–∞ –≤—Å—ë —Ä–∞–≤–Ω–æ –º–µ–¥–ª–µ–Ω–Ω–∞—è. –ü—Ä–∏–∑–Ω–∞–∫ ‚Äì –≤—ã—Å–æ–∫–∏–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å wa (I/O wait) –≤ **top** (—Å—Ç–æ–ª–±–µ—Ü wa –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è –¥–∏—Å–∫–∞). –¢—É—Ç –≤—ã—Ä—É—á–∞–µ—Ç —É—Ç–∏–ª–∏—Ç–∞ `iostat` (–∏–∑ –ø–∞–∫–µ—Ç–∞ sysstat): `iostat -x 1` –ø–æ–∫–∞–∂–µ—Ç, –Ω–∞—Å–∫–æ–ª—å–∫–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏—Å–∫–∏, –µ—Å—Ç—å –ª–∏ –±–æ–ª—å—à–æ–π `%util` (–ø—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∏—Å–∫–∞) –∏ –≤—ã—Å–æ–∫–∞—è –ª–∏ –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (–≤ –ø–æ–ª–µ await). –ï—Å–ª–∏ –¥–∏—Å–∫ "–∑–∞–±–∏—Ç" –ø–æ I/O (100% util, –±–æ–ª—å—à–∏–µ await), —Ç–æ —É–∑–∫–∏–º –º–µ—Å—Ç–æ–º —è–≤–ª—è–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è ‚Äì –Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–¥—ë—Ç –º–Ω–æ–≥–æ –æ–ø–µ—Ä–∞—Ü–∏–π –∑–∞–ø–∏—Å–∏/—á—Ç–µ–Ω–∏—è, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –æ–Ω–∞ –Ω–µ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è. –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –ø–æ—Å–º–æ—Ç—Ä–∏, –∫–∞–∫–æ–π –ø—Ä–æ—Ü–µ—Å—Å –∞–∫—Ç–∏–≤–Ω–æ –ø–∏—à–µ—Ç –∏–ª–∏ —á–∏—Ç–∞–µ—Ç (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `iotop` –¥–ª—è —ç—Ç–æ–≥–æ), –∏ —Ä–µ—à–∞–ª –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–∏—Ç—É–∞—Ü–∏–∏ ‚Äì –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã–Ω–µ—Å—Ç–∏ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–π –¥–∏—Å–∫/SSD, –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—é, –ª–∏–±–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–µ "–≤–∞–ª–∏—Ç" –ª–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–º–∏ –∑–∞–ø–∏—Å—è–º–∏. –í —Ü–µ–ª–æ–º –º–µ—Ç–æ–¥–∏–∫–∞ —Ç–∞–∫–∞—è: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å CPU, –ø–∞–º—è—Ç—å, –¥–∏—Å–∫ (–∏ –∑–∞–æ–¥–Ω–æ —Å–µ—Ç—å, –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤) –∏ –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞—Ç—å, –≥–¥–µ "–±—É—Ç—ã–ª–æ—á–Ω–æ–µ –≥–æ—Ä–ª—ã—à–∫–æ", –∞ —É–∂–µ –ø–æ—Ç–æ–º —É—Å—Ç—Ä–∞–Ω—è—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –ø—Ä–∏—á–∏–Ω—É.



---

## ‚ùì 45. –í —á—ë–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É —Å–∏–º–≤–æ–ª—å–Ω–æ–π (soft) —Å—Å—ã–ª–∫–æ–π –∏ –∂—ë—Å—Ç–∫–æ–π —Å—Å—ã–ª–∫–æ–π –≤ Linux? –ö–æ–≥–¥–∞ —Ç—ã –∫–∞–∫—É—é –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –∏ –∫–∞–∫ –∏—Ö —Å–æ–∑–¥–∞—Ç—å?


–°–∏–º–≤–æ–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ (symlink, –æ–Ω–∞ –∂–µ –º—è–≥–∫–∞—è —Å—Å—ã–ª–∫–∞) ‚Äî —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ—Å—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –¥—Ä—É–≥–æ–π —Ñ–∞–π–ª –∏–ª–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø–æ –ø—É—Ç–∏. –ü—Ä–æ—â–µ –≥–æ–≤–æ—Ä—è, —ç—Ç–æ –∫–∞–∫ —è—Ä–ª—ã–∫ –∏–ª–∏ shortcut: –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ —Å–∏–º–≤–æ–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–∞–¥—Ä–µ—Å—É–µ—Ç —Ç–µ–±—è –Ω–∞ —Ç–æ—Ç –ø—É—Ç—å, –∫–æ—Ç–æ—Ä—ã–π –≤ –Ω–µ–π –∑–∞–ø–∏—Å–∞–Ω. –ï—Å–ª–∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å, —Å–∏–º–≤–æ–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ "–æ–±–ª–æ–º–∞–µ—Ç—Å—è" (—Å—Ç–∞–Ω–µ—Ç –±–∏—Ç–æ–π), –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∞ —Ö—Ä–∞–Ω–∏—Ç –ø—É—Ç—å, –∞ –ø–æ —Ç–æ–º—É –ø—É—Ç–∏ —É–∂–µ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç. –°–æ–∑–¥–∞—ë—Ç—Å—è —Å–∏–º–ª–∏–Ω–∫ –∫–æ–º–∞–Ω–¥–æ–π `ln` —Å —Ñ–ª–∞–≥–æ–º -s: –Ω–∞–ø—Ä–∏–º–µ—Ä, `ln -s /path/to/original /path/to/symlink`.

–ñ—ë—Å—Ç–∫–∞—è —Å—Å—ã–ª–∫–∞ ‚Äî —ç—Ç–æ –¥—Ä—É–≥–æ–π —Å–ø–æ—Å–æ–± —É–∫–∞–∑–∞—Ç—å –Ω–∞ —Ç–æ—Ç –∂–µ —Å–∞–º—ã–π —Ñ–∞–π–ª –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã. –í Linux —É –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞ –µ—Å—Ç—å –∏–Ω–¥–µ–∫—Å–Ω—ã–π –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä (inode) –Ω–∞ –¥–∏—Å–∫–µ. –¢–∞–∫ –≤–æ—Ç, –∂—ë—Å—Ç–∫–∞—è —Å—Å—ã–ª–∫–∞ ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –µ—â—ë –æ–¥–Ω–∞ –∑–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ, —É–∫–∞–∑—ã–≤–∞—é—â–∞—è –Ω–∞ —Ç–æ—Ç –∂–µ inode. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Ñ–∞–π–ª –∫–∞–∫ –±—ã –∏–º–µ–µ—Ç –¥–≤–∞ –∏–º–µ–Ω–∏ (–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –∏ –µ—â—ë –æ–¥–Ω–æ) —Ä–∞–≤–Ω–æ–ø—Ä–∞–≤–Ω—ã—Ö. –ï—Å–ª–∏ —Ç—ã —É–¥–∞–ª–∏—à—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ `rm`), —Å–∞–º —Ñ–∞–π–ª (–¥–∞–Ω–Ω—ã–µ –Ω–∞ –¥–∏—Å–∫–µ) –Ω–µ –ø—Ä–æ–ø–∞–¥—ë—Ç, –ø–æ–∫–∞ –æ—Å—Ç–∞—ë—Ç—Å—è —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ –∂—ë—Å—Ç–∫–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –Ω–µ–≥–æ (–ø–æ—Ç–æ–º—É —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å –Ω–∏ –æ–¥–Ω–æ–π —Å—Å—ã–ª–∫–∏ –Ω–∞ —ç—Ç–æ—Ç inode). –ù–æ —É –∂—ë—Å—Ç–∫–∏—Ö —Å—Å—ã–ª–æ–∫ –µ—Å—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ–¥–Ω–æ–π —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã (–Ω–µ–ª—å–∑—è —Å–¥–µ–ª–∞—Ç—å hard link –Ω–∞ —Ñ–∞–π–ª, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ –¥—Ä—É–≥–æ–º —Ä–∞–∑–¥–µ–ª–µ –∏–ª–∏ –¥–∏—Å–∫–µ), –∏ –æ–±—ã—á–Ω–æ –Ω–µ–ª—å–∑—è –¥–µ–ª–∞—Ç—å –∂—ë—Å—Ç–∫–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (—ç—Ç–æ –∑–∞–ø—Ä–µ—Ç –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–∞—Ç–∞–ª–æ–≥–æ–≤).

–ò—Å–ø–æ–ª—å–∑—É–π –∏—Ö –≤ —Ä–∞–∑–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö. –°–∏–º–≤–æ–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ —É–¥–æ–±–Ω—ã, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å "—è—Ä–ª—ã–∫–∏", –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –æ–¥–∏–Ω –ø—É—Ç—å –Ω–∞ –¥—Ä—É–≥–æ–π. –ù–∞–ø—Ä–∏–º–µ—Ä, —Ç—ã –º–æ–∂–µ—à—å –∏–º–µ—Ç—å —Å–∏–º–ª–∏–Ω–∫ `latest -> v2.3`, —á—Ç–æ–±—ã –≤—Å–µ–≥–¥–∞ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ —Ñ–∞–π–ª–∞ –∏–ª–∏ –ø–∞–ø–∫–∏. –õ–∏–±–æ –ø–æ–ª–æ–∂–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ, –∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–Ω–µ–¥—Ä–∏—Ç—å —Å–∏–º–ª–∏–Ω–∫ –Ω–∞ —ç—Ç–æ—Ç –∫–æ–Ω—Ñ–∏–≥, —á—Ç–æ–±—ã –Ω–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª. –ñ—ë—Å—Ç–∫–∏–µ —Å—Å—ã–ª–∫–∏ –ø–æ–ª–µ–∑–Ω—ã, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Ñ–∞–π–ª –±—ã–ª –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —Ä–∞–∑–Ω—ã–º –∏–º–µ–Ω–∞–º –∏–ª–∏ –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ —Ä–∞—Å—Ö–æ–¥–æ–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –º–µ—Å—Ç–æ. –ù–∞–ø—Ä–∏–º–µ—Ä, —Ç—ã –º–æ–∂–µ—à—å —Å–¥–µ–ª–∞—Ç—å `ln data.tar backup.tar` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `ln` —Å–æ–∑–¥–∞—ë—Ç hard link), –∏ —É —Ç–µ–±—è –∫–∞–∫ –±—É–¥—Ç–æ –¥–≤–∞ —Ñ–∞–π–ª–∞, –Ω–æ –Ω–∞ –¥–∏—Å–∫–µ –æ–Ω–∏ –∑–∞–Ω–∏–º–∞—é—Ç –º–µ—Å—Ç–æ –∫–∞–∫ –æ–¥–∏–Ω, –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –æ–¥–∏–Ω –∏–∑ –ø—É—Ç–µ–π –±—É–¥–µ—Ç –º–µ–Ω—è—Ç—å —Ç–æ—Ç –∂–µ —Ñ–∞–π–ª. –û–¥–Ω–∞–∫–æ –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π (–æ–¥–Ω–∞ FS, –Ω–µ–ª—å–∑—è –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏) –∂—ë—Å—Ç–∫–∏–µ —Å—Å—ã–ª–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Ä–µ–∂–µ, –∞ —Å–∏–º–ª–∏–Ω–∫–∏ ‚Äì –ø–æ–≤—Å–µ–º–µ—Å—Ç–Ω–æ –¥–ª—è –±–æ–ª–µ–µ –≥–∏–±–∫–∏—Ö —Å–ª—É—á–∞–µ–≤.



---

## ‚ùì 46. –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ Docker –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –æ–±—Ä–∞–∑–æ–≤? –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ —Ç—ã —Å—Ç—Ä–æ–∏—à—å –æ–±—Ä–∞–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ, –∏ –∫–∞–∫ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å Dockerfile, —á—Ç–æ–±—ã —Å–±–æ—Ä–∫–∞ –±—ã–ª–∞ –±—ã—Å—Ç—Ä–µ–µ?


Docker –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –æ–±—Ä–∞–∑–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Å–ª–æ–π–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ. –ö–∞–∂–¥—ã–π —à–∞–≥ (–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è) –≤ Dockerfile –æ–±—Ä–∞–∑—É–µ—Ç —Å–ª–æ–π (layer) –≤ –∏—Ç–æ–≥–æ–≤–æ–º –æ–±—Ä–∞–∑–µ. –ö–æ–≥–¥–∞ —Ç—ã –ø–æ–≤—Ç–æ—Ä–Ω–æ —Å–æ–±–∏—Ä–∞–µ—à—å –æ–±—Ä–∞–∑, Docker –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–µ –±—ã–ª–æ –ª–∏ —É–∂–µ —Ä–∞–Ω–µ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ —Ç–æ—á–Ω–æ —Ç–∞–∫–æ–µ –∂–µ –¥–µ–π—Å—Ç–≤–∏–µ. –ï—Å–ª–∏ –æ–Ω –Ω–∞—Ö–æ–¥–∏—Ç –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫—ç—à–µ —Å–ª–æ–π, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –¥–∞–Ω–Ω–æ–º—É —à–∞–≥—É —Å —Ç–µ–º–∏ –∂–µ –≤—Ö–æ–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏, —Ç–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ —ç—Ç–æ—Ç —à–∞–≥ –Ω–µ –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è, –∞ –±–µ—Ä—ë—Ç—Å—è –≥–æ—Ç–æ–≤—ã–π —Å–ª–æ–π –∏–∑ –∫—ç—à–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —É —Ç–µ–±—è –µ—Å—Ç—å —à–∞–≥ `apt-get install ...` –∏ —Å –ø—Ä–æ—à–ª–æ–≥–æ —Ä–∞–∑–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–µ–Ω—è–ª–æ—Å—å (—Ç–æ—Ç –∂–µ –±–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑, —Ç–µ –∂–µ –∫–æ–º–∞–Ω–¥—ã), Docker –ø—Ä–æ—Å—Ç–æ –≤–æ–∑—å–º—ë—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏–∑ –∫—ç—à–∞ –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Å–Ω–æ–≤–∞ –∫–∞—á–∞—Ç—å –∏ —Å—Ç–∞–≤–∏—Ç—å –ø–∞–∫–µ—Ç—ã.

–ö–æ–≥–¥–∞ –º–µ–Ω—è–µ—Ç—Å—è —á—Ç–æ-—Ç–æ –≤ Dockerfile –∏–ª–∏ –≤ —Ñ–∞–π–ª–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º —à–∞–≥–µ, Docker –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∫—ç—à –¥–ª—è —ç—Ç–æ–≥–æ –∏ –≤—Å–µ—Ö —Å–ª–µ–¥—É—é—â–∏—Ö —à–∞–≥–æ–≤. –¢–æ –µ—Å—Ç—å –∫—ç—à –¥–µ–π—Å—Ç–≤—É–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ: –µ—Å–ª–∏ –Ω–∞ —Å–µ—Ä–µ–¥–∏–Ω–µ Dockerfile —É —Ç–µ–±—è –∏–∑–º–µ–Ω–∏–ª—Å—è –æ–¥–∏–Ω —Ñ–∞–π–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–æ–≤—ã–π –∫–æ–¥ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –Ω–∞ —à–∞–≥–µ COPY), –≤—Å–µ —Å–ª–æ–∏ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ —à–∞–≥–∞ –±—É–¥—É—Ç –ø–µ—Ä–µ—Å—Ç—Ä–æ–µ–Ω—ã –∑–∞–Ω–æ–≤–æ, –¥–∞–∂–µ –µ—Å–ª–∏ –∏—Ö –∫–æ–º–∞–Ω–¥—ã —Å–∞–º–∏ –ø–æ —Å–µ–±–µ –Ω–µ –º–µ–Ω—è–ª–∏—Å—å. –ü–æ—ç—Ç–æ–º—É –ø–æ—Ä—è–¥–æ–∫ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –≤ Dockerfile –æ—á–µ–Ω—å –≤–∞–∂–µ–Ω –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è. –°—Ç–∞—Ä–∞—é—Ç—Å—è —Å–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å–∞–º—ã–µ —Ç—è–∂—ë–ª—ã–µ –∏ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —à–∞–≥–∏ (–∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–¥–∫–æ –º–µ–Ω—è—é—Ç—Å—è), –∞ –±–ª–∏–∂–µ –∫ –∫–æ–Ω—Ü—É ‚Äî —Ç–æ, —á—Ç–æ –º–µ–Ω—è–µ—Ç—Å—è —á–∞—Å—Ç–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è). –¢–æ–≥–¥–∞ –ø—Ä–∏ –Ω–µ–±–æ–ª—å—à–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤ –∫–æ–¥–µ –ø–µ—Ä–µ—Å–æ–±–µ—Ä—ë—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ñ–∏–Ω–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å –æ–±—Ä–∞–∑–∞, –∞ –≤—Å—ë –ø—Ä–µ–¥—ã–¥—É—â–µ–µ (—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è) –≤–æ–∑—å–º—ë—Ç—Å—è –∏–∑ –∫—ç—à–∞.

–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Dockerfile –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Å–±–æ—Ä–∫–∏ —Å–≤–æ–¥–∏—Ç—Å—è –∫ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∫—ç—à–∞ –∏ —É–º–µ–Ω—å—à–µ–Ω–∏—é —Ä–∞–∑–º–µ—Ä–æ–≤ —Å–ª–æ—ë–≤. –ù–∞–ø—Ä–∏–º–µ—Ä, –æ–±—ä–µ–¥–∏–Ω—è—é—Ç –∫–æ–º–∞–Ω–¥—ã RUN, —á—Ç–æ–±—ã –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Å–ª–æ—ë–≤, –∏–ª–∏ —á–∏—Å—Ç—è—Ç –Ω–µ–Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ, –∫–µ—à–∏ –ø–∞–∫–µ—Ç–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞) –≤ –∫–æ–Ω—Ü–µ RUN-–∫–æ–º–∞–Ω–¥. –î–ª—è Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç multi-stage build: —Å–Ω–∞—á–∞–ª–∞ —Å–æ–±–∏—Ä–∞—é—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, JAR –∏–ª–∏ WAR) –≤ –æ–¥–Ω–æ–º –≤—Ä–µ–º–µ–Ω–Ω–æ–º –æ–±—Ä–∞–∑–µ —Å Maven/Gradle, –∞ –ø–æ—Ç–æ–º –≤ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ –∫–æ–ø–∏—Ä—É—é—Ç —Ç–æ–ª—å–∫–æ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –∏ JRE. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–µ —Ç–∞—â–∏—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω-–æ–±—Ä–∞–∑ –≤—Å–µ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—ã –∏ –∏—Å—Ö–æ–¥–Ω–∏–∫–∏, —É–º–µ–Ω—å—à–∞—è —Ä–∞–∑–º–µ—Ä. –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å BuildKit –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–µ—à Maven-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è), —á—Ç–æ–±—ã –ø—Ä–∏ —Å–±–æ—Ä–∫–µ Java-–ø—Ä–æ–µ–∫—Ç–∞ –Ω–µ —Å–∫–∞—á–∏–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —Ä–∞–∑ –≤—Å–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∑–∞–Ω–æ–≤–æ. –í—Å–µ —ç—Ç–∏ –ø—Ä–∏—ë–º—ã —É—Å–∫–æ—Ä—è—é—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ —Å–±–æ—Ä–∫–∏ –∏ –¥–µ–ª–∞—é—Ç –æ–±—Ä–∞–∑—ã –±–æ–ª–µ–µ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–º–∏.



---

## ‚ùì 47. –ö–∞–∫–∏–µ —Ç—ã –∑–Ω–∞–µ—à—å –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏—è Dockerfile –¥–ª—è Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è? –ù–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∫ —É–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞ –∏–ª–∏ —É—Å–∫–æ—Ä–∏—Ç—å —Å–±–æ—Ä–∫—É?


–î–ª—è Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –ø—Ä–∏—ë–º–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–ª–∞—é—Ç Docker-–æ–±—Ä–∞–∑—ã –ª–µ–≥—á–µ –∏ —Å–±–æ—Ä–∫—É –±—ã—Å—Ç—Ä–µ–µ. –í–æ-–ø–µ—Ä–≤—ã—Ö, —Å—Ç–æ–∏—Ç –≤—ã–±–∏—Ä–∞—Ç—å –ø–æ–¥—Ö–æ–¥—è—â–∏–π –±–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –Ω–µ –Ω—É–∂–µ–Ω –≤–µ—Å—å JDK –≤ —Ä–∞–Ω—Ç–∞–π–º–µ, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–∑ –Ω–∞ –æ—Å–Ω–æ–≤–µ JRE (–∏–ª–∏ JDK —Å –ø–æ–º–µ—Ç–∫–æ–π slim). –°–µ–π—á–∞—Å –ø–æ–ø—É–ª—è—Ä–Ω—ã –æ–±—Ä–∞–∑—ã Eclipse Temurin (AdoptOpenJDK) –∏–ª–∏ OpenJDK –Ω–∞ –±–∞–∑–µ slim-–¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞ Linux. –ú–µ–Ω—å—à–µ –ª–∏—à–Ω–µ–≥–æ ‚Äì –º–µ–Ω—å—à–µ —Ä–∞–∑–º–µ—Ä. –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å Alpine Linux –∫–∞–∫ –±–∞–∑—É –¥–ª—è Java, –Ω–æ —Å Alpine –±—ã–≤–∞—é—Ç –Ω—é–∞–Ω—Å—ã (musl vs glibc), –ø–æ—ç—Ç–æ–º—É —á–∞—Å—Ç–æ –±–µ—Ä—É—Ç slim-–≤–µ—Ä—Å–∏–∏ Debian/Ubuntu.

–û—á–µ–Ω—å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ ‚Äì multi-stage —Å–±–æ—Ä–∫–∞. –í –ø–µ—Ä–≤–æ–º —ç—Ç–∞–ø–µ Dockerfile —Ç—ã —Å—Ç–∞–≤–∏—à—å JDK, –≤—Å–µ —Å–±–æ—Ä–æ—á–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (Maven/Gradle), –∫–æ–ø–∏—Ä—É–µ—à—å –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ –∏ —Å–æ–±–∏—Ä–∞–µ—à—å jar/war. –ê –≤–æ –≤—Ç–æ—Ä–æ–º —ç—Ç–∞–ø–µ —Å—Ç–∞—Ä—Ç—É–µ—à—å –æ—Ç —á–∏—Å—Ç–æ–≥–æ –ª–µ–≥–∫–æ–≤–µ—Å–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞ —Å JRE –∏ –∫–æ–ø–∏—Ä—É–µ—à—å –≤ –Ω–µ–≥–æ —Ç–æ–ª—å–∫–æ —Å–±–æ—Ä–æ—á–Ω—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç (–∏, –≤–æ–∑–º–æ–∂–Ω–æ, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏ –∏–ª–∏ —Å–∫—Ä–∏–ø—Ç—ã). –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –±–µ–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤, –∫–µ—à–µ–π, –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –ø—Ä–æ—á–µ–≥–æ. –≠—Ç–æ —Ä–∞–¥–∏–∫–∞–ª—å–Ω–æ —É–º–µ–Ω—å—à–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞. –ó–∞–æ–¥–Ω–æ –º–æ–∂–Ω–æ —Å—Ä–∞–∑—É –∑–∞–¥–∞—Ç—å ENTRYPOINT/CMD –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Java-–ø—Ä–æ—Ü–µ—Å—Å–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä: `ENTRYPOINT ["**java**", "-jar", "/app/myapp.jar"]`.

–ß—Ç–æ–±—ã —É—Å–∫–æ—Ä–∏—Ç—å —Å–±–æ—Ä–∫—É –∏ –Ω–µ —Ç—è–Ω—É—Ç—å –ª–∏—à–Ω–µ–≥–æ, –≤–∞–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —Å–ª–æ–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, —Å–Ω–∞—á–∞–ª–∞ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ —Å–∫–∞—á–∏–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`pom.xml`, —Ñ–∞–π–ª—ã Gradle), –≤—ã–ø–æ–ª–Ω–∏—Ç—å `**mvn** package` –∏–ª–∏ `gradle build` ‚Äì —ç—Ç–∏ —à–∞–≥–∏ –∑–∞–∫–µ—à–∏—Ä—É—é—Ç—Å—è, –∏ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π —Å–±–æ—Ä–∫–µ, –µ—Å–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ –ø–æ–º–µ–Ω—è–ª–∏—Å—å, —Ç–æ —ç—Ç–æ—Ç —Å–ª–æ–π –≤–æ–∑—å–º—ë—Ç—Å—è –∏–∑ –∫—ç—à–∞. –ê —É–∂–µ –ø–æ—Ç–æ–º –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –æ—Å—Ç–∞–ª—å–Ω–æ–π –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –∏ –∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞–∫–µ—Ç–æ–≤ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è apt-get –∏–ª–∏ –∞–Ω–∞–ª–æ–≥) –Ω—É–∂–Ω–æ —É–¥–∞–ª—è—Ç—å –∫–µ—à–∏ –ø–∞–∫–µ—Ç–æ–≤ (`apt-get clean` –∏ —É–¥–∞–ª–µ–Ω–∏–µ `/var/lib/apt/lists`), —á—Ç–æ–±—ã –Ω–µ —Ä–∞–∑–¥—É–≤–∞—Ç—å —Å–ª–æ–∏ –Ω–µ–Ω—É–∂–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏. –ï—â—ë –æ–¥–Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞ ‚Äì –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.dockerignore`, —á—Ç–æ–±—ã –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–±–æ—Ä–∫–∏ –Ω–µ –ø–æ–ø–∞–¥–∞–ª–∏ –ª–∏—à–Ω–∏–µ —Ñ–∞–π–ª—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `.git`, –ª–æ–∫–∞–ª—å–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã, —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ), —ç—Ç–æ –¥–µ–ª–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤ Docker-–¥–µ–º–æ–Ω –±—ã—Å—Ç—Ä–µ–µ. –ò, –Ω–∞–∫–æ–Ω–µ—Ü, —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –Ω–µ –∑–∞–±—ã–≤–∞—Ç—å –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –Ω–µ –æ—Ç root-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: –ª–∏–±–æ –º–µ–Ω—è—Ç—å USER –Ω–∞ non-root –≤ Dockerfile, –ª–∏–±–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–∑—ã, –≥–¥–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ root. –≠—Ç–æ –∑–∞—â–∏—Ç–∏—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ —Ö–æ—Å—Ç –æ—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º, –µ—Å–ª–∏ –∫—Ç–æ-—Ç–æ –ø–æ–ª—É—á–∏—Ç –¥–æ—Å—Ç—É–ø –≤–Ω—É—Ç—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.



---

## ‚ùì 48. –ö–∞–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã Docker –æ–±—â–∞—é—Ç—Å—è –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º? –†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ —Å–µ—Ç–∏ Docker: bridge, host, overlay, –∏ –∫–∞–∫ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–æ–≤.


–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Docker –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ —Ç–∏–ø–∞ bridge (–º–æ—Å—Ç). –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∫–∞–∂–¥—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP-–∞–¥—Ä–µ—Å –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —ç—Ç–æ–π —Å–µ—Ç–∏ (–æ–±—ã—á–Ω–æ —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ 172.x.x.x) –∏ –º–æ–∂–µ—Ç –æ–±—â–∞—Ç—å—Å—è —Å –¥—Ä—É–≥–∏–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ —Ç–æ–π –∂–µ —Å–µ—Ç–∏ bridge. –ï—Å–ª–∏ —Ç—ã –∑–∞–ø—É—Å–∫–∞–µ—à—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —á–µ—Ä–µ–∑ Docker Compose, –æ–Ω –æ–±—ã—á–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç –æ–±—â—É—é —Å–µ—Ç—å –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, –∏ —Ç–æ–≥–¥–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –º–æ–≥—É—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –¥—Ä—É–≥ –∫ –¥—Ä—É–≥—É –ø–æ –∏–º–µ–Ω–∏ —Å–µ—Ä–≤–∏—Å–∞ (Docker –Ω–∞—Å—Ç—Ä–æ–∏—Ç DNS –≤–Ω—É—Ç—Ä–∏ —ç—Ç–æ–π —Å–µ—Ç–∏). –í –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–º Docker –±–µ–∑ Compose —Ç–æ–∂–µ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ—é —Å–µ—Ç—å (`**docker** network create mynet` –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å `--network mynet`), —Ç–æ–≥–¥–∞ –º–µ–∂–¥—É –Ω–∏–º–∏ —Ç–æ–∂–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å name resolution (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å–º–æ–≥—É—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –ø–æ –∏–º–µ–Ω–∏). –ù–æ –µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø—Ä–æ—Å—Ç–æ –≤ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π —Å–µ—Ç–∏ bridge (docker0), –æ–Ω–∏ –ø–æ –∏–º–µ–Ω–∏ –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –Ω–µ –≤–∏–¥—è—Ç, —Ç–æ–ª—å–∫–æ –ø–æ IP-–∞–¥—Ä–µ—Å—É, –∏ –¥–ª—è —Å–≤—è–∑–∏ –Ω—É–∂–Ω–æ –ª–∏–±–æ –ø—Ä–æ–ø–∏—Å—ã–≤–∞—Ç—å —Å—Å—ã–ª–∫–∏ (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π `--link`), –ª–∏–±–æ –ª—É—á—à–µ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π —Å–µ—Ç—å—é.

–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –∏–∑–≤–Ω–µ (—Å –º–∞—à–∏–Ω—ã-—Ö–æ—Å—Ç–∞ –∏–ª–∏ –≤–æ–æ–±—â–µ –∏–∑ –≤–Ω–µ—à–Ω–µ–π —Å–µ—Ç–∏) –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–æ–≤ (`-p`). –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç 8080, —Ç—ã –º–æ–∂–µ—à—å –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –æ–ø—Ü–∏–µ–π `-p 80:8080`, –∏ —Ç–æ–≥–¥–∞ –Ω–∞ —Ö–æ—Å—Ç–µ –ø–æ—Ä—Ç 80 –±—É–¥–µ—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞ 8080. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∑–∞–ø—Ä–æ—Å—ã, –ø—Ä–∏—Ö–æ–¥—è—â–∏–µ –Ω–∞ —Ö–æ—Å—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ [http://localhost:80](http://localhost:80)), –ø–æ–ø–∞–¥—É—Ç –≤–Ω—É—Ç—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –≠—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è port mapping (–ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–æ–≤). –ë–µ–∑ `-p` –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—Å—Ç–∞—ë—Ç—Å—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º: –æ–Ω –º–æ–∂–µ—Ç —Å–∞–º –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –Ω–∞—Ä—É–∂—É (–≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –∏–ª–∏ –∫ —Ö–æ—Å—Ç—É), –Ω–æ –∏–∑–≤–Ω–µ –∫ –Ω–µ–º—É –Ω–µ –¥–æ—Å—Ç—É—á–∞—Ç—å—Å—è, –ø–æ–∫–∞ –Ω–µ –ø—Ä–æ–±—Ä–æ—Å–∏—à—å –ø–æ—Ä—Ç –∏–ª–∏ –Ω–µ –ø–æ–¥–∫–ª—é—á–∏—à—å –∫ –∫–∞–∫–æ–π-—Ç–æ –æ–±—â–µ–π —Å–µ—Ç–∏.

–ï—Å—Ç—å —Ä–∞–∑–Ω—ã–µ –¥—Ä–∞–π–≤–µ—Ä—ã —Å–µ—Ç–µ–π –≤ Docker. –ü–æ–º–∏–º–æ bridge, –∫–æ—Ç–æ—Ä—ã–π –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω, –µ—Å—Ç—å —Ä–µ–∂–∏–º host. –ï—Å–ª–∏ –∑–∞–¥–∞—Ç—å `--network host`, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –±—É–¥–µ—Ç –∏–º–µ—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Å–µ—Ç–µ–≤–æ–≥–æ —Å—Ç–µ–∫–∞ ‚Äì –æ–Ω –∫–∞–∫ –±—ã –ø—Ä–∏—Ü–µ–ø–∏—Ç—Å—è –∫ —Å–µ—Ç–µ–≤–æ–º—É —Å—Ç–µ–∫—É —Ö–æ—Å—Ç–∞. –¢.–µ. –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ –ø–æ—Ä—Ç–∞—Ö —Ö–æ—Å—Ç–∞ –Ω–∞–ø—Ä—è–º—É—é, –∫–∞–∫ –µ—Å–ª–∏ –±—ã –∑–∞–ø—É—Å—Ç–∏–ª–æ—Å—å –ø—Ä–æ—Å—Ç–æ –Ω–∞ –º–∞—à–∏–Ω–µ, –∏ –Ω–∏–∫–∞–∫–æ–≥–æ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ IP —É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–µ –±—É–¥–µ—Ç. –≠—Ç–æ —É–±–∏—Ä–∞–µ—Ç –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã —Å–µ—Ç–∏ –∏ NAT, –Ω–æ –∑–∞—Ç–æ –ø–æ—Ä—Ç—ã –º–æ–≥—É—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ –Ω–∞ —Ö–æ—Å—Ç–µ, –∏ –∏–∑–æ–ª—è—Ü–∏–∏ –Ω–µ—Ç. –ï—â—ë –µ—Å—Ç—å –¥—Ä–∞–π–≤–µ—Ä overlay ‚Äì –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ Docker Swarm –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –∫–ª–∞—Å—Ç–µ—Ä–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏—è—Ö, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –æ–¥–Ω—É –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é —Å–µ—Ç—å –ø–æ–≤–µ—Ä—Ö –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ö–æ—Å—Ç–æ–≤. –¢–æ–≥–¥–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –º–∞—à–∏–Ω–∞—Ö –º–æ–≥—É—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –æ–¥–Ω–æ–π –ª–æ–≥–∏—á–µ—Å–∫–æ–π —Å–µ—Ç–∏ –∏ –æ–±—â–∞—Ç—å—Å—è –∫–∞–∫ –±—É–¥—Ç–æ –æ–Ω–∏ –Ω–∞ –æ–¥–Ω–æ–º —Ö–æ—Å—Ç–µ (Docker —Å–∞–º –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ –º–µ–∂–¥—É —É–∑–ª–∞–º–∏). –¢–∞–∫–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç macvlan –∏ –¥—Ä—É–≥–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã, –Ω–æ –≤ –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –æ–±—ã—á–Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ bridge-—Å–µ—Ç–µ–π –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∏ host-—Ä–µ–∂–∏–º–∞ –¥–ª—è –æ—Å–æ–±—ã—Ö —Å–ª—É—á–∞–µ–≤.



---

## ‚ùì 49. –ö–∞–∫ —Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, —á—Ç–æ–±—ã –æ–Ω–∏ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞? –†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ volumes –∏ bind mounts, –∏ –≤ –∫–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö —á—Ç–æ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.


–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é, –µ—Å–ª–∏ —Ç—ã –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–∏—à—å, —Ñ–∞–π–ª—ã –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ "–∂–∏–≤—É—Ç" —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç. –ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —É–¥–∞–ª–∏—Ç—å –∏ –∑–∞–Ω–æ–≤–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–±—Ä–∞–∑, –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã, –ø–æ—Ç–æ–º—É —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø–æ —Å–≤–æ–µ–π –ø—Ä–∏—Ä–æ–¥–µ —ç—Ñ–µ–º–µ—Ä–Ω—ã (–Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ). –ß—Ç–æ–±—ã –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–∂–∏–≤–∞–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏–ª–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, Docker –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º —Ç–æ–º–æ–≤ (volumes) –∏ –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã—Ö –ø–∞–ø–æ–∫ (bind mounts).

Volume (—Ç–æ–º) ‚Äì —ç—Ç–æ –æ–±–ª–∞—Å—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏—è, —É–ø—Ä–∞–≤–ª—è–µ–º–∞—è Docker‚Äô–æ–º. –ú–æ–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å, —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ø–∞–ø–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –∂–∏–≤—ë—Ç –≤–Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –Ω–∞ Docker-—Ö–æ—Å—Ç–µ (–æ–±—ã—á–Ω–æ –≤ `/var/lib/**docker**/volumes/...`). –ö–æ–≥–¥–∞ —Ç—ã –∑–∞–ø—É—Å–∫–∞–µ—à—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –æ–ø—Ü–∏–µ–π `-v` –∏–ª–∏ —á–µ—Ä–µ–∑ **docker**-compose —É–∫–∞–∑—ã–≤–∞–µ—à—å volume, Docker –ª–∏–±–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É–∂–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ç–æ–º, –ª–∏–±–æ —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π –∏ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç –µ–≥–æ –≤–Ω—É—Ç—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –ø—É—Ç–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, `**docker** run -v mydata:/var/lib/mysql mysql` –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä—É–µ—Ç –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–π —Ç–æ–º `mydata` –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ –∞–¥—Ä–µ—Å—É `/var/lib/mysql` ‚Äì –∏ –≤—Å—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö MySQL –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –Ω–∞ —Ö–æ—Å—Ç–µ –≤ —Ç–æ–º–µ `mydata`. –ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ–±–Ω–æ–≤–∏—Ç—å –∏–ª–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å, –Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫ –Ω–µ–º—É —Ç–æ—Ç –∂–µ —Ç–æ–º, –æ–Ω —É–≤–∏–¥–∏—Ç –ø—Ä–µ–∂–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ. Volumes —É–¥–æ–±–Ω—ã —Ç–µ–º, —á—Ç–æ Docker —Å–∞–º –∏–º–∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç, –∏—Ö –º–æ–∂–Ω–æ –±—ç–∫–∞–ø–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏ (`**docker** volume ...`) –∏–ª–∏ –ø–æ–¥–∫–ª—é—á–∞—Ç—å –∫ –¥—Ä—É–≥–∏–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º.

Bind mount ‚Äì —ç—Ç–æ –¥—Ä—É–≥–æ–π —Å–ø–æ—Å–æ–±: —Ç—É—Ç —Ç—ã –Ω–∞–ø—Ä—è–º—É—é –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—à—å –ø–∞–ø–∫—É —Å —Ö–æ—Å—Ç–∞ –≤–Ω—É—Ç—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å `-v /home/user/config:/app/config`, –∏ —Ç–æ–≥–¥–∞ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø—É—Ç—å `/app/config` –±—É–¥–µ—Ç –∏–º–µ–Ω–Ω–æ —ç—Ç–æ–π –ø–∞–ø–∫–æ–π –Ω–∞ —Ö–æ—Å—Ç–æ–≤–æ–π –º–∞—à–∏–Ω–µ. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç volume, bind mount –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã —Ö–æ—Å—Ç–∞, –∫–æ—Ç–æ—Ä–æ–µ —Ç—ã —É–∫–∞–∑–∞–ª. –ü–ª—é—Å –≤ —Ç–æ–º, —á—Ç–æ –º–æ–∂–Ω–æ —è–≤–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ñ–∞–π–ª–∞–º–∏ —Å–Ω–∞—Ä—É–∂–∏. –≠—Ç–æ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ: –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, —á—Ç–æ–±—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ –≤–∏–¥–µ–ª–æ —Ç–≤–æ–∏ —Ñ–∞–π–ª—ã –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–ª–æ—Å—å –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö. –ù–æ —É bind mount –µ—Å—Ç—å –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: –æ–Ω –ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ö–æ—Å—Ç–∞ (–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—É—Ç–∏). Volumes –∂–µ –±–æ–ª–µ–µ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã –∏ –ø–æ—Ä—Ç–∞—Ç–∏–≤–Ω—ã ‚Äì Docker —Å–∞–º —Ä–µ—à–∞–µ—Ç, –≥–¥–µ —Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ. –í —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ, —á–∞—â–µ —Å–æ–∑–¥–∞—é—Ç –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ volumes (—á—Ç–æ–±—ã —Å–ª—É—á–∞–π–Ω–æ –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å –¥–∞–Ω–Ω—ã–µ –∏ —É–¥–æ–±–Ω–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å), –∞ bind mounts –æ—Å—Ç–∞–≤–ª—è—é—Ç –¥–ª—è –∑–∞–¥–∞—á —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏–ª–∏ –æ—Å–æ–±—ã—Ö —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Ö–æ—Å—Ç–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É.



---

## ‚ùì 50. Docker Compose: –∫–∞–∫ —Ç—ã –æ–ø–∏—à–µ—à—å —Ä–∞–±–æ—Ç—É —Å **docker**-compose.yml? –ù–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∫ –∑–∞–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Ä–≤–∏—Å–æ–≤, —Å–¥–µ–ª–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –Ω–∏–º–∏ (depends_on) –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å—ã?


Docker Compose –Ω—É–∂–µ–Ω, —á—Ç–æ–±—ã —É–¥–æ–±–Ω–æ –æ–ø–∏—Å–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞–±–æ—Ä —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (—Å–µ—Ä–≤–∏—Å–æ–≤) –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–∞–∂–¥—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤—Ä—É—á–Ω—É—é –∏ —Å–≤—è–∑—ã–≤–∞—Ç—å –∏—Ö, —Ç—ã –ø–∏—à–µ—à—å –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π —Ñ–∞–π–ª `**docker**-compose.yml`, –≥–¥–µ –ø–µ—Ä–µ—á–∏—Å–ª—è–µ—à—å –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –æ–ø–∏—Å–∞—Ç—å —Å–µ—Ä–≤–∏—Å `app` (–Ω–∞—à Java-—Å–µ—Ä–≤–∏—Å), —Å–µ—Ä–≤–∏—Å `db` (–Ω–∞–ø—Ä–∏–º–µ—Ä, PostgreSQL) –∏, –º–æ–∂–µ—Ç –±—ã—Ç—å, –µ—â—ë `redis` –¥–ª—è –∫—ç—à–∞ ‚Äì –≤—Å—ë –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ —É–∫–∞–∑—ã–≤–∞–µ—à—å –æ–±—Ä–∞–∑ (`image`) –∏–ª–∏ Dockerfile, –ø–æ—Ä—Ç—ã, —Ç–æ–º–∞, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –ø—Ä. Compose —Å–∞–º –ø–æ–∑–∞–±–æ—Ç–∏—Ç—Å—è, —á—Ç–æ–±—ã –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –≤—Å–µ –æ–Ω–∏ –æ–∫–∞–∑–∞–ª–∏—Å—å –≤ –æ–¥–Ω–æ–π —Å–µ—Ç–∏ –∏ –º–æ–≥–ª–∏ –æ–±—â–∞—Ç—å—Å—è –ø–æ –∏–º–µ–Ω–∞–º —Å–µ—Ä–≤–∏—Å–æ–≤.

–ï—Å–ª–∏ –æ–¥–∏–Ω —Å–µ—Ä–≤–∏—Å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥—Ä—É–≥–æ–≥–æ (—Å–∫–∞–∂–µ–º, –Ω–∞—à–µ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –Ω—É–∂–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∫ —Ç–æ–º—É –º–æ–º–µ–Ω—Ç—É, –∫–∞–∫ –æ–Ω–æ —Å—Ç–∞—Ä—Ç—É–µ—Ç), –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–∏—Ä–µ–∫—Ç–∏–≤–æ–π `depends_on`. –í **docker**-compose.yml —É —Å–µ—Ä–≤–∏—Å–∞ `app` –º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å `depends_on: ["db"]`. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ Compose —Å–Ω–∞—á–∞–ª–∞ –∑–∞–ø—É—Å—Ç–∏—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `db`, –∞ –ø–æ—Ç–æ–º —É–∂–µ `app`. –ù–∞–¥–æ –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ depends_on –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø–æ—Ä—è–¥–æ–∫ –∑–∞–ø—É—Å–∫–∞, –Ω–æ –Ω–µ –∂–¥—ë—Ç –ø–æ–ª–Ω–æ–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ ‚Äì —Ç–æ –µ—Å—Ç—å –æ–Ω –Ω–µ –∑–Ω–∞–µ—Ç, –∫–æ–≥–¥–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≥–æ—Ç–æ–≤–∞ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è. –î–ª—è —Ç–∞–∫–∏—Ö —Å–∏—Ç—É–∞—Ü–∏–π –∏–Ω–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è—é—Ç —Å–∫—Ä–∏–ø—Ç—ã –æ–∂–∏–¥–∞–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `wait-for-it.**sh**`) –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç healthcheck (–∑–¥–æ—Ä–æ–≤—å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞), –µ—Å–ª–∏ Compose —ç—Ç–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç, —á—Ç–æ–±—ã `app` —Ç–æ—á–Ω–æ –Ω–µ —É–ø–∞–ª –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ. –ù–æ –≤ –æ–±—â–µ–º —Å–ª—É—á–∞–µ depends_on —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –ø–æ—Ä—è–¥–∫–∞ –∑–∞–ø—É—Å–∫–∞, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ —Å–∏—Ç—É–∞—Ü–∏–∏, –≥–¥–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—ã—Ç–∞–µ—Ç—Å—è —Å—Ç—É—á–∞—Ç—å—Å—è –≤ –µ—â—ë –Ω–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å.

–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ Compose —Ç–æ–∂–µ –≤–æ–∑–º–æ–∂–Ω–æ. –ï—Å—Ç—å –∫–æ–º–∞–Ω–¥–∞ `**docker**-compose up --scale`, –ª–∏–±–æ –≤ —Å–∞–º–æ–º —Ñ–∞–π–ª–µ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å `scale` (–≤ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏—è—Ö Compose). –ù–∞–ø—Ä–∏–º–µ—Ä, —Ç—ã —Ö–æ—á–µ—à—å –ø–æ–¥–Ω—è—Ç—å –Ω–µ –æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `app`, –∞ —Ç—Ä–∏ –∫–æ–ø–∏–∏ –¥–ª—è –Ω–∞–≥—Ä—É–∑–∫–∏ ‚Äì –¥–µ–ª–∞–µ—à—å `**docker**-compose up --scale app=3`. Compose –∑–∞–ø—É—Å—Ç–∏—Ç —Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ (–±—É–¥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –∏–º–µ–Ω–∞–º–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä `app_1`, `app_2`, `app_3`). –û–Ω–∏ –±—É–¥—É—Ç –≤—Å–µ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ —Ç–æ–π –∂–µ —Å–µ—Ç–µ–≤–æ–π —Å—Ä–µ–¥–µ, –∏ –µ—Å–ª–∏ —É —Ç–µ–±—è –µ—Å—Ç—å –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ (–≤ —Å–∞–º–æ–º Compose –µ—ë –Ω–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π, –Ω–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–π –ø—Ä–æ–∫—Å–∏), —Ç–æ –º–æ–∂–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –º–µ–∂–¥—É –∫–æ–ø–∏—è–º–∏. –û–¥–Ω–∞–∫–æ Compose –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–æ–≤, –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–µ–ª–∞–µ—Ç—Å—è —É–∂–µ Kubernetes-–æ–º –∏–ª–∏ Docker Swarm. –ù–æ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Å–ª—É—á–∞–µ–≤ –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ ‚Äì –≤–ø–æ–ª–Ω–µ —É–¥–æ–±–Ω–æ –ø–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–ø–ª–∏–∫ —á–µ—Ä–µ–∑ Compose.



---

## ‚ùì 51. –ö–∞–∫ —Ç—ã –ø–µ—Ä–µ–¥–∞—ë—à—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ —Å–µ–∫—Ä–µ—Ç—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã? –ù–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∫ –∑–∞–¥–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ Docker –∏–ª–∏ Compose, –∏ –∫–∞–∫–∏–µ –º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —ç—Ç–æ–º –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç—å?


–ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –ø—Ä–∏–Ω—è—Ç–æ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤, —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤–Ω—É—Ç—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –ü—Ä–æ—â–µ –≤—Å–µ–≥–æ ‚Äì –∑–∞–¥–∞—Ç—å environment variables. –í –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ Docker –¥–ª—è —ç—Ç–æ–≥–æ —Å–ª—É–∂–∏—Ç –æ–ø—Ü–∏—è `-e`. –ù–∞–ø—Ä–∏–º–µ—Ä: `**docker** run -e SPRING_PROFILES_ACTIVE=prod -e DB_HOST=postgres myapp:latest` ‚Äì –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é. –í Docker Compose –º–æ–∂–Ω–æ –≤ —Ñ–∞–π–ª–µ **docker**-compose.yml —É–∫–∞–∑–∞—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –±–ª–æ–∫ `environment`, –≥–¥–µ –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è. –ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ñ–∞–π–ª `.env` —Ä—è–¥–æ–º, —á—Ç–æ–±—ã –Ω–µ –ø–∏—Å–∞—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –ø—Ä—è–º–æ –≤ YAML: Compose –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ .env. –¢–æ –µ—Å—Ç—å –º–æ–∂–Ω–æ –≤ **docker**-compose.yml –Ω–∞–ø–∏—Å–∞—Ç—å `DB_PASSWORD: ${DB_PASSWORD}` –∏ —Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å –≤ —Ñ–∞–π–ª–µ .env –∏–ª–∏ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è —Ö–æ—Å—Ç–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ, —á—Ç–æ–±—ã –æ–Ω –Ω–µ —Å–≤–µ—Ç–∏–ª—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

–° —Å–µ–∫—Ä–µ—Ç–∞–º–∏ —Å–ª–æ–∂–Ω–µ–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—å –∏—Ö –ø—Ä–æ—Å—Ç–æ –∫–∞–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–µ –æ—á–µ–Ω—å –±–µ–∑–æ–ø–∞—Å–Ω–æ (–æ–Ω–∏ –º–æ–≥—É—Ç –ø–æ–ø–∞—Å—Ç—å –≤ –ª–æ–≥–∏ –∏–ª–∏ –∏—Ö –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å —á–µ—Ä–µ–∑ `**docker** inspect`). –ù–æ –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤, —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ä–∞—é—Ç—Å—è –Ω–µ —Ö–∞—Ä–¥–∫–æ–¥–∏—Ç—å –∏—Ö –Ω–∏ –≤ Dockerfile, –Ω–∏ –≤ **docker**-compose.yml (–∞ –ø–æ–¥—Ç—è–≥–∏–≤–∞—Ç—å –∏–∑–≤–Ω–µ). –ù–∞–ø—Ä–∏–º–µ—Ä, –ø–∞—Ä–æ–ª—å –∫ –±–∞–∑–µ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, –Ω–æ —Å–∞–º–æ –∑–Ω–∞—á–µ–Ω–∏–µ –±—Ä–∞—Ç—å –∏–∑ –∑–∞—â–∏—â—ë–Ω–Ω–æ–≥–æ –º–µ—Å—Ç–∞: –∏–∑ —Ç–µ—Ö –∂–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å—Ä–µ–¥—ã —Ö–æ—Å—Ç–∞ (—á—Ç–æ–±—ã –≤ YAML-—Ñ–∞–π–ª–µ –Ω–µ —Å–≤–µ—Ç–∏–ª–æ—Å—å) –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–µ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ. –í Docker Swarm / Compose v3 –µ—Å—Ç—å –ø–æ–Ω—è—Ç–∏–µ secrets: —Å–µ–∫—Ä–µ—Ç—ã –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ, –∏ Docker –ø–µ—Ä–µ–¥–∞—Å—Ç –∏—Ö –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞–∫ —Ñ–∞–π–ª –≤ `/run/secrets`. –≠—Ç–∏ —Å–µ–∫—Ä–µ—Ç—ã —à–∏—Ñ—Ä—É—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ Swarm –∏ –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ –Ω–∞ —É–∑–ª–∞—Ö (–≤ –ø–∞–º—è—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –æ–Ω–∏, –∫–æ–Ω–µ—á–Ω–æ, –µ—Å—Ç—å). –í Kubernetes –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –µ—Å—Ç—å –æ–±—ä–µ–∫—Ç Secret. –ï—Å–ª–∏ –∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è —Ç–∏–ø–∞ HashiCorp Vault, —Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å—Ö–æ–¥–∏—Ç—å –≤ Vault –∏ –≤—ã—Ç—è–Ω—É—Ç—å —Å–µ–∫—Ä–µ—Ç ‚Äì —Ç–æ–≥–¥–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Å–∞–º —Å–µ–∫—Ä–µ—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –º–æ–º–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

–ì–ª–∞–≤–Ω–æ–µ ‚Äì –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ "–∑–∞–ø–µ–∫–∞—Ç—å" —Å–µ–∫—Ä–µ—Ç—ã –≤–Ω—É—Ç—Ä—å –æ–±—Ä–∞–∑–∞. –¢–æ –µ—Å—Ç—å –Ω–µ COPY-—Ç—å —Ñ–∞–π–ª—ã —Å –ø–∞—Ä–æ–ª—è–º–∏ –≤ Dockerfile –∏ –Ω–µ –æ—Å—Ç–∞–≤–ª—è—Ç—å –ø–∞—Ä–æ–ª–∏ –≤ Git. –ü—Ä–∞–≤–∏–ª—å–Ω–µ–µ –≤—Å–µ–≥–æ: –æ–±—Ä–∞–∑ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π, –∞ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ –≤—ã –¥–∞—ë—Ç–µ –µ–º—É –Ω—É–∂–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏ –∏ –∫–ª—é—á–∏ —á–µ—Ä–µ–∑ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏–ª–∏ –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã. –ê –¥–ª—è –æ–±—â–∏—Ö (–Ω–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö) –Ω–∞—Å—Ç—Ä–æ–µ–∫ —É–¥–æ–±–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–∏–±–æ —Ç–µ –∂–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –ª–∏–±–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥-—Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ volume. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ –≤ **docker**-compose.yml —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª application.yml –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç —á–∏—Ç–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç—Ç—É–¥–∞. –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≥–∏–±–∫–æ—Å—Ç—å: –Ω–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞—Ç—å –æ–±—Ä–∞–∑ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫, –∏ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è –≤–Ω–µ –æ–±—Ä–∞–∑–∞ –≤ –±–æ–ª–µ–µ –∑–∞—â–∏—â—ë–Ω–Ω–æ–º –º–µ—Å—Ç–µ.



---

## ‚ùì 52. –ß—Ç–æ —Ç–∞–∫–æ–µ shebang (`#!`) –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ shell-—Å–∫—Ä–∏–ø—Ç–æ–≤? –ó–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω –∏ —á—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ —É–∫–∞–∑–∞—Ç—å?


Shebang ‚Äì —ç—Ç–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏–º–≤–æ–ª–æ–≤ `#!` –≤ –Ω–∞—á–∞–ª–µ —Å–∫—Ä–∏–ø—Ç–∞, –∑–∞ –∫–æ—Ç–æ—Ä–æ–π —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—É—Ç—å –¥–æ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –≤—ã–ø–æ–ª–Ω—è—Ç—å —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–µ —Ñ–∞–π–ª–∞ –Ω–∞–ø–∏—Å–∞–Ω–æ `#!/bin/**bash**`, —Ç–æ —Å–∏—Å—Ç–µ–º–∞ –ø–æ–π–º—ë—Ç, —á—Ç–æ —ç—Ç–æ—Ç —Ñ–∞–π–ª –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å —Å –ø–æ–º–æ—â—å—é Bash. –§–∞–∫—Ç–∏—á–µ—Å–∫–∏, –∫–æ–≥–¥–∞ —Ç—ã –¥–µ–ª–∞–µ—à—å —Ñ–∞–π–ª –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º (`**chmod** +x script.**sh**`) –∏ –∑–∞–ø—É—Å–∫–∞–µ—à—å –µ–≥–æ –∫–∞–∫ `./script.**sh**`, —è–¥—Ä–æ —Å–º–æ—Ç—Ä–∏—Ç –ø–µ—Ä–≤—É—é —Å—Ç—Ä–æ–∫—É: –≤—Å—ë, —á—Ç–æ –ø–æ—Å–ª–µ `#!`, ‚Äì —ç—Ç–æ –∫–æ–º–∞–Ω–¥–∞ (–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä), –∫–æ—Ç–æ—Ä–æ–π –ø–µ—Ä–µ–¥–∞–¥—É—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–∫—Ä–∏–ø—Ç–∞. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, shebang –∑–∞–¥–∞—ë—Ç, –∫–∞–∫–∏–º –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–æ–º –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ñ–∞–π–ª.

–ï—Å–ª–∏ shebang –Ω–µ —É–∫–∞–∑–∞—Ç—å, —Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫ —Ç—ã –∑–∞–ø—É—Å–∫–∞–µ—à—å —Å–∫—Ä–∏–ø—Ç. –ï—Å–ª–∏ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –µ–≥–æ –Ω–∞–ø—Ä—è–º—É—é (`./script.**sh**` –±–µ–∑ shebang), —Ç–æ —Å–∏—Å—Ç–µ–º–∞, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –≤—ã–¥–∞—Å—Ç –æ—à–∏–±–∫—É "Exec format error", –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ –∑–Ω–∞–µ—Ç, —á–µ–º —ç—Ç–æ—Ç —Ñ–∞–π–ª –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–±–æ–ª–æ—á–∫–∏ –º–æ–≥—É—Ç –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –æ—Ç–∫—Ä—ã—Ç—å –µ–≥–æ —Ç–µ–∫—É—â–∏–º —à–µ–ª–ª–æ–º, –Ω–æ –≤ –æ–±—â–µ–º —Å–ª—É—á–∞–µ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å –Ω–∞ —ç—Ç–æ –Ω–µ —Å—Ç–æ–∏—Ç. –ß–∞—â–µ –≤—Å–µ–≥–æ, –µ—Å–ª–∏ –≤ —Å–∫—Ä–∏–ø—Ç–µ –Ω–µ—Ç shebang, –µ–≥–æ –∑–∞–ø—É—Å–∫–∞—é—Ç —è–≤–Ω–æ —á–µ—Ä–µ–∑ –æ–±–æ–ª–æ—á–∫—É: –Ω–∞–ø—Ä–∏–º–µ—Ä, `**bash** script.**sh**` –∏–ª–∏ `**sh** script.**sh**` ‚Äì —Ç–æ–≥–¥–∞ shebang –Ω–µ –Ω—É–∂–µ–Ω, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç—ã —Å–∞–º —É–∫–∞–∑–∞–ª –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä –∫–æ–º–∞–Ω–¥–æ–π **bash**. –ù–æ —ç—Ç–æ –º–µ–Ω–µ–µ —É–¥–æ–±–Ω–æ, –æ—Å–æ–±–µ–Ω–Ω–æ –∫–æ–≥–¥–∞ —Å–∫—Ä–∏–ø—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è ‚Äì –ª—É—á—à–µ –∑–∞–ª–æ–∂–∏—Ç—å shebang, —á—Ç–æ–±—ã –ª—é–±–æ–π –º–æ–≥ –∑–∞–ø—É—Å—Ç–∏—Ç—å –µ–≥–æ –ø—Ä–æ—Å—Ç–æ –ø–æ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞.

–ö—Ä–æ–º–µ —É–∫–∞–∑–∞–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—É—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/bin/**bash**`), —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é `#!/usr/bin/env **bash**`. –≠—Ç–æ —á—É—Ç—å –±–æ–ª–µ–µ –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ: —Å–∏—Å—Ç–µ–º–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞ env –Ω–∞–π–¥—ë—Ç Bash –≤ PATH –∏ –∑–∞–ø—É—Å—Ç–∏—Ç –µ–≥–æ. –¢–∞–∫–æ–π shebang –ø–æ–ª–µ–∑–µ–Ω, –µ—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª–Ω—è—Ç—å—Å—è –Ω–∞ —Ä–∞–∑–Ω—ã—Ö Unix-—Å–∏—Å—Ç–µ–º–∞—Ö, –≥–¥–µ Bash –º–æ–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –Ω–µ —Å—Ç—Ä–æ–≥–æ –ø–æ –ø—É—Ç–∏ `/bin/**bash**`. –ò—Ç–æ–≥: shebang ‚Äì –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –≤–µ—â—å –≤ –Ω–∞—á–∞–ª–µ —Å–∫—Ä–∏–ø—Ç–∞, –µ—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å –¥–µ–ª–∞—Ç—å –µ–≥–æ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º —Ñ–∞–π–ª–æ–º. –ë–µ–∑ –Ω–µ–≥–æ —Å–∫—Ä–∏–ø—Ç –ª–∏–±–æ –Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç –Ω–∞–ø—Ä—è–º—É—é, –ª–∏–±–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç —è–≤–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ –Ω—É–∂–Ω–æ–π –æ–±–æ–ª–æ—á–∫–∏, —á—Ç–æ –Ω–µ –≤—Å–µ–≥–¥–∞ —É–¥–æ–±–Ω–æ.



---

## ‚ùì 53. –ö–∞–∫ –ø–µ—Ä–µ–¥–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ **bash**-—Å–∫—Ä–∏–ø—Ç –∏ –∫–∞–∫ –≤–Ω—É—Ç—Ä–∏ —Å–∫—Ä–∏–ø—Ç–∞ –ø–æ–ª—É—á–∏—Ç—å –∫ –Ω–∏–º –¥–æ—Å—Ç—É–ø? –†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ $1, $2, $# –∏ —Ç.–¥.


–ö–æ–≥–¥–∞ —Ç—ã –∑–∞–ø—É—Å–∫–∞–µ—à—å **bash**-—Å–∫—Ä–∏–ø—Ç, –ø–æ—Å–ª–µ –∏–º–µ–Ω–∏ —Å–∫—Ä–∏–ø—Ç–∞ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤—ã–ø–æ–ª–Ω–∏–º `./backup.**sh** /home/user/data /mnt/backupdrive`. –ó–¥–µ—Å—å `/home/user/data` –∏ `/mnt/backupdrive` ‚Äî –¥–≤–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞. –í–Ω—É—Ç—Ä–∏ —Å–∫—Ä–∏–ø—Ç–∞ Bash –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç –∏—Ö —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º. $1 –±—É–¥–µ—Ç —Ä–∞–≤–µ–Ω `/home/user/data`, $2 ‚Äî `/mnt/backupdrive`. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, $0 –æ–±—ã—á–Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–º—è —Å–∫—Ä–∏–ø—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `backup.**sh**`), –∞ $3, $4 –∏ –¥–∞–ª–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –±—ã –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, –µ—Å–ª–∏ –±—ã –æ–Ω–∏ –±—ã–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω—ã.

–ö—Ä–æ–º–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö $1, $2 –∏ —Ç.–¥., –µ—Å—Ç—å –µ—â—ë –ø–æ–ª–µ–∑–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã. $# (—Ä–µ—à—ë—Ç–∫–∞) ‚Äì —ç—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç—É. –í –Ω–∞—à–µ–º –ø—Ä–∏–º–µ—Ä–µ $# –±—ã–ª–æ –±—ã —Ä–∞–≤–Ω–æ 2, –ø–æ—Ç–æ–º—É —á—Ç–æ –º—ã –ø–µ—Ä–µ–¥–∞–ª–∏ –¥–≤–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞. $@ ‚Äì —ç—Ç–æ –≤—Å–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã —Ä–∞–∑–æ–º. –ï—Å–ª–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç—ã —Ö–æ—á–µ—à—å –≤ —Å–∫—Ä–∏–ø—Ç–µ –ø–µ—Ä–µ–¥–∞—Ç—å –≤—Å–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫—É–¥–∞-—Ç–æ –¥–∞–ª—å—à–µ (–≤ –¥—Ä—É–≥–æ–π –∫–æ–º–∞–Ω–¥–Ω—ã–π –≤—ã–∑–æ–≤), –º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ `cp -r $@ /backup`, –∏ —ç—Ç–æ —Ä–∞–∑–≤–µ—Ä–Ω—ë—Ç—Å—è –≤ `/home/user/data /mnt/backupdrive`. –ù–æ —Ç—É—Ç –≤–∞–∂–Ω–æ –∑–Ω–∞—Ç—å —Ä–∞–∑–Ω–∏—Ü—É: $@ –≤ –∫–∞–≤—ã—á–∫–∞—Ö ("$@") —Ä–∞–∑–≤–µ—Ä–Ω—ë—Ç—Å—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã ("arg1" "arg2"), —Å–æ—Ö—Ä–∞–Ω—è—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ, –∞ $* –ø—Ä–æ—Å—Ç–æ —Å–∫–ª–µ–∏—Ç –∏—Ö —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É. –û–±—ã—á–Ω–æ –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é—Ç "$@", —á—Ç–æ–±—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ã –¥–∞–∂–µ –µ—Å–ª–∏ –≤ –Ω–∏—Ö –µ—Å—Ç—å –ø—Ä–æ–±–µ–ª—ã.

–ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç—É –Ω—É–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–ª–∏ –æ–ø—Ü–∏–∏ —Ç–∏–ø–∞ -a, -b (—Ñ–ª–∞–≥–∏), —Ç–æ —á–∞—Å—Ç–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é —É—Ç–∏–ª–∏—Ç—É getopts –∏–ª–∏ –ø–∞—Ä—Å—è—Ç –≤—Ä—É—á–Ω—É—é –≤ —Ü–∏–∫–ª–µ. –ù–æ –æ—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è: –≤—Å—ë, —á—Ç–æ –ø–µ—Ä–µ–¥–∞–Ω–æ —Å–∫—Ä–∏–ø—Ç—É –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É, –¥–æ—Å—Ç—É–ø–Ω–æ –≤–Ω—É—Ç—Ä–∏ —á–µ—Ä–µ–∑ —ç—Ç–∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ. –¢—ã –º–æ–∂–µ—à—å –ø–∏—Å–∞—Ç—å —É—Å–ª–æ–≤–∏—è, –ø—Ä–æ–≤–µ—Ä—è—è, –∑–∞–¥–∞–Ω –ª–∏ —Ç–æ—Ç –∏–ª–∏ –∏–Ω–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, `if [ $# -lt 2 ]; then echo "Usage: ..."; exit 1; fi` ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –º–µ–Ω—å—à–µ 2, –∏ –≤—ã–≤–æ–¥–∏–º –ø–æ–¥—Å–∫–∞–∑–∫—É). –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, $1, $2 –∏ –¥—Ä—É–≥–∏–µ –ø–æ–∑–≤–æ–ª—è—é—Ç —Å–∫—Ä–∏–ø—Ç—É –ø–æ–ª—É—á–∞—Ç—å –Ω—É–∂–Ω—ã–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –¥—Ä—É–≥–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞, –∑–∞–ø—É—Å–∫–∞—é—â–µ–≥–æ —Å–∫—Ä–∏–ø—Ç.



---

## ‚ùì 54. –ó–∞—á–µ–º –≤ **bash**-—Å–∫—Ä–∏–ø—Ç–∞—Ö —á–∞—Å—Ç–æ –ø–∏—à—É—Ç `set -e` –∏ `set -x` –≤ –Ω–∞—á–∞–ª–µ? –ß—Ç–æ –æ–Ω–∏ –¥–µ–ª–∞—é—Ç –∏ –∫–∞–∫ –ø–æ–º–æ–≥–∞—é—Ç –ø—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤?


–û–ø—Ü–∏–∏ `set -e` –∏ `set -x` —á–∞—Å—Ç–æ –≤–∫–ª—é—á–∞—é—Ç –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö –¥–ª—è –±–æ–ª–µ–µ –Ω–∞–¥—ë–∂–Ω–æ–≥–æ –∏ —É–¥–æ–±–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. `set -e` (e = "exit on error") –≥–æ–≤–æ—Ä–∏—Ç –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä—É Bash, —á—Ç–æ–±—ã –æ–Ω –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É —Å–∫—Ä–∏–ø—Ç–∞, –µ—Å–ª–∏ –ª—é–±–∞—è –∫–æ–º–∞–Ω–¥–∞ –≤–µ—Ä–Ω—ë—Ç –Ω–µ–Ω—É–ª–µ–≤–æ–π –∫–æ–¥ –≤—ã—Ö–æ–¥–∞ (—Ç–æ –µ—Å—Ç—å –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –æ—à–∏–±–∫–∞). –ë–µ–∑ `set -e` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é Bash –±—É–¥–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–∂–µ –ø–æ—Å–ª–µ –æ—à–∏–±–∫–∏, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–æ–¥–∏—Ç—å –∫ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã–º –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞, –∞ —Å–∫—Ä–∏–ø—Ç –ø–æ—à—ë–ª –¥–∞–ª—å—à–µ –∏ –≤—ã–ø–æ–ª–Ω–∏–ª —á—Ç–æ-—Ç–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –Ω–µ –∑–∞–º–µ—Ç–∏–≤ –ø—Ä–æ–±–ª–µ–º—ã). –° `set -e` —Å–∫—Ä–∏–ø—Ç "–ø–∞–¥–∞–µ—Ç" —Å—Ä–∞–∑—É –Ω–∞ –º–µ—Å—Ç–µ –æ—à–∏–±–∫–∏, —á—Ç–æ –≤ —Ü–µ–ª–æ–º –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ: —Ç—ã —Å—Ä–∞–∑—É —É–∑–Ω–∞–µ—à—å, —á—Ç–æ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫, –∏ –Ω–µ —Ä–∏—Å–∫—É–µ—à—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ —Å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –ø—Ä–µ–¥–ø–æ—Å—ã–ª–∫–∞–º–∏.

`set -x` (x = "xtrace") –≤–∫–ª—é—á–∞–µ—Ç —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã Bash –ø–µ—á–∞—Ç–∞–µ—Ç —ç—Ç—É –∫–æ–º–∞–Ω–¥—É (–ø–æ—Å–ª–µ –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö) –≤ stdout. –í –≤—ã–≤–æ–¥–µ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –ø—Ä–µ—Ñ–∏–∫—Å –∏–∑ –ø–ª—é—Å–æ–≤, –∞ –∑–∞—Ç–µ–º —Å–∞–º–∞ –∫–æ–º–∞–Ω–¥–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤ —Å–∫—Ä–∏–ø—Ç–µ –µ—Å—Ç—å —Å—Ç—Ä–æ—á–∫–∞ `rm -rf "$TMP_DIR"`, —Ç–æ —Å –≤–∫–ª—é—á—ë–Ω–Ω—ã–º -x –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —Ç—ã —É–≤–∏–¥–∏—à—å `+ rm -rf /tmp/abc123` (–ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, TMP_DIR=/tmp/abc123). –≠—Ç–æ –æ—á–µ–Ω—å –ø–æ–º–æ–≥–∞–µ—Ç –ø—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ —Å–ª–æ–∂–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤: —Ç—ã –≤–∏–¥–∏—à—å –ø–æ—à–∞–≥–æ–≤–æ, —á—Ç–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, —Å –∫–∞–∫–∏–º–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤. –ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –≥–¥–µ-—Ç–æ –∑–∞—Ö–æ–¥–∏—Ç –Ω–µ —Ç—É–¥–∞ –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç "–Ω–µ —Ç–æ", –ª–µ–≥–∫–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å, –≥–ª—è–¥—è –Ω–∞ —Ç–∞–∫–æ–π —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–æ—á–Ω—ã–π –≤—ã–≤–æ–¥.

–û–±—ã—á–Ω–æ —ç—Ç–∏ –æ–ø—Ü–∏–∏ —Å—Ç–∞–≤—è—Ç –ø—Ä—è–º–æ –≤ –Ω–∞—á–∞–ª–µ —Å–∫—Ä–∏–ø—Ç–∞, –æ—Å–æ–±–µ–Ω–Ω–æ `set -e`, —á—Ç–æ–±—ã –≤–µ—Å—å —Å–∫—Ä–∏–ø—Ç —Ä–∞–±–æ—Ç–∞–ª –≤ "–±–µ–∑–æ–ø–∞—Å–Ω–æ–º" —Ä–µ–∂–∏–º–µ. –ò–Ω–æ–≥–¥–∞ –µ—â—ë –¥–æ–±–∞–≤–ª—è—é—Ç `set -u` (–æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–æ–±—ä—è–≤–ª–µ–Ω–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é) –∏ `set -o pipefail` (—á—Ç–æ–±—ã –ø–∞–π–ø–ª–∞–π–Ω—ã –∫–æ–º–∞–Ω–¥ –≤–æ–∑–≤—Ä–∞—â–∞–ª–∏ –æ—à–∏–±–∫—É, –µ—Å–ª–∏ –ª—é–±–∞—è –∫–æ–º–∞–Ω–¥–∞ –≤ –∫–æ–Ω–≤–µ–π–µ—Ä–µ —É–ø–∞–ª–∞). –í —Å–æ—á–µ—Ç–∞–Ω–∏–∏ –ø–æ–ª—É—á–∞–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–∞ `set -euo pipefail`, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –≤–∏–¥–µ—Ç—å –≤–æ –º–Ω–æ–≥–∏—Ö —Å–∫—Ä–∏–ø—Ç–∞—Ö. –û–Ω–∞ –¥–µ–ª–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –±–æ–ª–µ–µ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º. –ê `set -x` –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∞—Ç—å –ø—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ –∏ –≤—ã–∫–ª—é—á–∞—Ç—å (—á–µ—Ä–µ–∑ `set +x`), —á—Ç–æ–±—ã –Ω–µ –∑–∞—Å–æ—Ä—è—Ç—å –ª–æ–≥ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ, –∞ –≤—ã–≤–æ–¥–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤ –Ω—É–∂–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.



---

## ‚ùì 55. –ö–∞–∫ –≤ shell-—Å–∫—Ä–∏–ø—Ç–µ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è? –ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π (export), –∏ –∫–∞–∫ –¥–æ—á–µ—Ä–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –Ω–∞—Å–ª–µ–¥—É—é—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ?


–í shell –µ—Å—Ç—å –ø–æ–Ω—è—Ç–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (environment variables). –ö–æ–≥–¥–∞ —Ç—ã –≤ Bash –ø–∏—à–µ—à—å `VAR=value`, —Ç—ã —Å–æ–∑–¥–∞—ë—à—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é VAR, –∫–æ—Ç–æ—Ä–∞—è –≤–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ –≤ —Ç–µ–∫—É—â–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä–µ shell. –û–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–µ –ø–æ–ø–∞–¥—ë—Ç –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∏–∑ –Ω–µ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º. –ê –≤–æ—Ç –µ—Å–ª–∏ —Ç—ã —Å–¥–µ–ª–∞–µ—à—å `export VAR=value`, —Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å—Ç–∞–Ω–µ—Ç —á–∞—Å—Ç—å—é –æ–∫—Ä—É–∂–µ–Ω–∏—è shell –∏ –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω–∞ –≤—Å–µ–º –¥–æ—á–µ—Ä–Ω–∏–º –ø—Ä–æ—Ü–µ—Å—Å–∞–º, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã –∑–∞–ø—É—Å—Ç–∏—à—å –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ. –ü—Ä–æ—â–µ –≥–æ–≤–æ—Ä—è, —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è ‚Äì —ç—Ç–æ —Ç–æ, —á—Ç–æ –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –∑–∞–ø—É—Å–∫–∞–µ–º—ã–º–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏, –∞ –Ω–µ—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∂–∏–≤—ë—Ç —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ —Å–∞–º–æ–≥–æ Bash.

–õ–æ–∫–∞–ª—å–Ω–∞—è (–Ω–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è) –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –ø–æ–ª–µ–∑–Ω–∞, –∫–æ–≥–¥–∞ —Ç—ã —Ö–æ—á–µ—à—å –≤–Ω—É—Ç—Ä–∏ —Å–∫—Ä–∏–ø—Ç–∞ —á—Ç–æ-—Ç–æ –ø–æ—Å—á–∏—Ç–∞—Ç—å –∏–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å, –Ω–æ —ç—Ç–æ –Ω–µ –Ω—É–∂–Ω–æ –≤–Ω–µ—à–Ω–∏–º –∫–æ–º–∞–Ω–¥–∞–º. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ —Å–∫—Ä–∏–ø—Ç–µ –º–æ–∂–µ—à—å —Å–¥–µ–ª–∞—Ç—å `count=5`, –∏ –ø–æ—Ç–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å $count –≤ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è—Ö –≤–Ω—É—Ç—Ä–∏ —Å–∫—Ä–∏–ø—Ç–∞. –ù–æ –µ—Å–ª–∏ —Ç—ã –≤—ã–∑–æ–≤–µ—à—å –¥—Ä—É–≥—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É, —Å–∫–∞–∂–µ–º, `python script.py` –∏–∑ —Å–≤–æ–µ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞, —Ç–æ –≤–Ω—É—Ç—Ä–∏ script.py –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π count –Ω–µ –±—É–¥–µ—Ç. –ï—Å–ª–∏ –∂–µ —Ç—ã –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º Python —Å–¥–µ–ª–∞–µ—à—å `export count`, —Ç–æ Python –ø–æ–ª—É—á–∏—Ç –µ—ë —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–≤ Python –æ–Ω–∞ –±—ã–ª–∞ –±—ã –¥–æ—Å—Ç—É–ø–Ω–∞ –∫–∞–∫ os.environ["count"]). –ü–æ—ç—Ç–æ–º—É, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –∑–∞–ø—É—â–µ–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É, –∏—Ö –ª–∏–±–æ –ø–µ—Ä–µ–¥–∞—é—Ç –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç—ã, –ª–∏–±–æ —á–µ—Ä–µ–∑ environment (–ø—É—Ç—ë–º —ç–∫—Å–ø–æ—Ä—Ç–∞).

–°—Ç–æ–∏—Ç –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –∫–æ–≥–¥–∞ —Ç—ã –≤—Ö–æ–¥–∏—à—å –≤ —Å–∏—Å—Ç–µ–º—É, –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É–∂–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, PATH, HOME –∏ —Ç.–¥., –æ–Ω–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç –∏–∑ —Å—Ä–µ–¥—ã –ø—Ä–æ—Ü–µ—Å—Å–∞ login). –í —Å–∫—Ä–∏–ø—Ç–∞—Ö –∂–µ —Ç—ã —Å–∞–º —Ä–µ—à–∞–µ—à—å, —á—Ç–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å. –ï—â—ë –µ—Å—Ç—å –∫–æ–º–∞–Ω–¥–∞ export –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π ‚Äì –æ–Ω–∞ –≤—ã–≤–µ–¥–µ—Ç –≤—Å–µ —Ç–µ–∫—É—â–∏–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ. –ê –µ—Å–ª–∏ —Ö–æ—á–µ—à—å —É–±—Ä–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∏–∑ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É `unset`. –ù–æ –æ—Å–Ω–æ–≤–Ω–∞—è –º—ã—Å–ª—å: –æ–±—ã—á–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è Bash —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –≤ —Ç–µ–∫—É—â–µ–º shell, –∞ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è ‚Äì –∏–¥—ë—Ç "–≤ –Ω–∞—Å–ª–µ–¥—Å—Ç–≤–æ" –≤—Å–µ–º –ø–æ—Ç–æ–º–∫–∞–º —ç—Ç–æ–≥–æ shell, —Ç–∞–∫ —á—Ç–æ –æ–Ω–∏ —Ç–æ–∂–µ –º–æ–≥—É—Ç –µ—ë –≤–∏–¥–µ—Ç—å.



---

## ‚ùì 56. –í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ CI/CD —á—Ç–æ —Ç–∞–∫–æ–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç? –ö–∞–∫ —Ç—ã –æ–±—ã—á–Ω–æ —É–ø—Ä–∞–≤–ª—è–µ—à—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—É—á–∞—é—Ç—Å—è –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, jar-—Ñ–∞–π–ª—ã –∏–ª–∏ –æ–±—Ä–∞–∑—ã Docker) –∏ –ø–µ—Ä–µ–¥–∞—ë—à—å –∏—Ö –Ω–∞ —ç—Ç–∞–ø –¥–µ–ø–ª–æ—è?


–ê—Ä—Ç–µ—Ñ–∞–∫—Ç –≤ CI/CD ‚Äì —ç—Ç–æ –ø–æ —Å—É—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–±–æ—Ä–∫–∏, –≥–æ—Ç–æ–≤—ã–π –ø—Ä–æ–¥—É–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –º—ã —Ö–æ—Ç–∏–º –¥–∞–ª—å—à–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –∑–∞—Ç–µ–º –≤—ã–∫–∞—Ç–∏—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–Ω. –î–ª—è Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Ç–∏–ø–∏—á–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã ‚Äì —ç—Ç–æ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JAR –∏–ª–∏ WAR —Ñ–∞–π–ª, –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–ª–∏ Docker-–æ–±—Ä–∞–∑ —Å –Ω–∞—à–∏–º —Å–µ—Ä–≤–∏—Å–æ–º –≤–Ω—É—Ç—Ä–∏. –í –ø–∞–π–ø–ª–∞–π–Ω–µ CI –ø–æ—Å–ª–µ —ç—Ç–∞–ø–∞ —Å–±–æ—Ä–∫–∏ —É —Ç–µ–±—è –Ω–∞ –≤—ã—Ö–æ–¥–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ç–∞–∫–æ–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç.

–£–ø—Ä–∞–≤–ª—è—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º–∏ –æ–∑–Ω–∞—á–∞–µ—Ç –∏—Ö –≥–¥–µ-—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –º–µ–∂–¥—É —à–∞–≥–∞–º–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, —Ç—ã —Å–æ–±—Ä–∞–ª `myapp.jar` –Ω–∞ —ç—Ç–∞–ø–µ —Å–±–æ—Ä–∫–∏, –∞ –¥–µ–ø–ª–æ–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º —ç—Ç–∞–ø–æ–º. –ù–∞–¥–æ —ç—Ç–æ—Ç JAR –≥–¥–µ-—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—å, —á—Ç–æ–±—ã —ç—Ç–∞–ø –¥–µ–ø–ª–æ—è —Å–º–æ–≥ –µ–≥–æ –≤–∑—è—Ç—å. –í Jenkins, –Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å—Ç—å —à–∞–≥ `archiveArtifacts`, –∫–æ—Ç–æ—Ä—ã–π —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –≤ —Å–∞–º–æ–π —Å–∏—Å—Ç–µ–º–µ Jenkins (–≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–∞ –º–∞—Å—Ç–µ—Ä–µ). –ó–∞—Ç–µ–º –µ–≥–æ –º–æ–∂–Ω–æ `stash/unstash` –º–µ–∂–¥—É —Å—Ç–∞–¥–∏—è–º–∏ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –¥–æ—Å—Ç–∞—Ç—å –≤ —à–∞–≥–µ –¥–µ–ø–ª–æ—è. –ë–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –ø–æ–¥—Ö–æ–¥ ‚Äì –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤, –≤—Ä–æ–¥–µ Nexus, Artifactory –∏–ª–∏ –¥–∞–∂–µ –ø—Ä–æ—Å—Ç–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ S3. –¢–æ –µ—Å—Ç—å pipeline –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç —Ç—É–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Maven-–ø—É–±–ª–∏–∫–∞—Ü–∏—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ –≤ Nexus —Å –≤–µ—Ä—Å–∏–µ–π), –∞ —ç—Ç–∞–ø –¥–µ–ø–ª–æ—è —É–∂–µ —Å–∫–∞—á–∏–≤–∞–µ—Ç –µ–≥–æ –æ—Ç—Ç—É–¥–∞. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ –∏–º–µ–Ω–Ω–æ —Ç–æ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ—à—ë–ª —Ç–µ—Å—Ç—ã, –∏ –ø–æ–ø–∞–¥—ë—Ç –≤ –ø—Ä–æ–¥–∞–∫—à–Ω, –±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏.

–ï—Å–ª–∏ –≥–æ–≤–æ—Ä–∏—Ç—å –ø—Ä–æ Docker-–æ–±—Ä–∞–∑—ã –∫–∞–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã, —Ç–æ —Å—Ö–æ–∂–∞ —Å—Ö–µ–º–∞: –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–∞ –µ–≥–æ –Ω—É–∂–Ω–æ –∫—É–¥–∞-—Ç–æ –ø–æ–º–µ—Å—Ç–∏—Ç—å ‚Äì –≤ Docker Registry (–Ω–∞–ø—Ä–∏–º–µ—Ä, Docker Hub, GitHub Container Registry, Harbor –∏–ª–∏ ECR –≤ AWS). CI-–ø–∞–π–ø–ª–∞–π–Ω –ª–æ–≥–∏–Ω–∏—Ç—Å—è –≤ registry –∏ –ø—É—à–∏—Ç –æ–±—Ä–∞–∑ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `myapp:1.0.0`). –ó–∞—Ç–µ–º —ç—Ç–∞–ø –¥–µ–ø–ª–æ—è (–∏–ª–∏ CD-—Å–∏—Å—Ç–µ–º–∞) –±–µ—Ä—ë—Ç —ç—Ç–æ—Ç –æ–±—Ä–∞–∑ –∏–∑ registry –∏ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç. –í–∞–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã ‚Äì –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –≤–µ—Ä—Å–∏–∏ –∏–ª–∏ –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç –∫ Git commit/—Ç–µ–≥—É, —á—Ç–æ–±—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ –±—ã–ª–æ –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –º—ã –¥–µ–ø–ª–æ–∏–º. –ò—Ç–æ–≥–æ, –∞—Ä—Ç–µ—Ñ–∞–∫—Ç ‚Äì —ç—Ç–æ —Ç–æ, —á—Ç–æ –º—ã –ø–µ—Ä–µ–Ω–æ—Å–∏–º —Å —Å—Ç–∞–¥–∏–∏ —Å–±–æ—Ä–∫–∏ –Ω–∞ —Å—Ç–∞–¥–∏—é –¥–µ–ø–ª–æ—è, –∏ –¥–ª—è —ç—Ç–æ–≥–æ –æ–±—ã—á–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ª–∏–±–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º CI –¥–ª—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤, –ª–∏–±–æ –≤–Ω–µ—à–Ω–∏–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π/registry, —á—Ç–æ–±—ã –≤—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ –º–æ–≥–ª–∏ —ç—Ç–æ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –ø–æ–ª—É—á–∏—Ç—å.



---

## ‚ùì 57. –ö–∞–∫ –º–æ–∂–Ω–æ —É—Å–∫–æ—Ä–∏—Ç—å —Å–±–æ—Ä–∫—É –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ CI? –ö–∞–∫–∏–µ –ø–æ–¥—Ö–æ–¥—ã —Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, Maven repository) –∏–ª–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á?


–£—Å–∫–æ—Ä–µ–Ω–∏–µ CI-–ø—Ä–æ—Ü–µ—Å—Å–∞ ‚Äì –≤–∞–∂–Ω–∞—è –∑–∞–¥–∞—á–∞, –æ—Å–æ–±–µ–Ω–Ω–æ –∫–æ–≥–¥–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ –º–Ω–æ–≥–æ –∏–ª–∏ –æ–Ω–∏ –±–æ–ª—å—à–∏–µ. –û–¥–∏–Ω –∏–∑ –ø–µ—Ä–≤—ã—Ö –ø—Ä–∏—ë–º–æ–≤ ‚Äì –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë, —á—Ç–æ –º–æ–∂–Ω–æ, —á—Ç–æ–±—ã –Ω–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ç—è–∂—ë–ª—É—é —Ä–∞–±–æ—Ç—É –ø–æ–≤—Ç–æ—Ä–Ω–æ. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è Java-–ø—Ä–æ–µ–∫—Ç–∞ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π Maven-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (`~/.m2/repository`), —á—Ç–æ–±—ã –Ω–∞ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ –ø–∞–π–ø–ª–∞–π–Ω–∞ –∑–∞–Ω–æ–≤–æ –Ω–µ —Å–∫–∞—á–∏–≤–∞–ª–∏—Å—å –≤—Å–µ –∑–∞–≤–∏—Å–∏–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞. –í Jenkins –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —ç—Ç–æ–π –ø–∞–ø–∫–∏ –Ω–∞ –∞–≥–µ–Ω—Ç–µ –º–µ–∂–¥—É —Å–±–æ—Ä–∫–∞–º–∏, –ª–∏–±–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—â—É—é –ø–∞–ø–∫—É –¥–ª—è –≤—Å–µ—Ö –±–∏–ª–¥–æ–≤. –í GitLab CI, GitHub Actions –∏ –ø–æ–¥–æ–±–Ω—ã—Ö –µ—Å—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è: —É–∫–∞–∑—ã–≤–∞–µ—à—å, –∫–∞–∫–∏–µ –ø—É—Ç–∏ –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å, –∏ —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏—Ö –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏. –ü–æ–º–∏–º–æ Maven, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –∫–µ—à–∏—Ä—É—é—Ç npm-–º–æ–¥—É–ª–∏, –∫–µ—à –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ Gradle, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã lint-–ø—Ä–æ–≤–µ—Ä–æ–∫ –∏ —Ç.–ø. –ì–ª–∞–≤–Ω–æ–µ ‚Äì —Å–ª–µ–¥–∏—Ç—å, —á—Ç–æ–±—ã –∫–µ—à –æ–±–Ω–æ–≤–ª—è–ª—Å—è, –µ—Å–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–æ–º–µ–Ω—è–ª–∏—Å—å (–æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫–ª—é—á –∫—ç—à–∞, –∑–∞–≤–∏—Å—è—â–∏–π –æ—Ç —Ñ–∞–π–ª–æ–≤ —Ç–∏–ø–∞ pom.xml –∏–ª–∏ package.json).

–í—Ç–æ—Ä–æ–π –ø–æ–¥—Ö–æ–¥ ‚Äì –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –∑–∞–¥–∞—á–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ. –ï—Å–ª–∏ —É —Ç–µ–±—è –µ—Å—Ç—å –º–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã, –∏—Ö –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –∞–≥–µ–Ω—Ç–∞—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –≤–º–µ—Å—Ç–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ–≥–æ–Ω–∞. –ò–ª–∏ –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–æ–¥—É–ª–µ–π, –º–æ–∂–Ω–æ —Å—Ç—Ä–æ–∏—Ç—å –∏—Ö –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ –∑–∞–≤–∏—Å—è—Ç –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞. Jenkins –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ —Å—Ç–∞–¥–∏–∏ (`parallel`), GitLab CI ‚Äì –Ω–µ—Å–∫–æ–ª—å–∫–æ job-–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ —Ä–∞–∑–±–∏—Ç—å —Ç–µ—Å—Ç—ã –Ω–∞ –≥—Ä—É–ø–ø—ã –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å 5 runner-–æ–≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ, –∫–∞–∂–¥—ã–π –ø—Ä–æ–≥–æ–Ω–∏—Ç —Å–≤–æ—é —á–∞—Å—Ç—å —Ç–µ—Å—Ç–æ–≤ ‚Äì —Å—É–º–º–∞—Ä–Ω–æ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥—É—Ç –±—ã—Å—Ç—Ä–µ–µ. –ö–æ–Ω–µ—á–Ω–æ, —Ç—É—Ç –Ω—É–∂–µ–Ω –±–∞–ª–∞–Ω—Å: —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–µ —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏–≤–∞–Ω–∏–µ –º–æ–∂–µ—Ç –Ω–∞–≥—Ä—É–∂–∞—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É CI, –Ω–æ –≤ —Ä–∞–∑—É–º–Ω—ã—Ö –ø—Ä–µ–¥–µ–ª–∞—Ö —ç—Ç–æ —Å–∏–ª—å–Ω–æ —ç–∫–æ–Ω–æ–º–∏—Ç –≤—Ä–µ–º—è.

–ï—â—ë –æ–¥–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è ‚Äì –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ —ç—Ç–∞–ø—ã, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —É —Ç–µ–±—è –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤, –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ—Å–Ω—É–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–≥–æ –∏–∑ –Ω–∏—Ö, –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–∞–π–ø–ª–∞–π–Ω —Ç–∞–∫, —á—Ç–æ–±—ã —Å–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –¥–ª—è –∏–∑–º–µ–Ω—ë–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞, –∞ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–ø—É—Å–∫–∞–ª–∏—Å—å. –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω—ã–µ —Å–±–æ—Ä–∫–∏: Gradle, –Ω–∞–ø—Ä–∏–º–µ—Ä, —É–º–µ–µ—Ç –Ω–µ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞—Ç—å –º–æ–¥—É–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –º–µ–Ω—è–ª–∏—Å—å. –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã—Ö —Å–±–æ—Ä–∫–∞—Ö (Docker) –º—ã —É–∂–µ –æ–±—Å—É–∂–¥–∞–ª–∏ ‚Äì –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–µ—à —Å–ª–æ—ë–≤. –ù–∞–∫–æ–Ω–µ—Ü, –∏–Ω–æ–≥–¥–∞ –≤—ã—Ä—É—á–∞–µ—Ç –±–æ–ª–µ–µ –º–æ—â–Ω–æ–µ "–∂–µ–ª–µ–∑–æ" –¥–ª—è CI: –±–∞–Ω–∞–ª—å–Ω–æ, –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–±–æ—Ä–∫—É –Ω–∞ –º–∞—à–∏–Ω–µ —Å 16 —è–¥—Ä–∞–º–∏ –∏ NVMe-–¥–∏—Å–∫–æ–º –±—É–¥–µ—Ç –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º –Ω–∞ —Å–ª–∞–±–æ–π, –µ—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –±–æ–ª—å—à–æ–π. –í—Å–µ —ç—Ç–∏ –º–µ—Ç–æ–¥—ã –≤ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è CI, —á—Ç–æ–±—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ–ª—É—á–∞–ª–∏ –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –±—ã—Å—Ç—Ä–µ–µ.



---

## ‚ùì 58. –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø 'Pipeline as Code' –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ CI/CD –∏ –ø–æ—á–µ–º—É –æ–Ω –≤–∞–∂–µ–Ω? –°—Ç–∞–ª–∫–∏–≤–∞–ª—Å—è –ª–∏ —Ç—ã —Å –Ω–∏–º –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ?


"Pipeline as Code" –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –¥–µ–ø–ª–æ—è –æ–ø–∏—Å–∞–Ω –≤ –≤–∏–¥–µ –∫–æ–¥–∞, –æ–±—ã—á–Ω–æ —Ö—Ä–∞–Ω—è—â–µ–≥–æ—Å—è –≤ —Ç–æ–º –∂–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, —á—Ç–æ –∏ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å CI/CD —á–µ—Ä–µ–∑ –∫–ª–∏–∫–∏ –≤ UI, –º—ã –ø–∏—à–µ–º —Å–∫—Ä–∏–ø—Ç –∏–ª–∏ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π —Ñ–∞–π–ª, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤–µ—Å—å –ø–∞–π–ø–ª–∞–π–Ω. –ü—Ä–∏–º–µ—Ä—ã: Jenkinsfile –¥–ª—è Jenkins Pipeline, .gitlab-ci.yml –¥–ª—è GitLab CI, workflow-—Ñ–∞–π–ª YAML –¥–ª—è GitHub Actions. –≠—Ç–æ—Ç —Ñ–∞–π–ª –ª–µ–∂–∏—Ç —Ä—è–¥–æ–º —Å –∫–æ–¥–æ–º, –µ–≥–æ –º–æ–∂–Ω–æ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å, –ø—Ä–∞–≤–∏—Ç—å, –∫–∞–∫ –æ–±—ã—á–Ω—ã–π –∫–æ–¥, –∏ —Å–∏—Å—Ç–µ–º–∞ CI —Å—á–∏—Ç—ã–≤–∞–µ—Ç –µ–≥–æ –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ–ø–∏—Å–∞–Ω–Ω—ã–µ —à–∞–≥–∏.

–í–∞–∂–Ω–æ—Å—Ç—å Pipeline as Code –≤ —Ç–æ–º, —á—Ç–æ –æ–Ω –¥–µ–ª–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏/–¥–µ–ø–ª–æ—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–º –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º. –ö–æ–≥–¥–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –∫–æ–¥–µ, —Ç—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—à—å –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, —á—Ç–æ –∂–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ CI/CD: –∫–∞–∫–∏–µ —à–∞–≥–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è, —Å –∫–∞–∫–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏, –≤ –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ. –õ—é–±–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ –æ—Ç—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–æ—Å—Ç—ã–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Ñ–∞–π–ª–∞ ‚Äì —ç—Ç–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ code review, –º–æ–∂–Ω–æ –æ–±—Å—É–¥–∏—Ç—å —á–µ—Ä–µ–∑ pull request, –∫–∞–∫ –∏ –ª—é–±–æ–π –∫–æ–¥. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –≤—Å—è –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ö—Ä–∞–Ω–∏—Ç—Å—è ‚Äì –ª–µ–≥–∫–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å, –∫–æ–≥–¥–∞ –∏ –∫—Ç–æ –∏–∑–º–µ–Ω–∏–ª –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏, –∏ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏. –ê –µ—â—ë —ç—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å —Ä–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –ø–∞–π–ø–ª–∞–π–Ω–∞, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∫ –≤–µ—Ä—Å–∏—è–º –∫–æ–¥–∞: –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–µ—Ç–∫–∞ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–≤–æ—é –≤–µ—Ä—Å–∏—é Jenkinsfile, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Ç–æ–º—É, –∫–∞–∫ –∏–º–µ–Ω–Ω–æ —ç—Ç—É –≤–µ—Ç–∫—É –Ω—É–∂–Ω–æ —Å–æ–±–∏—Ä–∞—Ç—å.

–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –ø–æ—á—Ç–∏ –≤—Å–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ CI-—Å–∏—Å—Ç–µ–º—ã —Å–ª–µ–¥—É—é—Ç —ç—Ç–æ–º—É –ø—Ä–∏–Ω—Ü–∏–ø—É. –í–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è freestyle-job –≤ Jenkins, –¥–æ–±–∞–≤–ª—è–π Jenkinsfile –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, –∏ Jenkins –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∫–æ–º–º–∏—Ç–µ –±—É–¥–µ—Ç —á–∏—Ç–∞—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ç–æ, —á—Ç–æ —Ç–∞–º –æ–ø–∏—Å–∞–Ω–æ (—Å—Ç–∞–¥–∏–∏, —à–∞–≥–∏). –¢–æ –∂–µ —Å–∞–º–æ–µ —Å GitLab: –±—É–∫–≤–∞–ª—å–Ω–æ –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –ª–µ–∂–∏—Ç .gitlab-ci.yml, –∏ –ø—Ä–∏ push pipeline –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å–æ–≥–ª–∞—Å–Ω–æ –æ–ø–∏—Å–∞–Ω–∏—é. –≠—Ç–æ –æ—á–µ–Ω—å —É–¥–æ–±–Ω–æ ‚Äì —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–∞–º–∏ –º–æ–≥—É—Ç –ø—Ä–∞–≤–∏—Ç—å –ø–∞–π–ø–ª–∞–π–Ω —Ä—è–¥–æ–º —Å –∫–æ–¥–æ–º, –Ω–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫, —Å–ø—Ä—è—Ç–∞–Ω–Ω—ã—Ö –≥–¥–µ-—Ç–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ CI, –∏ –ø—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤ –¥—Ä—É–≥–æ–µ –º–µ—Å—Ç–æ –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏ "—É–µ–∑–∂–∞–µ—Ç" –≤–º–µ—Å—Ç–µ —Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º.



---

## ‚ùì 59. –ö–∞–∫ –≤—ã—Å—Ç—Ä–æ–∏—Ç—å CI/CD –ø—Ä–æ—Ü–µ—Å—Å –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤? –° –∫–∞–∫–∏–º–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—è–º–∏ –º–æ–∂–Ω–æ —Å—Ç–æ–ª–∫–Ω—É—Ç—å—Å—è –∏ –∫–∞–∫ –∏—Ö —Ä–µ—à–∞—Ç—å, –∫–æ–≥–¥–∞ —É —Ç–µ–±—è –¥–µ—Å—è—Ç–∫–∏ —Å–µ—Ä–≤–∏—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ —Å–æ–±–∏—Ä–∞—Ç—å –∏ –¥–µ–ø–ª–æ–∏—Ç—å?


–ö–æ–≥–¥–∞ —É —Ç–µ–±—è –¥–µ—Å—è—Ç–∫–∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤, –≤–∞–∂–Ω–æ –Ω–∞–π—Ç–∏ –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å—é –∫–æ–º–∞–Ω–¥ –∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º. –û–±—ã—á–Ω–æ –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –∏–º–µ–µ—Ç —Å–≤–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ —Å–≤–æ–π –ø–∞–π–ø–ª–∞–π–Ω CI/CD ‚Äì —ç—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥–µ, –≤–µ–¥—É—â–µ–π —Å–µ—Ä–≤–∏—Å, –±—ã—Å—Ç—Ä–æ –º–µ–Ω—è—Ç—å –µ–≥–æ —Å–±–æ—Ä–∫—É, –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—è –¥—Ä—É–≥–∏–µ. –ù–æ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å: –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ø–∞–π–ø–ª–∞–π–Ω–æ–≤. –†–µ—à–∞—é—Ç —ç—Ç–æ –∑–∞ —Å—á—ë—Ç —à–∞–±–ª–æ–Ω–æ–≤ –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ Jenkins –º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å –æ–±—â–∏–π pipeline-—à–∞–±–ª–æ–Ω –∏–ª–∏ Shared Library: –æ–ø–∏—Å–∞—Ç—å –æ–¥–∏–Ω —Ä–∞–∑, –∫–∞–∫ —Å–æ–±–∏—Ä–∞—Ç—å —Ç–∏–ø–∏—á–Ω—ã–π Java-—Å–µ—Ä–≤–∏—Å (checkout, build, test, **docker** build/push, deploy), –∏ –≤ Jenkinsfile –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –ø—Ä–æ—Å—Ç–æ –≤—ã–∑—ã–≤–∞—Ç—å —ç—Ç—É –æ–±—â—É—é —Ñ—É–Ω–∫—Ü–∏—é. –¢–æ–≥–¥–∞ –ø—Ä–∞–≤–∫–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—é—Ç—Å—è –ª–µ–≥–∫–æ ‚Äì –ø—Ä–∞–≤–∏—à—å —à–∞–±–ª–æ–Ω, –∏ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å. –í GitLab CI –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ ‚Äì –¥–µ–ª–∞—é—Ç include –æ–±—â–µ–≥–æ .gitlab-ci.yml –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç YAML anchors, —á—Ç–æ–±—ã –Ω–µ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∫–æ–¥ –≤–æ –≤—Å–µ –ø—Ä–æ–µ–∫—Ç—ã.

–î—Ä—É–≥–∞—è –ø—Ä–æ–±–ª–µ–º–∞ ‚Äì –∑–∞–≤–∏—Å–∏–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è. –ï—Å–ª–∏ —Å–µ—Ä–≤–∏—Å A –∑–∞–≤–∏—Å–∏—Ç –æ—Ç API —Å–µ—Ä–≤–∏—Å–∞ B, —Ç–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö B –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –ø–µ—Ä–µ—Å—Ç—Ä–æ–∏—Ç—å –∏ A, –∏–ª–∏ –ø–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ –ø—Ä–æ–≥–Ω–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã, —É–±–µ–¥–∏–≤—à–∏—Å—å, —á—Ç–æ –≤–º–µ—Å—Ç–µ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç. –¢—É—Ç –ø–æ–º–æ–≥–∞—é—Ç –º–µ—Ö–∞–Ω–∏–∑–º—ã —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å, —á—Ç–æ –ø—Ä–∏ –º–µ—Ä–∂–µ –∫–æ–¥–∞ —Å–µ—Ä–≤–∏—Å–∞ B, —Å–∏—Å—Ç–µ–º–∞ CI –æ—Ç–ø—Ä–∞–≤–∏—Ç —Å–æ–±—ã—Ç–∏–µ (webhook) –Ω–∞ —Å–±–æ—Ä–∫—É —Å–µ—Ä–≤–∏—Å–∞ A (–æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ A –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É/–∫–ª–∏–µ–Ω—Ç B). –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API –∏ —á—ë—Ç–∫–∏–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è, —á—Ç–æ–±—ã —Å–µ—Ä–≤–∏—Å—ã –±—ã–ª–∏ –±–æ–ª–µ–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –∏ –º–æ–∂–Ω–æ –±—ã–ª–æ –∏—Ö –¥–µ–ø–ª–æ–∏—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ. –í –º–∞—Å—à—Ç–∞–±–∞—Ö –¥–µ—Å—è—Ç–∫–æ–≤ —Å–µ—Ä–≤–∏—Å–æ–≤ —Ç–∞–∫–∂–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –≤–æ–ø—Ä–æ—Å –æ–∫—Ä—É–∂–µ–Ω–∏–π: —á–∞—Å—Ç–æ –¥–µ–ª–∞—é—Ç –æ–±—â–∏–π staging, –≥–¥–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ –æ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ø–ª–æ—è—Ç—Å—è –∏ —Ç–µ—Å—Ç–∏—Ä—É—é—Ç—Å—è –≤–º–µ—Å—Ç–µ, —á—Ç–æ–±—ã –ø–æ–π–º–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –¥–æ –ø—Ä–æ–¥–∞–∫—à–Ω–∞.

–í —Ü–µ–ª–æ–º, –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ ‚Äì —ç—Ç–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è –ø–∞–π–ø–ª–∞–π–Ω–æ–≤. –ú–æ–∂–Ω–æ —Å—Ç–æ–ª–∫–Ω—É—Ç—å—Å—è —Å —Å–∏—Ç—É–∞—Ü–∏–µ–π, –∫–æ–≥–¥–∞ 30+ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ –±–µ–∑ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ pipelines –Ω–∞—á–Ω—É—Ç "—Ä–∞–∑—ä–µ–∑–∂–∞—Ç—å—Å—è": –≤ –æ–¥–Ω–æ–º –∑–∞–±—ã–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å —à–∞–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –≤ –¥—Ä—É–≥–æ–º —Ç–µ—Å—Ç—ã –Ω–µ —Ç–∞–∫ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è. –ü–æ—ç—Ç–æ–º—É –≤–Ω–µ–¥—Ä—è–π –æ–±—â–∏–π –ø–æ–¥—Ö–æ–¥: –Ω–∞ —É—Ä–æ–≤–Ω–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–ø–∏—Å—ã–≤–∞–π —à–∞–±–ª–æ–Ω CI, –∏ –∫–∞–∂–¥—ã–π –ø—Ä–æ–µ–∫—Ç –¥–æ–ª–∂–µ–Ω –µ–≥–æ –≤–∫–ª—é—á–∞—Ç—å. –ü–ª—é—Å, –∑–∞–≤–µ–¥–∏ –Ω–µ–∫–æ–µ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ (–º–æ–Ω–æ—Ä–µ–ø–æ –¥–ª—è Helm-—á–∞—Ä—Ç–æ–≤ –∏–ª–∏ **docker**-compose), –≥–¥–µ –æ–ø–∏—à–∏, –∫–∞–∫ —Å–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –≤–º–µ—Å—Ç–µ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –∫–æ–º–∞–Ω–¥—ã –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ, –Ω–æ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –≤–µ—â–∏ (—Å–±–æ—Ä–∫–∞, –¥–µ–ø–ª–æ–π, —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–∞—á–µ—Å—Ç–≤–∞) –±—É–¥—É—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å–∫—Ä–∏–ø—Ç–∞–º–∏ –∏ —à–∞–±–ª–æ–Ω–∞–º–∏, –µ–¥–∏–Ω—ã–º–∏ –¥–ª—è –≤—Å–µ—Ö.



---

## ‚ùì 60. –ö–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã CI/CD, –∫—Ä–æ–º–µ Jenkins, —Ç—ã –∑–Ω–∞–µ—à—å –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª? –í —á–µ–º –≤–∏–¥–∏—à—å –∏—Ö –ø–ª—é—Å—ã –∏ –º–∏–Ω—É—Å—ã –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å Jenkins?


–ü–æ–º–∏–º–æ Jenkins, –µ—Å—Ç—å –º–Ω–æ–≥–æ –¥—Ä—É–≥–∏—Ö CI/CD-—Å–∏—Å—Ç–µ–º. –ù–∞–ø—Ä–∏–º–µ—Ä, GitLab CI/CD ‚Äì –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ GitLab –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –≥–¥–µ –ø–∞–π–ø–ª–∞–π–Ω –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ `.gitlab-ci.yml` –ø—Ä—è–º–æ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏. GitHub Actions ‚Äì –ø–æ—Ö–æ–∂–∞—è –∏–¥–µ—è, —Ç–æ–ª—å–∫–æ –≤ —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ GitHub, —Ç–æ–∂–µ –ø–∞–π–ø–ª–∞–π–Ω—ã –∫–∞–∫ –∫–æ–¥ (YAML) –∏ –æ–≥—Ä–æ–º–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Ç–æ–≤—ã—Ö action-–æ–≤ –æ—Ç —Å–æ–æ–±—â–µ—Å—Ç–≤–∞. TeamCity ‚Äì –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –æ—Ç JetBrains, —É –Ω–µ–≥–æ –µ—Å—Ç—å —Å–≤–æ–π UI –∏ —Ç–∞–∫–∂–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–ø–∏—Å—ã–≤–∞—Ç—å —Å–±–æ—Ä–∫–∏ –∫–∞–∫ –∫–æ–¥ (–≤ Kotlin DSL). Travis CI –∏ CircleCI ‚Äì –æ–¥–Ω–∏ –∏–∑ —Ä–∞–Ω–Ω–∏—Ö –æ–±–ª–∞—á–Ω—ã—Ö CI –¥–ª—è open-source –∏ –Ω–µ —Ç–æ–ª—å–∫–æ: —Å–µ–π—á–∞—Å –∏—Ö —Ä–µ–∂–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç, –Ω–æ —É Travis –ø—Ä–æ—Å—Ç–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å `.travis.yml`, –∞ CircleCI —Ç–æ–∂–µ YAML-–∫–æ–Ω—Ñ–∏–≥–∏. –ï—Å—Ç—å –µ—â—ë Azure DevOps Pipelines, Atlassian Bamboo, –∏ –ø—Ä–æ—á–∏–µ ‚Äì —ç–∫–æ—Å–∏—Å—Ç–µ–º —Ö–≤–∞—Ç–∞–µ—Ç.

–ï—Å–ª–∏ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Å Jenkins: Jenkins —Ö–æ—Ä–æ—à —Å–≤–æ–µ–π —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å—é –∏ –∫—É—á–µ–π –ø–ª–∞–≥–∏–Ω–æ–≤, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (–µ–≥–æ –Ω–∞–¥–æ —Ö–æ—Å—Ç–∏—Ç—å, –æ–±–Ω–æ–≤–ª—è—Ç—å, –∏–Ω–æ–≥–¥–∞ –æ–Ω "–ø–∞–¥–∞–µ—Ç" –∏–ª–∏ –ø–ª–∞–≥–∏–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç). –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å git-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏ —É Jenkins –µ—Å—Ç—å (—á–µ—Ä–µ–∑ webhooks, –ø–ª–∞–≥–∏–Ω—ã –¥–ª—è GitLab/GitHub), –Ω–æ —ç—Ç–æ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é. –í —Ç–æ –∂–µ –≤—Ä–µ–º—è GitLab CI –∏–ª–∏ GitHub Actions –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏–∑ –∫–æ—Ä–æ–±–∫–∏: –∫–∞–∫ —Ç–æ–ª—å–∫–æ push –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π ‚Äì —Å—Ä–∞–∑—É –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è pipeline, –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–∏–¥–Ω–æ –ø—Ä—è–º–æ –≤ Merge Request/Pull Request. –≠—Ç–æ —É–¥–æ–±–Ω–µ–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤: –º–µ–Ω—å—à–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –º–µ–Ω—å—à–µ –≤–æ–∑–Ω–∏ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π. –û–¥–Ω–∞–∫–æ –≥–∏–±–∫–æ—Å—Ç—å Jenkins –≤—ã—à–µ: –º–æ–∂–Ω–æ —Å–æ—Ç–≤–æ—Ä–∏—Ç—å –ª—é–±–æ–π –∫–∞—Å—Ç–æ–º–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ Groovy, –ø–∏—Å–∞—Ç—å —Å–≤–æ–∏ –ø–ª–∞–≥–∏–Ω—ã, –∏ –Ω–µ—Ç –∂—ë—Å—Ç–∫–æ–π –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –æ–¥–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ.



---

## ‚ùì 61. –ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è Declarative Pipeline –æ—Ç Scripted Pipeline –≤ Jenkins? –ö–∞–∫–æ–π —Ç—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ –ø–æ—á–µ–º—É?


–í Jenkins Pipeline –µ—Å—Ç—å –¥–≤–∞ —Å—Ç–∏–ª–µ–≤—ã—Ö –ø–æ–¥—Ö–æ–¥–∞: Scripted –∏ Declarative. **Scripted Pipeline** –ø–æ—è–≤–∏–ª—Å—è —Ä–∞–Ω—å—à–µ: –ø–æ —Å—É—Ç–∏, —ç—Ç–æ —á–∏—Å—Ç—ã–π Groovy-—Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è Jenkins-–æ–º. –û–Ω –æ–±—ë—Ä–Ω—É—Ç –≤ –±–ª–æ–∫ `node { ... }` –æ–±—ã—á–Ω–æ, –∏ –≤–Ω—É—Ç—Ä–∏ —Ç—ã –º–æ–∂–µ—à—å –ø–∏—Å–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É –Ω–∞ Groovy, –≤—ã–∑—ã–≤–∞—Ç—å —à–∞–≥–∏ Jenkins –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ –≤ —Ü–∏–∫–ª–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–∞–ø—ã, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É—Å–ª–æ–≤–∏—è –ø—Ä—è–º–æ –∫–∞–∫ –≤ –∫–æ–¥–µ. –§–∞–∫—Ç–∏—á–µ—Å–∫–∏ Scripted Pipeline ‚Äì —ç—Ç–æ –∫–∞–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ CI/CD: –º–∞–∫—Å–∏–º—É–º –≥–∏–±–∫–æ—Å—Ç–∏, –º–∏–Ω–∏–º—É–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π, –Ω–æ –∏ –±–æ–ª—å—à–µ —à–∞–Ω—Å–æ–≤ –∑–∞–ø—É—Ç–∞—Ç—å—Å—è.

**Declarative Pipeline** –≤–≤–µ–¥—ë–Ω –ø–æ–∑–∂–µ, —á—Ç–æ–±—ã —É–ø—Ä–æ—Å—Ç–∏—Ç—å –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–∏–ø–æ–≤—ã—Ö –ø–∞–π–ø–ª–∞–π–Ω–æ–≤. –û–Ω –∏–º–µ–µ—Ç —Å—Ç—Ä–æ–≥–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É. –í—Å–µ–≥–¥–∞ –µ—Å—Ç—å –±–ª–æ–∫ `pipeline { ... }`, –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è `agent`, `stages`, –∏ –≤–Ω—É—Ç—Ä–∏ stages ‚Äì `steps`. –ù–µ–ª—å–∑—è –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ –æ—Ç–∫–ª–æ–Ω–∏—Ç—å—Å—è –æ—Ç —ç—Ç–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã: –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—Å–µ —Å—Ç–∞–¥–∏–∏ –æ–±—ä—è–≤–ª—è—é—Ç—Å—è —è–≤–Ω–æ, —Ü–∏–∫–ª—ã/—É—Å–ª–æ–≤–∏—è –≤–æ–∑–º–æ–∂–Ω—ã, –Ω–æ —á–µ—Ä–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ (`when`, –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ —à–∞–≥–∏ –≤ –±–ª–æ–∫–µ `parallel`, –ª–∏–±–æ –∂–µ –∫—É—Å–æ—á–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞ –≤ –±–ª–æ–∫–µ `script { }`). –ò–¥–µ—è –≤ —Ç–æ–º, —á—Ç–æ Declarative –ø—Ä–æ—â–µ —á–∏—Ç–∞—Ç—å –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. Jenkins –¥–∞–∂–µ UI-—Ä–µ–∂–∏–º –∏–º–µ–µ—Ç (Blue Ocean) –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–∞–∫–æ–≥–æ pipeline.



---

## ‚ùì 62. –ö–∞–∫ –≤ Jenkins –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –∑–∞–ø—É—Å–∫ –ø–∞–π–ø–ª–∞–π–Ω–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–¥–∞? –†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ webhook-–∏ –∏–ª–∏ polling —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è, –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å—Ç–∞—Ä—Ç —Å–±–æ—Ä–∫–∏.


–ß—Ç–æ–±—ã Jenkins –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–ª —Å–±–æ—Ä–∫—É –ø—Ä–∏ –Ω–æ–≤–æ–º –∫–æ–º–º–∏—Ç–µ, –µ—Å—Ç—å –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–∞: –æ–ø—Ä–æ—Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (polling) –∏ –≤–µ–±—Ö—É–∫–∏ (webhooks). –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏ —Å–Ω–∞—á–∞–ª–∞ –ø–æ—è–≤–∏–ª—Å—è Poll SCM: –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö job (–∏–ª–∏ pipeline) —É–∫–∞–∑—ã–≤–∞–µ—à—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç") –∏ Jenkins —Å–∞–º –±—É–¥–µ—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é –∏ —Å–º–æ—Ç—Ä–µ—Ç—å, –ø–æ—è–≤–∏–ª–∏—Å—å –ª–∏ –Ω–æ–≤—ã–µ –∫–æ–º–º–∏—Ç—ã. –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–æ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è ‚Äì –æ–Ω –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–±–æ—Ä–∫—É. –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±, –Ω–æ –Ω–µ —Å–∞–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π: –ª–∏–±–æ –¥–µ–ª–∞–µ—à—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –º–∞–ª–µ–Ω—å–∫–∏–º –∏ Jenkins —á–∞—Å—Ç–æ –¥—ë—Ä–≥–∞–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–ª–∏—à–Ω—è—è –Ω–∞–≥—Ä—É–∑–∫–∞), –ª–∏–±–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª –±–æ–ª—å—à–æ–π ‚Äì —Ç–æ–≥–¥–∞ –∫–æ–º–º–∏—Ç –º–æ–∂–µ—Ç –¥–æ–ª–≥–æ –∂–¥–∞—Ç—å —Å–ª–µ–¥—É—é—â–µ–≥–æ –æ–ø—Ä–æ—Å–∞.

–ë–æ–ª–µ–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏ –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± ‚Äì –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–µ–±—Ö—É–∫–∏. –≠—Ç–æ –∫–æ–≥–¥–∞ —Å–∞–º Git-—Å–µ—Ä–≤–µ—Ä (GitHub, GitLab, Bitbucket –∏ —Ç.–¥.) —É–≤–µ–¥–æ–º–ª—è–µ—Ç Jenkins –æ –Ω–æ–≤–æ–º push. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —Ç–∞–∫: –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è URL –≤–µ–±—Ö—É–∫–∞, –∫–æ—Ç–æ—Ä—ã–π —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ Jenkins (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π URL –ø–ª–∞–≥–∏–Ω–∞ GitHub/GitLab –≤ Jenkins). –ö–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç push, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–µ–ª–∞–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å –Ω–∞ Jenkins —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å–æ–±—ã—Ç–∏–∏. Jenkins, –ø–æ–ª—É—á–∏–≤ —ç—Ç–æ—Ç "–∑–≤–æ–Ω–æ–∫", –∑–Ω–∞–µ—Ç, –∫–∞–∫—É—é –∑–∞–¥–∞—á—É (–∏–ª–∏ multibranch pipeline) –∑–∞–ø—É—Å—Ç–∏—Ç—å, –∏ —Å—Ä–∞–∑—É –∂–µ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç. –í Jenkins –¥–ª—è —ç—Ç–æ–≥–æ –æ–±—ã—á–Ω–æ —Å—Ç–∞–≤—è—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –ø–ª–∞–≥–∏–Ω –∏ –æ—Ç–º–µ—á–∞—é—Ç –æ–ø—Ü–∏—é —Ç–∏–ø–∞ "Build when a change is pushed to GitLab/GitHub".

–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π –≤–µ–±—Ö—É–∫–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ—Ç–∫–ª–∏–∫ –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π: –∫–∞–∫ —Ç–æ–ª—å–∫–æ —Ç—ã –∑–∞–ø—É—à–∏–ª –∫–æ–¥, –±—É–∫–≤–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ –ø–∞—Ä—É —Å–µ–∫—É–Ω–¥ Jenkins —É–∂–µ –∑–∞–ø—É—Å—Ç–∏–ª —Å–±–æ—Ä–∫—É. –ò –Ω–µ—Ç –ª–∏—à–Ω–µ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –æ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –æ–ø—Ä–æ—Å–æ–≤. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ–±—Ö—É–∫–∞ —Ç—Ä–µ–±—É–µ—Ç —á—É—Ç—å –±–æ–ª—å—à–µ —à–∞–≥–æ–≤ (–Ω—É–∂–Ω–æ "–ø–æ–¥—Ä—É–∂–∏—Ç—å" Jenkins –∏ Git-—Å–µ—Ä–≤–∏—Å, –≤–æ–∑–º–æ–∂–Ω–æ, –æ—Ç–∫—Ä—ã—Ç—å Jenkins –Ω–∞—Ä—É–∂—É –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–∫—Å–∏), –Ω–æ –æ–Ω–æ —Ç–æ–≥–æ —Å—Ç–æ–∏—Ç. Polling –∂–µ –æ—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫ –∑–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç, –∫–æ–≥–¥–∞ –Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–µ–±—Ö—É–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ –∑–∞–∫—Ä—ã—Ç–æ–π —Å–µ—Ç–∏ –∏ –Ω–µ —É–º–µ–µ—Ç —Å–ª–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è). –í –∏–¥–µ–∞–ª–µ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤—Å–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ CI-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ ‚Äì —á–µ—Ä–µ–∑ –≤–µ–±—Ö—É–∫–∏.



---

## ‚ùì 63. –ö–∞–∫ —Ç—ã —Ä–∞–±–æ—Ç–∞–µ—à—å —Å credential-–∞–º–∏ (—É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏) –≤ Jenkins Pipeline, –µ—Å–ª–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏ –∏–ª–∏ –ø–∞—Ä–æ–ª–∏?


–í Jenkins –µ—Å—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤ ‚Äì Credentials. –≠—Ç–æ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–∞—Ä—ã –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å, —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏, SSH-–∫–ª—é—á–∏, —Ñ–∞–π–ª—ã —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –∏ —Ç.–¥. –ò—Ö —Ö—Ä–∞–Ω—è—Ç —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Jenkins (–≤ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –∏–ª–∏ folder credentials), –∏ –æ–Ω–∏ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ã –Ω–∞ –¥–∏—Å–∫–µ Jenkins. –ò–¥–µ—è –≤ —Ç–æ–º, —á—Ç–æ –≤ —Å–∞–º–æ–º pipeline-–∫–æ–¥–µ —Ç—ã –Ω–µ –ø–∏—à–µ—à—å –ø–∞—Ä–æ–ª—å –≤ –æ—Ç–∫—Ä—ã—Ç—É—é ‚Äì –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ —Å—Å—ã–ª–∞–µ—à—å—Å—è –Ω–∞ credential –ø–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É.

–í Jenkins Pipeline —Ç—ã –Ω–µ —Ö—Ä–∞–Ω–∏—à—å —Å–µ–∫—Ä–µ—Ç—ã —è–≤–Ω–æ, –∞ –ø–æ–ª—É—á–∞–µ—à—å –∏—Ö –∏–∑ Credentials –ø–æ ID. –í –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–º Jenkinsfile —ç—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é `credentials()` –≤ —Å–µ–∫—Ü–∏–∏ `environment`. –ù–∞–ø—Ä–∏–º–µ—Ä, `environment { DB_PASSWORD = credentials('mysql-root-pass') }` ‚Äì —Ç–∞–∫–∞—è —Å—Ç—Ä–æ—á–∫–∞ –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é DB_PASSWORD –∑–Ω–∞—á–µ–Ω–∏–µ, —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–µ –≤ Jenkins –ø–æ–¥ ID "mysql-root-pass" (–ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —Ç–∞–º –ª–µ–∂–∏—Ç –ø–∞—Ä–æ–ª—å –æ—Ç –±–∞–∑—ã). –í Scripted Pipeline –∏–ª–∏ –≤ –±–æ–ª–µ–µ –≥–∏–±–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç –±–ª–æ–∫ `withCredentials`. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –∫–∞–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä:

```
withCredentials([usernamePassword(credentialsId: 'deploy-creds', usernameVariable: 'USR', passwordVariable: 'PWD')]) {
    // –≤–Ω—É—Ç—Ä–∏ —ç—Ç–æ–≥–æ –±–ª–æ–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã $USR –∏ $PWD
    **sh** 'echo "Deploying with user $USR"'
}
```

–í–Ω—É—Ç—Ä–∏ —Å–µ–±—è —ç—Ç–æ—Ç –±–ª–æ–∫ —Å–¥–µ–ª–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ $USR –∏ $PWD —Å –ª–æ–≥–∏–Ω–æ–º –∏ –ø–∞—Ä–æ–ª–µ–º –∏–∑ credentials —Å ID "deploy-creds". –ü–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –∏–∑ –±–ª–æ–∫–∞ —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É–±–∏—Ä–∞—é—Ç—Å—è –∏ –±–æ–ª—å—à–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã.

–í–∞–∂–Ω–æ, —á—Ç–æ Jenkins –ø—Ä–∏ –≤—ã–≤–æ–¥–µ –ª–æ–≥–æ–≤ –º–∞—Å–∫–∏—Ä—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è credentials, —á—Ç–æ–±—ã –æ–Ω–∏ –Ω–µ –ø–æ—è–≤–∏–ª–∏—Å—å –≤ –∫–æ–Ω—Å–æ–ª–∏ –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ. –¢–æ –µ—Å—Ç—å, –¥–∞–∂–µ –µ—Å–ª–∏ —Å–ª—É—á–∞–π–Ω–æ —Å–¥–µ–ª–∞—Ç—å `echo $PWD`, –≤ –ª–æ–≥–µ Jenkins —Ç—ã —É–≤–∏–¥–∏—à—å "***", –∞ –Ω–µ —Ä–µ–∞–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å. –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –≤—Å–µ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–π –Ω—É–∂–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ Jenkins Credentials —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–æ–∫–µ–Ω—ã API, –ø–∞—Ä–æ–ª–∏ –∫ –ë–î), –¥–∞–≤–∞–π –∏–º –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–π ID, –∞ –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π –ª–∏–±–æ `credentials('ID')` –≤ environment, –ª–∏–±–æ `withCredentials` –±–ª–æ–∫ ‚Äì –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–∏—Ç—É–∞—Ü–∏–∏. –≠—Ç–æ –Ω–∞–º–Ω–æ–≥–æ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ, —á–µ–º —Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä–æ–ª–∏ –≤ Git, –∏ —É–¥–æ–±–Ω–µ–µ: –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑ –∏–∑–º–µ–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç –≤ Jenkins, –∏ –≤—Å–µ —Å–±–æ—Ä–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±—É–¥—É—Ç –±—Ä–∞—Ç—å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.



---

## ‚ùì 64. –ë—ã–≤–∞–ª–∏ –ª–∏ —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ Jenkins pipeline –ø–∞–¥–∞–ª –∏–ª–∏ –∑–∞–≤–∏—Å–∞–ª? –ö–∞–∫ —Ç—ã –æ—Ç–ª–∞–∂–∏–≤–∞–ª –ø–∞–π–ø–ª–∞–π–Ω, –∫–∞–∫–∏–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ Jenkins –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —à–∞–≥–æ–≤?


–ö–æ–Ω–µ—á–Ω–æ, –≤—Ä–µ–º—è –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ pipeline –º–æ–∂–µ—Ç –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è —Å –æ—à–∏–±–∫–æ–π –∏–ª–∏ –¥–∞–∂–µ –ø–æ–¥–≤–∏—Å–Ω—É—Ç—å. –û–±—ã—á–Ω–æ –ø–µ—Ä–≤–æ–µ, —á—Ç–æ –¥–µ–ª–∞—é ‚Äì —Å–º–æ—Ç—Ä—é –ª–æ–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (Console Output) –≤ Jenkins. –¢–∞–º –≤–∏–¥–Ω–æ, –Ω–∞ –∫–∞–∫–æ–º —à–∞–≥–µ —É–ø–∞–ª–æ –∏ –∫–∞–∫–∞—è –æ—à–∏–±–∫–∞. –ï—Å–ª–∏ pipeline "–∑–∞–≤–∏—Å", —Ç–æ –≤ –ª–æ–≥–µ –º–æ–∂–µ—Ç –ø—Ä–æ—Å—Ç–æ –¥–æ–ª–≥–æ –Ω–µ –±—ã—Ç—å –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π ‚Äì —Ç–æ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π, –Ω–µ –∂–¥—ë—Ç –ª–∏ –æ–Ω –∫–∞–∫–æ–≥–æ-—Ç–æ input (–±—ã–≤–∞—é—Ç —à–∞–≥–∏ —Ä—É—á–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è) –∏–ª–∏ –Ω–µ –ø–æ—Ç–µ—Ä—è–ª –ª–∏ –∞–≥–µ–Ω—Ç —Å–≤—è–∑—å. –ú–æ–∂–µ—Ç –±—ã—Ç—å —Å–∏—É–∞—Ü–∏—è, –∫–æ–≥–¥–∞ –∞–≥–µ–Ω—Ç –∑–∞–≤–∏—Å, –∏ —à–∞–≥ —Å–±–æ—Ä–∫–∏ –º–æ–¥—É–ª—è –≤–∏—Å–∏—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ ‚Äì –ø–æ–º–æ–∂–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∞–≥–µ–Ω—Ç–∞ –∏ –Ω–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –∑–∞–¥–∞—á–∏.

–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –ª–æ–≥–∏–∫–∏ —Å–∞–º–æ–≥–æ pipeline (—Å–∫—Ä–∏–ø—Ç–∞ Jenkinsfile) –µ—Å—Ç—å —É–¥–æ–±–Ω–∞—è –≤–µ—â—å ‚Äì Replay. –í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ Jenkins –¥–ª—è —É–ø–∞–≤—à–µ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞ –º–æ–∂–Ω–æ –Ω–∞–∂–∞—Ç—å Replay –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä—è–º–æ —Ç–∞–º Jenkinsfile (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤–∏—Ç—å –≤—ã–≤–æ–¥ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–ª–∏ –ø–æ–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É) –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–Ω–æ–≤–æ –±–µ–∑ –∫–æ–º–º–∏—Ç–∞ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π. –≠—Ç–æ —ç–∫–æ–Ω–æ–º–∏—Ç –≤—Ä–µ–º—è –Ω–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—É—é –æ—Ç–ª–∞–¥–∫—É.

–ï—Å–ª–∏ —É–ø–∞–ª –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —ç—Ç–∞–ø –∏–∑-–∑–∞ –æ—à–∏–±–∫–∏ –≤ —Å–∞–º–æ–π —Å–±–æ—Ä–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ–≤–∞–ª–∏–ª–∏—Å—å —Ç–µ—Å—Ç—ã), —Ç–æ —Ä–µ—á—å —É–∂–µ –æ–± –æ—Ç–ª–∞–¥–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: —Å–º–æ—Ç—Ä—é –æ—Ç—á—ë—Ç—ã —Ç–µ—Å—Ç–æ–≤ (JUnit-—Ä–µ–ø–æ—Ä—Ç—ã, –µ—Å–ª–∏ –æ–Ω–∏ –ø—É–±–ª–∏–∫—É—é—Ç—Å—è Jenkins-–æ–º), –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –¢—É—Ç Jenkins –ø–æ–º–æ–≥–∞–µ—Ç —Ç–µ–º, —á—Ç–æ –º–æ–∂–µ—Ç –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∏–ª–∏ –ª–æ–≥–∏, –∏ –∏—Ö –º–æ–∂–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –≤—Å–µ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞ –≤ Jenkins ‚Äì –æ–±—ã—á–Ω–æ –ø—Ä–æ—Å—Ç–æ –Ω–∞–∂–∏–º–∞–µ–º "Build Now" —Å–Ω–æ–≤–∞ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫. –ï—Å–ª–∏ –∂–µ —Ö–æ—á–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ —Å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ —ç—Ç–∞–ø–∞, –µ—Å—Ç—å –ø–ª–∞–≥–∏–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è Stage Restart), –Ω–æ "–∏–∑ –∫–æ—Ä–æ–±–∫–∏" Jenkins —Ç–∞–∫ –Ω–µ —É–º–µ–µ—Ç. –ü–æ—ç—Ç–æ–º—É –≤ —Å–ª—É—á–∞—è—Ö, –≥–¥–µ —Å–±–æ—Ä–∫–∞ –¥–ª–∏–Ω–Ω–∞—è, —Å—Ç–∞—Ä–∞—é—Ç—Å—è —Ä–∞–∑–±–∏–≤–∞—Ç—å pipeline –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–¥–∞—á (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–¥–µ–ª—å–Ω–∞—è –∑–∞–¥–∞—á–∞ –Ω–∞ –±–∏–ª–¥ –∏ —Ç–µ—Å—Ç, –∫–æ—Ç–æ—Ä–∞—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, –∏ –æ—Ç–¥–µ–ª—å–Ω–∞—è ‚Äì –Ω–∞ –¥–µ–ø–ª–æ–π, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–∑–∂–µ). –¢–æ–≥–¥–∞ –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –Ω–∞ –¥–µ–ø–ª–æ–µ –Ω–µ –Ω–∞–¥–æ –∑–∞–Ω–æ–≤–æ –±–∏–ª–¥–∏—Ç—å ‚Äì –±–µ—Ä—ë–º –≥–æ—Ç–æ–≤—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç. –í —Ü–µ–ª–æ–º, –≥–ª–∞–≤–Ω–æ–µ –ø—Ä–∏ —Å–±–æ—è—Ö ‚Äì –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ —á–∏—Ç–∞—Ç—å –ª–æ–≥, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Jenkins (–ø–ª–∞–≥–∏–Ω JUnit, –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤) –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–µ—Ç–∞–ª—è–º, –∏ –Ω–µ –±–æ—è—Ç—å—Å—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –∑–∞–¥–∞—á—É –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã.



---

## ‚ùì 65. –í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É Deployment, StatefulSet –∏ DaemonSet –≤ Kubernetes? –í –∫–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö —Ç—ã –±—É–¥–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö?


Deployment, StatefulSet –∏ DaemonSet ‚Äì —ç—Ç–æ —Ä–∞–∑–Ω—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –≤ Kubernetes –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∑–∞–¥–∞—á, —Ö–æ—Ç—è –≤—Å–µ –æ–Ω–∏ —É–ø—Ä–∞–≤–ª—è—é—Ç –ø–æ–¥–∞–º–∏.

**Deployment** ‚Äì —Å–∞–º—ã–π —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–π —Ç–∏–ø –¥–ª—è stateless-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –û–Ω —É–ø—Ä–∞–≤–ª—è–µ—Ç ReplicaSet-–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ —Å–æ–∑–¥–∞—é—Ç –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–æ–≤. Deployment —É–¥–æ–±–µ–Ω —Ç–µ–º, —á—Ç–æ —É–º–µ–µ—Ç –¥–µ–ª–∞—Ç—å rolling update –∏–∑ –∫–æ—Ä–æ–±–∫–∏: –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —à–∞–±–ª–æ–Ω–∞ –ø–æ–¥–∞ –æ–Ω –ø–ª–∞–≤–Ω–æ –æ–±–Ω–æ–≤–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–ø–æ –æ–¥–Ω–æ–º—É –∏–ª–∏ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–¥–æ–≤, —Å–æ–≥–ª–∞—Å–Ω–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏). –ï—Å–ª–∏ –Ω–∏–∫–∞–∫–∞—è –æ—Å–æ–±–∞—è —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∏–º—ë–Ω –∏–ª–∏ –ø–æ—Ä—è–¥–∫–∞ –Ω–µ –Ω—É–∂–Ω–∞, –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç Deployment. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –∏ —É –∫–æ—Ç–æ—Ä–æ–≥–æ –∫–∞–∂–¥—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –∏–¥–µ–Ω—Ç–∏—á–µ–Ω ‚Äì —ç—Ç–æ —Å–ª—É—á–∞–π –¥–ª—è Deployment.

**StatefulSet** ‚Äì –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è stateful-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –≥–¥–µ –≤–∞–∂–µ–Ω —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —É –∫–∞–∂–¥–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –¥–∞–Ω–Ω—ã–º. –í StatefulSet –ø–æ–¥—ã –∏–º–µ—é—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –∏–º–µ–Ω–∞ (–æ–±—ã—á–Ω–æ —Å —Å—É—Ñ—Ñ–∏–∫—Å–∞–º–∏ -0, -1, -2 –∏ —Ç.–¥.), –∏ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, pod-0 —Å–Ω–æ–≤–∞ –±—É–¥–µ—Ç pod-0, –∞ –Ω–µ –Ω–æ–≤—ã–º —Å–ª—É—á–∞–π–Ω—ã–º –∏–º–µ–Ω–µ–º. –¢–∞–∫–∂–µ –æ–±—ã—á–Ω–æ —Å StatefulSet –∏—Å–ø–æ–ª—å–∑—É—é—Ç PersistentVolumeClaim —á–µ—Ä–µ–∑ volumeClaimTemplates ‚Äì –∫–∞–∂–¥—ã–π –ø–æ–¥ –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–π —Ç–æ–º –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö. –ü–æ—Ä—è–¥–æ–∫ –∑–∞–ø—É—Å–∫–∞ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ç–æ–∂–µ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è (–º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å, —á—Ç–æ –æ–Ω–∏ —Å—Ç–∞—Ä—Ç—É—é—Ç –∏ –≥–∞—Å–Ω—É—Ç –ø–æ –æ–¥–Ω–æ–º—É, –¥–æ–∂–∏–¥–∞—è—Å—å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ). –≠—Ç–æ –Ω—É–∂–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö, Kafka, ZooKeeper –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –∫–ª–∞—Å—Ç–µ—Ä–æ–≤, –≥–¥–µ –∫–∞–∂–¥—ã–π —É–∑–µ–ª —É–Ω–∏–∫–∞–ª–µ–Ω –∏ —á–∞—Å—Ç–æ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π storage. –ï—Å–ª–∏ —É —Ç–µ–±—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–º—É –Ω—É–∂–Ω–∞ —Å–≤–æ—è –∫–æ–ø–∏—è –¥–∞–Ω–Ω—ã—Ö (–∏ –Ω–µ–ª—å–∑—è –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –¥—Ä—É–≥–æ–π —ç–∫–∑–µ–º–ø–ª—è—Ä), –∏–ª–∏ –∫–æ—Ç–æ—Ä–æ–µ —Ç—Ä–µ–±—É–µ—Ç –∑–∞–ø—É—Å–∫–∞ —Å—Ç—Ä–æ–≥–æ –ø–æ –æ–¥–Ω–æ–º—É, —Å –æ–∂–∏–¥–∞–Ω–∏–µ–º readiness –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ, ‚Äì –≤—ã–±–∏—Ä–∞–µ—à—å StatefulSet.

**DaemonSet** ‚Äì —Å–æ–≤—Å–µ–º –¥—Ä—É–≥–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è: –æ–Ω –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∫–æ–ø–∏—è –ø–æ–¥–∞ –∑–∞–ø—É—â–µ–Ω–∞ –Ω–∞ –∫–∞–∂–¥–æ–π (–∏–ª–∏ –Ω–∞ –∫–∞–∂–¥–æ–π –ø–æ–¥—Ö–æ–¥—è—â–µ–π) –Ω–æ–¥–µ –∫–ª–∞—Å—Ç–µ—Ä–∞. –¢–æ –µ—Å—Ç—å, –µ—Å–ª–∏ —É —Ç–µ–±—è 10 —É–∑–ª–æ–≤, DaemonSet –ø–æ—Å—Ç–∞—Ä–∞–µ—Ç—Å—è –Ω–∞ –∫–∞–∂–¥–æ–º —Å–æ–∑–¥–∞—Ç—å –ø–æ –æ–¥–Ω–æ–º—É –ø–æ–¥—É. –≠—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤: –Ω–∞–ø—Ä–∏–º–µ—Ä, –∞–≥–µ–Ω—Ç —Å–±–æ—Ä–∞ –ª–æ–≥–æ–≤ (—Ç–∏–ø–∞ Fluentd), –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus Node Exporter), —Å–µ—Ç–µ–≤—ã–µ –ø–ª–∞–≥–∏–Ω—ã/volume-–ø–ª–∞–≥–∏–Ω—ã (–∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å CNI plugin –∏–ª–∏ CSI –¥—Ä–∞–π–≤–µ—Ä). –í –æ–±—â–µ–º, –≤—Å—ë, —á—Ç–æ –¥–æ–ª–∂–Ω–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –Ω–∞ –∫–∞–∂–¥–æ–º —É–∑–ª–µ, —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è DaemonSet-–æ–º. –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å DaemonSet –≤—Ä—É—á–Ω—É—é —á–∏—Å–ª–æ–º —Ä–µ–ø–ª–∏–∫ –Ω–µ–ª—å–∑—è (–æ–Ω —Å–∞–º —Ä–∞–≤–µ–Ω —á–∏—Å–ª—É –Ω–æ–¥), –Ω–æ –æ–Ω –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ –ø–æ–¥—ã, –µ—Å–ª–∏ –¥–æ–±–∞–≤—è—Ç—Å—è –Ω–æ–≤—ã–µ —É–∑–ª—ã –≤ –∫–ª–∞—Å—Ç–µ—Ä, –∏ —É–¥–∞–ª—è—Ç—å ‚Äì –µ—Å–ª–∏ —É–∑–ª—ã —É—Ö–æ–¥—è—Ç.

–†–µ–∑—é–º–∏—Ä—É—è: Deployment ‚Äì –¥–ª—è —Ç–∏–ø–∏—á–Ω—ã—Ö stateless-—Å–µ—Ä–≤–∏—Å–æ–≤, StatefulSet ‚Äì –¥–ª—è stateful-—Å–µ—Ä–≤–∏—Å–æ–≤ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–∏ –∏ –¥–∞–Ω–Ω—ã—Ö (–±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –∫–ª–∞—Å—Ç–µ—Ä—ã), DaemonSet ‚Äì –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö "–¥–µ–º–æ–Ω–æ–≤", –ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ —É–∑–µ–ª (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –ø–æ–¥—ã).



---

## ‚ùì 66. –ö–∞–∫ Kubernetes –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ? –†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ liveness –∏ readiness –ø—Ä–æ–±—ã: –¥–ª—è —á–µ–≥–æ –æ–Ω–∏ –Ω—É–∂–Ω—ã –∏ –∫–∞–∫ –∏—Ö –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å.


Kubernetes –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º probe (–ø—Ä–æ–≤–µ—Ä–æ–∫) –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤. –°—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∏–ø–∞ –ø—Ä–æ–±: liveness –∏ readiness (–∞ –≤ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏—è—Ö –ø–æ—è–≤–∏–ª—Å—è –µ—â—ë –∏ startup probe). –≠—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–≤ Pod-–µ) –∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –∫–ª–∞—Å—Ç–µ—Ä—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫.

**Readiness probe** –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å "–≥–æ—Ç–æ–≤ –ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã?". –ù–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è –ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ (–ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ –±–∞–∑–µ, –∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ), –∏ –ø–æ–∫–∞ –æ–Ω–æ –Ω–µ –≥–æ—Ç–æ–≤–æ, –Ω–µ —Ö–æ—á–µ—Ç—Å—è —Å–ª–∞—Ç—å –Ω–∞ –Ω–µ–≥–æ —Ç—Ä–∞—Ñ–∏–∫. Readiness-–ø—Ä–æ–±–∞ –∫–∞–∫ —Ä–∞–∑ —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç Kubernetes, –º–æ–∂–Ω–æ –ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ —ç—Ç–æ—Ç –ø–æ–¥. –ï—Å–ª–∏ readiness-–ø—Ä–æ–±–∞ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç, Kubernetes —Å—á–∏—Ç–∞–µ—Ç –ø–æ–¥ "–Ω–µ –≥–æ—Ç–æ–≤—ã–º" –∏ —É–±–∏—Ä–∞–µ—Ç –µ–≥–æ –∏–∑ endpoints —Å–µ—Ä–≤–∏—Å–∞ (—Ç–æ –µ—Å—Ç—å —Å–µ—Ä–≤–∏—Å –Ω–µ –±—É–¥–µ—Ç –Ω–∞ –Ω–µ–≥–æ —Å–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã). –ù–∞—Å—Ç—Ä–æ–∏—Ç—å readiness –º–æ–∂–Ω–æ —Ç—Ä–µ–º—è —Å–ø–æ—Å–æ–±–∞–º–∏: HTTP-–∑–∞–ø—Ä–æ—Å (httpGet) –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π URL, TCP-–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–∞ –∏–ª–∏ –∑–∞–ø—É—Å–∫ –∫–æ–º–∞–Ω–¥—ã (exec) –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –ß–∞—â–µ –¥–ª—è –≤–µ–±-—Å–µ—Ä–≤–∏—Å–æ–≤ –¥–µ–ª–∞—é—Ç –Ω–µ–±–æ–ª—å—à–æ–π HTTP-—ç–Ω–¥–ø–æ–∏–Ω—Ç —Ç–∏–ø–∞ "/health" –∏–ª–∏ "/ready", –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 200 OK, –µ—Å–ª–∏ –≤—Å—ë –æ–∫. Kubernetes –±—É–¥–µ—Ç –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –¥—ë—Ä–≥–∞—Ç—å —ç—Ç–æ—Ç –∞–¥—Ä–µ—Å –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ ‚Äì –∫–∞–∫ —Ç–æ–ª—å–∫–æ –ø–æ–ª—É—á–∏—Ç —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç, –ø–æ–¥ –ø–æ–º–µ—á–∞–µ—Ç—Å—è ready, –∞ –µ—Å–ª–∏ –≤–¥—Ä—É–≥ –≤ —Ö–æ–¥–µ —Ä–∞–±–æ—Ç—ã –æ—Ç–≤–µ—Ç —Å—Ç–∞–ª –ø–ª–æ—Ö–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Ç–µ—Ä—è–ª–æ —Å–≤—è–∑—å —Å –±–∞–∑–æ–π –∏ —Ç–∞–∫ –æ—Ç—Ä–∞–∑–∏–ª–æ —ç—Ç–æ –≤ "/health"), —Ç–æ –ø–æ–¥ —Å–Ω–æ–≤–∞ —Å—Ç–∞–Ω–µ—Ç not ready, –∏ —Ç—Ä–∞—Ñ–∏–∫ –∫ –Ω–µ–º—É –Ω–µ –ø–æ–π–¥—ë—Ç.

**Liveness probe** –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, "–∂–∏–≤–æ–µ" –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Äì –Ω–µ –∑–∞–±–∏–ª–æ—Å—å –ª–∏ –æ–Ω–æ –≤ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–º –∏—Å–∫–ª—é—á–µ–Ω–∏–∏, –Ω–µ –∑–∞–≤–∏—Å–ª–æ –ª–∏. –ï—Å–ª–∏ liveness-–ø—Ä–æ–±–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–æ–¥—Ä—è–¥ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç (–∏–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç fail), Kubernetes —Ä–µ—à–∞–µ—Ç, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –º—ë—Ä—Ç–≤ –∏–ª–∏ –Ω–µ–∏—Å–ø—Ä–∞–≤–µ–Ω, –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –µ–≥–æ (–¥–µ–ª–∞–µ—Ç —Ä–µ—Å—Ç–∞—Ä—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤–Ω—É—Ç—Ä–∏ –ø–æ–¥–∞). –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è liveness —Ç–µ–º–∏ –∂–µ –º–µ—Ç–æ–¥–∞–º–∏ (HTTP, TCP, exec). –ú–æ–∂–Ω–æ –¥–∞–∂–µ —Ç–æ—Ç –∂–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç "/health" –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –Ω–æ —á–∞—Å—Ç–æ —Ä–∞–∑–¥–µ–ª—è—é—Ç: –¥–µ–ª–∞—é—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π "/alive" –∏–ª–∏ "/ping" –¥–ª—è liveness, –∞ –±–æ–ª–µ–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é –ª–æ–≥–∏–∫—É –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ ‚Äì –¥–ª—è readiness. –ü–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–æ–± –∑–∞–¥–∞—é—Ç –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏, timeout, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –¥–æ "—Ä–µ—à–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π" –∏ –ø—Ä. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å: –Ω–∞—á–∏–Ω–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ —á–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ —Å—Ç–∞—Ä—Ç–∞ (initialDelaySeconds), –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞–∂–¥—ã–µ 10—Å, –∏ –µ—Å–ª–∏ 3 –ø–æ–ø—ã—Ç–∫–∏ liveness –ø–æ–¥—Ä—è–¥ –ø—Ä–æ–≤–∞–ª–∏–ª–∏—Å—å ‚Äì –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–± –æ—á–µ–Ω—å –≤–∞–∂–Ω–∞ –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏. Readiness-–ø—Ä–æ–±–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É —Ç—Ä–∞—Ñ–∏–∫–∞ –Ω–∞ –Ω–µ–ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–µ –∏–ª–∏ "–±–æ–ª—å–Ω—ã–µ" –ø–æ–¥—ã, –∞ liveness-–ø—Ä–æ–±–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–∑ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö "—Ç—É–ø–∏–∫–æ–≤—ã—Ö" —Å–æ—Å—Ç–æ—è–Ω–∏–π. –ï—Å–ª–∏ –∏—Ö –Ω–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å, Kubernetes –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å—á–∏—Ç–∞–µ—Ç, —á—Ç–æ –ø–æ–¥ –≤—Å–µ–≥–¥–∞ ready –∏ –≤—Å–µ–≥–¥–∞ alive (–ø–æ–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è), –∏ –º–æ–∂–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Å–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –¥–∞–∂–µ –≤ –∑–∞–≤–∏—Å—à–µ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –í —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö –æ–±—ã—á–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç —Ö–æ—Ç—è –±—ã –ø—Ä–æ—Å—Ç–µ–π—à–∏–µ –ø—Ä–æ–±—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è Java-—Å–µ—Ä–≤–∏—Å–∞ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø–æ "/health" –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–≤—è–∑—å —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å. –ü—Ä–∏ –¥–µ–ø–ª–æ–µ –Ω–æ–≤—ã–µ –ø–æ–¥—ã —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ—Ö–æ–¥—è—Ç readiness (–Ω–µ –≤—Ö–æ–¥—è—Ç –≤ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫—É, –ø–æ–∫–∞ –Ω–µ –ø—Ä–æ–≥—Ä–µ—é—Ç—Å—è), –∞ –µ—Å–ª–∏ –≤–¥—Ä—É–≥ –ø–æ—Ç–æ–º –∑–∞–≤–∏—Å–Ω—É—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, deadlock –∏–ª–∏ OutOfMemory), liveness —á–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è –∏—Ö –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç.



---

## ‚ùì 67. –ß—Ç–æ —Ç–∞–∫–æ–µ Service –≤ Kubernetes –∏ –∫–∞–∫–∏–µ –±—ã–≤–∞—é—Ç —Ç–∏–ø—ã —Å–µ—Ä–≤–∏—Å–æ–≤? –û–±—ä—è—Å–Ω–∏, —á–µ–º –æ—Ç–ª–∏—á–∞—é—Ç—Å—è ClusterIP, NodePort –∏ LoadBalancer, –∏ –∫–æ–≥–¥–∞ –∫–∞–∫–æ–º—É –æ—Ç–¥–∞—à—å –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–µ.


Service –≤ Kubernetes ‚Äì —ç—Ç–æ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –µ–¥–∏–Ω—ã–π –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –∞–¥—Ä–µ—Å (IP –∏ DNS-–∏–º—è) –¥–ª—è –Ω–∞–±–æ—Ä–∞ –ø–æ–¥–æ–≤. –ü–æ–¥—ã –º–æ–≥—É—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è –∏ –∏—Å—á–µ–∑–∞—Ç—å, –∏—Ö IP –º–µ–Ω—è—é—Ç—Å—è, –∞ Service –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –ø–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–º—É –∏–º–µ–Ω–∏. –û–Ω –≤—ã—Å—Ç—É–ø–∞–µ—Ç –∫–∞–∫ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –Ω–∞–≥—Ä—É–∑–∫–∏: —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ –≤—Å–µ –ø–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Å–µ–ª–µ–∫—Ç–æ—Ä—É —ç—Ç–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞.

–û—Å–Ω–æ–≤–Ω–æ–π —Ç–∏–ø ‚Äì **ClusterIP** (—ç—Ç–æ —Ç–∏–ø –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é). –û–Ω —Å–æ–∑–¥–∞—ë—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π IP-–∞–¥—Ä–µ—Å, –¥–æ—Å—Ç—É–ø–Ω—ã–π –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ (–∫ –Ω–µ–º—É –º–æ–≥—É—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –¥—Ä—É–≥–∏–µ –ø–æ–¥—ã; kube-proxy –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é). ClusterIP –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞–ø—Ä—è–º—É—é —Å–Ω–∞—Ä—É–∂–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞. –ò—Å–ø–æ–ª—å–∑—É–µ–º ClusterIP, –∫–æ–≥–¥–∞ —Å–µ—Ä–≤–∏—Å –¥–æ–ª–∂–µ–Ω –æ–±—â–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ —Å –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π API, –¥–æ –∫–æ—Ç–æ—Ä–æ–≥–æ –≤–Ω–µ—à–Ω–µ–º—É –º–∏—Ä—É –ª–∞–∑–∏—Ç—å –Ω–µ –Ω—É–∂–Ω–æ). –£ –∫–∞–∂–¥–æ–≥–æ ClusterIP —Å–µ—Ä–≤–∏—Å–∞ –µ—Å—Ç—å –µ—â—ë DNS-–∏–º—è (—á–µ—Ä–µ–∑ kube-dns/CoreDNS), –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É —Å–µ—Ä–≤–∏—Å –Ω–∞—Ö–æ–¥—è—Ç –¥—Ä—É–≥–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**NodePort** ‚Äì —ç—Ç–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ ClusterIP, –ø–æ–∑–≤–æ–ª—è—é—â–µ–µ –≤—ã–Ω–µ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å –Ω–∞—Ä—É–∂—É, –æ—Ç–∫—Ä—ã–≤ –ø–æ—Ä—Ç –Ω–∞ –∫–∞–∂–¥–æ–º —É–∑–ª–µ –∫–ª–∞—Å—Ç–µ—Ä–∞. –ü—Ä–∏ –≤—ã–±–æ—Ä–µ NodePort Kubernetes —Ä–µ–∑–µ—Ä–≤–∏—Ä—É–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –ø–æ—Ä—Ç (–∏–∑ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ 30000-32767 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –Ω–∞ –≤—Å–µ—Ö –Ω–æ–¥–∞—Ö. –ó–∞–ø—Ä–æ—Å –Ω–∞ –ª—é–±–æ–π –Ω–æ–¥–µ –ø–æ —ç—Ç–æ–º—É –ø–æ—Ä—Ç—É –±—É–¥–µ—Ç –ø–µ—Ä–µ–∞–¥—Ä–µ—Å–æ–≤–∞–Ω –Ω–∞ ClusterIP —Å–µ—Ä–≤–∏—Å–∞, –∞ –¥–∞–ª—å—à–µ –Ω–∞ –ø–æ–¥—ã. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –º–æ–∂–Ω–æ —Å—Ç—É—á–∞—Ç—å—Å—è –≤ –ª—é–±–æ–π —É–∑–µ–ª –Ω–∞ –∑–∞–¥–∞–Ω–Ω—ã–π –ø–æ—Ä—Ç –∏ –ø–æ–ø–∞—Å—Ç—å –Ω–∞ —Å–µ—Ä–≤–∏—Å. –ú–∏–Ω—É—Å: –ø–æ—Ä—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, –≤–Ω–µ—à–Ω–∏–π (–Ω—É–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å –µ–≥–æ –∏–ª–∏ –ø—Ä–∏–≤—è–∑–∞—Ç—å –Ω–∞ DNS), –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∞–∫–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤. NodePort –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–π –∏–ª–∏ –≤ development, –∫–æ–≥–¥–∞ –Ω–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ –≤–Ω–µ—à–Ω–µ–≥–æ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞. –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –Ω–∞–ø—Ä—è–º—É—é NodePort —Ä–µ–¥–∫–æ "—Ç–æ—Ä—á–∏—Ç" –Ω–∞—Ä—É–∂—É, —Ä–∞–∑–≤–µ —á—Ç–æ —Å—Ç–æ–∏—Ç –≤–Ω–µ—à–Ω–∏–π –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –±—å—ë—Ç –ø–æ —ç—Ç–æ–º—É NodePort –Ω–∞ –Ω–æ–¥—ã.

**LoadBalancer** ‚Äì —Ç–∏–ø —Å–µ—Ä–≤–∏—Å–∞, –∫–æ—Ç–æ—Ä—ã–π –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å –æ–±–ª–∞—á–Ω—ã–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º, —á—Ç–æ–±—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Ç—å –≤–Ω–µ—à–Ω–∏–π load balancer (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π ELB –≤ AWS, –∏–ª–∏ –∞–Ω–∞–ª–æ–≥ –≤ GCP/Azure). –ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—à—å Service —Ç–∏–ø–∞ LoadBalancer, Kubernetes —á–µ—Ä–µ–∑ cloud-controller API –≥–æ–≤–æ—Ä–∏—Ç –æ–±–ª–∞–∫—É: "–¥–∞–π –º–Ω–µ LB". –í –∏—Ç–æ–≥–µ –ø–æ–ª—É—á–∞–µ—à—å –≤–Ω–µ—à–Ω–∏–π IP (–∏–ª–∏ DNS-–∏–º—è), –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –¥–æ—Å—Ç—É–ø–µ–Ω —Å–µ—Ä–≤–∏—Å, –∞ –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º —ç—Ç–æ—Ç –≤–Ω–µ—à–Ω–∏–π –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ —Ä–∞–∑–¥–∞—ë—Ç —Ç—Ä–∞—Ñ–∏–∫ –ø–æ NodePort-–∞–º –Ω–∞ —Ç–≤–æ–∏—Ö –Ω–æ–¥–∞—Ö. –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤—Å—ë –ø—Ä–æ–∑—Ä–∞—á–Ω–æ ‚Äì –æ–Ω –ø—Ä–æ—Å—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç IP –∏–ª–∏ hostname –∏ –º–æ–∂–µ—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∏–∑–≤–Ω–µ. –≠—Ç–æ —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å –Ω–∞—Ä—É–∂—É –≤ –æ–±–ª–∞–∫–µ: –æ–¥–∏–Ω —Å–µ—Ä–≤–∏—Å ‚Äì –æ–¥–∏–Ω load balancer. –ú–∏–Ω—É—Å ‚Äì –≤ –æ–±–ª–∞–∫–∞—Ö —ç—Ç–æ –¥–µ–Ω—å–≥–∏ –∑–∞ –∫–∞–∂–¥—ã–π LB, –∏ –Ω–µ –æ—á–µ–Ω—å –≥–∏–±–∫–æ –≤ –ø–ª–∞–Ω–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ (–ø–æ—ç—Ç–æ–º—É —á–∞—Å—Ç–æ –ø–æ–≤–µ—Ä—Ö —Å—Ç–∞–≤—è—Ç Ingress –∏–ª–∏ API Gateway). –ù–∞ bare-metal –∫–ª–∞—Å—Ç–µ—Ä–µ LoadBalancer –±–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –µ—Å—Ç—å —Ä–µ—à–µ–Ω–∏—è —Ç–∏–ø–∞ MetalLB, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç —ç–º—É–ª–∏—Ä–æ–≤–∞—Ç—å —ç—Ç—É –º–æ–¥–µ–ª—å.

–ü–æ–º–∏–º–æ —ç—Ç–∏—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∏–ø–æ–≤ –µ—Å—Ç—å –µ—â—ë **ExternalName** (–∫–æ–≥–¥–∞ —Å–µ—Ä–≤–∏—Å –ø—Ä–æ—Å—Ç–æ DNS-–∞–ª–∏–∞—Å –Ω–∞ –≤–Ω–µ—à–Ω–∏–π –∞–¥—Ä–µ—Å) –∏ headless-—Å–µ—Ä–≤–∏—Å (ClusterIP: None, –∫–æ–≥–¥–∞ –Ω–µ –Ω—É–∂–µ–Ω IP, –∞ –∑–∞–ø–∏—Å—å DNS –≤—ã–¥–∞—ë—Ç –ø—Ä—è–º–æ –∞–¥—Ä–µ—Å–∞ –ø–æ–¥–æ–≤). –ù–æ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –≤–æ–ø—Ä–æ—Å–∞: **ClusterIP** ‚Äì –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, **NodePort** ‚Äì –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞ (–º–∞–ª—ã–π –º–∞—Å—à—Ç–∞–±, –Ω–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ LB), **LoadBalancer** ‚Äì –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–ª–∞—á–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞ –∏ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞. –í production –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ª–∏–±–æ LoadBalancer-—Å–µ—Ä–≤–∏—Å—ã, –ª–∏–±–æ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–π ingress-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (–∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º –º–æ–∂–µ—Ç —Ç–æ–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω LoadBalancer –Ω–∞ –º–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–æ–≤).



---

## ‚ùì 68. –ö–∞–∫ –≤–Ω–µ—à–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ–ø–∞–¥–∞—é—Ç –≤ –∫–ª–∞—Å—Ç–µ—Ä Kubernetes? –†–∞—Å—Å–∫–∞–∂–∏, —á—Ç–æ —Ç–∞–∫–æ–µ Ingress –∏ –∫–∞–∫ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç.


–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –≤–Ω–µ—à–Ω–∏—Ö (–≤–µ–±) –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –∫–ª–∞—Å—Ç–µ—Ä Kubernetes —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–±—ä–µ–∫—Ç —Ç–∏–ø–∞ **Ingress**. Ingress ‚Äì —ç—Ç–æ —Å–ø–æ—Å–æ–± –æ–ø–∏—Å–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ HTTP/HTTPS-—Ç—Ä–∞—Ñ–∏–∫–∞ –∫ —Å–µ—Ä–≤–∏—Å–∞–º –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å: –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –¥–æ–º–µ–Ω `api.myapp.com` –∏–¥—É—Ç –≤ —Å–µ—Ä–≤–∏—Å `myapp-service` –Ω–∞ –ø–æ—Ä—Ç 80, –∞ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ `admin.myapp.com` ‚Äì –≤ –¥—Ä—É–≥–æ–π —Å–µ—Ä–≤–∏—Å. –ò–ª–∏ –¥–∞–∂–µ –ø–æ –ø—É—Ç—è–º: `/api/*` ‚Äì –≤ –æ–¥–∏–Ω —Å–µ—Ä–≤–∏—Å, `/static/*` ‚Äì –≤ –¥—Ä—É–≥–æ–π.

–û–¥–Ω–∞–∫–æ —Å–∞–º –ø–æ —Å–µ–±–µ –æ–±—ä–µ–∫—Ç Ingress ‚Äì —ç—Ç–æ —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª. –ï–º—É –Ω—É–∂–µ–Ω **Ingress Controller** ‚Äì —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–ª–µ–¥–∏—Ç –∑–∞ —Ä–µ—Å—É—Ä—Å–∞–º–∏ Ingress –∏ —Ä–µ–∞–ª–∏–∑—É–µ—Ç —ç—Ç–∏ –ø—Ä–∞–≤–∏–ª–∞ –≤ –≤–∏–¥–µ –ø—Ä–æ–∫—Å–∏/–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞. –°–∞–º—ã–π —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–π ‚Äì **NGINX Ingress Controller** (–ø–æ —Å—É—Ç–∏, –ø–æ–¥ —Å Nginx, –∫–æ—Ç–æ—Ä—ã–π –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è). –¢–∞–∫–∂–µ –µ—Å—Ç—å Traefik, HAProxy, Istio (–≤ –≤–∏–¥–µ gateway) –∏ –¥—Ä—É–≥–∏–µ. –û–±—ã—á–Ω–æ ingress-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ (—á–∞—â–µ –≤—Å–µ–≥–æ –∫–∞–∫ DaemonSet –∏–ª–∏ Deployment + Service —Ç–∏–ø–∞ LoadBalancer). –í–Ω–µ—à–Ω–∏–π –º–∏—Ä –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ IP-–∞–¥—Ä–µ—Å—É —ç—Ç–æ–≥–æ ingress-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –æ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–π LoadBalancer), –∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —É–∂–µ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ —Ä–æ—É—Ç–∏—Ç –Ω–∞ –Ω—É–∂–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã —Å–æ–≥–ª–∞—Å–Ω–æ –ø—Ä–∞–≤–∏–ª–∞–º.

–†–∞–±–æ—Ç–∞–µ—Ç —ç—Ç–æ —Ç–∞–∫: —Ç—ã —Å–æ–∑–¥–∞—ë—à—å Ingress-–ø—Ä–∞–≤–∏–ª–æ, Kubernetes —Å–æ–æ–±—â–∞–µ—Ç –æ –Ω—ë–º ingress-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—É (—á–µ—Ä–µ–∑ –º–µ—Ö–∞–Ω–∏–∑–º Custom Resources –∏–ª–∏ –Ω–∞–ø—Ä—è–º—É—é, –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω –∫–ª–∞—Å—Å ingress-–∞). –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, nginx.conf) —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ —Ö–æ—Å—Ç–∞–º–∏ –∏ –ø—É—Ç—è–º–∏ –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫. –ö–æ–≥–¥–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç –∑–∞–ø—Ä–æ—Å, –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å–º–æ—Ç—Ä–∏—Ç Host header –∏ URI –∏ —Ä–µ—à–∞–µ—Ç, –∫—É–¥–∞ –µ–≥–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å ‚Äì –¥–æ –Ω—É–∂–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ (—á–µ—Ä–µ–∑ –µ–≥–æ ClusterIP). –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, Ingress –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–º–µ—Ç—å –æ–¥–Ω—É —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ (–∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ, –Ω–æ –Ω–µ –ø–æ —á–∏—Å–ª—É —Å–µ—Ä–≤–∏—Å–æ–≤, –∫–∞–∫ –±—ã–ª–æ –±—ã —Å LoadBalancer-–∞–º–∏), —ç–∫–æ–Ω–æ–º–∏—Ç—å –Ω–∞ –≤–Ω–µ—à–Ω–∏—Ö –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞—Ö –∏ –≥–∏–±–∫–æ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã. –û–±—ã—á–Ω–æ –≤ production –¥–µ–ª–∞—é—Ç –æ–¥–∏–Ω ingress-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä –∏ –º–Ω–æ–≥–æ Ingress-–ø—Ä–∞–≤–∏–ª –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤/–¥–æ–º–µ–Ω–æ–≤. –≠—Ç–æ –≥–æ—Ä–∞–∑–¥–æ —É–¥–æ–±–Ω–µ–µ, —á–µ–º –∑–∞–≤–æ–¥–∏—Ç—å –ø–æ LoadBalancer –Ω–∞ –∫–∞–∂–¥—ã–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å (—á—Ç–æ –∏ –¥–æ—Ä–æ–≥–æ, –∏ —Ç—Ä—É–¥–Ω–æ—É–ø—Ä–∞–≤–ª—è–µ–º–æ). –ö —Ç–æ–º—É –∂–µ ingress-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã —á–∞—Å—Ç–æ —É–º–µ—é—Ç –µ—â—ë TLS-—Ç–µ—Ä–º–∏–Ω–∞—Ü–∏—é (–º–æ–∂–Ω–æ —Å—Ä–∞–∑—É –ø–æ–¥–≤–µ—Å–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –Ω–∞ –≤—Ö–æ–¥–µ) –∏ –¥—Ä—É–≥–∏–µ —Ñ–∏—à–∫–∏ (rate limiting, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é) ‚Äì —Ç–æ –µ—Å—Ç—å –≤—ã–ø–æ–ª–Ω—è—é—Ç —Ä–æ–ª—å –≤—Ö–æ–¥–Ω–æ–≥–æ —à–ª—é–∑–∞ (entry gateway) –≤ —Ç–≤–æ–π –∫–ª–∞—Å—Ç–µ—Ä.



---

## ‚ùì 69. –ö–∞–∫ –≤ Kubernetes —Ö—Ä–∞–Ω—è—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ —Å–µ–∫—Ä–µ—Ç—ã –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π? –ß–µ–º –æ—Ç–ª–∏—á–∞—é—Ç—Å—è ConfigMap –∏ Secret, –∏ –∫–∞–∫ –∏—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤ –ø–æ–¥–∞—Ö?


–í Kubernetes –µ—Å—Ç—å –¥–≤–∞ –±–∞–∑–æ–≤—ã—Ö —Ç–∏–ø–∞ –æ–±—ä–µ–∫—Ç–∞ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: **ConfigMap** –∏ **Secret**. –û–±–∞ –ø–æ–∑–≤–æ–ª—è—é—Ç –≤—ã–Ω–µ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ –æ–±—Ä–∞–∑–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ –∑–∞–¥–∞—Ç—å –∏—Ö —Å–Ω–∞—Ä—É–∂–∏, –∞ –ø–æ—Ç–æ–º –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫ –ø–æ–¥–∞–º —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ —Ñ–∞–π–ª—ã.

ConfigMap –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –æ–±—ã—á–Ω—ã—Ö, –Ω–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä, —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞–±–æ—Ä –ø–∞—Ä "–∫–ª—é—á=–∑–Ω–∞—á–µ–Ω–∏–µ" –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ª–∏–±–æ —Ü–µ–ª—ã–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª. ConfigMap —É–¥–æ–±–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –≤—Å–µ–≥–æ, —á—Ç–æ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π: URL —Å–µ—Ä–≤–∏—Å–æ–≤, –∏–º—è —Ç–æ–ø–∏–∫–∞ Kafka, —Ñ–∏—á–∞-—Ñ–ª–∞–≥–∏ –∏ —Ç.–¥. –¢—ã —Å–æ–∑–¥–∞—ë—à—å ConfigMap (–≤ YAML —ç—Ç–æ –æ–±—ã—á–Ω–æ —Å–µ–∫—Ü–∏—è `data` —Å –∫–ª—é—á–∞–º–∏ –∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –∏–ª–∏ –¥–∞–∂–µ –ø–æ–º–µ—â—ë–Ω–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º —Ñ–∞–π–ª–∞), –ø–æ—Ç–æ–º –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ Pod (–∏–ª–∏ Deployment) –º–æ–∂–µ—à—å –ª–∏–±–æ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç ConfigMap –∫–∞–∫ —Ç–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∂–¥—ã–π –∫–ª—é—á —Å—Ç–∞–Ω–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–º —Ñ–∞–π–ª–æ–º, —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ ‚Äì –∑–Ω–∞—á–µ–Ω–∏–µ), –ª–∏–±–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`envFrom` –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ `env`). –ü—Ä–µ–ª–µ—Å—Ç—å –≤ —Ç–æ–º, —á—Ç–æ –º–µ–Ω—è—è ConfigMap, –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (—Ö–æ—Ç—è –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –æ–±—ã—á–Ω–æ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–¥—ã –∏–ª–∏ —Å–¥–µ–ª–∞—Ç—å rolling update Deployment-–∞).

Secret –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂ –ø–æ –º–µ—Ö–∞–Ω–∏–∑–º—É ‚Äì —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Ç–æ–∂–µ —Ö—Ä–∞–Ω–∏—Ç –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ ‚Äì –Ω–æ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–ø–∞—Ä–æ–ª–∏, —Ç–æ–∫–µ–Ω—ã, –∫–ª—é—á–∏). –ì–ª–∞–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ: Secret –≤ API Kubernetes —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–æ –≤ base64, –∏ Kubernetes —Å—Ç–∞—Ä–∞–µ—Ç—Å—è –Ω–µ —Å–≤–µ—Ç–∏—Ç—å –µ–≥–æ –ª–∏—à–Ω–∏–π —Ä–∞–∑. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —Å–¥–µ–ª–∞—Ç—å `**kubectl** get secret -o yaml`, —Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è –±—É–¥—É—Ç –≤ base64 (—á—Ç–æ–±—ã —Å–ª—É—á–∞–π–Ω–æ —á–µ–ª–æ–≤–µ–∫ –≥–ª–∞–∑–∞–º–∏ –Ω–µ —É–≤–∏–¥–µ–ª –ø–∞—Ä–æ–ª—å). –ü—Ä–∞–≤–¥–∞, —ç—Ç–æ —Å–∫–æ—Ä–µ–µ "–º–∞—Å–∫–∏—Ä–æ–≤–∫–∞", —á–µ–º –∑–∞—â–∏—Ç–∞: —É –∫–æ–≥–æ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–ª–∞—Å—Ç–µ—Ä—É, —Ç–æ—Ç –º–æ–∂–µ—Ç –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å base64. –ü–æ—ç—Ç–æ–º—É –æ–±—ã—á–Ω–æ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–ª–∞—Å—Ç–µ—Ä–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –≤–∫–ª—é—á–∞—é—Ç —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ (Encryption at Rest) –∏–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É—é—Ç—Å—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ–∫—Ä–µ—Ç-—Ö—Ä–∞–Ω–∏–ª–∏—â–∞–º–∏. Secret –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ –ø–æ–¥ —Ç–∞–∫ –∂–µ, –∫–∞–∫ ConfigMap: —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–æ —Ç–æ–≥–¥–∞ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—É–¥—É—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ –≤–Ω—É—Ç—Ä–∏ –ø–æ–¥–∞) –∏–ª–∏ –º–æ–Ω—Ç–∏—Ä—É—è –≤ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É (–∫–∞–∂–¥—ã–π –∫–ª—é—á –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª, —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ ‚Äì —Å–µ–∫—Ä–µ—Ç). –ü—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å–µ–∫—Ä–µ—Ç–æ–≤ Kubernetes –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ª–∞–µ—Ç —Ç–æ–º –≤ –ø–∞–º—è—Ç–∏ (tmpfs) –∏ —Ñ–∞–π–ª—ã —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ root (–¥–æ—Å—Ç—É–ø 0400), —á—Ç–æ–±—ã –ø–æ–≤—ã—Å–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.

–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ: ConfigMap –¥–ª—è –∫–æ–Ω—Ñ–∏–≥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —à–∏—Ä–æ–∫–æ–π –ø—É–±–ª–∏–∫–µ (–Ω—É, —É—Å–ª–æ–≤–Ω–æ ‚Äì —Ç–µ–º, —É –∫–æ–≥–æ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–ª–∞—Å—Ç–µ—Ä—É), Secret ‚Äì –¥–ª—è –≤–µ—â–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–∫—Ä—ã—Ç—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, `DB_HOST` –∏ `FEATURE_TOGGLE_X` –ø–æ–π–¥—É—Ç –≤ ConfigMap, –∞ `DB_PASSWORD` –∏ `API_KEY` –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ ‚Äì –≤ Secret. –†–∞–±–æ—Ç–∞—é—Ç —Å –Ω–∏–º–∏ —Å—Ö–æ–∂–µ, –ø—Ä–æ—Å—Ç–æ Secret —Ç—Ä–µ–±—É–µ—Ç —á—É—Ç—å –±–æ–ª—å—à–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: –Ω–∞–¥–æ —Å–ª–µ–¥–∏—Ç—å –∑–∞ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ (RBAC, —á—Ç–æ–±—ã —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –º–æ–≥–ª–∏ —á–∏—Ç–∞—Ç—å), –∏ —É—á–∏—Ç—ã–≤–∞—Ç—å, —á—Ç–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞ –Ω–µ –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ –æ—Ç—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –ø–æ–¥–∞—Ö (–ø–æ–¥—ã –∫—ç—à–∏—Ä—É—é—Ç –∑–Ω–∞—á–µ–Ω–∏–µ, —Ç–∞–º –µ—Å—Ç—å –Ω—é–∞–Ω—Å—ã; –æ–±—ã—á–Ω–æ –ø—Ä–æ—â–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–¥, —á—Ç–æ–±—ã –Ω–æ–≤—ã–π —Å–µ–∫—Ä–µ—Ç –ø–æ–¥—Ç—è–Ω—É–ª—Å—è). –ù–æ –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ —ç—Ç–æ –¥–≤–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –º–µ—Ö–∞–Ω–∏–∑–º–∞ —Å –æ–¥–Ω–æ–π –∏–¥–µ–µ–π ‚Äì –≤—ã–Ω–µ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –∏–º–∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–ª–∞—Å—Ç–µ—Ä–∞.



---

## ‚ùì 70. –ö–∞–∫ Kubernetes —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö? –ß—Ç–æ —Ç–∞–∫–æ–µ PersistentVolume (PV) –∏ PersistentVolumeClaim (PVC), –∏ –∫–∞–∫ –æ–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º —Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ –¥–æ–ª–≥–∏–π —Å—Ä–æ–∫?


–í Kubernetes –ø–æ–¥—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞–¥–æ–ª–≥–æ: –µ—Å–ª–∏ –ø–æ–¥ –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å (–ø–µ—Ä–µ—Å–æ–∑–¥–∞—Å—Ç—Å—è), –≤—Å—ë, —á—Ç–æ –±—ã–ª–æ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ, –ø—Ä–æ–ø–∞–¥—ë—Ç. –ß—Ç–æ–±—ã —Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ ‚Äì –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ —á—Ç–æ–±—ã —Ñ–∞–π–ª—ã –±—ã–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ—Å–ª–µ —Ä–µ—Å—Ç–∞—Ä—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Äì –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–µ—Ö–∞–Ω–∏–∑–º –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö —Ç–æ–º–æ–≤ (Persistent Volume).

**PersistentVolume (PV)** ‚Äì —ç—Ç–æ –æ–±—ä–µ–∫—Ç –∫–ª–∞—Å—Ç–µ—Ä–∞, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–π —Å–æ–±–æ–π –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ. –ü—Ä–æ—â–µ –≥–æ–≤–æ—Ä—è, PV ‚Äì —ç—Ç–æ —É–∂–µ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π "–∫—É—Å–æ–∫" –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∫–ª–∞—Å—Ç–µ—Ä–∞ –ª–∏–±–æ –Ω–∞—Å—Ç—Ä–æ–∏–ª —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, PV –ø—Ä–∏–≤—è–∑–∞–Ω –∫ NFS-—Å–µ—Ä–≤–µ—Ä—É –∏–ª–∏ –∫ –∑–∞—Ä–∞–Ω–µ–µ —Å–æ–∑–¥–∞–Ω–Ω–æ–º—É –¥–∏—Å–∫—É), –ª–∏–±–æ –æ–Ω –º–æ–∂–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ StorageClass. PV –∏–º–µ–µ—Ç —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏: —Ä–∞–∑–º–µ—Ä, —Ç–∏–ø –¥–æ—Å—Ç—É–ø–∞ (ReadWriteOnce, ReadWriteMany –∏ —Ç.–¥.), –∏ –ø–æ–ª–∏—Ç–∏–∫—É –≤–æ–∑–≤—Ä–∞—Ç–∞ (reclaim policy ‚Äì –Ω–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ –¥–µ–ª–∞—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏). –ù–æ –Ω–∞–ø—Ä—è–º—É—é –ø–æ–¥—ã PV –Ω–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç.

**PersistentVolumeClaim (PVC)** ‚Äì —ç—Ç–æ –∑–∞–ø—Ä–æ—Å –Ω–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º namespace). –ö–æ–≥–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –Ω—É–∂–µ–Ω –¥–∏—Å–∫, –≤ –º–∞–Ω–∏—Ñ–µ—Å—Ç–µ Deployment (–∏–ª–∏ StatefulSet) –æ–ø–∏—Å—ã–≤–∞—é—Ç PVC: –º–æ–ª, —Ö–æ—á—É —Ç–æ–º —Ç–∞–∫–æ–≥–æ-—Ç–æ —Ä–∞–∑–º–µ—Ä–∞ –∏ —Å —Ç–∞–∫–∏–º-—Ç–æ StorageClass. Kubernetes –Ω–∞—Ö–æ–¥–∏—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏–π PV (–µ—Å–ª–∏ –µ—Å—Ç—å —Å–≤–æ–±–æ–¥–Ω—ã–π, —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—é—â–∏–π –∑–∞–ø—Ä–æ—Å—É) –∏ "–±–∏–Ω–¥–∏—Ç" (—Å–≤—è–∑—ã–≤–∞–µ—Ç) –µ–≥–æ —Å PVC. –ï—Å–ª–∏ –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ PV –Ω–µ—Ç, –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–≤–∏–∂–∏–Ω–∏–Ω–≥, —Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ –æ–±–ª–∞—á–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∏–ª–∏ –¥—Ä—É–≥–æ–π –¥—Ä–∞–π–≤–µ—Ä —Å–æ–∑–¥–∞—Å—Ç—Å—è –Ω–æ–≤—ã–π PV –Ω—É–∂–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞. –ü–æ—Å–ª–µ —Å–≤—è–∑—ã–≤–∞–Ω–∏—è PVC –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ‚Äì –≤ Pod-—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ —É–∫–∞–∑—ã–≤–∞–µ—à—å volume —Ç–∏–ø–∞ persistentVolumeClaim —Å –∏–º–µ–Ω–µ–º PVC. Kubernetes —Ç–æ–≥–¥–∞ –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä—É–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –¥–∏—Å–∫ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, PVC ‚Äì –∫–∞–∫ "–±–∏–ª–µ—Ç–∏–∫", –∑–∞–ø—Ä–æ—Å –Ω–∞ —Ö—Ä–∞–Ω–µ–Ω–∏–µ, –∞ PV ‚Äì –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ. –û–¥–∏–Ω PVC –±–∏–Ω–¥–∏—Ç—Å—è –∫ –æ–¥–Ω–æ–º—É PV (–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç) –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ PVC –Ω–µ —É–¥–∞–ª—è—Ç. –î–∞–Ω–Ω—ã–µ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –ø–æ–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–æ–¥ –ø—Ä–æ—Å—Ç–æ —Å–Ω–æ–≤–∞ –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä—É–µ—Ç —Ç–æ—Ç –∂–µ —Å–∞–º—ã–π —Ç–æ–º —á–µ—Ä–µ–∑ —Ç–æ—Ç –∂–µ PVC. –≠—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è stateful-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π: –Ω–∞–ø—Ä–∏–º–µ—Ä, –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤ StatefulSet –±—É–¥–µ—Ç –∏–º–µ—Ç—å PVC, –∏ –¥–∞–∂–µ –µ—Å–ª–∏ –ø–æ–¥ —Å –±–∞–∑–æ–π –ø–µ—Ä–µ—Å–æ–∑–¥–∞–ª—Å—è –Ω–∞ –¥—Ä—É–≥–æ–º —É–∑–ª–µ, Kubernetes –ø–æ–¥—Ç—è–Ω–µ—Ç —Ç–æ—Ç –∂–µ –¥–∏—Å–∫, –∏ –¥–∞–Ω–Ω—ã–µ –Ω–∏–∫—É–¥–∞ –Ω–µ –¥–µ–Ω—É—Ç—Å—è. –ö–æ–≥–¥–∞ PVC –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω, –µ–≥–æ –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å, –∏ —Ç–æ–≥–¥–∞ –ø–æ –ø–æ–ª–∏—Ç–∏–∫–µ reclaim Kubernetes –ª–∏–±–æ —Ç–æ–∂–µ —É–¥–∞–ª–∏—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –¥–∏—Å–∫ (–µ—Å–ª–∏ —Å—Ç–æ—è–ª–∞ policy Delete), –ª–∏–±–æ –æ—Å—Ç–∞–≤–∏—Ç (policy Retain) –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º. –í –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π —Ä–∞–±–æ—Ç–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ —á–∞—â–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç –∏–º–µ–Ω–Ω–æ —Å PVC (–æ–ø–∏—Å—ã–≤–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ –∏ —á–µ–≥–æ –Ω—É–∂–Ω–æ), –∞ –∫–ª–∞—Å—Ç–µ—Ä "–ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º" —Ä–∞–∑—Ä—É–ª–∏–≤–∞–µ—Ç, –≥–¥–µ —ç—Ç–æ–º—É –≤—Å–µ–º—É —Ö—Ä–∞–Ω–∏—Ç—å—Å—è (—á–µ—Ä–µ–∑ PV, StorageClass –∏ provisioner-—ã).



---

## ‚ùì 71. –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ —Ç—ã –¥–µ–ª–∞–µ—à—å `**kubectl** apply` –¥–ª—è Deployment-–º–∞–Ω–∏—Ñ–µ—Å—Ç–∞? –ö–∞–∫ Kubernetes –≤—ã–ø–æ–ª–Ω—è–µ—Ç rolling update –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è?


–ö–æ–≥–¥–∞ –º—ã –ø—Ä–∏–º–µ–Ω—è–µ–º –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–π Deployment (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –Ω–æ–≤—ã–º –æ–±—Ä–∞–∑–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞), Kubernetes –∑–∞–ø—É—Å–∫–∞–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –∑–∞–¥–∞–Ω–Ω—ã–π –¥–ª—è —ç—Ç–æ–≥–æ Deployment (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —ç—Ç–æ RollingUpdate). –ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ, `**kubectl** apply` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ API-—Å–µ—Ä–≤–µ—Ä, –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä Deployment –Ω–∞—á–∏–Ω–∞–µ—Ç —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –∂–µ–ª–∞–µ–º–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å —Ç–µ–∫—É—â–∏–º.

Deployment —É–ø—Ä–∞–≤–ª—è–µ—Ç ReplicaSet-–∞–º–∏. –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –æ–Ω —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π ReplicaSet –¥–ª—è –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ –ø–æ–¥–æ–≤ (–µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª—Å—è template –ø–æ–¥–∞ ‚Äì –∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –æ–±—Ä–∞–∑–∞ –∫–∞–∫ —Ä–∞–∑ –º–µ–Ω—è–µ—Ç template, —Ç–æ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π ReplicaSet). –°—Ç–∞—Ä—ã–π ReplicaSet, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏, –æ—Å—Ç–∞—ë—Ç—Å—è, –Ω–æ –µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ø–ª–∏–∫ –±—É–¥–µ—Ç –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —É–º–µ–Ω—å—à–∞—Ç—å—Å—è. –ü—Ä–æ—Ü–µ—Å—Å —Ç–∞–∫–æ–π: Deployment –º–æ–∂–µ—Ç —Å—Ä–∞–∑—É –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–æ–≤ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ (–ø–∞—Ä–∞–º–µ—Ç—Ä maxSurge, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1, –∑–Ω–∞—á–∏—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞ 1 –ø–æ–¥ –±–æ–ª—å—à–µ, —á–µ–º —É–∫–∞–∑–∞–Ω–æ –≤ replicas, –≤—Ä–µ–º–µ–Ω–Ω–æ). –ù–æ–≤—ã–π –ø–æ–¥ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –ø—Ä–æ—Ö–æ–¥–∏—Ç readiness. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–π –ø–æ–¥ —Å—Ç–∞–ª –≥–æ—Ç–æ–≤, Deployment —É–¥–∞–ª–∏—Ç –æ–¥–∏–Ω —Å—Ç–∞—Ä—ã–π –ø–æ–¥ (—É–º–µ–Ω—å—à–∏—Ç —Ä–µ–ø–ª–∏–∫–∏ —Å—Ç–∞—Ä–æ–≥–æ ReplicaSet –Ω–∞ 1). –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —Å—É–º–º–∞—Ä–Ω–æ–µ —á–∏—Å–ª–æ –ø–æ–¥–æ–≤ –º–æ–∂–µ—Ç –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø—Ä–µ–≤—ã—à–∞—Ç—å –∂–µ–ª–∞–µ–º–æ–µ –Ω–∞ –≤–µ–ª–∏—á–∏–Ω—É maxSurge, –∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ–¥–æ–≤ –Ω–µ –±–æ–ª—å—à–µ maxUnavailable (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ç–æ–∂–µ 1). –î–∞–ª—å—à–µ Deployment –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π –Ω–æ–≤—ã–π –ø–æ–¥ –∏ –≥–∞—Å–∏—Ç –µ—â—ë –æ–¥–∏–Ω —Å—Ç–∞—Ä—ã–π. –®–∞–≥ –∑–∞ —à–∞–≥–æ–º –≤—Å–µ —Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ –±—É–¥—É—Ç –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–æ–≤—ã–º–∏.

–° —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞, `**kubectl** apply` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω –ª–∏—à—å –∑–∞–¥–∞–ª –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –°–∞–º rolling update –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ. –ú–æ–∂–Ω–æ –Ω–∞–±–ª—é–¥–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å —á–µ—Ä–µ–∑ `**kubectl** rollout status deployment/<–∏–º—è>` ‚Äì —Ç–∞–º –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω–æ, —Å–∫–æ–ª—å–∫–æ –ø–æ–¥–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω–æ. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–æ–≤—ã–µ –ø–æ–¥—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç readiness), —Ç–æ Deployment –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–ø–æ —Å—É—Ç–∏ "–∑–∞—Å—Ç—ã–Ω–µ—Ç" –Ω–∞ –ø—Ä–æ–±–ª–µ–º–Ω–æ–º —ç—Ç–∞–ø–µ) ‚Äì –±–ª–∞–≥–æ–¥–∞—Ä—è —Ç–æ–º—É, —á—Ç–æ maxUnavailable=1, –æ–Ω –Ω–µ –≥–∞—Å–∏—Ç –≤—Å–µ —Å—Ç–∞—Ä—ã–µ –ø–æ–¥—ã —Å—Ä–∞–∑—É. –ú–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ `**kubectl** rollout undo deployment/<–∏–º—è>`, —Ç–æ–≥–¥–∞ Deployment –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ —Å—Ç–∞—Ä—ã–π ReplicaSet. –í –Ω–æ—Ä–º–µ –∂–µ, –ø–æ—Å–ª–µ apply —á–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è –≤—Å–µ –ø–æ–¥—ã –ø–µ—Ä–µ–π–¥—É—Ç –Ω–∞ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é –æ–±—Ä–∞–∑–∞ –±–µ–∑ –ø—Ä–æ—Å—Ç–æ—è (–ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏, —á—Ç–æ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –ø–æ–¥ –≤—Å–µ–≥–¥–∞ –æ—Å—Ç–∞–≤–∞–ª—Å—è ready). –≠—Ç–æ –∏ –µ—Å—Ç—å rolling update: –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞.



---

## ‚ùì 72. –ö–∞–∫ Kubernetes —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–µ—Å—É—Ä—Å—ã –º–µ–∂–¥—É –ø–æ–¥–∞–º–∏? –†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ requests –∏ limits, –∏ –ø–æ—á–µ–º—É –¥–ª—è Java –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≤–∞–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã CPU –∏ –ø–∞–º—è—Ç–∏.


–í Kubernetes –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ —Ä–µ—Å—É—Ä—Å–æ–≤: **request** (–∑–∞–ø—Ä–æ—Å) –∏ **limit** (–ª–∏–º–∏—Ç) –¥–ª—è CPU –∏ –ø–∞–º—è—Ç–∏. Request –æ–∑–Ω–∞—á–∞–µ—Ç "—Å–∫–æ–ª—å–∫–æ —Ä–µ—Å—É—Ä—Å–æ–≤ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –Ω—É–∂–Ω–æ –ø–æ–¥—É": scheduler –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–∏ —Ü–∏—Ñ—Ä—ã, —á—Ç–æ–±—ã –ø–æ–¥–æ–±—Ä–∞—Ç—å –Ω–æ–¥—É, –≥–¥–µ —Ö–≤–∞—Ç–∏—Ç –º–µ—Å—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –ø–æ–¥ –∑–∞–ø—Ä–æ—Å–∏–ª 500m CPU –∏ 1Gi –ø–∞–º—è—Ç–∏, –æ–Ω –Ω–µ –ø–æ—Å—Ç–∞–≤–∏—Ç –µ–≥–æ –Ω–∞ –Ω–æ–¥—É, –≥–¥–µ —É–∂–µ –æ—Å—Ç–∞–≤–∞–ª–æ—Å—å –º–µ–Ω—å—à–µ). Limit ‚Äì —ç—Ç–æ "–≤–µ—Ä—Ö–Ω–∏–π –ø—Ä–µ–¥–µ–ª" –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è: –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –Ω–µ –¥–∞–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª—å—à–µ —ç—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è.

–ú–µ—Ö–∞–Ω–∏–∑–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —á–µ—Ä–µ–∑ cgroup-—ã Linux. –î–ª—è CPU limit –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –±—É–¥—É—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã –≤ –¥–æ–ª–µ CPU (–ø—Ä–µ–≤—ã—Å–∏—Ç—å –Ω–µ —Å–º–æ–≥—É—Ç, –∏—Ö –Ω–∞—á–Ω—ë—Ç "–¥—É—à–∏—Ç—å", throttling). CPU request –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –≤–µ—Å –ø—Ä–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏ –∑–∞ CPU: –µ—Å–ª–∏ –º–Ω–æ–≥–æ –ø–æ–¥–æ–≤ –Ω–∞ –æ–¥–Ω–æ–π –Ω–æ–¥–µ, Kubernetes —á–µ—Ä–µ–∑ cgroup CPU shares —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç—ã –ø—Ä–∏–º–µ—Ä–Ω–æ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –∑–∞–ø—Ä–æ—Å–∞–º (—É –∫–æ–≥–æ request –≤—ã—à–µ, —Ç–æ—Ç –ø–æ–ª—É—á–∏—Ç –±–æ–ª—å—à—É—é –¥–æ–ª—é CPU –ø—Ä–∏ –ø–æ–ª–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ). –î–ª—è –ø–∞–º—è—Ç–∏ –≤—Å—ë —Å—Ç—Ä–æ–∂–µ: request –∏ limit –æ–±—ã—á–Ω–æ —Ä–∞–≤–Ω—ã (—á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –Ω–µ "–æ–≤–µ—Ä—Å–µ–π–ª–∏—Ç—å" –ø–∞–º—è—Ç—å). –ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –≤–∑—è—Ç—å –ø–∞–º—è—Ç–∏ –±–æ–ª—å—à–µ, —á–µ–º limit, —Ç–æ —è–¥—Ä–æ Linux –µ–≥–æ —É–±—å—ë—Ç (OOM Killer). Request –ø–∞–º—è—Ç–∏ —Ç–æ–∂–µ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏: —Å—É–º–º–∞—Ä–Ω–æ –Ω–∞ –Ω–æ–¥–µ –Ω–µ –±—É–¥–µ—Ç –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–∞–º—è—Ç–∏ –±–æ–ª—å—à–µ, —á–µ–º —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –µ—Å—Ç—å (—Ç–∞–∫ Kubernetes –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏).

–î–ª—è Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ –æ—Å–æ–±–µ–Ω–Ω–æ –∫—Ä–∏—Ç–∏—á–Ω–∞. JVM —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–∞–º—è—Ç—å—é (GC, heap) –∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–Ω–∞ –º–æ–∂–µ—Ç —Ä–µ—à–∏—Ç—å –≤–∑—è—Ç—å —Å–µ–±–µ –º–Ω–æ–≥–æ, –æ—Ä–∏–µ–Ω—Ç–∏—Ä—É—è—Å—å –Ω–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏—Å—Ç–µ–º—ã. –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞—Ç—å limits, –æ–¥–∏–Ω "–ø—Ä–æ–∂–æ—Ä–ª–∏–≤—ã–π" Java-–ø—Ä–æ—Ü–µ—Å—Å –º–æ–∂–µ—Ç –≤—ã–µ—Å—Ç—å –≤—Å—é –ø–∞–º—è—Ç—å –Ω–æ–¥—ã. –ù–æ –µ—Å–ª–∏ limits —É–∫–∞–∑–∞–ª–∏, –Ω–∞–¥–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ JVM –æ –Ω–∏—Ö "–∑–Ω–∞–µ—Ç". –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ Java (Java 11+, –∏–ª–∏ 8 —Å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏) —É–º–µ—é—Ç —á–∏—Ç–∞—Ç—å cgroup-–ª–∏–º–∏—Ç—ã –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞—Ç—å MaxHeapSize –ø—Ä–∏–º–µ—Ä–Ω–æ –ø–æ–¥ –ø—Ä–µ–¥–µ–ª –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –ù–æ —Ä–∞–Ω—å—à–µ –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å —è–≤–Ω–æ —Å—Ç–∞–≤–∏—Ç—å -Xmx —Ä–∞–≤–Ω—ã–º memory limit, –∏–Ω–∞—á–µ JVM –¥—É–º–∞–ª–∞, —á—Ç–æ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤—Å—è –ø–∞–º—è—Ç—å —Ö–æ—Å—Ç–∞, –∏ –º–æ–≥–ª–∞ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –∑–∞–Ω—è—Ç—å –±–æ–ª—å—à–µ –ª–∏–º–∏—Ç–∞ ‚Äì —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ OOM Kill –æ—Ç Kubernetes. –° CPU —Å—Ö–æ–∂–∞—è —Å–∏—Ç—É–∞—Ü–∏—è: request CPU –¥–ª—è Java-—Å–µ—Ä–≤–∏—Å–∞ —Å—Ç–∞–≤—è—Ç, —á—Ç–æ–±—ã scheduler –Ω–µ –∑–∞–ø—É—Å–∫–∞–ª —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Ç—è–∂—ë–ª—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–∞ –æ–¥–Ω–æ–º —É–∑–ª–µ, –∏ —á—Ç–æ–±—ã JVM –∏–º–µ–ª–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—É—é –¥–æ–ª—é CPU –¥–ª—è —Ä–∞–±–æ—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è GC). –ï—Å–ª–∏ –∑–∞–¥–∞—Ç—å —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∏–π request, –ø–æ–¥ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –º–∞–ª–æ CPU –∏ —Å—Ç—Ä–∞–¥–∞—Ç—å –æ—Ç –ø–∞—É–∑ (GC –∏–ª–∏ –ø–æ—Ç–æ–∫–æ–≤), –µ—Å–ª–∏ limit CPU –∑–∞–¥–∞—Ç—å —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∏–π, Java-–ø–æ—Ç–æ–∫–∞–º –±—É–¥–µ—Ç –Ω–µ —Ö–≤–∞—Ç–∞—Ç—å CPU, –∏—Ö –±—É–¥—É—Ç "–¥—É—à–∏—Ç—å" (throttling), —á—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ requests/limits –¥–ª—è Java –æ–±—ã—á–Ω–æ —Ç–∞–∫–æ–≤–∞: limit –ø–∞–º—è—Ç–∏ = X (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2Gi), Xmx –≤ JVM —Å—Ç–∞–≤–∏–º —á—É—Ç—å –º–µ–Ω—å—à–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1.5-1.8Gi, –æ—Å—Ç–∞–≤–ª—è—è –º–µ—Å—Ç–æ –ø–æ–¥ –æ—Å—Ç–∞–ª—å–Ω–æ–µ), request –ø–∞–º—è—Ç–∏ –º–æ–∂–Ω–æ —Ä–∞–≤–Ω—ã–º limit (—á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å—é –ø–∞–º—è—Ç—å). CPU request ‚Äì –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–≥—Ä—É–∑–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 0.5 –∏–ª–∏ 1 CPU), limit CPU ‚Äì –µ—Å–ª–∏ –∑–Ω–∞–µ–º, —á—Ç–æ –±–æ–ª—å—à–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ, –º–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2 CPU, —á—Ç–æ–±—ã –Ω–µ —Å—ä–µ–ª –±–æ–ª—å—à–µ). –≠—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–º–æ–≥–∞—é—Ç Kubernetes —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ "—É–ø–∞–∫–æ–≤—ã–≤–∞—Ç—å" –ø–æ–¥—ã –ø–æ –Ω–æ–¥–∞–º –∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∑–∞—â–∏—â–∞—é—Ç —Å–æ—Å–µ–¥–Ω–∏–µ –ø–æ–¥—ã –æ—Ç –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–≥–æ –∞–ø–ø–µ—Ç–∏—Ç–∞ –Ω–∞—à–µ–π Java-–ø—Ä–æ–≥—Ä–∞–º–º—ã.



---

## ‚ùì 73. –ö–∞–∫ —Ç—ã –æ–±—ã—á–Ω–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—à—å Java –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ? –ö–∞–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞–µ—à—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–≥—Ä—É–∑–∫–∞ CPU, –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤, –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞) –∏ —Å –ø–æ–º–æ—â—å—é –∫–∞–∫–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤?


–í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –≤–∞–∂–Ω–æ —Å–ª–µ–¥–∏—Ç—å –∫–∞–∫ –∑–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ —Ä–µ—Å—É—Ä—Å–Ω—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏, —Ç–∞–∫ –∏ –∑–∞ –º–µ—Ç—Ä–∏–∫–∞–º–∏ —Å–∞–º–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –î–µ–ª–∏ –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≥—Ä—É–ø–ø. 

–ü–µ—Ä–≤–∞—è ‚Äì –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU, –ø–∞–º—è—Ç–∏ (–≤–∫–ª—é—á–∞—è Java heap –∏ off-heap), –¥–∏—Å–∫–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞, —Å–µ—Ç–µ–≤–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏ —Ç.–¥. 

–í—Ç–æ—Ä–∞—è ‚Äì –º–µ—Ç—Ä–∏–∫–∏ —Å–∞–º–æ–π JVM: –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—Ä–µ–º—è –∏ —á–∞—Å—Ç–æ—Ç–∞ —Å–±–æ—Ä–æ–∫ –º—É—Å–æ—Ä–∞ (GC), —Ä–∞–∑–º–µ—Ä –∫—É—á–∏ (—Å–∫–æ–ª—å–∫–æ –ø–∞–º—è—Ç–∏ –∑–∞–Ω—è—Ç–æ vs –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä), —á–∏—Å–ª–æ –ø–æ—Ç–æ–∫–æ–≤, –ø—Ä–æ—Ü–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ GC –∏–ª–∏ –¥—Ä—É–≥–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Ä–∞–±–æ—Ç—ã JVM.

–¢—Ä–µ—Ç—å—è –≥—Ä—É–ø–ø–∞ ‚Äì –º–µ—Ç—Ä–∏–∫–∏ —É—Ä–æ–≤–Ω—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –°—é–¥–∞ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –≤–µ—â–∏ –≤—Ä–æ–¥–µ —á–∏—Å–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É (RPS), –¥–æ–ª–∏ –æ—à–∏–±–æ–∫ (error rate, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ—Ü–µ–Ω—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ —Å 5xx –æ—Ç–≤–µ—Ç–æ–º –∏–ª–∏ –Ω–µ–ø–æ–π–º–∞–Ω–Ω—ã—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π), –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞ (latency: —Å—Ä–µ–¥–Ω–µ–µ, –º–µ–¥–∏–∞–Ω–∞, 95-–π –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª—å –∏ —Ç.–¥.). –ü–ª—é—Å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏: —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–µ–π, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Å–∫–æ—Ä–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ—Ö –∏–ª–∏ –∏–Ω—ã—Ö –∑–∞–¥–∞—á. –≠—Ç–∏ –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏ –ø–æ–º–æ–≥–∞—é—Ç –ø–æ–Ω—è—Ç—å, –Ω–∞—Å–∫–æ–ª—å–∫–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∞–º–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.

–î–ª—è —Å–±–æ—Ä–∞ –≤—Å–µ—Ö —ç—Ç–∏—Ö –¥–∞–Ω–Ω—ã—Ö –æ–±—ã—á–Ω–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤—Ä–æ–¥–µ Prometheus + Grafana. –í Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö (–æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ Spring Boot) –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å Micrometer, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ JVM. –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç endpoint (–Ω–∞–ø—Ä–∏–º–µ—Ä, "/actuator/prometheus"), –æ—Ç–∫—É–¥–∞ Prometheus –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ "—Å–∫—Ä–µ–π–ø–∞–µ—Ç" (–æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç) –º–µ—Ç—Ä–∏–∫–∏. Prometheus —Ö—Ä–∞–Ω–∏—Ç –∏—Ö –≤ –≤–∏–¥–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤, –∞ Grafana –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞—à–±–æ—Ä–¥–æ–≤ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–ª—ë—Ä—Ç–æ–≤. –ù–∞ –≥—Ä–∞—Ñ–∏–∫–∞—Ö –º—ã –≤–∏–¥–∏–º –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏ (CPU, –ø–∞–º—è—Ç—å, –≤—Ä–µ–º—è –ø–∞—É–∑ GC) –∏ –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏ (—Ç–æ—Ç –∂–µ RPS, –ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫, –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –∑–∞–ø—Ä–æ—Å–æ–≤). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –∑–∞–º–µ—Ç–∏—Ç—å –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è: —Å–∫–∞–∂–µ–º, –≤–æ–∑—Ä–æ—Å–ª–æ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –∏–ª–∏ —Ä–∞—Å—Ç—ë—Ç –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ ‚Äì –∑–Ω–∞—á–∏—Ç, —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫.

–ö—Ä–æ–º–µ open-source —Å—Ç–µ–∫–∞, —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∏ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ APM (Application Performance Monitoring) —Ä–µ—à–µ–Ω–∏—è: New Relic, AppDynamics, Datadog –∏ –¥—Ä. –û–Ω–∏ —Å –ø–æ–º–æ—â—å—é –∞–≥–µ–Ω—Ç–æ–≤ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —Å–æ–±–∏—Ä–∞—é—Ç –ø–æ—Ö–æ–∂—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ —á–∞—Å—Ç–æ –¥–∞—é—Ç –µ—â—ë –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤. –í –æ–¥–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –º—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ New Relic ‚Äì –æ–Ω —Å—Ä–∞–∑—É –ø–æ–∫–∞–∑—ã–≤–∞–ª –º–µ—Ç—Ä–∏–∫–∏ JVM –∏ —Å–∞–º—ã–µ –º–µ–¥–ª–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –∫–æ–¥–µ. –ù–æ –ø—Ä–∏–Ω—Ü–∏–ø —Å—Ö–æ–∂: –ø–æ–ª—É—á–∞–µ–º —Ü–∏—Ñ—Ä—ã, —Å—Ç—Ä–æ–∏–º –≥—Ä–∞—Ñ–∏–∫–∏. –ì–ª–∞–≤–Ω–æ–µ ‚Äì –Ω–µ —Ç–æ–ª—å–∫–æ —Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–∏, –Ω–æ –∏ –∏–º–µ—Ç—å –∞–ª–µ—Ä—Ç—ã: –≤—Å–µ–≥–¥–∞ –Ω–∞—Å—Ç—Ä–∞–∏–≤–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –µ—Å–ª–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, CPU –≤—ã—à–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –ø–æ—Ä–æ–≥–∞ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –∏–ª–∏ —á–∏—Å–ª–æ –æ—à–∏–±–æ–∫ –ø—Ä–µ–≤—ã—à–∞–µ—Ç X –≤ –º–∏–Ω—É—Ç—É. –¢–æ–≥–¥–∞ –∫–æ–º–∞–Ω–¥–∞ —Å—Ä–∞–∑—É —É–∑–Ω–∞—ë—Ç –æ –ø—Ä–æ–±–ª–µ–º–µ –∏ –º–æ–∂–µ—Ç —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å, –Ω–µ –¥–æ–∂–∏–¥–∞—è—Å—å –∂–∞–ª–æ–± –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.



---

## ‚ùì 74. –ß—Ç–æ —Ç–∞–∫–æ–µ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –∫–æ–≥–¥–∞ —ç—Ç–æ –Ω—É–∂–Ω–æ? –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –ª–∏ —Ç—ã –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤—â–∏–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, VisualVM, YourKit) –¥–ª—è –ø–æ–∏—Å–∫–∞ —É–∑–∫–∏—Ö –º–µ—Å—Ç –≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏?


–ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ (profiling) ‚Äì —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –¶–µ–ª—å ‚Äì –≤—ã—è—Å–Ω–∏—Ç—å, –≥–¥–µ –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Ç—Ä–∞—Ç–∏—Ç —Ä–µ—Å—É—Ä—Å—ã: –∫–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã –∏–ª–∏ —É—á–∞—Å—Ç–∫–∏ –∫–æ–¥–∞ –ø–æ—Ç—Ä–µ–±–ª—è—é—Ç –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ CPU, —Å–∫–æ–ª—å–∫–æ –ø–∞–º—è—Ç–∏ –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –∏ –Ω–µ —É—Ç–µ—á—ë—Ç –ª–∏ –æ–Ω–∞, –Ω–µ—Ç –ª–∏ "—É–∑–∫–∏—Ö –º–µ—Å—Ç" –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. –≠—Ç–æ –Ω—É–∂–Ω–æ, –∫–æ–≥–¥–∞ —É —Ç–µ–±—è –µ—Å—Ç—å –ø–æ–¥–æ–∑—Ä–µ–Ω–∏–µ, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–µ–µ, —á–µ–º –¥–æ–ª–∂–Ω–æ, –∏–ª–∏ –≥—Ä—É–∑–∏—Ç CPU —Å–∏–ª—å–Ω–µ–µ –æ–∂–∏–¥–∞–Ω–∏–π, –∏–ª–∏ –ø–∞–º—è—Ç—å –∫—É–¥–∞-—Ç–æ —É—Ç–µ–∫–∞–µ—Ç. –í–º–µ—Å—Ç–æ –≥–∞–¥–∞—Ç—å, –æ—Ç–∫—Ä—ã–≤–∞–µ—à—å –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤—â–∏–∫ –∏ —Å–º–æ—Ç—Ä–∏—à—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ü–∏—Ñ—Ä—ã.

–û–±—ã—á–Ω–æ –∫ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—é –ø—Ä–∏–±–µ–≥–∞—é—Ç –Ω–∞ —ç—Ç–∞–ø–µ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ –∫–æ–≥–¥–∞ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –≤—ã—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–±–ª–µ–º–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å—ã —Å—Ç–∞–ª–∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ, –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏, –≤ –∫–∞–∫–æ–º –º–µ—Ç–æ–¥–µ –∑–∞–¥–µ—Ä–∂–∫–∞ ‚Äì –º–æ–∂–µ—Ç, —ç—Ç–æ –≤–Ω–µ—à–Ω–∏–π –≤—ã–∑–æ–≤, –∏–ª–∏ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º. –ò–ª–∏ –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å—ä–µ–¥–∞–µ—Ç –ø–∞–º—è—Ç—å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ (—É—Ç–µ—á–∫–∞), —Å –ø–æ–º–æ—â—å—é –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤—â–∏–∫–∞ –º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å, –∫–∞–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã –∫–æ–ø—è—Ç—Å—è –∏ –∫—Ç–æ –∏—Ö –¥–µ—Ä–∂–∏—Ç.

–ò–∑ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Å–∞–º—ã–π –¥–æ—Å—Ç—É–ø–Ω—ã–π ‚Äì VisualVM (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π, –∏–¥—ë—Ç –≤ —Å–æ—Å—Ç–∞–≤–µ JDK). –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –∑–∞–ø—É—â–µ–Ω–Ω–æ–π JVM (–ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ —É–¥–∞–ª—ë–Ω–Ω–æ —á–µ—Ä–µ–∑ JMX) –∏ —Å–º–æ—Ç—Ä–µ—Ç—å –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –∫–∞–∫–∏–µ –ø–æ—Ç–æ–∫–∏ —Å–∫–æ–ª—å–∫–æ CPU –ø–æ—Ç—Ä–µ–±–ª—è—é—Ç, —Å–¥–µ–ª–∞—Ç—å snapshot CPU sampler (–ø–æ–∫–∞–∑–∞—Ç—å, –∫–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —á–∞—â–µ –≤—Å–µ–≥–æ –±—ã–ª–∏ –Ω–∞ –≤–µ—Ä—à–∏–Ω–µ —Å—Ç–µ–∫–∞ ‚Äì —ç—Ç–æ –¥–∞—ë—Ç –ø–æ–Ω–∏–º–∞–Ω–∏–µ –≥–æ—Ä—è—á–∏—Ö —Ç–æ—á–µ–∫). –¢–∞–∫–∂–µ VisualVM —É–º–µ–µ—Ç —Å–Ω–∏–º–∞—Ç—å –¥–∞–º–ø—ã –ø–∞–º—è—Ç–∏ (heap dump) –∏ –Ω–∞ –∏—Ö –æ—Å–Ω–æ–≤–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ –∫–∞–∫–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –ø–∞–º—è—Ç–∏, —á—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ —É—Ç–µ—á–µ–∫. –í –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö –∏—Å–ø–æ–ª—å–∑—É–π –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤—â–∏–∫–∏ –≤—Ä–æ–¥–µ YourKit, JProfiler ‚Äì —É –Ω–∏—Ö –±–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏: –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å instrumenting-–ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ (—Ç–æ—á–Ω–æ –∏–∑–º–µ—Ä—è—Ç—å –≤—Ä–µ–º—è –≤—ã–∑–æ–≤–∞ –∫–∞–∂–¥–æ–≥–æ –º–µ—Ç–æ–¥–∞, —Ö–æ—Ç—è –∏ —Å overhead), —Å–ª–µ–¥–∏—Ç—å –∑–∞ –∞–ª–ª–æ–∫–∞—Ü–∏—è–º–∏ –æ–±—ä–µ–∫—Ç–æ–≤, —Å—Ç—Ä–æ–∏—Ç—å –∫—Ä–∞—Å–∏–≤—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏. –≠—Ç–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –æ–±—ã—á–Ω–æ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥–µ –∏–ª–∏ –Ω–∞ –∫–æ–ø–∏–∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ "–±–æ—é" –æ–Ω–∏ –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É.

–ï—â—ë –µ—Å—Ç—å –ø–æ–¥—Ö–æ–¥ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Flight Recorder / Mission Control (JDK Flight Recorder –≤—Å—Ç—Ä–æ–µ–Ω –≤ –Ω–æ–≤—ã–µ JDK). –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å –º–µ–Ω—å—à–∏–º overhead —Å–æ–±–∏—Ä–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä—è–º–æ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ, –∞ –ø–æ—Ç–æ–º –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª –∑–∞–ø–∏—Å–∏. Mission Control:  –º–∞–ª–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –º–æ–∂–Ω–æ —Å–Ω—è—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, 5 –º–∏–Ω—É—Ç —Ä–∞–±–æ—Ç—ã –∏ –ø–æ—Ç–æ–º —É–≤–∏–¥–µ—Ç—å, –≥–¥–µ –±—ã–ª–∏ –∑–∞–¥–µ—Ä–∂–∫–∏, –∫–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã —á–∞—â–µ –∑–∞–ø—É—Å–∫–∞–ª–∏—Å—å, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–ª GC. –í –∏—Ç–æ–≥–µ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äì —ç—Ç–æ –∫–∞–∫ —Ä–µ–Ω—Ç–≥–µ–Ω –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º—ã: –∏–º –Ω–µ –ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å, –Ω–æ –∫–æ–≥–¥–∞ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –±–µ–∑ –Ω–µ–≥–æ —Ç—Ä—É–¥–Ω–æ –¥–æ–≥–∞–¥–∞—Ç—å—Å—è, —á—Ç–æ –≤–Ω—É—Ç—Ä–∏ –≤—ã–∑—ã–≤–∞–µ—Ç —É–∑–∫–æ–µ –º–µ—Å—Ç–æ.



---

## ‚ùì 75. –ö–∞–∫ —Ç—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—à—å —Ä–∞–±–æ—Ç—É —Å–±–æ—Ä—â–∏–∫–∞ –º—É—Å–æ—Ä–∞ (GC) –≤ Java? –ö–∞–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –∏–ª–∏ –ª–æ–≥–∏ –ø–æ–ª–µ–∑–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –Ω–µ –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –ø–∞–º—è—Ç—å—é?


–†–∞–±–æ—Ç—É GC –º–æ–∂–Ω–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏. –í–æ-–ø–µ—Ä–≤—ã—Ö, —á–µ—Ä–µ–∑ –ª–æ–≥–∏ GC: –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ–±—ã—á–Ω–æ –≤–∫–ª—é—á–∞—é—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è GC (–≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ—Ä—Å–∏—è—Ö —ç—Ç–æ `-Xlog:gc*` –∏–ª–∏ –±–æ–ª–µ–µ —Å—Ç–∞—Ä—ã–µ `-XX:+PrintGCDetails` –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ). –≠—Ç–∏ –ª–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∫–∞–∂–¥–æ–µ —Å–æ–±—ã—Ç–∏–µ —Å–±–æ—Ä–∫–∏: –∫–∞–∫–æ–π —ç—Ç–æ –±—ã–ª GC (Minor/Young –∏–ª–∏ Full GC), —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–Ω—è–ª, —Å–∫–æ–ª—å–∫–æ –ø–∞–º—è—Ç–∏ –æ—Å–≤–æ–±–æ–¥–∏–ª, –∫–∞–∫–æ–π —Ä–∞–∑–º–µ—Ä heap –¥–æ –∏ –ø–æ—Å–ª–µ. –ê–Ω–∞–ª–∏–∑–∏—Ä—É—è –∏—Ö, –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ Full GC —Å—Ç–∞–ª–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –æ—á–µ–Ω—å —á–∞—Å—Ç–æ –∏ –∑–∞–Ω–∏–º–∞—é—Ç –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ ‚Äì —è–≤–Ω–æ –ø—Ä–æ–±–ª–µ–º–∞ (–º–æ–∂–µ—Ç —É—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏ –∏–ª–∏ —Å–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–∞—è –∫—É—á–∞).

–í–æ-–≤—Ç–æ—Ä—ã—Ö, –º–µ—Ç—Ä–∏–∫–∏. –ú–Ω–æ–≥–∏–µ —Å–∏—Å—Ç–µ–º—ã —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ (—Ç–æ—Ç –∂–µ Micrometer/Prometheus) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç –º–µ—Ç—Ä–∏–∫–∏ –ø–æ GC —á–µ—Ä–µ–∑ JMX. –ï—Å—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ JMX-–±–∏–Ω—ã: –Ω–∞–ø—Ä–∏–º–µ—Ä, `**java**.lang:type=GarbageCollector` ‚Äì —Ç–∞–º —Å—á—ë—Ç—á–∏–∫–∏, —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∑–∞–ø—É—Å–∫–∞–ª—Å—è –∫–∞–∂–¥—ã–π GC –∏ —Å—É–º–º–∞—Ä–Ω–æ–µ –≤—Ä–µ–º—è, –ø–æ—Ç—Ä–∞—á–µ–Ω–Ω–æ–µ –Ω–∞ –Ω–µ–≥–æ. –ß–µ—Ä–µ–∑ –Ω–∏—Ö –º–æ–∂–Ω–æ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫ "–¥–æ–ª—è –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ GC" (GC Time Percentage). –ï—Å–ª–∏ –æ–Ω —Ä–∞—Å—Ç—ë—Ç –∏ –ø—Ä–µ–≤—ã—à–∞–µ—Ç, —Å–∫–∞–∂–µ–º, 5-10%, —ç—Ç–æ —Å–∏–≥–Ω–∞–ª, —á—Ç–æ GC —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–ø—Ä—è–∂—ë–Ω–Ω–æ. –¢–∞–∫–∂–µ –º–µ—Ç—Ä–∏–∫–∞ "Heap usage" ‚Äì –≤–∞–∂–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞–º—è—Ç—å: –¥–æ—Å—Ç–∏–≥–∞–µ—Ç –ª–∏ –æ–±—ä—ë–º Old Gen –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è. –í –∏–¥–µ–∞–ª–µ, –ø–æ—Å–ª–µ Full GC Old Gen –¥–æ–ª–∂–µ–Ω –æ—Å–≤–æ–±–æ–∂–¥–∞—Ç—å—Å—è —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ; –µ—Å–ª–∏ –∂–µ –ø–æ—Å–ª–µ GC heap –æ—Å—Ç–∞—ë—Ç—Å—è –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º –ø–æ–¥ –∑–∞–≤—è–∑–∫—É, –≤–µ—Ä–æ—è—Ç–Ω–æ, –∏–¥—ë—Ç —É—Ç–µ—á–∫–∞ –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–∞–º—è—Ç–∏.

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ç–æ–∂–µ –ø–æ–º–æ–≥–∞—é—Ç. –ù–∞–ø—Ä–∏–º–µ—Ä, VisualVM/JConsole –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –≥—Ä–∞—Ñ–∏–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏ –∏ —Å–æ–±—ã—Ç–∏—è GC (–º–æ–∂–Ω–æ –≤–∏–¥–µ—Ç—å "–ø–∏–ª—É": –ø–∞–º—è—Ç—å —Ä–∞—Å—Ç—ë—Ç, –ø–æ—Ç–æ–º –ø–∞–¥–µ–Ω–∏–µ ‚Äì —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç GC). –ï—Å–ª–∏ –≤–∏–¥–∏—à—å, —á—Ç–æ "–ø–∏–ª–∞" –æ—á–µ–Ω—å —á–∞—Å—Ç–∞—è –∏ –∑—É–±—Ü—ã –≤—ã—Å–æ–∫–∏–µ ‚Äì –∑–Ω–∞—á–∏—Ç, –º–æ–ª–æ–¥–æ–µ –ø–æ–∫–æ–ª–µ–Ω–∏–µ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –æ—á–µ–Ω—å —á–∞—Å—Ç–æ. –ï—Å–ª–∏ –≤–∏–¥–∏—à—å, —á—Ç–æ –≥—Ä–∞—Ñ–∏–∫ –ø–∞–º—è—Ç–∏ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –¥–æ –º–∞–∫—Å–∏–º—É–º–∞ –∏ –ø–æ—á—Ç–∏ –Ω–µ –æ–ø—É—Å–∫–∞–µ—Ç—Å—è ‚Äì –≤–æ–∑–º–æ–∂–Ω–æ, —É—Ç–µ—á–∫–∞. –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GCViewer (—É—Ç–∏–ª–∏—Ç—É –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ GC-–ª–æ–≥–æ–≤): –∑–∞–≥—Ä—É–∂–∞–µ—à—å —Ç—É–¥–∞ —Ñ–∞–π–ª –ª–æ–≥–æ–≤, –∞ –æ–Ω —Å—Ç—Ä–æ–∏—Ç –≥—Ä–∞—Ñ–∏–∫–∏ –ø–∞—É–∑, throughput, –∏ —Å—Ä–∞–∑—É –≤–∏–¥–Ω–æ, —Å–∫–æ–ª—å–∫–æ % –≤—Ä–µ–º–µ–Ω–∏ —É—Ö–æ–¥–∏—Ç –Ω–∞ —Å–±–æ—Ä–∫—É –º—É—Å–æ—Ä–∞ –∏ –∫–∞–∫ –∏–∑–º–µ–Ω—è–ª—Å—è —Ä–∞–∑–º–µ—Ä heap.

–î–ª—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤ –ø—Ä–æ–¥–µ —Å–µ–π—á–∞—Å —á–∞—Å—Ç–æ –¥–µ–ª–∞—é—Ç —Ç–∞–∫: –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –º–µ—Ç—Ä–∏–∫–∏ `jvm.gc.pause` (–Ω–∞–ø—Ä–∏–º–µ—Ä, Micrometer —Å–æ–±–∏—Ä–∞–µ—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–∞—É–∑ GC –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ) ‚Äì –≤ Grafana –º–æ–∂–Ω–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å alert, –µ—Å–ª–∏ –ø–∞—É–∑–∞ –¥–æ–ª—å—à–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è. –ò, –∫–æ–Ω–µ—á–Ω–æ, —Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ OutOfMemory –æ—à–∏–±–∫–∏: –µ—Å–ª–∏ –≤–¥—Ä—É–≥ –ø—Ä–∏–ª–µ—Ç–µ–ª–∞ OOM, –∞ GC-–ª–æ–≥–∏ –ø–µ—Ä–µ–¥ —ç—Ç–∏–º –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π —Ä–æ—Å—Ç, —Ç–æ –ø—Ä–∏–¥—ë—Ç—Å—è —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è, –∫–∞–∫–æ–π –æ–±—ä–µ–∫—Ç –Ω–µ –æ—Å–≤–æ–±–æ–∂–¥–∞–ª—Å—è (—Ç—É—Ç —É–∂–µ heap dump –∏ –∞–Ω–∞–ª–∏–∑). –í –æ–±—â–µ–º, –∫–ª—é—á–µ–≤—ã–µ –≤–µ—â–∏: —á–∞—Å—Ç–æ—Ç–∞ –∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å GC-–ø–∞—É–∑, % –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ GC, —Ä–∞–∑–º–µ—Ä –∫—É—á–∏ –¥–æ/–ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ ‚Äì –ø–æ —ç—Ç–∏–º –ø—Ä–∏–∑–Ω–∞–∫–∞–º –º–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å, –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é —Å –ø–∞–º—è—Ç—å—é –∏–ª–∏ –æ–Ω–æ —Å—Ç—Ä–∞–¥–∞–µ—Ç.



---

## ‚ùì 76. –ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏ –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é, –∫–∞–∫ –±—ã —Ç—ã —Å–Ω—è–ª –∏ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª heap dump –∏–ª–∏ thread dump? –ö–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —ç—Ç–æ–≥–æ –ø—Ä–∏–º–µ–Ω—è–ª?


–ö–æ–≥–¥–∞ –µ—Å—Ç—å –ø–æ–¥–æ–∑—Ä–µ–Ω–∏–µ –Ω–∞ —É—Ç–µ—á–∫—É –ø–∞–º—è—Ç–∏ (memory leak) –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ —Ö–æ—á–µ—Ç—Å—è –ø–æ–Ω—è—Ç—å, —á—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç –ø–∞–º—è—Ç—å, –¥–µ–ª–∞—é—Ç heap dump ‚Äì —Å–Ω–∏–º–æ–∫ –ø–∞–º—è—Ç–∏ JVM. –ï–≥–æ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Ä–∞–∑–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏. –ó–∞–ø—É—Å–∫–∞–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –æ–ø—Ü–∏–µ–π `-XX:+HeapDumpOnOutOfMemoryError`, —Ç–æ–≥–¥–∞ –ø—Ä–∏ –æ—à–∏–±–∫–µ OutOfMemory Java —Å–∞–º–∞ —Å–æ—Ö—Ä–∞–Ω–∏—Ç –¥–∞–º–ø –≤ —Ñ–∞–π–ª. –ù–æ –∏ –≤—Ä—É—á–Ω—É—é –º–æ–∂–Ω–æ: –µ—Å—Ç—å —É—Ç–∏–ª–∏—Ç–∞ `jmap` (`jmap -dump:live,file=heap.hprof <pid>`), –∏–ª–∏ —á–µ—Ä–µ–∑ JDK Mission Control/VisualVM –º–æ–∂–Ω–æ –Ω–∞–∂–∞—Ç—å "Dump heap". –≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –±–æ–ª—å—à–æ–π .hprof-—Ñ–∞–π–ª —Å–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –∫—É—á–µ.

–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å heap dump —É–¥–æ–±–Ω–æ –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö. **Eclipse Memory Analyzer (MAT)** ‚Äì –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–º–ø (–∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≥–∏–≥–∞–±–∞–π—Ç, —á—Ç–æ —Ç—è–∂–µ–ª–æ–≤–∞—Ç–æ, –Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ) –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∞–º—ã–µ "—Ç—è–∂—ë–ª—ã–µ" –æ–±—ä–µ–∫—Ç—ã, —Å–∫–æ–ª—å–∫–æ –ø–∞–º—è—Ç–∏ –∑–∞–Ω–∏–º–∞–µ—Ç –∫–∞–∂–¥—ã–π –∫–ª–∞—Å—Å, –∫–∞–∫–∏–µ —Å—Å—ã–ª–∫–∏ —É–¥–µ—Ä–∂–∏–≤–∞—é—Ç —ç—Ç–∏ –æ–±—ä–µ–∫—Ç—ã. –£ MAT –µ—Å—Ç—å –∫–ª–∞—Å—Å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è Dominator Tree –∏ –æ—Ç—á—ë—Ç Leak Suspects (–ø–æ–¥–æ–∑—Ä–µ–≤–∞–µ–º—ã–µ —É—Ç–µ—á–∫–∏). –ù–∞–ø—Ä–∏–º–µ—Ä, –±—ã–ª —Å–ª—É—á–∞–π: –ø–∞–º—è—Ç—å —É—Ç–µ–∫–∞–ª–∞, MAT –ø–æ–¥—Å–∫–∞–∑–∞–ª, —á—Ç–æ –µ—Å—Ç—å –±–æ–ª—å—à–æ–π —Å–ø–∏—Å–æ–∫ ArrayList –∫–∞–∫–æ–≥–æ-—Ç–æ –∫–ª–∞—Å—Å–∞, –∫–æ—Ç–æ—Ä—ã–π –Ω–∏–∫—Ç–æ –Ω–µ —á–∏—Å—Ç–∏—Ç ‚Äì –ø–æ –¥–µ—Ä–µ–≤—É —Å—Å—ã–ª–æ–∫ –±—ã—Å—Ç—Ä–æ –Ω–∞—à–ª–∏, —á—Ç–æ –º—ã –∫—ç—à —Å–æ–±–∏—Ä–∞–ª–∏ –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ. VisualVM —Ç–æ–∂–µ —É–º–µ–µ—Ç –æ—Ç–∫—Ä—ã–≤–∞—Ç—å heap dump –∏ —Å—Ç—Ä–æ–∏—Ç—å –æ—Ç—á—ë—Ç—ã, —Ö–æ—Ç—è MAT, –Ω–∞ –º–æ–π –≤–∑–≥–ª—è–¥, –º–æ—â–Ω–µ–µ –≤ –ø–æ–∏—Å–∫–µ –∏–º–µ–Ω–Ω–æ —É—Ç–µ—á–µ–∫.

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å "–ø–æ–¥–≤–∏—Å–∞–Ω–∏–µ–º" –∏–ª–∏ –≤—ã—Å–æ–∫–∏–º CPU, —Ç–æ–≥–¥–∞ –±–µ—Ä—É—Ç thread dump ‚Äì —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—Å–µ—Ö –ø–æ—Ç–æ–∫–æ–≤. –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±: –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—É —Å–∏–≥–Ω–∞–ª SIGQUIT (–≤ Linux —ç—Ç–æ `kill -3 <pid>`), —Ç–æ–≥–¥–∞ JVM –≤—ã–≤–µ–¥–µ—Ç —Å—Ç–µ–∫—Ç—Ä–µ–π—Å—ã –≤—Å–µ—Ö –ø–æ—Ç–æ–∫–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª—å (–∏–ª–∏ –≤ —Ñ–∞–π–ª stdout). –õ–∏–±–æ –æ–ø—è—Ç—å –∂–µ —á–µ—Ä–µ–∑ `jstack` (`jstack <pid> > threaddump.txt`) –∏–ª–∏ –≤–Ω—É—Ç—Ä–∏ VisualVM –Ω–∞–∂–∞—Ç—å "Thread Dump". –ü–æ–ª—É—á–µ–Ω–Ω—ã–π –¥–∞–º–ø ‚Äì —ç—Ç–æ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ—Ç–æ–∫–æ–≤, –∏—Ö –∏–º–µ–Ω–∞, —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ —Å—Ç–µ–∫–∞. –ê–Ω–∞–ª–∏–∑–∏—Ä—É—è –µ–≥–æ, –º–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å, –≥–¥–µ –ø–æ—Ç–æ–∫ –∑–∞—Å—Ç—Ä—è–ª. –ù–∞–ø—Ä–∏–º–µ—Ä, —á–∞—Å—Ç–æ –≤–∏–¥–Ω–æ, —á—Ç–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤ –∂–¥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –Ω–∞ –æ–¥–Ω–æ–º –º–æ–Ω–∏—Ç–æ—Ä–µ (synchronized), –∞ –æ–¥–∏–Ω –ø–æ—Ç–æ–∫ –¥–µ—Ä–∂–∏—Ç —ç—Ç—É –±–ª–æ–∫–∏—Ä–æ–≤–∫—É ‚Äì –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –≤–∑–∞–∏–º–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è. Thread dump –ø–æ–∫–∞–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (—Ç–∞–º –ø–∏—à–µ—Ç—Å—è "waiting to lock <object> held by thread X"). –ü–æ —Ç–∞–∫–∏–º –¥–∞–Ω–Ω—ã–º –ª–µ–≥–∫–æ –Ω–∞–π—Ç–∏ deadlock: –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–∞–∂–µ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—é—Ç "Found one Java-level deadlock".

–¢–∞–∫–∂–µ thread dump –ø–æ–º–æ–≥–∞–µ—Ç –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–º CPU: –º–æ–∂–Ω–æ —Å–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–∞–º–ø–æ–≤ –ø–æ–¥—Ä—è–¥ (—Å–∫–∞–∂–µ–º, —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º –≤ —Å–µ–∫—É–Ω–¥—É) –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫–æ–π –ø–æ—Ç–æ–∫ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ RUNNABLE –Ω–∞ —Ç–µ—Ö –∂–µ —Å–∞–º—ã—Ö –º–µ—Ç–æ–¥–∞—Ö ‚Äì –∑–Ω–∞—á–∏—Ç, –æ–Ω –∏ –≥—Ä—É–∑–∏—Ç CPU. –ë—ã–ª–∏ —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ —Ç–∞–∫ –≤—ã—è–≤–ª—è–ª–∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª –≤ –∫–æ–¥–µ. –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã: –ø–æ–º–∏–º–æ jstack, –µ—Å—Ç—å –æ–Ω–ª–∞–π–Ω-—Å–µ—Ä–≤–∏—Å—ã —Ç–∏–ø–∞ FastThread.io (–≤–µ–±-—Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π thread dump –∏ —Ä–∞—Å–ø–∏—Å—ã–≤–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã). –ù–æ –∑–∞—á–∞—Å—Ç—É—é –ø—Ä–æ—Å—Ç–æ–≥–æ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –∏–ª–∏ IDE —Ö–≤–∞—Ç–∞–µ—Ç. –í –∏—Ç–æ–≥–µ heap dump –ø—Ä–∏–º–µ–Ω—è–µ–º, –∫–æ–≥–¥–∞ –∏—â–µ–º —É—Ç–µ—á–∫—É –∏–ª–∏ —Ä–∞–∑—Ä–∞—Å—Ç–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏, thread dump ‚Äì –∫–æ–≥–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–∏—Å–∏—Ç, –º–µ–¥–ª–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ —è–≤–Ω–æ–π –ø—Ä–∏—á–∏–Ω—ã –∏–ª–∏ CPU –∑–∞—à–∫–∞–ª–∏–≤–∞–µ—Ç, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –Ω–∞ —á—ë–º –ø–æ—Ç–æ–∫–∏ –∑–∞–Ω—è—Ç—ã.



---

## ‚ùì 77. –ö–∞–∫ —Ç—ã –æ–±—ã—á–Ω–æ —É–ø—Ä–∞–≤–ª—è–µ—à—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π (development, staging, production)? –ï—Å—Ç—å –ª–∏ —É —Ç–µ–±—è –ø–æ–¥—Ö–æ–¥, –∫–∞–∫ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –∫–æ–¥–µ –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥–∏ –º–µ–∂–¥—É –æ–∫—Ä—É–∂–µ–Ω–∏—è–º–∏?


–î–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π –æ–±—ã—á–Ω–æ –¥–µ–ª–∞—é—Ç—Å—è —Ä–∞–∑–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –Ω–æ –∫–ª—é—á–µ–≤–æ–µ ‚Äì –¥–µ—Ä–∂–∞—Ç—å –∏—Ö –≤–Ω–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–¥–∞. –û–¥–∏–Ω –∏–∑ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ (12-factor app) –≥–ª–∞—Å–∏—Ç: —Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥ –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –∫–æ–¥–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ –≤–Ω–µ—à–Ω–∏—Ö —Ñ–∞–π–ª–∞—Ö, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–∏—à–ª–æ—Å—å –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫. –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ —É Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–æ—Ñ–∏–ª–∏: –Ω–∞–ø—Ä–∏–º–µ—Ä, Spring Boot –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–º–µ—Ç—å `application-dev.properties`, `application-prod.properties` —Å —Ä–∞–∑–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏, –∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∑–∞–¥–∞—ë—Ç—Å—è –ø—Ä–æ—Ñ–∏–ª—å `-Dspring.profiles.active=prod` ‚Äì –ø–æ–¥—Ö–≤–∞—Ç—è—Ç—Å—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏. –≠—Ç–∏ —Ñ–∞–π–ª—ã –º–æ–≥—É—Ç –ª–µ–∂–∞—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, –Ω–æ –±–µ–∑ —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, —Ç–æ–ª—å–∫–æ –æ–±—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (URL —Å–µ—Ä–≤–∏—Å–æ–≤, –∏–º–µ–Ω–∞ –æ—á–µ—Ä–µ–¥–µ–π –∏ —Ç.–¥.), –∞ —Å–µ–∫—Ä–µ—Ç—ã –≤—Å—Ç–∞–≤–ª—è—é—Ç—Å—è —É–∂–µ —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã.

–í –±–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö –ø—Ä–∏–º–µ–Ω—è—é—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, Spring Cloud Config Server: —É —Ç–µ–±—è –µ—Å—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç –∫–æ–Ω—Ñ–∏–≥–∏ –¥–ª—è –≤—Å–µ—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π (–æ–±—ã—á–Ω–æ –≤ Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏), –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Ç—è–Ω–µ—Ç –æ—Ç—Ç—É–¥–∞ —Å–≤–æ–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ –ø—Ä–æ—Ñ–∏–ª—é/–æ–∫—Ä—É–∂–µ–Ω–∏—é. –≠—Ç–æ —É–¥–æ–±–Ω–æ: –≤—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ, –º–æ–∂–Ω–æ –∏—Ö –º–µ–Ω—è—Ç—å –±–µ–∑ –¥–µ–ø–ª–æ—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Config Server –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏, –∏ —Å–µ—Ä–≤–∏—Å –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞ –ª–µ—Ç—É). –î—Ä—É–≥–æ–π –≤–∞—Ä–∏–∞–Ω—Ç ‚Äì –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è + –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è: –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ Kubernetes –º—ã –≤—ã–Ω–æ—Å–∏–º –∫–æ–Ω—Ñ–∏–≥–∏ –≤ ConfigMap, –∞ —Å–µ–∫—Ä–µ—Ç—ã –≤ Secret (–∫–∞–∫ –æ–±—Å—É–∂–¥–∞–ª–∏). –¢–æ–≥–¥–∞ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ –≤ dev/staging/prod —Å—Ä–µ–¥—É –º—ã –ø—Ä–æ—Å—Ç–æ –ø–æ–¥–∫–ª–∞–¥—ã–≤–∞–µ–º –Ω—É–∂–Ω—ã–π ConfigMap —ç—Ç–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è. –ö–æ–¥ –ø—Ä–∏ —ç—Ç–æ–º –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ, –æ–Ω —á–∏—Ç–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–∏–±–æ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è, –ª–∏–±–æ –∏–∑ —Ñ–∞–π–ª–æ–≤ (–∫–æ—Ç–æ—Ä—ã–µ –º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –∏–∑ ConfigMap).

–í–∞–∂–Ω–æ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–ø–∞—Ä–æ–ª–∏, –∫–ª—é—á–∏) –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏. –î–µ–ª–∞–π —Ç–∞–∫: –ª–∏–±–æ –≤–æ–æ–±—â–µ –Ω–µ –∫–ª–∞–¥–∏ –∏—Ö –Ω–∏ –≤ –∫–∞–∫–∏–µ properties (–¥–∞–∂–µ –≤ –∑–∞–∫—Ä—ã—Ç–æ–º —Ä–µ–ø–æ ‚Äì –ª–∏—à–Ω–∏–π —Ä–∏—Å–∫), –ª–∏–±–æ –∫–ª–∞–¥–∏ —à–∞–±–ª–æ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏ –ø–æ–º–µ—á–∞–π, —á—Ç–æ —Ä–µ–∞–ª—å–Ω–æ–µ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—Å—è –ø—Ä–∏ –¥–µ–ø–ª–æ–µ. –ü—Ä–∏ –¥–µ–ø–ª–æ–µ –Ω–∞ dev –º–æ–∂–Ω–æ, –¥–æ–ø—É—Å—Ç–∏–º, —á–µ—Ä–µ–∑ Jenkins –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (Jenkins Credentials) –¥–ª—è –ø–∞—Ä–æ–ª–µ–π. –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ —Å–µ–∫—Ä–µ—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (—Ç–æ—Ç –∂–µ Vault –∏–ª–∏ K8s Secrets) –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Ö –ø–æ–ª—É—á–∞–µ—Ç –Ω–∞ —Å—Ç–∞—Ä—Ç–µ. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —Å–º–µ–Ω–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å–≤–æ–¥–∏—Ç—Å—è –∫ –ø–µ—Ä–µ–¥–∞—á–µ —Ä–∞–∑–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö/—Ñ–∞–π–ª–æ–≤, –∞ –±–∏–Ω–∞—Ä–Ω–∏–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ. –ò –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å, —á—Ç–æ –∫—Ç–æ-—Ç–æ —Å–ª—É—á–∞–π–Ω–æ –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç –ø–∞—Ä–æ–ª—å –≤ Git, —Å–∏–ª—å–Ω–æ —Å–Ω–∏–∂–∞–µ—Ç—Å—è.



---

## ‚ùì 78. –ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å —Å–µ–∫—Ä–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (–ø–∞—Ä–æ–ª–∏, –∫–ª—é—á–∏), –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é? –ö–∞–∫ –∏—Ö —Ö—Ä–∞–Ω–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ, —á—Ç–æ–±—ã –æ–Ω–∏ –Ω–µ —É—Ç–µ–∫–ª–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π? –ö–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏–ª–∏ –ø–æ–¥—Ö–æ–¥—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å?


–°–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∏ –≤ –∫–æ–µ–º —Å–ª—É—á–∞–µ –Ω–µ –¥–æ–ª–∂–Ω—ã —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ –≤ –∫–æ–¥–µ –∏–ª–∏ –≤ –ø—É–±–ª–∏—á–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö. –ï—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Ä–æ–≤–Ω–µ–π –∑–∞—â–∏—Ç—ã. –í–æ-–ø–µ—Ä–≤—ã—Ö, —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ –æ—Ç–¥–µ–ª—å–Ω–æ: –ª–∏–±–æ –≤ –∑–∞—â–∏—â—ë–Ω–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –ª–∏–±–æ —Ö–æ—Ç—è –±—ã –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ —Ç–µ—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö/–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö, –≥–¥–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –ø—Ä–æ–ø–∏—Å–∞—Ç—å –ø–∞—Ä–æ–ª—å –∫ –±–∞–∑–µ –≤ properties-—Ñ–∞–π–ª–µ, –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `DB_PASSWORD` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –µ—ë –ø—Ä–æ—á–∏—Ç–∞–µ—Ç –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ. –¢–∞–∫ –ø–∞—Ä–æ–ª—å –Ω–∏–≥–¥–µ –≤ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞—Ö –Ω–µ —Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç.

–í–æ-–≤—Ç–æ—Ä—ã—Ö, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ. –ï—Å–ª–∏ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è —Ö—Ä–∞–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç –≤ —Ñ–∞–π–ª–µ, –µ–≥–æ –ª—É—á—à–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–æ–≤: –Ω–∞–ø—Ä–∏–º–µ—Ä, —à–∏—Ñ—Ä—É—é—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –∏ —Ö—Ä–∞–Ω—è—Ç –∫–ª—é—á –æ—Ç–¥–µ–ª—å–Ω–æ (–Ω–æ —ç—Ç–æ —É—Å–ª–æ–∂–Ω—è–µ—Ç, —Ö–æ—Ç—è —Ä–∞–±–æ—Ç–∞–µ—Ç). –ì–æ—Ä–∞–∑–¥–æ –ø–æ–ø—É–ª—è—Ä–Ω–µ–µ –ø–æ–¥—Ö–æ–¥ ‚Äì –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Å–µ–∫—Ä–µ—Ç-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ. –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ç–∏–ø–∞ HashiCorp Vault –ø–æ–∑–≤–æ–ª—è—é—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–µ–∫—Ä–µ—Ç—ã (–ø–∞—Ä–æ–ª–∏, API-—Ç–æ–∫–µ–Ω—ã) –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ –∏ –≤—ã–¥–∞–≤–∞—Ç—å –∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º –ø–æ –∑–∞–ø—Ä–æ—Å—É. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –º–æ–∂–µ—Ç –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ Vault (–æ–±—ã—á–Ω–æ –∏–º–µ—è —Ç–æ–∫–µ–Ω –∏–ª–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –æ–±–ª–∞–∫–æ–º –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏) –∏ –≤—ã—Ç—è–Ω—É—Ç—å –Ω—É–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å. –ü–ª—é—Å Vault –º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–æ—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–µ–∫—Ä–µ—Ç—ã, –≤—ã–¥–∞–≤–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∫—Ä–µ–¥–µ–Ω—à–µ–ª—ã ‚Äì —ç—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ–≤—ã—à–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å. –û–±–ª–∞—á–Ω—ã–µ –∞–Ω–∞–ª–æ–≥–∏: AWS Secrets Manager, Azure Key Vault, GCP Secret Manager ‚Äì –¥–µ–ª–∞—é—Ç –ø–æ—Ö–æ–∂–µ–µ –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º.

–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–≤—è–∑–∫—É: CI/CD-—Å–∏—Å—Ç–µ–º–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Jenkins) —Ö—Ä–∞–Ω–∏—Ç —Å–µ–∫—Ä–µ—Ç—ã –≤ —Å–≤–æ–∏—Ö Credentials (—à–∏—Ñ—Ä—É–µ—Ç –∏—Ö –Ω–∞ —Å–≤–æ—ë–º —É—Ä–æ–≤–Ω–µ), –∏ –≤–æ –≤—Ä–µ–º—è –¥–µ–ø–ª–æ—è –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏—Ö –∫–∞–∫ env-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–ª–∏ –≤ Kubernetes Secret. –ê —É–∂–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–∏—Ç–∞–µ—Ç –ª–∏–±–æ –∏–∑ env, –ª–∏–±–æ –∏–∑ K8s Secret, –Ω–æ —Å–∞–º–æ –≤ –∫–æ–¥–µ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö —Å—Ç—Ä–æ–∫. –û—á–µ–Ω—å –≤–∞–∂–Ω–æ —Ç–∞–∫–∂–µ –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫—Ä—É–≥ –ª—é–¥–µ–π, –∫—Ç–æ –≤–∏–¥–∏—Ç —Å–µ–∫—Ä–µ—Ç—ã. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è RBAC —Ç–∞–∫, —á—Ç–æ–±—ã, —Å–∫–∞–∂–µ–º, —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–æ–≥–ª–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å pipeline, –Ω–æ –Ω–µ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–∫—à–µ–Ω-–ø–∞—Ä–æ–ª–µ–π. –¢–æ–ª—å–∫–æ DevOps/–∞–¥–º–∏–Ω—ã –∏–ª–∏ —Å–∏—Å—Ç–µ–º–∞ CI –∏–º–µ—é—Ç –¥–æ—Å—Ç—É–ø ‚Äì –∏ —Ç–æ –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ. –ò –Ω–µ –∑–∞–±—ã–≤–∞—Ç—å –ø—Ä–æ —Ä–æ—Ç–∞—Ü–∏—é: —Ö–æ—Ä–æ—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ ‚Äì –º–µ–Ω—è—Ç—å –ø–∞—Ä–æ–ª–∏/–∫–ª—é—á–∏ —Ä–∞–∑ –≤ N –º–µ—Å—è—Ü–µ–≤, –∏ –∏–º–µ—Ç—å –ø—Ä–æ—Ü–µ—Å—Å, –∫–æ—Ç–æ—Ä—ã–π —ç—Ç–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç (–≤ —Ç–µ—Ö –∂–µ Vault/Secrets Manager —Ä–æ—Ç–∞—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–∞).



---

## ‚ùì 79. –°–ª—ã—à–∞–ª –ª–∏ —Ç—ã –ø—Ä–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ç–∏–ø–∞ HashiCorp Vault –∏–ª–∏ AWS Secrets Manager? –ï—Å–ª–∏ –¥–∞, —Ç–æ —Ä–∞—Å—Å–∫–∞–∂–∏, –∫–∞–∫ –æ–Ω–∏ –ø–æ–º–æ–≥–∞—é—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–µ–∫—Ä–µ—Ç–∞–º–∏ –∏ –∫–∞–∫ –±—ã —Ç—ã –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–ª –∏—Ö –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.


–î–∞, HashiCorp Vault –∏ –æ–±–ª–∞—á–Ω—ã–µ Secrets Manager‚Äô—ã ‚Äì —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –≤—ã–¥–∞—á–∏ —Å–µ–∫—Ä–µ—Ç–æ–≤ –ø–æ –∑–∞–ø—Ä–æ—Å—É. –ò–¥–µ—è –≤ —Ç–æ–º, —á—Ç–æ –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Ä–∞–∑–¥–∞–≤–∞—Ç—å –≤—Å–µ–º –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Ñ–∞–π–ª —Å –ø–∞—Ä–æ–ª—è–º–∏, —É —Ç–µ–±—è –µ—Å—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –∫—É–¥–∞ –¥–æ—Å—Ç—É–ø –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è —Å—Ç—Ä–æ–≥–æ. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–∏–ª–∏ —á–µ–ª–æ–≤–µ–∫) –º–æ–∂–µ—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç—å —É Vault —Å–µ–∫—Ä–µ—Ç, –ø—Ä–µ–¥—ä—è–≤–∏–≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞/—Ç–æ–∫–µ–Ω, –∏ Vault –≤–µ—Ä–Ω—ë—Ç –∏–º–µ–Ω–Ω–æ —Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω—É–∂–Ω–æ, –ø—Ä–∏—á—ë–º –ø–æ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º—É –∫–∞–Ω–∞–ª—É.

–ß–µ–º —ç—Ç–æ –ª—É—á—à–µ –ø—Ä–æ—Å—Ç–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –∫–æ–Ω—Ñ–∏–≥–µ? –¢–µ–º, —á—Ç–æ —Å–µ–∫—Ä–µ—Ç—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ª–µ–∂–∞—Ç –æ—Ç–∫—Ä—ã—Ç–æ —Ç–∞–º, –≥–¥–µ –Ω–µ –Ω–∞–¥–æ. Vault —Ö—Ä–∞–Ω–∏—Ç –∏—Ö –æ–±—ã—á–Ω–æ –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏—Å–ø–æ–ª—å–∑—É—è HSM –∏–ª–∏ –º–∞—Å—Ç–µ—Ä-–∫–ª—é—á, –∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–æ–ª—å–∫–æ —Å–∞–º–æ–º—É Vault). –û–Ω –∂–µ –≤–µ–¥—ë—Ç –∞—É–¥–∏—Ç: –≤—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫—Ç–æ –∏ –∫–æ–≥–¥–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–ª —Å–µ–∫—Ä–µ—Ç. –ü–ª—é—Å Vault —É–º–µ–µ—Ç –≤—ã–¥–∞–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å–µ–∫—Ä–µ—Ç—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö: –≤–º–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ DB-–ø–∞—Ä–æ–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —É Vault –¥–æ—Å—Ç—É–ø, –∏ Vault —Å–∞–º —Å–æ–∑–¥–∞—ë—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –±–∞–∑–µ —Å –Ω—É–∂–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ –∏ –æ—Ç–¥–∞—ë—Ç –µ–≥–æ –∫—Ä–µ–¥–µ–Ω—à–µ–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ —á–µ—Ä–µ–∑ —á–∞—Å –ø—Ä–æ—Ç—É—Ö–Ω—É—Ç. –≠—Ç–æ —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –ø–æ–≤—ã—à–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –¥–∞–∂–µ –µ—Å–ª–∏ –∫—Ç–æ-—Ç–æ —É–∫—Ä–∞–¥—ë—Ç —Ç–∞–∫–∏–µ –∫—Ä–µ–¥–µ–Ω—à–µ–ª—ã, –æ–Ω–∏ —Å–∫–æ—Ä–æ —Å—Ç–∞–Ω—É—Ç –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏.

–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Vault –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–Ω–æ —Ä–∞–∑–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏. –û–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç: –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –¥–∞—Ç—å —Ç–æ–∫–µ–Ω (–∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ —Ä–æ–ª–∏ Kubernetes, –µ—Å–ª–∏ –º—ã –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ ‚Äì Vault —É–º–µ–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å ServiceAccount), –∏ –æ–Ω–æ —Å–∞–º–æ –ø–æ–π–¥—ë—Ç –≤ Vault (–µ—Å—Ç—å API –∏–ª–∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏) –∏ –≤—ã—Ç–∞—â–∏—Ç –Ω—É–∂–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã. –í—Ç–æ—Ä–æ–π –≤–∞—Ä–∏–∞–Ω—Ç: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –º–µ—Ö–∞–Ω–∏–∑–º, –Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–ø–µ—Ä–∞—Ç–æ—Ä –∏–ª–∏ sidecar. –í Kubernetes –µ—Å—Ç—å Vault Injector: –æ–Ω –º–æ–∂–µ—Ç –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–æ–¥—Ç—è–Ω—É—Ç—å —Å–µ–∫—Ä–µ—Ç –∏–∑ Vault –∏ –ø–æ–ª–æ–∂–∏—Ç—å –µ–≥–æ –≤ –≤–∏–¥–µ —Ñ–∞–π–ª–∞ –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –ø–æ–¥–∞, —Ç–∞–∫ —á—Ç–æ —Å–∞–º–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–∞–∂–µ –Ω–µ –∑–Ω–∞–µ—Ç, –æ—Ç–∫—É–¥–∞ —Å–µ–∫—Ä–µ—Ç ‚Äì –ø—Ä–æ—Å—Ç–æ —á–∏—Ç–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥, –∞ —Ç–∞–º —É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ. AWS Secrets Manager, GCP Secret Manager —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ö–æ–∂–∏–º –æ–±—Ä–∞–∑–æ–º: –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å–µ–∫—Ä–µ—Ç –ø–æ –∏–º–µ–Ω–∏ —á–µ—Ä–µ–∑ SDK –∏–ª–∏ API, –∏–º –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ (–≤ AWS —ç—Ç–æ –æ–±—ã—á–Ω–æ JSON –∏–ª–∏ —Å—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏). –£ AWS –µ—Å—Ç—å –µ—â—ë —Ñ–∏—à–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å IAM: –Ω–∞–ø—Ä–∏–º–µ—Ä, –ª—è–º–±–¥–∞ –∏–ª–∏ EC2 —Å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π —Ä–æ–ª—å—é –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã –±–µ–∑ —è–≤–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π.

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Vault –≤ –ø—Ä–æ–µ–∫—Ç–µ: –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–ª–∏—Ç–∏–∫–∏, —á—Ç–æ —Å–µ—Ä–≤–∏—Å A –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ —Å–µ–∫—Ä–µ—Ç—ã —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º A, —Å–µ—Ä–≤–∏—Å B ‚Äì —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º B. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Spring Boot) –ø–æ–¥–∫–ª—é—á–µ–Ω—ã —á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫—É Vault: –æ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ª–µ–∑—É—Ç –≤ Vault, –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è –∏ –∑–∞–ø–æ–ª–Ω—è—é—Ç –∏—Ö –≤ Configuration. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ —Ö—Ä–∞–Ω—è—Ç —Å–µ–∫—Ä–µ—Ç—ã –Ω–∏–≥–¥–µ ‚Äì –æ–Ω–∏ –∑–Ω–∞—é—Ç –ª–∏—à—å –∏–º–µ–Ω–∞. –ö–æ–Ω–µ—á–Ω–æ, –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ Vault ‚Äì —ç—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—å (–Ω—É–∂–Ω–æ –µ–≥–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å, –≤—ã—Å–æ–∫–æ–¥–æ—Å—Ç—É–ø–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å, —Å–ª–µ–¥–∏—Ç—å –∑–∞ —Ç–æ–∫–µ–Ω–∞–º–∏). –ù–æ –µ—Å–ª–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫—Ä–∏—Ç–∏—á–Ω–∞, –æ–Ω–æ —Ç–æ–≥–æ —Å—Ç–æ–∏—Ç: —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ –≤–∏–¥–∏—à—å –∏ —É–ø—Ä–∞–≤–ª—è–µ—à—å –≤—Å–µ–º–∏ –ø–∞—Ä–æ–ª—è–º–∏, –º–æ–∂–µ—à—å —Ä–æ—Ç–∞—Ü–∏—é –ø—Ä–æ–≤–æ–¥–∏—Ç—å –ø–æ –∫–Ω–æ–ø–∫–µ, –∏ —Ä–∏—Å–∫–∏ —É—Ç–µ—á–∫–∏ —Å–∏–ª—å–Ω–æ —Å–Ω–∏–∂–∞—é—Ç—Å—è.



---

## ‚ùì 80. –ï—Å–ª–∏ –≥–æ–≤–æ—Ä–∏—Ç—å –ø—Ä–æ Kubernetes, –≥–¥–µ –±—ã —Ç—ã —Ö—Ä–∞–Ω–∏–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏ —Å–µ–∫—Ä–µ—Ç—ã –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è? –ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω—ã ConfigMap –∏ Secret, –∏ —á—Ç–æ –ª—É—á—à–µ: –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥–∏ –≤ –≤–∏–¥–µ —Ñ–∞–π–ª–æ–≤?


–í Kubernetes –æ–±—ã—á–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—ã–Ω–æ—Å—è—Ç—Å—è –≤ ConfigMap, –∞ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ‚Äì –≤ Secret. –≠—Ç–∏ –æ–±—ä–µ–∫—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ etcd –∫–ª–∞—Å—Ç–µ—Ä–∞ (—É —Å–∞–º–æ–≥–æ Kubernetes) –∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞: —Ç–æ –µ—Å—Ç—å –æ–Ω–∏ –Ω–µ –≤ –æ–±—Ä–∞–∑–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∞ –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ –ø–æ–¥—ã –≤–æ –≤—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞. –ß—Ç–æ –≤—ã–±—Ä–∞—Ç—å ‚Äì –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ —Ñ–∞–π–ª—ã ‚Äì –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é —É–¥–æ–±–Ω–µ–µ.

–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (env) —Ö–æ—Ä–æ—à–∏ –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏ —Å–µ–∫—Ä–µ—Ç–æ–≤. –ù–∞–ø—Ä–∏–º–µ—Ä, URL —Å–µ—Ä–≤–∏—Å–æ–≤, —Ñ–ª–∞–≥–∏, –ø–∞—Ä–æ–ª–∏ ‚Äì –∏—Ö –ª–µ–≥–∫–æ –ø–µ—Ä–µ–¥–∞—Ç—å –∫–∞–∫ ENV_VAR, –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `System.getenv("ENV_VAR")` –∏—Ö –ø—Ä–æ—á–∏—Ç–∞–µ—Ç. –í Kubernetes —Ç—ã –≤ –º–∞–Ω–∏—Ñ–µ—Å—Ç–µ Deployment –º–æ–∂–µ—à—å —É–∫–∞–∑–∞—Ç—å env-—Å–µ–∫—Ü–∏—é, –≥–¥–µ valueFrom: configMapKeyRef –∏–ª–∏ secretKeyRef ‚Äì —Ç–æ –µ—Å—Ç—å –ø–æ–¥—Ç—è–Ω—É—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ ConfigMap/Secret. –ü–ª—é—Å ‚Äì –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ –∏ —è–≤–Ω–æ –≤–∏–¥–Ω–æ, –∫–∞–∫–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —á–µ–º—É —Ä–∞–≤–Ω–∞. –ú–∏–Ω—É—Å ‚Äì –∏–∑–º–µ–Ω–∏—Ç—å —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ "–Ω–∞ –ª–µ—Ç—É" —Å–ª–æ–∂–Ω–æ: –µ—Å–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å ConfigMap/Secret, —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–¥—ã –Ω–µ —É–∑–Ω–∞—é—Ç –æ–± —ç—Ç–æ–º, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –ü—Ä–∏–¥—ë—Ç—Å—è –ø–µ—Ä–µ—Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ–¥—ã, —á—Ç–æ–±—ã –æ–Ω–∏ –ø—Ä–∏–Ω—è–ª–∏ –Ω–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–æ–±—ã—á–Ω–æ –¥–µ–ª–∞—é—Ç rolling update Deployment-–∞).

–ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –≤–∏–¥–µ —Ñ–∞–π–ª–æ–≤ –ø–æ–¥—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –æ–±—à–∏—Ä–Ω—ã–µ –∏–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–∂–∏–¥–∞–µ—Ç —Ñ–∞–π–ª—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, —É –Ω–∞—Å –µ—Å—Ç—å —Ü–µ–ª—ã–π config.yaml ‚Äì —É–¥–æ–±–Ω–µ–µ –∑–∞—Å—É–Ω—É—Ç—å –µ–≥–æ –≤ ConfigMap –∫–∞–∫ –µ–¥–∏–Ω—ã–π blob –∏ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ –Ω—É–∂–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é. –ò–ª–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã/–∫–ª—é—á–∏: –∏—Ö –ª–æ–≥–∏—á–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –≤ Secret –∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ —Ñ–∞–π–ª—ã (Kubernetes –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ Secret –¥–µ–ª–∞–µ—Ç —Ç–æ–º –≤ –ø–∞–º—è—Ç–∏ (tmpfs) —Å –ø—Ä–∞–≤–∞–º–∏ 0400 –Ω–∞ —Ñ–∞–π–ª—ã, —á—Ç–æ –¥–æ–≤–æ–ª—å–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ). –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ file-–ø–æ–¥—Ö–æ–¥–∞ –≤ —Ç–æ–º, —á—Ç–æ Kubernetes –º–æ–∂–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª –≤ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Ç–æ–º–µ, –µ—Å–ª–∏ ConfigMap/Secret –∏–∑–º–µ–Ω–∏–ª–∏—Å—å (–¥–ª—è ConfigMap —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç: —á–µ—Ä–µ–∑ –Ω–µ–±–æ–ª—å—à–æ–µ –≤—Ä–µ–º—è —Ñ–∞–π–ª –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–æ–º–µ–Ω—è–µ—Ç—Å—è). –ù–æ –æ–ø—è—Ç—å –∂–µ, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —É–º–µ—Ç—å –æ—Ç—Å–ª–µ–¥–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥ ‚Äì –Ω–µ –∫–∞–∂–¥–æ–µ –∫ —ç—Ç–æ–º—É –≥–æ—Ç–æ–≤–æ. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∂–µ –Ω–µ–ª—å–∑—è –º–µ–Ω—è—Ç—å –Ω–∞ –ª–µ—Ç—É –≤–æ–≤—Å–µ.

–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –æ–±—ã—á–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä—É—é—Ç: –º–µ–ª–∫–∏–µ –∫–æ–Ω—Ñ–∏–≥–∏ (—Ç–∏–ø–∞ "—Ä–µ–∂–∏–º DEBUG=true" –∏–ª–∏ "FEATURE_X_ENABLED=false") –∏ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ —à—Ç—É–∫–∏ (–ø–∞—Ä—ã –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å) ‚Äì —á–µ—Ä–µ–∑ env. –ê –±–æ–ª—å—à–∏–µ –∫–æ–Ω—Ñ–∏–≥–∏ ‚Äì —á–µ—Ä–µ–∑ —Ñ–∞–π–ª. –ù–∞–ø—Ä–∏–º–µ—Ä, Spring Boot –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: —Å–µ–∫—Ä–µ—Ç—ã (–ø–∞—Ä–æ–ª–∏) –ø–µ—Ä–µ–¥–∞–≤–∞–π –∫–∞–∫ env vars, —ç—Ç–æ –ª–µ–≥–∫–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å–æ Spring (–æ–Ω –º–æ–∂–µ—Ç –∏—Ö –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ `${ENV_VAR}`). –ê –≤–æ—Ç, —Å–∫–∞–∂–µ–º, —Ñ–∞–π–ª —Å –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–º–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏ –∏–ª–∏ –±–æ–ª—å—à–æ–π YAML —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ ‚Äî –∫–ª–∞–¥–∏ –≤ ConfigMap –∏ –º–æ–Ω—Ç–∏—Ä—É–π. –ß—Ç–æ –ª—É—á—à–µ ‚Äì –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–∏—Ç—É–∞—Ü–∏–∏, –≥–ª–∞–≤–Ω–æ–µ, —á—Ç–æ Kubernetes –¥–∞—ë—Ç –æ–±–∞ —Å–ø–æ—Å–æ–±–∞. –ò –∫–æ–Ω–µ—á–Ω–æ, –∏ ConfigMap, –∏ Secret —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ: –∏—Ö –º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–∞, –∏ —Ä–∞–∑–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (dev, prod) –ø—Ä–æ—Å—Ç–æ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –Ω–∞–±–æ—Ä—ã ConfigMap/Secret.



---

## ‚ùì 81. –ß—Ç–æ —Ç–∞–∫–æ–µ Blue-Green –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç –∏ –∫–∞–∫ —Ç—ã –µ–≥–æ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞–ª? –í —á—ë–º –ø–ª—é—Å—ã –∏ –º–∏–Ω—É—Å—ã —Ç–∞–∫–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞?


Blue-Green –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç ‚Äì —ç—Ç–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–π –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –¥–≤–µ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–µ –∫–æ–ø–∏–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–¥–≤–µ –≤–µ—Ä—Å–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è) ‚Äì "—Å–∏–Ω—è—è" –∏ "–∑–µ–ª—ë–Ω–∞—è". –ù–∞–ø—Ä–∏–º–µ—Ä, "Blue" ‚Äì —ç—Ç–æ —Ç–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ, "Green" ‚Äì –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è, –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω–∞—è –∫ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—é. –°—É—Ç—å –≤ —Ç–æ–º, —á—Ç–æ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—é—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å—Ç–∞—Ä–æ–π, –Ω–æ —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ –Ω–µ—ë –Ω–µ –Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç, –ø–æ–∫–∞ –Ω–µ –±—É–¥—É—Ç –≥–æ—Ç–æ–≤—ã –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è.

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —ç—Ç–æ –º–æ–∂–Ω–æ –ø–æ-—Ä–∞–∑–Ω–æ–º—É. –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –≤–∞—Ä–∏–∞–Ω—Ç: –µ—Å—Ç—å –¥–≤–µ –≥—Ä—É–ø–ø—ã —Å–µ—Ä–≤–µ—Ä–æ–≤ –∏–ª–∏ –ø–æ–¥–æ–≤. –í—ã –¥–µ–ø–ª–æ–π—Ç–µ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é –Ω–∞ Green-—Å–µ—Ä–≤–µ—Ä–∞, —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç–µ –µ—ë —Ç–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—ã–π –≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–æ–º–µ–Ω –∏–ª–∏ IP, –ª–∏–±–æ –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ, —á—Ç–æ –æ–Ω–∞ –ø–æ–¥–Ω—è–ª–∞—Å—å –Ω–æ—Ä–º–∞–ª—å–Ω–æ). –ó–∞—Ç–µ–º –≤ –º–æ–º–µ–Ω—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∏–∑–º–µ–Ω—è–µ—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏: –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç–µ load balancer, —á—Ç–æ–±—ã –æ–Ω –≤–º–µ—Å—Ç–æ Blue –Ω–∞—á–∞–ª —Å–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ Green. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ –∑–∞–º–µ—á–∞—é—Ç –Ω–∏—á–µ–≥–æ, —Ä–∞–∑–≤–µ —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—á–µ–Ω—å –∫—Ä–∞—Ç–∫–∏–π —Ä–∞–∑—Ä—ã–≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π. –°—Ç–∞—Ä—É—é Blue-–≤–µ—Ä—Å–∏—é –ø–æ–∫–∞ –Ω–µ —É–¥–∞–ª—è–µ–º ‚Äì –æ–Ω–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –≤ —Ä–µ–∑–µ—Ä–≤–µ. –ï—Å–ª–∏ –≤–¥—Ä—É–≥ —Å Green —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫, –º–æ–∂–Ω–æ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –±—ã—Å—Ç—Ä–æ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è, –ø–µ—Ä–µ–∫–ª—é—á–∏–≤ —Ç—Ä–∞—Ñ–∏–∫ –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ Blue.

–ü–ª—é—Å—ã Blue-Green: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π downtime (–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –±—ã—Å—Ç—Ä–æ, —á–∞—Å—Ç–æ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ–∫—É–Ω–¥—ã –∏–ª–∏ –º–µ–Ω—å—à–µ), –∏ –±—ã—Å—Ç—Ä–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ ‚Äì rollback —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –≤–µ—Ä–Ω—É—Ç—å —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é, –∫–æ—Ç–æ—Ä–∞—è –Ω–∏–∫—É–¥–∞ –Ω–µ –¥–µ–ª–∞—Å—å. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –º–æ–∂–Ω–æ –ø—Ä–æ–≤–æ–¥–∏—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ —É–∂–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–Ω–∞ Green –æ–∫—Ä—É–∂–µ–Ω–∏–∏) –ø–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å. –ù–æ –µ—Å—Ç—å –∏ –º–∏–Ω—É—Å—ã: —Ç—Ä–µ–±—É—é—Ç—Å—è —Ä–µ—Å—É—Ä—Å—ã –ø–æ–¥ –¥–≤–µ –∫–æ–ø–∏–∏ —Å–∏—Å—Ç–µ–º—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ (–≤–¥–≤–æ–µ –±–æ–ª—å—à–µ —Å–µ—Ä–≤–µ—Ä–æ–≤/–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –Ω–∞ –≤—Ä–µ–º—è –¥–µ–ø–ª–æ—è). –¢–∞–∫–∂–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Å–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º: –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —à—Ç–∞—Ç–Ω–æ –Ω–µ —Ä–∞–∑–¥–µ–ª—è–µ—Ç —Å–µ—Å—Å–∏–∏ –∏–ª–∏ –±–∞–∑—É, –Ω—É–∂–Ω–æ –ø–æ–∑–∞–±–æ—Ç–∏—Ç—å—Å—è, —á—Ç–æ–±—ã Blue –∏ Green —Ä–∞–±–æ—Ç–∞–ª–∏ —Å –æ–¥–Ω–æ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö (–∞ –ª—É—á—à–µ, —á—Ç–æ–±—ã –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î –±—ã–ª–∏ backward-compatible, —á—Ç–æ–±—ã —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è —Ç–æ–∂–µ –º–æ–≥–ª–∞ —Ä–∞–±–æ—Ç–∞—Ç—å). –ò –µ—â—ë –º–æ–º–µ–Ω—Ç ‚Äì –≤ –º–æ–º–µ–Ω—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏ –Ω–∞ Blue –º–æ–≥—É—Ç –æ–±–æ—Ä–≤–∞—Ç—å—Å—è, –µ—Å–ª–∏ –Ω–µ —Å–¥–µ–ª–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º "–¥–æ—Ç–µ–∫–∞–Ω–∏—è" (drain): —á–∞—Å—Ç–æ LB —Å–Ω–∞—á–∞–ª–∞ –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç –ø—É—Å–∫–∞—Ç—å –Ω–æ–≤—ã–π —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ Blue, –∂–¥—ë—Ç, –ø–æ–∫–∞ —Ç–µ–∫—É—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –∑–∞–≤–µ—Ä—à–∞—Ç—Å—è, –∏ –ø–æ—Ç–æ–º —É–∂–µ –æ—Ç–∫–ª—é—á–∞–µ—Ç –µ–≥–æ.

–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ Blue-Green –ø—Ä–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏ –≤ Kubernetes: –¥–≤–∞ –Ω–∞–±–æ—Ä–∞ Deployment+Service ‚Äì –æ–¥–∏–Ω –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ blue, –¥—Ä—É–≥–æ–π –∫–∞–∫ green. –í–Ω–µ—à–Ω–∏–π —Ç—Ä–∞—Ñ–∏–∫ –ø—Ä–∏—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ ingress –Ω–∞ —Å–µ—Ä–≤–∏—Å —Å —Ç–µ–≥–æ–º "current". –ö–æ–≥–¥–∞ –≤—ã—Ö–æ–¥–∏—Ç –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è, —Ä–∞—Å–∫–∞—Ç—ã–≤–∞–π –µ—ë –≤ "idle" –Ω–∞–±–æ—Ä (—Ç–æ—Ç, —á—Ç–æ –Ω–µ current), –ø—Ä–æ–≤–µ—Ä—è–π, –ø–æ—Ç–æ–º –ø–µ—Ä–µ–∫–ª—é—á–∞–π –º–µ—Ç–∫—É current –Ω–∞ –Ω–µ–≥–æ (–∏–ª–∏ –æ–±–Ω–æ–≤–∏ ingress). –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –ø—Ä–æ—Å—Ç–æ —Å–º–µ–Ω–æ–π –º–µ—Ç–∫–∏ –æ–±—Ä–∞—Ç–Ω–æ. –í —Ü–µ–ª–æ–º Blue-Green —Ö–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å—Å—è, –Ω–æ –∑–∞ —Ü–µ–Ω—É —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –Ω–µ–∫–æ—Ç–æ—Ä–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–≤—É–º—è —Å—Ä–µ–¥–∞–º–∏.



---

## ‚ùì 82. –ß—Ç–æ —Ç–∞–∫–æ–µ Canary-—Ä–µ–ª–∏–∑? –ö–∞–∫ –µ–≥–æ –ø—Ä–æ–≤–æ–¥—è—Ç –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è? –ó–∞—á–µ–º –Ω—É–∂–µ–Ω Canary –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç, –∏ –∫–∞–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –≤–∞–∂–Ω—ã –≤–æ –≤—Ä–µ–º—è –µ–≥–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è?


Canary deployment (–∫–∞–Ω–∞—Ä–µ–µ—á–Ω—ã–π —Ä–µ–ª–∏–∑) ‚Äì —ç—Ç–æ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –Ω–µ–±–æ–ª—å—à—É—é –¥–æ–ª—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π/—Ç—Ä–∞—Ñ–∏–∫–∞ —Å –ø–æ—Å–ª–µ–¥—É—é—â–∏–º —É–≤–µ–ª–∏—á–µ–Ω–∏–µ–º —ç—Ç–æ–π –¥–æ–ª–∏, –µ—Å–ª–∏ –≤—Å—ë —Ö–æ—Ä–æ—à–æ. –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏—à–ª–æ –æ—Ç –∫–∞–Ω–∞—Ä–µ–µ–∫ –≤ —à–∞—Ö—Ç–∞—Ö: –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –∫–∞–∫ "–∫–∞–Ω–∞—Ä–µ–π–∫–∞" ‚Äì –µ—ë –∑–∞–ø—É—Å–∫–∞—é—Ç –ø–µ—Ä–≤–æ–π, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ–Ω–∞ –Ω–µ "—É–º–∏—Ä–∞–µ—Ç" –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö, –ø—Ä–µ–∂–¥–µ —á–µ–º –≤—ã–∫–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ –≤—Å–µ—Ö.

–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫: –¥–æ–ø—É—Å—Ç–∏–º, —É –Ω–∞—Å 100 –ø–æ–¥–æ–≤ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏. –ú—ã –¥–µ–ø–ª–æ–∏–º –ø–∞—Ä—É –ø–æ–¥–æ–≤ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é —Ç–∞–∫, —á—Ç–æ, —Å–∫–∞–∂–µ–º, 5% —Ç—Ä–∞—Ñ–∏–∫–∞ –∏–¥—ë—Ç –Ω–∞ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é, 95% ‚Äì –Ω–∞ —Å—Ç–∞—Ä—É—é. –≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Ä–∞–∑–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏. –í Kubernetes –±–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–π ‚Äì —á–µ—Ä–µ–∑ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ Deployment (–Ω–æ —Ç–∞–º –Ω–µ—Ç —è–≤–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ–Ω—Ç–∞, —Ä–∞–∑–≤–µ —á—Ç–æ –≤—Ä—É—á–Ω—É—é —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å replicas). –ë–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –≤–∞—Ä–∏–∞–Ω—Ç ‚Äì –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ingress-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∏–ª–∏ —Å–µ—Ä–≤–∏—Å-–º–µ—à (Istio, Linkerd) —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤–∑–≤–µ—à–µ–Ω–Ω–æ–≥–æ —Ä–æ—É—Ç–∏–Ω–≥–∞: –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å, —á—Ç–æ –Ω–∞ —Å–µ—Ä–≤–∏—Å v2 –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å X% –∑–∞–ø—Ä–æ—Å–æ–≤. –¢–æ–≥–¥–∞ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ —Å–ª—É—á–∞–π–Ω–æ–µ –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞—á–Ω—ë—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π.

–ó–∞—á–µ–º —Ç–∞–∫ –¥–µ–ª–∞—Ç—å? –ß—Ç–æ–±—ã –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∏—Å–∫. –ï—Å–ª–∏ –≤ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ –µ—Å—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞, –æ–Ω–∞ –∑–∞—Ç—Ä–æ–Ω–µ—Ç —Ç–æ–ª—å–∫–æ –º–∞–ª—É—é —á–∞—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∏ –º—ã —Å–º–æ–∂–µ–º –±—ã—Å—Ç—Ä–æ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è. –í–æ –≤—Ä–µ–º—è –∫–∞–Ω–∞—Ä–µ–µ—á–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∫—Ä–∞–π–Ω–µ –≤–∞–∂–Ω–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã. –û–±—ã—á–Ω–æ —Å–º–æ—Ç—Ä—è—Ç –Ω–∞ —Ç–µ –∂–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∑–¥–æ—Ä–æ–≤—å—è: –ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫ (–Ω–µ –≤—ã—Ä–æ—Å –ª–∏), –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ (–Ω–µ —É–≤–µ–ª–∏—á–∏–ª–æ—Å—å –ª–∏), –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ CPU/–ø–∞–º—è—Ç—å (–≤–¥—Ä—É–≥ —É—Ç–µ—á–∫–∞ –∏–ª–∏ –≤—ã—Ä–æ—Å —Ä–∞—Å—Ö–æ–¥). –¢–∞–∫–∂–µ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏: –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–Ω–≤–µ—Ä—Å–∏—è, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π ‚Äì –Ω–µ—Ç –ª–∏ –ø–∞–¥–µ–Ω–∏—è –∏–∑-–∑–∞ –±–∞–≥–∞. –í –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —á–∞—Å—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∞–ª–µ—Ä—Ç—ã: –µ—Å–ª–∏ –ø—Ä–∏ –∫–∞–Ω–∞—Ä–µ–µ—á–Ω–æ–º —Ä–µ–ª–∏–∑–µ error rate –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –ø–æ—Ä–æ–≥ –∏–ª–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –Ω–æ–≤—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –≤ –ª–æ–≥–∞—Ö ‚Äì –ø—Ä–æ—Ü–µ—Å—Å –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç –∏ –æ—Ç–∫–∞—Ç—ã–≤–∞—é—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è.

–ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –∫–∞–Ω–∞—Ä–µ–µ—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –º–æ–∂–µ—Ç –±—ã—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–æ. –ï—Å—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ç–∏–ø–∞ Argo Rollouts –∏–ª–∏ Flagger (–¥–ª—è Kubernetes), –∫–æ—Ç–æ—Ä—ã–µ —É–º–µ—é—Ç –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é –∏ —Å–∞–º–∏ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ (—Å–∫–∞–∂–µ–º, –∏–∑ Prometheus) —Å—Ç–∞—Ä–æ–π –∏ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–π. –ï—Å–ª–∏ –≤—Å–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–æ—Ä–º—ã, –æ–Ω–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç rollout (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å 5% –¥–æ 20%, –ø–æ—Ç–æ–º –¥–æ 50% –∏ –¥–æ 100%). –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –∏–¥—ë—Ç –Ω–µ —Ç–∞–∫ ‚Äì –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Ç—Ä–∞—Ñ–∏–∫ –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è –æ—á–µ–Ω—å –ø–ª–∞–≤–Ω–æ–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ. –ü–æ —Å—É—Ç–∏, Canary ‚Äì —ç—Ç–æ –∫–∞–∫ A/B-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –Ω–æ —Ü–µ–ª—å –Ω–µ —Ñ–∏—á–∞-—Ç–µ—Å—Ç, –∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º —Ä–∏—Å–∫–æ–º.



---

## ‚ùì 83. –ö–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –∫ –¥–µ–ø–ª–æ—é –≤—ã–±–µ—Ä–µ—à—å, —á—Ç–æ–±—ã –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Ä–µ–º—è –ø—Ä–æ—Å—Ç–æ—è: Rolling Update (–ø–æ –æ—á–µ—Ä–µ–¥–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –∏–Ω—Å—Ç–∞–Ω—Å—ã) –∏–ª–∏ Blue-Green? –ü–æ—á–µ–º—É, –∏ –≤ –∫–∞–∫–∏—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö –æ–¥–∏–Ω –ª—É—á—à–µ –¥—Ä—É–≥–æ–≥–æ?


–ò Rolling Update, –∏ Blue-Green –Ω–∞—Ü–µ–ª–µ–Ω—ã –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–∑ –ø—Ä–æ—Å—Ç–æ—è, –Ω–æ —Ä–µ–∞–ª–∏–∑—É—é—Ç —ç—Ç–æ –ø–æ-—Ä–∞–∑–Ω–æ–º—É –∏ –∏–º–µ—é—Ç —Å–≤–æ–∏ –ø–ª—é—Å—ã/–º–∏–Ω—É—Å—ã.

**Rolling Update** ‚Äì —ç—Ç–æ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä—è–º–æ –Ω–∞ —Ç–µ—Ö –∂–µ —Ä–µ—Å—É—Ä—Å–∞—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ Kubernetes Deployment –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–µ–ª–∞–µ—Ç rolling: –æ–Ω –ø–æ –æ–¥–Ω–æ–º—É (–∏–ª–∏ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ) –ø–æ–¥—ã –∑–∞–º–µ–Ω—è–µ—Ç –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π, –ø–æ–∫–∞ –≤—Å–µ –Ω–µ –æ–±–Ω–æ–≤—è—Ç—Å—è. –ü—Ä–∏ —ç—Ç–æ–º –≤ –∫–∞–∂–¥—ã–π –º–æ–º–µ–Ω—Ç —á–∞—Å—Ç—å —Å—Ç–∞—Ä—ã—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –µ—â—ë —Ä–∞–±–æ—Ç–∞–µ—Ç, —á–∞—Å—Ç—å —É–∂–µ –Ω–æ–≤—ã—Ö ‚Äì —Å–µ—Ä–≤–∏—Å –≤—Å—ë –≤—Ä–µ–º—è –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å, –ø–æ–ª–Ω–æ–≥–æ –¥–∞—É–Ω—Ç–∞–π–º–∞ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç. Rolling —Ö–æ—Ä–æ—à —Ç–µ–º, —á—Ç–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –≤–¥–≤–æ–µ –±–æ–ª—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤: —Ç—ã –æ–±—ã—á–Ω–æ –¥–µ—Ä–∂–∏—à—å —á—É—Ç—å "—Å–≤–µ—Ä—Ö" (maxSurge 1-2 –ø–æ–¥–∞), –Ω–æ –Ω–µ –¥–≤–µ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ –∫–æ–ø–∏–∏ –≤—Å–µ–≥–æ. –¢–∞–∫–∂–µ –æ–Ω –≤—Å—Ç—Ä–æ–µ–Ω –≤–æ –º–Ω–æ–≥–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (–≤ —Ç–æ–º –∂–µ Kubernetes —ç—Ç–æ "–∏–∑ –∫–æ—Ä–æ–±–∫–∏"). –û–¥–Ω–∞–∫–æ –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Ç—Ä–∞—Ñ–∏–∫–æ–º –º–µ–Ω–µ–µ —Ç–æ—á–Ω—ã–π: –ø–æ–∫–∞ –∏–¥—ë—Ç rolling, —á–∞—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –º–æ–∂–µ—Ç –ø–æ–ø–∞—Å—Ç—å –Ω–∞ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é, —á–∞—Å—Ç—å –Ω–∞ —Å—Ç–∞—Ä—É—é. –ï—Å–ª–∏ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –æ–∫–∞–∂–µ—Ç—Å—è —Å –±–∞–≥–æ–º, —Ç–æ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è —ç—Ç–æ—Ç –±–∞–≥ –≤–∏–¥—è—Ç, –ø–æ–∫–∞ –º—ã –Ω–µ –æ—Å—Ç–∞–Ω–æ–≤–∏–º rollout. –û—Ç–∫–∞—Ç –ø—Ä–∏ rolling ‚Äì —ç—Ç–æ —Ç–æ–∂–µ rollout –Ω–∞–∑–∞–¥, —á—Ç–æ —á—É—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ, —á–µ–º –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å.

**Blue-Green** ‚Äì –∫–∞–∫ –º—ã –æ–±—Å—É–∂–¥–∞–ª–∏, –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç –Ω–∞–ª–∏—á–∏–µ –ø–æ–ª–Ω–æ–π –∫–æ–ø–∏–∏ —Å—Ä–µ–¥—ã. –¢—ã –∑–∞—Ä–∞–Ω–µ–µ –ø–æ–¥–Ω–∏–º–∞–µ—à—å "Green" —Å –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π, —É–±–µ–∂–¥–∞–µ—à—å—Å—è, —á—Ç–æ –≤—Å—ë –æ–∫, –∏ –ø–æ—Ç–æ–º –æ–¥–Ω–∏–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º (LB, DNS –∏–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤) –ø–µ—Ä–µ–≤–æ–¥–∏—à—å –≤–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫ —Å "Blue" –Ω–∞ "Green". –° —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ—á—Ç–∏ –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–º, –µ—Å–ª–∏ –≤—Å—ë –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ. –ò –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫ ‚Äì —Ç–∞–∫ –∂–µ –±—ã—Å—Ç—Ä–æ –º–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –Ω–∞ Blue. –≠—Ç–æ –¥–∞—ë—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –≤ –ø–ª–∞–Ω–µ –æ—Ç–∫–∞—Ç–∞ –∏ –¥–æ–≤–æ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ–π –º–µ–Ω—Ç–∞–ª—å–Ω–æ –ø—Ä–æ—Ü–µ—Å—Å: —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–¥–µ–ª–µ–Ω–∞ –æ—Ç –Ω–æ–≤–æ–π, –æ–Ω–∏ –Ω–µ –º–µ—à–∞—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥—É. –ú–∏–Ω—É—Å ‚Äì –Ω—É–∂–Ω—ã —Ä–µ—Å—É—Ä—Å—ã –Ω–∞ –¥–≤–µ –∫–æ–ø–∏–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ (—Ö–æ—Ç—è –±—ã –≤—Ä–µ–º–µ–Ω–Ω–æ). –í –æ–±–ª–∞–∫–µ –∏–ª–∏ Kubernetes —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ—Ä–æ–≥–æ–≤–∞—Ç–æ, –∏ –Ω–µ –≤—Å–µ–≥–¥–∞ —É–¥–æ–±–Ω–æ, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ —É —Ç–µ–±—è –¥–µ—Å—è—Ç–∫–∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ ‚Äì —É–¥–≤–æ–µ–Ω–∏–µ –≤—Å–µ–≥–æ –Ω–µ –≤—Å–µ–≥–¥–∞ —Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ.

–î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞—Ö —Ö–≤–∞—Ç–∞–µ—Ç Rolling Update ‚Äì –æ–Ω –ø—Ä–æ—â–µ –≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏ —Ä–µ—Å—É—Ä—Å—ã —ç–∫–æ–Ω–æ–º–∏—Ç. Kubernetes, –Ω–∞–ø—Ä–∏–º–µ—Ä, —à–∏–∫–∞—Ä–Ω–æ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å rolling-out –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π, –∏ –µ—Å–ª–∏ —É —Ç–µ–±—è —Ö–æ—Ä–æ—à–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥/–∞–ª–µ—Ä—Ç–∏–Ω–≥, —Ç—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—à—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö. Blue-Green –∏–º–µ–µ—Ç —Å–º—ã—Å–ª, –∫–æ–≥–¥–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –∫ –±–µ–∑–æ—Ç–∫–∞–∑–Ω–æ—Å—Ç–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—á–µ–Ω—å —Å–ª–æ–∂–Ω–æ–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —Ç—Ä–µ–±—É—é—â–µ–µ –¥–æ–ª–≥–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö: –º–æ–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å Green, –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ–Ω–µ, –ø–æ—Ç–æ–º –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å. –õ–∏–±–æ –≤ —Ç–µ—Ö —Å–ª—É—á–∞—è—Ö, –∫–æ–≥–¥–∞ –æ—á–µ–Ω—å –∫—Ä–∏—Ç–∏—á–Ω–æ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è (—Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã, –≥–¥–µ –∫–∞–∂–¥–∞—è —Å–µ–∫—É–Ω–¥–∞ –ø—Ä–æ—Å—Ç–æ—è ‚Äì –±–æ–ª—å—à–∏–µ –¥–µ–Ω—å–≥–∏) ‚Äì –¥–µ—Ä–∂–∞—Ç Blue-–≤–µ—Ä—Å–∏—é –∫–∞–∫ –∑–∞–ø–∞—Å–Ω–æ–π –∞—ç—Ä–æ–¥—Ä–æ–º. –í –æ–±—â–µ–º, –æ–±–∞ –ø–æ–¥—Ö–æ–¥–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç zero-downtime, –ø—Ä–æ—Å—Ç–æ –æ–¥–∏–Ω –±–æ–ª–µ–µ "step-by-step" (rolling), –¥—Ä—É–≥–æ–π ‚Äì "–¥–≤–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –≤—Å–µ–ª–µ–Ω–Ω—ã–µ" (blue-green). –í—ã–±–æ—Ä –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ —É—Ä–æ–≤–Ω—è —Ä–∏—Å–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –≥–æ—Ç–æ–≤—ã –ø—Ä–∏–Ω—è—Ç—å –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏.



---

## ‚ùì 84. –í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–º, —á–µ–º –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –ª–æ–≥–∏, –º–µ—Ç—Ä–∏–∫–∏ –∏ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ (tracing)? –ü–æ—á–µ–º—É –≤—Å–µ —Ç—Ä–∏ –≤–∞–∂–Ω—ã –¥–ª—è –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç–∏ (observability)?


–õ–æ–≥–∏, –º–µ—Ç—Ä–∏–∫–∏ –∏ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ ‚Äì —Ç—Ä–∏ —Å—Ç–æ–ª–ø–∞ –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç–∏, –∏ –∫–∞–∂–¥—ã–π –¥–∞—ë—Ç —Å–≤–æ–π –≤–∏–¥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

**–õ–æ–≥–∏** ‚Äî —ç—Ç–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ –æ —Å–æ–±—ã—Ç–∏—è—Ö –≤ —Ä–∞–±–æ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä, –ª–æ–≥ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—à–∏–±–∫—É —Å —Å—Ç–µ–∫—Ç—Ä–µ–π—Å–æ–º –∏–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å X —Å–¥–µ–ª–∞–ª —Ç–æ-—Ç–æ". –õ–æ–≥–∏ –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ: –ø–æ –Ω–∏–º –º–æ–∂–Ω–æ –ø—Ä–æ—Å–ª–µ–¥–∏—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ, –Ω–æ –∏—Ö –æ—á–µ–Ω—å –º–Ω–æ–≥–æ. –û–Ω–∏ —Ö–æ—Ä–æ—à–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º: –∫–æ–≥–¥–∞ —á—Ç–æ-—Ç–æ —É–ø–∞–ª–æ, –ø–æ –ª–æ–≥–∞–º –Ω–∞–π–¥—ë–º –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç. –ù–æ –∫–æ–ø–∞—Ç—å—Å—è –≤ –æ–≥—Ä–æ–º–Ω–æ–º –æ–±—ä—ë–º–µ –ª–æ–≥–æ–≤ —Ç—Ä—É–¥–Ω–æ, –∏ –∏–∑ –Ω–∏—Ö —Å–ª–æ–∂–Ω–æ —Å—Ä–∞–∑—É —É–≤–∏–¥–µ—Ç—å –æ–±—â—É—é –∫–∞—Ä—Ç–∏–Ω—É —Å–∏—Å—Ç–µ–º—ã.

**–ú–µ—Ç—Ä–∏–∫–∏** ‚Äî —ç—Ç–æ —á–∏—Å–ª–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏, –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É, –ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫, —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏, –∑–∞–≥—Ä—É–∑–∫–∞ CPU. –û–Ω–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –∫–∞–∫ —Ä—è–¥—ã –¥–∞–Ω–Ω—ã—Ö (time-series) –∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –≤–∏–¥–µ—Ç—å —Ç—Ä–µ–Ω–¥—ã: —Ä–∞—Å—Ç—ë—Ç –ª–∏ –Ω–∞–≥—Ä—É–∑–∫–∞, –Ω–µ –¥–µ–≥—Ä–∞–¥–∏—Ä—É–µ—Ç –ª–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å. –ú–µ—Ç—Ä–∏–∫–∏ —Å–∏–ª—å–Ω–æ —Å–∂–∞—Ç—ã –ø–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (–Ω–µ —Å–∫–∞–∂—É—Ç, –∫–∞–∫–æ–π –∏–º–µ–Ω–Ω–æ –∑–∞–ø—Ä–æ—Å —É–ø–∞–ª, –∞ —Ç–æ–ª—å–∫–æ –æ–±—â–µ–µ —á–∏—Å–ª–æ), –Ω–æ –∑–∞—Ç–æ –∏—Ö –ª–µ–≥–∫–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –ü–æ –º–µ—Ç—Ä–∏–∫–∞–º —Å—Ç–∞–≤—è—Ç –∞–ª–µ—Ä—Ç—ã: –µ—Å–ª–∏ error rate > 5% ‚Äì —Å–∏—Å—Ç–µ–º–∞ –∏—Ö –ø–æ–π–º–∞–µ—Ç –∏ —Å–æ–æ–±—â–∏—Ç. –ú–µ—Ç—Ä–∏–∫–∏ –¥–∞—é—Ç "–æ–±—â–∏–π –æ–±–∑–æ—Ä –∑–¥–æ—Ä–æ–≤—å—è" —Å–∏—Å—Ç–µ–º—ã.

**–¢—Ä–µ–π—Å—ã (distributed tracing)** ‚Äî —ç—Ç–æ "—Å–ª–µ–¥—ã" –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É. –í –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞—Ö –æ–¥–∏–Ω –≤–Ω–µ—à–Ω–∏–π –∑–∞–ø—Ä–æ—Å –º–æ–∂–µ—Ç –ø—Ä–æ–π—Ç–∏ —á–µ—Ä–µ–∑ 5 —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ ‚Äì trace –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–≤—è–∑–∞—Ç—å –≤—Å–µ –∫—É—Å–æ—á–∫–∏ –ø—É—Ç–∏. –í –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –º—ã –¥–æ–±–∞–≤–ª—è–µ–º trace-id –∏ span-id, –∏ —Å–∏—Å—Ç–µ–º–∞ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Jaeger –∏–ª–∏ Zipkin) —Å–æ–±–∏—Ä–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é: —á—Ç–æ –∑–∞–ø—Ä–æ—Å A –ø—Ä–∏—à—ë–ª –≤ —Å–µ—Ä–≤–∏—Å1, –ø–æ—Ç–æ–º —Å–µ—Ä–≤–∏—Å1 –≤—ã–∑–≤–∞–ª —Å–µ—Ä–≤–∏—Å2 –∏ —Å–µ—Ä–≤–∏—Å3, —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∫–∞–∂–¥—ã–π —à–∞–≥ –∑–∞–Ω—è–ª, –±—ã–ª–∏ –ª–∏ –æ—à–∏–±–∫–∏ –Ω–∞ –∫–∞–∫–æ–º-—Ç–æ –∏–∑ —ç—Ç–∞–ø–æ–≤. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –º–æ–∂–Ω–æ –≤–∏–∑—É–∞–ª—å–Ω–æ —É–≤–∏–¥–µ—Ç—å "–¥–µ—Ä–µ–≤–æ" –≤—ã–∑–æ–≤–æ–≤ –¥–ª—è –æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞. –≠—Ç–æ –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–∏–¥–∏–º, —á—Ç–æ –æ–±—â–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ 2 —Å–µ–∫—É–Ω–¥—ã, –∏–∑ –Ω–∏—Ö 1.5 —Å —É—à–ª–æ –≤ —Å–µ—Ä–≤–∏—Å–µ –ø–ª–∞—Ç–µ–∂–µ–π ‚Äì –∑–Ω–∞—á–∏—Ç, –ø—Ä–æ–±–ª–µ–º–∞ —Ç–∞–º.

–ü–æ—á–µ–º—É –Ω—É–∂–Ω—ã –≤—Å–µ —Ç—Ä–∏? –ü–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∏ –¥–æ–ø–æ–ª–Ω—è—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞. –ú–µ—Ç—Ä–∏–∫–∏ –±—ã—Å—Ç—Ä–æ —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä—É—é—Ç –æ –ø—Ä–æ–±–ª–µ–º–µ ("–æ–π, –æ—à–∏–±–∫–∏ 500 –ø–æ—à–ª–∏, –¥–∞ –µ—â—ë –∏ latency –≤—ã—Ä–æ—Å–ª–æ"). –¢—Ä–µ–π—Å—ã –ø–æ–º–æ–≥–∞—é—Ç —Å—É–∑–∏—Ç—å –æ–±–ª–∞—Å—Ç—å –ø–æ–∏—Å–∫–∞ ‚Äì —Å–∫–∞–∂–µ–º, –ø–æ–Ω—è—Ç—å, —á—Ç–æ –≤—Å–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å—Ç–æ–ø–æ—Ä—è—Ç—Å—è –Ω–∞ –≤—ã–∑–æ–≤–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ –æ–¥–Ω–æ–º –∏–∑ —Å–µ—Ä–≤–∏—Å–æ–≤. –ê –ª–æ–≥–∏ —É–∂–µ –¥–∞—é—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é ‚Äì –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ "Timeout –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –ë–î" –∏ —Å—Ç–µ–∫—Ç—Ä–µ–π—Å. –ë–µ–∑ –º–µ—Ç—Ä–∏–∫ –º–æ–∂–Ω–æ –ø—Ä–æ—Å–ø–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—É (–Ω–µ –∑–∞–º–µ—Ç–∏—Ç—å –¥–æ –∂–∞–ª–æ–± –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π). –ë–µ–∑ —Ç—Ä–µ–π—Å–æ–≤ ‚Äì –¥–æ–ª–≥–æ –≤—ã—è—Å–Ω—è—Ç—å, –≥–¥–µ —É–∑–∫–æ–µ –º–µ—Å—Ç–æ –≤ —Ü–µ–ø–æ—á–∫–µ –≤—ã–∑–æ–≤–æ–≤. –ë–µ–∑ –ª–æ–≥–æ–≤ ‚Äì –Ω–µ —É–∑–Ω–∞–µ—à—å –¥–µ—Ç–∞–ª–µ–π –æ—à–∏–±–∫–∏. –ü–æ—ç—Ç–æ–º—É –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö —Å—Ç–∞—Ä–∞—é—Ç—Å—è –≤–Ω–µ–¥—Ä—è—Ç—å –≤—Å–µ —Ç—Ä–∏ –º–µ—Ö–∞–Ω–∏–∑–º–∞, —á—Ç–æ–±—ã –∏–º–µ—Ç—å –ø–æ–ª–Ω—ã–π –æ–±–∑–æ—Ä: –∏ —à–∏—Ä–æ–∫—É—é –∫–∞—Ä—Ç–∏–Ω—É, –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å "–ø—Ä–∏–±–ª–∏–∑–∏—Ç—å—Å—è" –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è.



---

## ‚ùì 85. –ö–∞–∫ —Ç—ã –æ—Ä–≥–∞–Ω–∏–∑–æ–≤—ã–≤–∞–ª —Å–±–æ—Ä –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –æ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è? –ü—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å –ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Å ELK-—Å—Ç–µ–∫–æ–º (ElasticSearch + Logstash + Kibana) –∏–ª–∏ –µ–≥–æ –∞–Ω–∞–ª–æ–≥–∞–º–∏, –∏ –∫–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ?


–í —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ, –≥–¥–µ –º–Ω–æ–≥–æ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ —Å–µ—Ä–≤–∏—Å–æ–≤, –≤–∞–∂–Ω–æ —Å–æ–±–∏—Ä–∞—Ç—å –ª–æ–≥–∏ –≤ –µ–¥–∏–Ω–æ–µ –º–µ—Å—Ç–æ, —á—Ç–æ–±—ã –∏—Ö —É–¥–æ–±–Ω–æ –∏—Å–∫–∞—Ç—å –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å. –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–π —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Å–±–æ—Ä –ª–æ–≥–æ–≤ —Å –ø–æ–º–æ—â—å—é —Å—Ç–µ–∫–∞ ELK (—Å–µ–π—á–∞—Å —á–∞—â–µ –≥–æ–≤–æ—Ä—è—Ç EFK, –∑–∞–º–µ–Ω—è—è Logstash –Ω–∞ Fluentd –∏–ª–∏ Filebeat).

–ö–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç: –ö–∞–∂–¥—ã–π –∏–Ω—Å—Ç–∞–Ω—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–∏—à–µ—Ç –ª–æ–≥–∏ –ª–∏–±–æ –≤ —Ñ–∞–π–ª, –ª–∏–±–æ (–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö) –≤ stdout/stderr. –ú—ã —Å—Ç–∞–≤–∏–º –∞–≥–µ–Ω—Ç –Ω–∞ –∫–∞–∂–¥—É—é –º–∞—à–∏–Ω—É/–Ω–æ–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Filebeat, Fluent Bit –∏–ª–∏ Fluentd), –∫–æ—Ç–æ—Ä—ã–π —á–∏—Ç–∞–µ—Ç —ç—Ç–∏ –ª–æ–≥–∏. –ê–≥–µ–Ω—Ç –æ–±—ã—á–Ω–æ –∑–Ω–∞–µ—Ç, –≥–¥–µ –ª–µ–∂–∞—Ç —Ñ–∞–π–ª—ã (–∏–ª–∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ **docker**-–ª–æ–≥–∏) –∏ –æ—Ç—Å—ã–ª–∞–µ—Ç —Å—Ç—Ä–æ—á–∫–∏ –ª–æ–≥–æ–≤ –¥–∞–ª—å—à–µ ‚Äì –ª–∏–±–æ –ø—Ä—è–º–æ –≤ Elasticsearch, –ª–∏–±–æ —á–µ—Ä–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, Logstash –∏–ª–∏ Kafka, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –±—É—Ñ–µ—Ä–∏–∑–æ–≤–∞—Ç—å –∏ –æ–±–æ–≥–∞—â–∞—Ç—å –¥–∞–Ω–Ω—ã–µ). –í Elasticsearch –ª–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç—ã, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –≥–∏–±–∫–∏–π –ø–æ–∏—Å–∫.

–í Kibana (—ç—Ç–æ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å) –º–æ–∂–Ω–æ –ø–æ—Ç–æ–º –∑–∞–¥–∞–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã: –ø–æ —Å–µ—Ä–≤–∏—Å—É, –ø–æ —É—Ä–æ–≤–Ω—é –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è, –ø–æ –∫–∞–∫–æ–º—É-—Ç–æ —Ç–µ–∫—Å—Ç—É. –û—á–µ–Ω—å —É–¥–æ–±–Ω–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏: –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–ª—É—á–∏–ª–∞—Å—å –æ—à–∏–±–∫–∞ ‚Äì –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –Ω–∞–π—Ç–∏ –≤—Å–µ –ª–æ–≥–∏ —Å —ç—Ç–∏–º Exception –ø–æ –≤—Å–µ–º —Å–µ—Ä–≤–µ—Ä–∞–º —Å—Ä–∞–∑—É. –ò–ª–∏ —Å—Ç—Ä–æ–∏—Ç—å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ ‚Äì —Å–∫–æ–ª—å–∫–æ –æ—à–∏–±–æ–∫ –≤ —á–∞—Å, –∫–∞–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å–∞–º—ã–µ —á–∞—Å—Ç—ã–µ.

–ü—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å –º–Ω–µ —Ç–∞–∫–∂–µ —Ä–∞–±–æ—Ç–∞—Ç—å —Å hosted-—Ä–µ—à–µ–Ω–∏—è–º–∏: –Ω–∞–ø—Ä–∏–º–µ—Ä, Graylog (–ø–æ—Ö–æ–∂ –Ω–∞ ELK, –Ω–æ —Å–æ —Å–≤–æ–∏–º UI) –∏ Splunk (enterprise-—Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –ª–æ–≥–æ–≤). –ü—Ä–∏–Ω—Ü–∏–ø –≤–µ–∑–¥–µ –æ–¥–∏–Ω–∞–∫–æ–≤: –∞–≥–µ–Ω—Ç—ã —Å–æ–±–∏—Ä–∞—é—Ç, —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç. –í–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç ‚Äì —Ñ–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤. –ú—ã —Å—Ç–∞—Ä–∞–ª–∏—Å—å –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ (JSON), —á—Ç–æ–±—ã –ø–æ—Ç–æ–º –ª–µ–≥–∫–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –ø–æ–ª—è–º. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ JSON-–ª–æ–≥–µ —Å—Ä–∞–∑—É –æ—Ç–¥–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ –¥–ª—è trace-id, –æ—Ç–¥–µ–ª—å–Ω–æ–µ –¥–ª—è —É—Ä–æ–≤–Ω—è WARN/ERROR, –æ—Ç–¥–µ–ª—å–Ω–æ–µ –¥–ª—è –Ω–∞–∑–≤–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞ ‚Äì —Ç–æ–≥–¥–∞ –≤ Kibana –º–æ–∂–Ω–æ –ø–æ —ç—Ç–∏–º –ø–æ–ª—è–º –±—ã—Å—Ç—Ä–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å. –ï—Å–ª–∏ –ª–æ–≥–∏ –Ω–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω—ã, –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è Logstash –∏–ª–∏ Fluentd –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å—Ç—Ä–æ–∫ (—Å –ø–æ–º–æ—â—å—é regex –∏–ª–∏ Grok-—à–∞–±–ª–æ–Ω–æ–≤ –≤—ã—Ç–∞—â–∏—Ç—å –ø–æ–ª—è). –ù–æ —ç—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –º–æ—Ä–æ–∫–∞, –ø–æ—ç—Ç–æ–º—É –Ω–æ–≤—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–∞—Å—Ç–æ —Å—Ä–∞–∑—É –ø–∏—à—É—Ç JSON.

–í –∏—Ç–æ–≥–µ ELK-—Å—Ç–µ–∫ —Å–∏–ª—å–Ω–æ –æ–±–ª–µ–≥—á–∞–µ—Ç –∂–∏–∑–Ω—å: –Ω–µ –Ω—É–∂–Ω–æ –ø—Ä—ã–≥–∞—Ç—å –ø–æ —Å–µ—Ä–≤–µ—Ä–∞–º –∏ —á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª—ã –ø–æ ssh. –í—Å–µ –ª–æ–≥–∏ –≤ –æ–¥–Ω–æ–º –æ–∫–Ω–µ, –º–æ–∂–Ω–æ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—ã–π –ø–æ —Ñ–∏–ª—å—Ç—Ä–∞–º. –ú–∏–Ω—É—Å ‚Äì Elasticsearch —Ç—Ä–µ–±—É–µ—Ç —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è (–∫–ª–∞—Å—Ç–µ—Ä, —Ä–æ—Ç–∞—Ü–∏—è —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –µ–≥–æ —Å–∞–º–æ–≥–æ), –Ω–æ –≤ –æ–±–ª–∞–∫–∞—Ö —Å–µ–π—á–∞—Å –∏ managed-–≤–∞—Ä–∏–∞–Ω—Ç—ã –µ—Å—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, Amazon OpenSearch Service –∏–ª–∏ –∞–Ω–∞–ª–æ–≥ GCP Stackdriver).



---

## ‚ùì 86. –ß—Ç–æ —Ç–∞–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π —Ç—Ä–µ–π—Å–∏–Ω–≥ (distributed tracing) –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω? –ö–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∑–Ω–∞–µ—à—å –¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Ä–≤–∏—Å–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Jaeger, Zipkin), –∏ –∫–∞–∫ —ç—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –æ—Ç–ª–∞–¥–∫–µ?


–†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ ‚Äì —ç—Ç–æ —Å–ø–æ—Å–æ–± –ø—Ä–æ—Å–ª–µ–¥–∏—Ç—å –ø—É—Ç—å –æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –∏–ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. –í –º–æ–Ω–æ–ª–∏—Ç–µ –≤—Å—ë –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –æ–¥–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏, –∞ –≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å –º–æ–∂–µ—Ç –ø—Ä–æ–π—Ç–∏ —á–µ—Ä–µ–∑ 5 —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä: Gateway -> Auth Service -> Order Service -> Payment Service -> Notification Service). –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–≤—è–∑–∞—Ç—å –≤—Å–µ —ç—Ç–∏ –≤—ã–∑–æ–≤—ã –≤ –µ–¥–∏–Ω—É—é "–∏—Å—Ç–æ—Ä–∏—é".

–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è —Ç–∞–∫: –∫–∞–∂–¥–æ–º—É –≤—Ö–æ–¥—è—â–µ–º—É –∑–∞–ø—Ä–æ—Å—É –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–π trace-id (–æ–±—ã—á–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –≤ —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ Gateway). –≠—Ç–æ—Ç trace-id –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –¥–∞–ª—å—à–µ ‚Äì –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö HTTP (–Ω–∞–ø—Ä–∏–º–µ—Ä, X-B3-TraceId –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–µ Zipkin/B3 –∏–ª–∏ Traceparent –≤ OpenTelemetry). –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å, –ø–æ–ª—É—á–∞—è –∑–∞–ø—Ä–æ—Å —Å trace-id, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –µ–≥–æ —É —Å–µ–±—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ MDC –¥–ª—è –ª–æ–≥–æ–≤) –∏ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ —Ç–∞–∫–∂–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ. –¢–∞–∫–∂–µ –≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –º–æ–∂–Ω–æ –¥–µ–ª–∏—Ç—å —Ç—Ä–∞—Å—Å—É –Ω–∞ —Å–ø–∞–Ω—ã ‚Äì –æ—Ç–¥–µ–ª—å–Ω—ã–µ —ç—Ç–∞–ø—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ —Å–µ—Ä–≤–∏—Å–µ X ‚Äì –æ–¥–∏–Ω span, –≤—ã–∑–æ–≤ –≤–Ω–µ—à–Ω–µ–≥–æ API ‚Äì –¥—Ä—É–≥–æ–π span). –í –∏—Ç–æ–≥–µ —Å–±–æ—Ä—â–∏–∫ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ –º–æ–∂–µ—Ç —Å–æ–±—Ä–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é: –∫–∞–∫–∏–µ —Å–ø–∞–Ω—ã (—à–∞–≥–∏) –±—ã–ª–∏, –Ω–∞ –∫–∞–∫–∏—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö, —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–Ω—è–ª–∏, –±—ã–ª–∏ –ª–∏ –æ—à–∏–±–∫–∏ –Ω–∞ –∫–∞–∫–æ–º-—Ç–æ –∏–∑ —ç—Ç–∞–ø–æ–≤.

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —ç—Ç–æ–≥–æ: Zipkin ‚Äì –æ–¥–∏–Ω –∏–∑ –ø–µ—Ä–≤—ã—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö open-source —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤—â–∏–∫–æ–≤, Jaeger ‚Äì —Ç–∞–∫–∂–µ –æ—á–µ–Ω—å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω (graduated-–ø—Ä–æ–µ–∫—Ç CNCF). –°–µ–π—á–∞—Å –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è OpenTelemetry ‚Äì —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç –∏ –Ω–∞–±–æ—Ä –±–∏–±–ª–∏–æ—Ç–µ–∫, –∫–æ—Ç–æ—Ä—ã–π —É–º–µ–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å —Ç—Ä–∞—Å—Å—ã –∏ –º–µ—Ç—Ä–∏–∫–∏ –≤ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∏—Ö –≤ —Ä–∞–∑–Ω—ã–µ –±–µ–∫–µ–Ω–¥—ã (—Ç–æ—Ç –∂–µ Jaeger, Zipkin, Grafana Tempo –∏ —Ç.–¥.). –í –ø—Ä–æ–µ–∫—Ç–∞—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Jaeger: —Å—Ç–∞–≤–∏—Ç—Å—è –∞–≥–µ–Ω—Ç/–∫–æ–ª–ª–µ–∫—Ç–æ—Ä –≤ –∫–ª–∞—Å—Ç–µ—Ä, —Å–µ—Ä–≤–∏—Å—ã —Å –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Spring Cloud Sleuth –∏–ª–∏ OpenTelemetry Java Agent) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç –Ω—É–∂–Ω—ã–µ trace-id –∏ span-id –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç –¥–∞–Ω–Ω—ã–µ –≤ Jaeger. –ü–æ—Ç–æ–º —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Jaeger –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É –ø–æ trace-id –∏–ª–∏ –ø–æ —Å–µ—Ä–≤–∏—Å—É/–æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–µ—Ç–∞–ª—å–Ω–æ: –Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–ø—Ä–æ—Å #12345 –ø—Ä–æ—à—ë–ª ‚Äì Gateway 10 –º—Å, –ø–æ—Ç–æ–º Auth Service 15 –º—Å, Order Service 120 –º—Å (–æ, –∑–Ω–∞—á–∏—Ç –∑–∞–¥–µ—Ä–∂–∫–∞ –≤ Order), –≤–Ω—É—Ç—Ä–∏ Order –≤–∏–¥–Ω–æ, —á—Ç–æ 100 –º—Å –∏–∑ 120 —É—à–ª–æ –Ω–∞ –∑–∞–ø—Ä–æ—Å –∫ –±–∞–∑–µ. –¢–∞–∫–∞—è –¥–µ—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∞ –æ—á–µ–Ω—å –ø–æ–º–æ–≥–∞–µ—Ç –ø—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ —É–∑–∫–∏—Ö –º–µ—Å—Ç.

–ö—Ä–æ–º–µ –ø–æ–∏—Å–∫–∞ "—Ç–æ—Ä–º–æ–∑–æ–≤", distributed tracing –ø–æ–ª–µ–∑–µ–Ω –∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –æ—à–∏–±–æ–∫. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∞–µ—Ç –æ–± –æ—à–∏–±–∫–µ, —É —Ç–µ–±—è –µ—Å—Ç—å trace-id –∏–∑ –ª–æ–≥–æ–≤ ‚Äì —Ç—ã –æ—Ç–∫—Ä—ã–≤–∞–µ—à—å —Ç—Ä–∞—Å—Å—É –∏ –≤–∏–¥–∏—à—å, —á—Ç–æ –≤ –∫–∞–∫–æ–º-—Ç–æ –∏–∑ —Å–µ—Ä–≤–∏—Å–æ–≤ –æ–Ω–∞ –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª–∞—Å—å –≤ –æ—à–∏–±–∫—É (span –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ error, —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º). –ú–æ–∂–Ω–æ —Å—Ä–∞–∑—É –ø–µ—Ä–µ–π—Ç–∏ –∫ –ª–æ–≥–∞–º –∏–º–µ–Ω–Ω–æ —ç—Ç–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ (–∑–Ω–∞—è trace-id, –≤ Kibana —Ñ–∏–ª—å—Ç—Ä—É–µ—à—å –ª–æ–≥–∏ –ø–æ –Ω–µ–º—É) –∏ –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç. –ë–µ–∑ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ –≤ —Å–ª–æ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –æ—á–µ–Ω—å —Ç—è–∂–µ–ª–æ –ø–æ–Ω—è—Ç—å —Ü–µ–ø–æ—á–∫—É –≤—ã–∑–æ–≤–æ–≤: –∫—Ç–æ –∫–æ–≥–æ –ø–æ–∑–≤–∞–ª –∏ –≥–¥–µ –≤—Å—ë —Å–ª–æ–º–∞–ª–æ—Å—å. –ü–æ—ç—Ç–æ–º—É —Å–µ–π—á–∞—Å –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç ‚Äì –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞—Ç—å trace-id –≤–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∏ –∏–º–µ—Ç—å —Å–∏—Å—Ç–µ–º—É —Å–±–æ—Ä–∞ —Ç—Ä–∞—Å—Å (Jaeger/Zipkin/Grafana Tempo –∏–ª–∏ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –≤—Ä–æ–¥–µ Datadog APM). –≠—Ç–æ –∑–¥–æ—Ä–æ–≤–æ —É–ª—É—á—à–∞–µ—Ç –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.



---

## ‚ùì 87. –ö–∞–∫ –º–æ–∂–Ω–æ —Å–≤—è–∑–∞—Ç—å –ª–æ–≥–∏ –∏–ª–∏ –º–µ—Ç—Ä–∏–∫–∏ –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏? –†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ –∏–¥–µ—é correlation ID –∏–ª–∏ trace ID: –∫–∞–∫ –≤—ã –∏—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ, —á—Ç–æ–±—ã –ø—Ä–æ—Å–ª–µ–¥–∏—Ç—å –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ —Ü–µ–ø–æ—á–∫—É –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤.


–í –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π —Å—Ä–µ–¥–µ, –≥–¥–µ –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –ø–∏—à–µ—Ç —Å–≤–æ–∏ –ª–æ–≥–∏ –∏ –º–µ—Ç—Ä–∏–∫–∏, –Ω—É–∂–Ω–æ –∏–º–µ—Ç—å –∫–∞–∫–æ–π-—Ç–æ –æ–±—â–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç, —á—Ç–æ–±—ã —Å–≤—è–∑—ã–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞. –î–ª—è —ç—Ç–æ–≥–æ –≤–≤–æ–¥—è—Ç correlation ID (–æ–Ω –∂–µ trace ID, –µ—Å–ª–∏ –≥–æ–≤–æ—Ä–∏—Ç—å –æ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–µ) ‚Äì —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–∞.

–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫: –∫–æ–≥–¥–∞ –∑–∞–ø—Ä–æ—Å –ø—Ä–∏—Ö–æ–¥–∏—Ç –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, HTTP-–∑–∞–ø—Ä–æ—Å), gateway –∏–ª–∏ –ø–µ—Ä–≤—ã–π —Å–µ—Ä–≤–∏—Å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä, —Å–∫–∞–∂–µ–º, X-Request-ID: 123456789abcdef. –≠—Ç–æ—Ç ID –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –¥–∞–ª—å—à–µ ‚Äì –ª–∏–±–æ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ HTTP –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏, –ª–∏–±–æ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–π (–µ—Å–ª–∏ —ç—Ç–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ). –í—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–∫—Å–∏—Ä—É—é—Ç —ç—Ç–æ—Ç ID –ø—Ä–∏ –≤—ã–∑–æ–≤–∞—Ö –¥–∞–ª—å—à–µ. –ê —Å–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ ‚Äì –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å —É —Å–µ–±—è –≤ –ª–æ–≥–∞—Ö –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ —Ç–æ–∂–µ –≤—ã–≤–æ–¥–∏—Ç —ç—Ç–æ—Ç ID. –û–±—ã—á–Ω–æ –¥–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç MDC (Mapped Diagnostic Context) –≤ –ª–æ–≥–≥–µ—Ä–∞—Ö: –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –∫–ª–∞–¥—ë–º correlationId –≤ MDC, –∏ —à–∞–±–ª–æ–Ω –ª–æ–≥–æ–≤ –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Ç–∞–∫, —á—Ç–æ–±—ã –ø–µ—á–∞—Ç–∞—Ç—å –µ–≥–æ –≤ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–µ. –¢–æ–≥–¥–∞ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø–æ—Ç–æ–∫ –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ 5 —Å–µ—Ä–≤–∏—Å–æ–≤, –≤ –ª–æ–≥–∞—Ö –≤—Å–µ—Ö —ç—Ç–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –±—É–¥–µ—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä, `[req=123456789abcdef]` –≤ —Å—Ç—Ä–æ–∫–∞—Ö.

–ö–æ–≥–¥–∞ —Å–ª—É—á–∞–µ—Ç—Å—è –ø—Ä–æ–±–ª–µ–º–∞, –º—ã, –∑–Ω–∞—è correlation ID, –º–æ–∂–µ–º –±—ã—Å—Ç—Ä–æ —Å–æ–±—Ä–∞—Ç—å –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª –æ–± –æ—à–∏–±–∫–µ –∏ –ø—Ä–∏—Å–ª–∞–ª —Å–≤–æ–π request ID (–º–æ–∂–Ω–æ –µ–≥–æ –≤ –æ—Ç–≤–µ—Ç–∞—Ö —Ç–æ–∂–µ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∏–ª–∏ –≤ UI –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å). –ú—ã —Ñ–∏–ª—å—Ç—Ä—É–µ–º –ª–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –ø–æ —ç—Ç–æ–º—É ID –∏ –≤–∏–¥–∏–º —Ü–µ–ª—å–Ω—É—é –∫–∞—Ä—Ç–∏–Ω—É: –≤ —Å–µ—Ä–≤–∏—Å–µ –ê –ø—Ä–∏—à—ë–ª –∑–∞–ø—Ä–æ—Å, –ø–æ—Ç–æ–º –ø–æ—à—ë–ª –≤ B, —Ç–∞–º –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ (–ø–æ –ª–æ–≥–∞–º —Å —Ç–µ–º –∂–µ ID –≤–∏–¥–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ), –∏ —Ç.–¥. –ë–µ–∑ correlation ID –º—ã –±—ã –≥–∞–¥–∞–ª–∏: —Å–º–æ—Ç—Ä–µ–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –∏ –ø—ã—Ç–∞–ª–∏—Å—å —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è—Ç—å, –Ω–æ –µ—Å–ª–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ –º–Ω–æ–≥–æ, —ç—Ç–æ –ø–æ—á—Ç–∏ –Ω–µ—Ä–µ–∞–ª—å–Ω–æ.

–¢–æ –∂–µ —Å–∞–º–æ–µ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏: –æ–±—ã—á–Ω–æ –º–µ—Ç—Ä–∏–∫–∏ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω—ã –∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π correlation ID (–∏–Ω–∞—á–µ –∏—Ö —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –±—ã–ª–æ –±—ã), –Ω–æ trace ID –ø–æ–º–æ–≥–∞–µ—Ç —Å–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∏ –ª–æ–≥–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, —É–≤–∏–¥–µ–ª–∏ –≤ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–µ, —á—Ç–æ –∑–∞–ø—Ä–æ—Å 123456789abcdef —à—ë–ª 5 —Å–µ–∫—É–Ω–¥ ‚Äì –º–æ–∂–Ω–æ –ø–æ —ç—Ç–æ–º—É –∂–µ ID –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –ø–æ–¥—Ä–æ–±–Ω–æ. –ò–ª–∏ –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–º —Ç–µ—Å—Ç–µ, –∫–æ–≥–¥–∞ –ª–æ–≤–∏–º —Å–∞–º—ã–π –º–µ–¥–ª–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å, –º–æ–∂–µ–º –ø—Ä–æ—Å–ª–µ–¥–∏—Ç—å –µ–≥–æ ID –∏ –ø–æ–¥–Ω—è—Ç—å –ª–æ–≥–∏. –í –æ–±—â–µ–º, correlation ID ‚Äì —ç—Ç–æ "–∫–ª–µ–π", –∫–æ—Ç–æ—Ä—ã–π —Å–≤—è–∑—ã–≤–∞–µ—Ç —Ä–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –≤ –µ–¥–∏–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ–±—ã—Ç–∏–π. –í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞—Ö (—Ç–æ—Ç –∂–µ Spring Cloud Sleuth) —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏: –æ–Ω —Å–∞–º –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç trace ID, –ª–æ–≥–∏—Ä—É–µ—Ç –µ–≥–æ –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç –¥–∞–ª—å—à–µ. –ï—Å–ª–∏ –∂–µ –≥–æ—Ç–æ–≤–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è –Ω–µ—Ç, —Å—Ç–æ–∏—Ç –≤–Ω–µ–¥—Ä–∏—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ: –≥–ª–∞–≤–Ω–æ–µ, —á—Ç–æ–±—ã –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –¥–æ–≥–æ–≤–æ—Ä–∏–ª–∏—Å—å –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä. –¢–æ–≥–¥–∞ —Å–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≥–æ—Ä–∞–∑–¥–æ –ø—Ä–æ–∑—Ä–∞—á–Ω–µ–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.



---

## ‚ùì 88. –¢—ã —Å–ª—ã—à–∞–ª –ø—Ä–æ –ø–æ–¥—Ö–æ–¥ GitOps? –í —á–µ–º –æ—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è GitOps, –∏ –∫–∞–∫ –æ–Ω –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –∫ –¥–µ–ø–ª–æ—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π?


–î–∞, GitOps ‚Äì —Å–µ–π—á–∞—Å –º–æ–¥–Ω–æ–µ —Å–ª–æ–≤–æ –≤ DevOps. –°—É—Ç—å GitOps –≤ —Ç–æ–º, —á—Ç–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ –∫–æ–º–º–∏—Ç—ã –≤ Git. –¢–æ –µ—Å—Ç—å Git ‚Äì –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã –æ —Ç–æ–º, –∫–∞–∫ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞. –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä (–≤—Ä–æ–¥–µ ArgoCD –∏–ª–∏ Flux) —Å–ª–µ–¥–∏—Ç –∑–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–≤–æ–¥–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–∞ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å —Ç–µ–º, —á—Ç–æ –≤ Git.

–û—Ç–ª–∏—á–∏–µ –æ—Ç —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –º–æ–∂–Ω–æ –æ–±—ä—è—Å–Ω–∏—Ç—å —Ç–∞–∫. –†–∞–Ω—å—à–µ –∫–∞–∫: –∞–¥–º–∏–Ω –∏–ª–∏ CI/CD-–ø–∞–π–ø–ª–∞–π–Ω –±–µ—Ä—ë—Ç –Ω–æ–≤—ã–π –æ–±—Ä–∞–∑ –∏ –∫–æ–º–∞–Ω–¥–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `**kubectl** apply`) –¥–µ–ø–ª–æ–∏—Ç –µ–≥–æ –≤ –∫–ª–∞—Å—Ç–µ—Ä. –ö–æ–Ω—Ñ–∏–≥–∏ –º–æ–≥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≥–¥–µ-—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–æ, –µ—Å—Ç—å —Ä–∏—Å–∫, —á—Ç–æ —Ç–æ, —á—Ç–æ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ, —Ä–∞–∑—ä–µ—Ö–∞–ª–æ—Å—å —Å —Ç–µ–º, —á—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ —É —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∏–ª–∏ –≤ CI. –° GitOps –≤—Å—ë —á–µ—Ä–µ–∑ Git: –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–µ—à–∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å –≤–µ—Ä—Å–∏—é —Å–µ—Ä–≤–∏—Å–∞ ‚Äì –º—ã –Ω–µ –Ω–∞–ø—Ä—è–º—É—é –≤ –∫–ª–∞—Å—Ç–µ—Ä –ø—Ä–∏–º–µ–Ω—è–µ–º, –∞ –¥–µ–ª–∞–µ–º pull request –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π, –≥–¥–µ –º–µ–Ω—è–µ–º —Ç–µ–≥ –æ–±—Ä–∞–∑–∞ –≤ –º–∞–Ω–∏—Ñ–µ—Å—Ç–µ. –≠—Ç–æ—Ç PR –ø—Ä–æ—Ö–æ–¥–∏—Ç code review, merge ‚Äì –∏ —É–∂–µ —Å–∏—Å—Ç–µ–º–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ArgoCD) –≤–∏–¥–∏—Ç, —á—Ç–æ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø–æ—è–≤–∏–ª—Å—è –Ω–æ–≤—ã–π —Ç–µ–≥, –∏ —Å–∞–º–∞ –Ω–∞–∫–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –ª—é–±–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã ‚Äì —ç—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–¥–∞, —Å –∏—Å—Ç–æ—Ä–∏–µ–π, –æ–±—Å—É–∂–¥–µ–Ω–∏–µ–º, –ø—Ä–æ–≤–µ—Ä–∫–æ–π.

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞: –≤—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ Git —Ç–µ–∫—É—â–µ–µ –∂–µ–ª–∞–µ–º–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã (Infrastructure as Code –≤ —á–∏—Å—Ç–æ–º –≤–∏–¥–µ). –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å git revert ‚Äì –∏ —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–∫–∞—Ç–∏—Ç –∫–ª–∞—Å—Ç–µ—Ä –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é. –ù–µ—Ç –¥—Ä–µ–π—Ñ–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: GitOps-–æ–ø–µ—Ä–∞—Ç–æ—Ä –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Å–ª–µ–¥–∏—Ç, –∏ –µ—Å–ª–∏ –∫—Ç–æ-—Ç–æ –≤—Ä—É—á–Ω—É—é –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ –ø–æ–º–µ–Ω—è–ª, –æ–Ω —ç—Ç–æ –¥–µ—Ç–µ–∫—Ç–∏—Ä—É–µ—Ç –∏ –≤–µ—Ä–Ω—ë—Ç –Ω–∞–∑–∞–¥ (–∏–ª–∏ –∫–∞–∫ –º–∏–Ω–∏–º—É–º —Å–æ–æ–±—â–∏—Ç –æ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–∏). –≠—Ç–æ –ø–æ–≤—ã—à–∞–µ—Ç –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å: –≤—Å—ë –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∞—É–¥–∏—Ä—É–µ–º–æ —á–µ—Ä–µ–∑ –∏—Å—Ç–æ—Ä–∏—é –∫–æ–º–º–∏—Ç–æ–≤. –û—Ç–ª–∏—á–∏–µ –æ—Ç "—Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–≥–æ CI/CD" –µ—â—ë –∏ –≤ —Ç–æ–º, —á—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–æ–ª—å—à–µ "pull-based": –Ω–µ Jenkins –ø—É—à–∏—Ç –≤ –∫–ª–∞—Å—Ç–µ—Ä, –∞ –∫–ª–∞—Å—Ç–µ—Ä —Å–∞–º "–ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç" –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑ Git. –≠—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ (–Ω–µ –Ω—É–∂–Ω–æ –≤—ã–¥–∞–≤–∞—Ç—å CI –ø–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∞ –Ω–∞ –ø—Ä–æ–¥) –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é ‚Äì –ª—é–±–æ–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ —Å—Ä–∞–∑—É –≤–∏–¥–Ω–æ –∏ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è.



---

## ‚ùì 89. –ß—Ç–æ —Ç–∞–∫–æ–µ ArgoCD –∏ –∫–∞–∫—É—é —Ä–æ–ª—å –æ–Ω –∏–≥—Ä–∞–µ—Ç –≤ GitOps? –û–ø–∏—à–∏, –∫–∞–∫ ArgoCD —Å–ª–µ–¥–∏—Ç –∑–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –µ—ë –≤ –∫–ª–∞—Å—Ç–µ—Ä.


ArgoCD ‚Äì —ç—Ç–æ –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ GitOps –≤ Kubernetes. –ü—Ä–æ—â–µ –≥–æ–≤–æ—Ä—è, —ç—Ç–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (–æ–ø–µ—Ä–∞—Ç–æ—Ä) –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ, –∫–æ—Ç–æ—Ä—ã–π —É–º–µ–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–∞ —Å —Ç–µ–º, —á—Ç–æ –æ–ø–∏—Å–∞–Ω–æ –≤ Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏. –£ –Ω–µ–≥–æ –µ—Å—Ç—å —Å–≤–æ–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: —Å–µ—Ä–≤–µ—Ä (—Å –≤–µ–±-UI –∏ API) –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä, –±–µ–≥—É—â–∏–π –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ.

–†–∞–±–æ—Ç–∞–µ—Ç ArgoCD —Ç–∞–∫: –≤—ã —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç–µ –≤ –Ω—ë–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Application) ‚Äì –ø–æ —Å—É—Ç–∏, –≥–æ–≤–æ—Ä–∏—Ç–µ: "–≤–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π Git, —Ç–∞–∫–æ–π-—Ç–æ –ø—É—Ç—å –∏–ª–∏ Helm chart, –≤–µ—Ç–∫–∞ master, –∏ –≤–æ—Ç —Ü–µ–ª–µ–≤–æ–π namespace/–∫–ª–∞—Å—Ç–µ—Ä, –∫—É–¥–∞ –ø—Ä–∏–º–µ–Ω—è—Ç—å". ArgoCD –±–µ—Ä—ë—Ç —ç—Ç–∏ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã (–∏–ª–∏ chart) –∏–∑ Git –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç (–¥–µ–ª–∞–µ—Ç **kubectl** apply) –∫ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –∫–ª–∞—Å—Ç–µ—Ä—É. –û–Ω —ç—Ç–æ –¥–µ–ª–∞–µ—Ç –ª–∏–±–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (Auto-Sync —Ä–µ–∂–∏–º), –ª–∏–±–æ –≤—Ä—É—á–Ω—É—é –ø–æ –≤–∞—à–µ–π –∫–æ–º–∞–Ω–¥–µ (Manual Sync). –ì–ª–∞–≤–Ω–æ–µ ‚Äì –æ–Ω –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤—ã –æ–±–Ω–æ–≤–∏–ª–∏ Deployment –≤ Git ‚Äì Argo —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥/–º–∏–Ω—É—Ç –≤–∏–¥–∏—Ç –Ω–æ–≤—ã–π –∫–æ–º–º–∏—Ç, –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –Ω–∞–∫–∞—Ç—ã–≤–∞–µ—Ç –∏—Ö –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä.

ArgoCD —Ç–∞–∫–∂–µ —Å–ª–µ–¥–∏—Ç –∏ –∑–∞ "–¥—Ä–µ–π—Ñ–æ–º" (drift) ‚Äì –µ—Å–ª–∏ –∫—Ç–æ-—Ç–æ –ø–æ–º–µ–Ω—è–ª —á—Ç–æ-—Ç–æ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ —Ä—É–∫–∞–º–∏, –Ω–µ –∫–∞–∫ –≤ Git, Argo —ç—Ç–æ –≤—ã—è–≤–∏—Ç. –í UI –æ–Ω –ø–æ–∫–∞–∂–µ—Ç, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ OutOfSync, –∏ –º–æ–∂–Ω–æ –Ω–∞–∂–∞—Ç—å Sync, —á—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å –≤—Å—ë –∫ —Å–æ—Å—Ç–æ—è–Ω–∏—é –∏–∑ Git. –û–Ω —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–æ–ª—å —Å—Ç—Ä–∞–∂–∞: Git –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∂–µ–ª–∞–µ–º–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∞ ArgoCD –¥–µ–ª–∞–µ—Ç –≤—Å—ë, —á—Ç–æ–±—ã —Ä–µ–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ–≤–ø–∞–¥–∞–ª–æ. –í GitOps-–ø—Ä–∞–∫—Ç–∏–∫–∞—Ö ArgoCD —Ä–∞–∑–≥—Ä—É–∂–∞–µ—Ç CI/CD: –≤–∞–º –Ω–µ –Ω–∞–¥–æ —Å–∫—Ä–∏–ø—Ç–æ–º –¥–µ–ø–ª–æ–∏—Ç—å ‚Äì –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–º–µ—Ä–¥–∂–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥, –∞ –¥–µ–ø–ª–æ–π —Å–¥–µ–ª–∞–µ—Ç Argo.

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ, ArgoCD —É–º–µ–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ä–∞–∑–Ω—ã–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ ‚Äì plain YAML-–º–∞–Ω–∏—Ñ–µ—Å—Ç—ã, Helm charts, Kustomize, Jsonnet –∏ —Ç.–ø. –û–Ω –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–∞–∑–Ω—ã–º –∫–ª–∞—Å—Ç–µ—Ä–∞–º (–º–æ–∂–Ω–æ –∏–∑ –æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ —É–ø—Ä–∞–≤–ª—è—Ç—å –º—É–ª—å—Ç–∏–∫–ª–∞—Å—Ç–µ—Ä–Ω—ã–º–∏ –¥–µ–ø–ª–æ—è–º–∏). –ï—Å—Ç—å –∏ —É–¥–æ–±—Å—Ç–≤–∞: –∏—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –≤–∏–∑—É–∞–ª—å–Ω—ã–π –¥–∏—Ñ—Ñ —Ç–æ–≥–æ, —á—Ç–æ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ vs –≤ Git, –∫–Ω–æ–ø–∫–∞ "–æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è" –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É –∫–æ–º–º–∏—Ç—É. –í—Å—ë —ç—Ç–æ –¥–µ–ª–∞–µ—Ç ArgoCD —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–º —ç–ª–µ–º–µ–Ω—Ç–æ–º GitOps-–ø–æ–¥—Ö–æ–¥–∞: —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ç–æ–ª—å–∫–æ –∫–æ–º–º–∏—Ç—è—Ç, –∞ ArgoCD —É–∂–µ –¥–æ–≤–æ–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ "–∂–µ–ª–µ–∑–∞".



---

## ‚ùì 90. –ö–∞–∫ –≤ ArgoCD –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è? –ß—Ç–æ –∑–Ω–∞—á–∏—Ç "drift" (—Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ), –∏ –∫–∞–∫ ArgoCD –≤—ã—è–≤–ª—è–µ—Ç –∏ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –º–µ–∂–¥—É Git –∏ –∫–ª–∞—Å—Ç–µ—Ä–æ–º?


ArgoCD —Ä–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π (–ª–∏–±–æ –ø–æ —Ç–∞–π–º–µ—Ä—É, –ª–∏–±–æ —á–µ—Ä–µ–∑ webhook –æ—Ç Git-—Å–µ—Ä–≤–µ—Ä–∞) –∏ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å —Ç–µ–º, —á—Ç–æ —Å–µ–π—á–∞—Å –ø—Ä–∏–º–µ–Ω–µ–Ω–æ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ. –£ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Application) –≤ ArgoCD —Ö—Ä–∞–Ω–∏—Ç—Å—è —Å—Ä–µ–∑ "desired state" –∏–∑ Git (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞–±–æ—Ä –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º –∫–æ–º–º–∏—Ç–µ), –∏ Argo —É–º–µ–µ—Ç –æ–ø—Ä–∞—à–∏–≤–∞—Ç—å Kubernetes API, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å "live state" (—Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ).

–ï—Å–ª–∏ –∂–µ–ª–∞–µ–º–æ–µ –∏ —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ—Ç–ª–∏—á–∞—é—Ç—Å—è, –≤–æ–∑–Ω–∏–∫–∞–µ—Ç —Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º—ã–π **drift** (—Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ). ArgoCD –ø–æ–º–µ—á–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–∞–∫ OutOfSync. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ Git —É Deployment —Ä–µ–ø–ª–∏–∫ 5, –∞ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ –∫—Ç–æ-—Ç–æ —Ä—É–∫–∞–º–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–ª –¥–æ 6 ‚Äì Argo —ç—Ç–æ —É–≤–∏–¥–∏—Ç. –ò–ª–∏ –¥—Ä—É–≥–æ–π —Å–ª—É—á–∞–π: –≤—ã –∑–∞–∫–æ–º–º–∏—Ç–∏–ª–∏ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é image, –∞ –æ–Ω–∞ –µ—â—ë –Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ ‚Äì —Ç–æ–∂–µ –±—É–¥–µ—Ç OutOfSync, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ —Å—Ç–∞—Ä—ã–π –æ–±—Ä–∞–∑, –∞ –≤ Git —É–∂–µ –∑–∞–ø–∏—Å–∞–Ω –Ω–æ–≤—ã–π.

–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –ø—Ä–æ—Ü–µ—Å—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (Sync). –ö–æ–≥–¥–∞ ArgoCD –≤ –∞–≤—Ç–æ-—Ä–µ–∂–∏–º–µ, –æ–Ω –º–æ–∂–µ—Ç —Å–∞–º –≤—ã–ø–æ–ª–Ω–∏—Ç—å sync –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π (—Ç–æ–≥–¥–∞ drift –±—ã—Å—Ç—Ä–æ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è, –ø–æ—á—Ç–∏ –Ω–µ –ø–æ–≤–∏—Å–∞–µ—Ç). –í —Ä—É—á–Ω–æ–º —Ä–µ–∂–∏–º–µ ‚Äì –æ–Ω –ø—Ä–æ—Å—Ç–æ —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç, —á—Ç–æ –µ—Å—Ç—å –æ—Ç–ª–∏—á–∏—è, –∏ –∂–¥—ë—Ç, –ø–æ–∫–∞ –∏–Ω–∂–µ–Ω–µ—Ä –Ω–∞–∂–º—ë—Ç –∫–Ω–æ–ø–∫—É "Sync" –≤ UI –∏–ª–∏ –≤—ã–∑–æ–≤–µ—Ç –∫–æ–º–∞–Ω–¥—É `argocd app sync`. –ü—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ ArgoCD –±–µ—Ä—ë—Ç –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã –∏–∑ Git –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∏—Ö –∫ –∫–ª–∞—Å—Ç–µ—Ä—É (—Å–æ–∑–¥–∞—ë—Ç/–æ–±–Ω–æ–≤–ª—è–µ—Ç/—É–¥–∞–ª—è–µ—Ç —Ä–µ—Å—É—Ä—Å—ã, —á—Ç–æ–±—ã –ø—Ä–∏–≤–µ—Å—Ç–∏ –≤—Å—ë –∫ –∂–µ–ª–∞–µ–º–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é).

–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ, —á—Ç–æ drift –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ –∏–∑-–∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ Git, –Ω–æ –∏ –µ—Å–ª–∏ –∫—Ç–æ-—Ç–æ –∏–ª–∏ —á—Ç–æ-—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ –∫–ª–∞—Å—Ç–µ—Ä –Ω–∞–ø—Ä—è–º—É—é. ArgoCD –Ω–µ –≤–º–µ—à–∏–≤–∞–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é), –Ω–æ –æ–Ω –ø–æ–¥—Å–≤–µ—Ç–∏—Ç —ç—Ç–æ: "–£ –≤–∞—Å –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ –∫–æ–Ω—Ñ–∏–≥ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –≥–∏—Ç–æ–≤—Å–∫–æ–≥–æ". –≠—Ç–æ —Å–≤–æ–µ–≥–æ —Ä–æ–¥–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç "–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –¥—Ä–µ–π—Ñ–∞". –ú–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∞–º–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ (self-heal): —Ç–æ–≥–¥–∞ ArgoCD –±—É–¥–µ—Ç –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ —Å–∞–º –æ—Ç–∫–∞—Ç—ã–≤–∞—Ç—å –ª—é–±—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ –æ–±—Ä–∞—Ç–Ω–æ –∫ Git, –¥–∞–∂–µ –±–µ–∑ –∫–æ–º–º–∏—Ç–æ–≤ (–ø–æ–ª–Ω–æ—Å—Ç—å—é enforcing declarative state). –û–±—ã—á–Ω–æ –∂–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è: –∫–æ–º–∞–Ω–¥–∞ –≤–∏–¥–∏—Ç drift –∏ —Ä–µ—à–∞–µ—Ç, –ª–∏–±–æ –ø—Ä–∏–Ω—è—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ (–∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –µ–≥–æ –≤ Git), –ª–∏–±–æ –≤–µ—Ä–Ω—É—Ç—å –≤—Å—ë –Ω–∞–∑–∞–¥ —á–µ—Ä–µ–∑ Sync. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤ ArgoCD ‚Äì —ç—Ç–æ —Å–µ—Ä–¥—Ü–µ GitOps: –æ–Ω–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∫–ª–∞—Å—Ç–µ—Ä –Ω–µ "—É–µ–¥–µ—Ç –≤ —Å—Ç–æ—Ä–æ–Ω—É" –æ—Ç —Ç–æ–≥–æ, —á—Ç–æ –∑–∞–¥–µ–∫–ª–∞—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.



---

## ‚ùì 91. –ö–∞–∫ —Ç—ã –Ω–∞—Å—Ç—Ä–æ–∏—à—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ ArgoCD? –ù–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–∫—É–¥–∞ ArgoCD –±–µ—Ä—ë—Ç –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã Kubernetes ‚Äî –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ª–∏ Helm charts –∏–ª–∏ Kustomize, –∏ –∫–∞–∫ –∑–∞–¥–∞—é—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π?


–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ ArgoCD —Å–≤–æ–¥–∏—Ç—Å—è –∫ —Å–æ–∑–¥–∞–Ω–∏—é –æ–±—ä–µ–∫—Ç–∞ Application, –∫–æ—Ç–æ—Ä—ã–π –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫ (—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø—É—Ç—å), —Ü–µ–ª–µ–≤–æ–π –∫–ª–∞—Å—Ç–µ—Ä/namespace –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏. –ú–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å —ç—Ç–æ –ª–∏–±–æ —á–µ—Ä–µ–∑ UI/CLI, –ª–∏–±–æ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ (—Å–∞–º ArgoCD —Ç–æ–∂–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞–º–∏).

–ù–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ "my-service" –≤ ArgoCD:

* –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π Git (URL –∏, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π branch –∏–ª–∏ tag, –Ω–∞–ø—Ä–∏–º–µ—Ä main).
* –ü—É—Ç—å –≤–Ω—É—Ç—Ä–∏ —Ä–µ–ø–æ, –≥–¥–µ –ª–µ–∂–∞—Ç –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã. –ï—Å–ª–∏ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ YAML-—Ñ–∞–π–ª—ã Kubernetes, —Ç–æ, —Å–∫–∞–∂–µ–º, `deployments/my-service/overlays/prod` (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º Kustomize overlays) –∏–ª–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å plain YAML.
* –¢–∞–∫–∂–µ —Ç–∏–ø –∏—Å—Ç–æ—á–Ω–∏–∫–∞: ArgoCD —É–º–µ–µ—Ç —Å–∞–º —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å, –µ—Å–ª–∏ –≤ –ø–∞–ø–∫–µ –µ—Å—Ç—å `kustomization.yaml` ‚Äì –æ–Ω –ø—Ä–∏–º–µ–Ω–∏—Ç Kustomize; –µ—Å–ª–∏ –µ—Å—Ç—å `Chart.yaml` ‚Äì –ø–æ–π–º—ë—Ç, —á—Ç–æ —ç—Ç–æ Helm chart; –º–æ–∂–Ω–æ —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å `spec.source.chart` –∏ `spec.source.repoURL` –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ Helm-—á–∞—Ä—Ç–∞.

–î–ª—è Helm charts –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å values. –í ArgoCD Application –µ—Å—Ç—å —Å–µ–∫—Ü–∏—è, –≥–¥–µ –º–æ–∂–Ω–æ –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å override-parameters –∏–ª–∏ —É–∫–∞–∑–∞—Ç—å –ø—É—Ç—å –∫ values-—Ñ–∞–π–ª—É –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, —É –Ω–∞—Å –æ–¥–∏–Ω chart –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞, –∞ values –ª–µ–∂–∞—Ç –≤ –ø–∞–ø–∫–∞—Ö `values-dev.yaml`, `values-prod.yaml`. –ú—ã –º–æ–≥–ª–∏ —Å–¥–µ–ª–∞—Ç—å –¥–≤–∞ Application: –æ–¥–∏–Ω —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ chart –∏ –±–µ—Ä—ë—Ç values-dev.yaml –¥–ª—è dev-–æ–∫—Ä—É–∂–µ–Ω–∏—è (–∏ –¥–µ–ø–ª–æ–∏—Ç –≤ dev namespace), –≤—Ç–æ—Ä–æ–π ‚Äì values-prod.yaml –∏ production namespace. ArgoCD –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç `**helm** template` –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º —Å —ç—Ç–∏–º–∏ values –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

–î–ª—è Kustomize —Ç–æ–∂–µ –º–æ–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å, –∫–∞–∫–æ–π overlay –ø—Ä–∏–º–µ–Ω—è—Ç—å. –ß–∞—Å—Ç–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É—é—Ç —Ç–∞–∫: `/base` (–±–∞–∑–æ–≤—ã–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã) –∏ `/overlays/dev`, `/overlays/prod` ‚Äì ArgoCD Application –Ω–∞ prod —É–∫–∞–∂–µ—Ç –ø—É—Ç—å `overlays/prod` –∏ –≤–æ–∑—å–º—ë—Ç –æ—Ç—Ç—É–¥–∞ –ø–∞—Ç—á–∏ (–≤ –Ω–∏—Ö –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞–∑–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä replicas=1 –≤ dev vs 3 –≤ prod, URL-—ã —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ —Ç.–¥.).

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, ArgoCD –≥–∏–±–∫–æ –±–µ—Ä—ë—Ç –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã: –ª–∏–±–æ –∫–∞–∫ –µ—Å—Ç—å (YAML), –ª–∏–±–æ —á–µ—Ä–µ–∑ "—à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä—ã" (Helm, Kustomize, Jsonnet). –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π –æ–±—ã—á–Ω–æ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–∏–±–æ –≤ —Ä–∞–∑–Ω—ã—Ö –ø–∞–ø–∫–∞—Ö/–≤–µ—Ç–∫–∞—Ö (dev vs prod), –ª–∏–±–æ –≤ —Ä–∞–∑–Ω—ã—Ö values-—Ñ–∞–π–ª–∞—Ö. –ê ArgoCD –ø—Ä–æ—Å—Ç–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –Ω—É–∂–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫. –ò –∫–æ–≥–¥–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –º–µ–Ω—è–µ—Ç Chart –∏–ª–∏ Kustomize base, –æ–Ω –º–æ–∂–µ—Ç —Å—Ä–∞–∑—É –≤ —Ç–æ–º –∂–µ Git –æ–±–Ω–æ–≤–∏—Ç—å –∏ overlay –¥–ª—è prod ‚Äì –ø—Ä–∏ –º–µ—Ä–∂–µ ArgoCD –ø—Ä–æ–¥–µ–ø–ª–æ–∏—Ç –Ω–æ–≤–æ–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –¥–ª—è –ø—Ä–æ–¥—ã.



---

## ‚ùì 92. –ö–∞–∫–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–∞—ë—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ GitOps –∏ ArgoCD –¥–ª—è –∫–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ DevOps? –°—Ç–∞–ª–∫–∏–≤–∞–ª—Å—è –ª–∏ —Ç—ã —Å –∫–∞–∫–∏–º–∏-—Ç–æ —Å–ª–æ–∂–Ω–æ—Å—Ç—è–º–∏ –ø—Ä–∏ –≤–Ω–µ–¥—Ä–µ–Ω–∏–∏ GitOps –≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ?


–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ —É GitOps/ArgoCD –Ω–µ—Å–∫–æ–ª—å–∫–æ. –í–æ-–ø–µ—Ä–≤—ã—Ö, —ç—Ç–æ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–≥–æ, —á—Ç–æ –¥–µ–ø–ª–æ–∏—Ç—Å—è. –í–µ—Å—å –∫–ª–∞—Å—Ç–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ Git ‚Äì –º–æ–∂–Ω–æ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π: –∫—Ç–æ, –∫–æ–≥–¥–∞, —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª –≤ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞—Ö. –û—Ç–∫–∞—Ç–∏—Ç—å—Å—è ‚Äì –ø—Ä–æ—Å—Ç–æ revert –≤ Git. –î–ª—è –∫–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç –º–µ–Ω—å—à–µ "—Ç–∞–π–Ω–æ–π –º–∞–≥–∏–∏" –≤ –¥–µ–ø–ª–æ–µ: —Å–∞–º–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å (–∞ –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ –∏ –º–µ–Ω—è—Ç—å —á–µ—Ä–µ–∑ pull request) –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Å–≤–æ–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤. DevOps-–∫–æ–º–∞–Ω–¥–µ –º–µ–Ω—å—à–µ —Ä—É—Ç–∏–Ω—ã –ø–æ –Ω–∞–∂–∞—Ç–∏—é –∫–Ω–æ–ø–æ–∫ ‚Äì –≤—Å—ë –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–æ, ArgoCD —Å–∞–º –¥–µ–ø–ª–æ–∏—Ç –ø–æ—Å–ª–µ –º–µ—Ä–∂–∞.

–í–æ-–≤—Ç–æ—Ä—ã—Ö, –ø–æ–≤—ã—à–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∏ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –æ–∫—Ä—É–∂–µ–Ω–∏–π. –ü–æ—Å–∫–æ–ª—å–∫—É –Ω–µ—Ç —Ä—É—á–Ω—ã—Ö —à–∞–≥–æ–≤, —Å–Ω–∏–∂–∞–µ—Ç—Å—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–∏ ("oops, –∑–∞–¥–µ–ø–ª–æ–∏–ª –Ω–µ —Ç–æ—Ç –æ–±—Ä–∞–∑" –∏–ª–∏ "–∑–∞–±—ã–ª –ø—Ä–∏–º–µ–Ω–∏—Ç—å –æ–¥–∏–Ω –∏–∑ YAML-–æ–≤"). –í—Å–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –æ–ø–∏—Å–∞—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, —á–∞—Å—Ç–æ –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É "–æ–¥–∏–Ω —à–∞–±–ª–æ–Ω + overlay –Ω–∞ —Ä–∞–∑–Ω—ã–µ —Å—Ä–µ–¥—ã" ‚Äì —ç—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ dev, staging, prod –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ—Ö–æ–∂–∏, —Ä–∞–∑–ª–∏—á–∏—è –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—Ç—Å—è. GitOps —Ç–∞–∫–∂–µ –æ–±–ª–µ–≥—á–∞–µ—Ç Disaster Recovery: –µ—Å–ª–∏ –∫–ª–∞—Å—Ç–µ—Ä —É–ø–∞–ª, —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–æ–≤—ã–π –º–æ–∂–Ω–æ, –ø—Ä–æ—Å—Ç–æ "—Å–∫–æ—Ä–º–∏–≤" –µ–º—É —Ç–æ—Ç –∂–µ —Ä–µ–ø–æ —Å –∫–æ–Ω—Ñ–∏–≥–∞–º–∏ ‚Äì ArgoCD –Ω–∞—Ç—è–Ω–µ—Ç –≤—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫–∞–∫ –±—ã–ª–æ.

–ò–∑ –ø–ª—é—Å–æ–≤ –µ—â—ë ‚Äì –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞. –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ production-–º–∞–Ω–∏—Ñ–µ—Å—Ç–∞—Ö –ø—Ä–æ—Ö–æ–¥—è—Ç code review –¥–≤—É–º—è –ª—é–¥—å–º–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä. –ò –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–∞–≤–∞—Ç—å –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø CI –∏–ª–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –∫ —Å–∞–º–æ–º—É –∫–ª–∞—Å—Ç–µ—Ä—É ‚Äì –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é. ArgoCD —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–∞–≤–∞–º–∏ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞, –∞ –∏—Å—Ö–æ–¥—è—â–∏–π –Ω–∞—Ä—É–∂—É –¥–æ—Å—Ç—É–ø —É –Ω–µ–≥–æ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π (—Ç–æ–ª—å–∫–æ —á–∏—Ç–∞—Ç—å Git). –≠—Ç–æ —É–º–µ–Ω—å—à–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å –¥–ª—è –∞—Ç–∞–∫.

–¢–µ–ø–µ—Ä—å –æ —Å–ª–æ–∂–Ω–æ—Å—Ç—è—Ö. –í–Ω–µ–¥—Ä–µ–Ω–∏–µ GitOps —Ç—Ä–µ–±—É–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –∫—É–ª—å—Ç—É—Ä—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤. –°—Ç–æ–ª–∫–Ω—É–ª—Å—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å —Ç–µ–º, —á—Ç–æ –Ω–µ –≤—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –≥–æ—Ç–æ–≤—ã –ø—Ä–∞–≤–∏—Ç—å YAML-–º–∞–Ω–∏—Ñ–µ—Å—Ç—ã ‚Äì –∫–æ–º—É-—Ç–æ —ç—Ç–æ —Å–ª–æ–∂–Ω–æ, –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å –æ–±—É—á–∞—Ç—å –æ—Å–Ω–æ–≤–∞–º Kubernetes-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π. –ï—â—ë –º–æ–º–µ–Ω—Ç ‚Äì —Å–µ–∫—Ä–µ—Ç—ã. –î–µ—Ä–∂–∞—Ç—å –∏—Ö –≤ Git (–¥–∞–∂–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º–∏) –º–æ–∂–Ω–æ, –Ω–æ –º—ã –ø—Ä–µ–¥–ø–æ—á–ª–∏ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç: –≤ Git —Ö—Ä–∞–Ω–∏–º —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å–µ–∫—Ä–µ—Ç—ã, –∞ —Å–∞–º–∏ —Å–µ–∫—Ä–µ—Ç—ã —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ Vault. ArgoCD, –∫–æ–Ω–µ—á–Ω–æ, –Ω–µ —Ç—è–Ω–µ—Ç –∏—Ö –∏–∑ Vault –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–Ω—É–∂–µ–Ω –ª–∏–±–æ –ø–ª–∞–≥–∏–Ω, –ª–∏–±–æ –≤—Ä—É—á–Ω—É—é –æ–±–Ω–æ–≤–ª—è—Ç—å K8s Secret). –ë—ã–ª–∏ –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω—é–∞–Ω—Å—ã: –Ω–∞–ø—Ä–∏–º–µ—Ä, –∞–≤—Ç–æ-–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (HPA) –º–µ–Ω—è–µ—Ç —á–∏—Å–ª–æ —Ä–µ–ø–ª–∏–∫ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ, –∏–∑-–∑–∞ —ç—Ç–æ–≥–æ ArgoCD –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–ª drift –ø–æ Deployment, –ø—Ä–∏—à–ª–æ—Å—å –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –µ–º—É –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —ç—Ç–∏—Ö –ø–æ–ª–µ–π. –¢–æ –µ—Å—Ç—å –Ω–∞–¥–æ –ø—Ä–æ–¥—É–º—ã–≤–∞—Ç—å, –∫–∞–∫–∏–µ –ø–æ–ª—è/—Ä–µ—Å—É—Ä—Å—ã ArgoCD –Ω–µ –¥–æ–ª–∂–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ–±—ã –æ–Ω –∑—Ä—è –Ω–µ –±–µ—Å–ø–æ–∫–æ–∏–ª.

–í —Ü–µ–ª–æ–º, –º–æ–π –æ–ø—ã—Ç –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–π: –ø–æ—Å–ª–µ –Ω–µ–±–æ–ª—å—à–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥–∞ –æ—á–µ–Ω—å –æ—Ü–µ–Ω–∏–ª–∞, —á—Ç–æ "–¥–µ–ø–ª–æ–π = merge PR". –£–º–µ–Ω—å—à–∏–ª–æ—Å—å —á–∏—Å–ª–æ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º, —É—Å–∫–æ—Ä–∏–ª—Å—è –≤—ã–ø—É—Å–∫ —Ñ–∏—á (–º–µ–Ω—å—à–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ "–ø–æ–∑–æ–≤–∏—Ç–µ DevOps, —á—Ç–æ–±—ã –≤—ã–∫–∞—Ç–∏–ª"). –ù–æ –Ω—É–∂–Ω–æ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Ä–µ–º—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫—É ArgoCD, —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ä–µ–ø–æ –∏ –æ–±—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —ç—Ç–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º. –ï—Å–ª–∏ —ç—Ç–æ–≥–æ –Ω–µ —Å–¥–µ–ª–∞—Ç—å, –º–æ–∂–µ—Ç –±—ã—Ç—å —Ö–∞–æ—Å —Å Pull Request-–∞–º–∏ –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏. –ù–æ –∫–æ–≥–¥–∞ –≤—Å—ë –Ω–∞–ª–∞–¥–∏—Ç—Å—è, GitOps —Ä–µ–∞–ª—å–Ω–æ —É–ø—Ä–æ—â–∞–µ—Ç –∂–∏–∑–Ω—å –∏ Dev, –∏ Ops.



---

## ‚ùì 93. –û–±—ä—è—Å–Ω–∏ —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–º –∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ö–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ —Ç—ã –±—ã –≤—ã–±—Ä–∞–ª –¥–ª—è Java-—Å–µ—Ä–≤–∏—Å–∞, –µ—Å–ª–∏ –≤–Ω–µ–∑–∞–ø–Ω–æ –≤—ã—Ä–æ—Å–ª–∞ –Ω–∞–≥—Ä—É–∑–∫–∞?


–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–∑–Ω–∞—á–∞–µ—Ç —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –æ–¥–Ω–æ–π –º–∞—à–∏–Ω—ã/–∏–Ω—Å—Ç–∞–Ω—Å–∞: –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–∞—Ç—å –Ω–∞—à–µ–º—É Java-—Å–µ—Ä–≤–∏—Å—É –±–æ–ª—å—à–µ –ø–∞–º—è—Ç–∏, –±–æ–ª—å—à–µ CPU (–ø–µ—Ä–µ–π—Ç–∏ —Å 2 vCPU –Ω–∞ 8 vCPU, —Å 4 –ì–ë RAM –Ω–∞ 16 –ì–ë). –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äì —ç—Ç–æ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —á–∏—Å–ª–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–µ –æ–¥–∏–Ω —Å–µ—Ä–≤–∏—Å, –∞ –ø—è—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ (–Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É–∑–ª–∞—Ö –∏–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö) –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –º–µ–∂–¥—É –Ω–∏–º–∏.

–ï—Å–ª–∏ –Ω–∞–≥—Ä—É–∑–∫–∞ –≤—ã—Ä–æ—Å–ª–∞ –≤–Ω–µ–∑–∞–ø–Ω–æ –∏ —Å–µ—Ä–≤–∏—Å –ø–µ—Ä–µ—Å—Ç–∞–ª —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è, –ø–µ—Ä–≤–æ–µ, –æ —á—ë–º –¥—É–º–∞—é ‚Äì –º–æ–∂–Ω–æ –ª–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ. –í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–º –º–∏—Ä–µ –æ–±—ã—á–Ω–æ –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–æ –¥–∞—ë—Ç –ª—É—á—à–µ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∏ –≥–∏–±–∫–æ—Å—Ç—å. –î–ª—è Java-—Å–µ—Ä–≤–∏—Å–∞ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –ø–æ–¥–Ω—è—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –æ–Ω –≤ Kubernetes, —É–≤–µ–ª–∏—á–∏—Ç—å replicas Deployment-–∞). –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π –º–∞—Å—à—Ç–∞–± –ª–µ–≥–∫–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã (—á–µ—Ä–µ–∑ load balancer –∏–ª–∏ Service –≤ K8s). –ò –Ω–µ—Ç –≤–µ—Ä—Ö–Ω–µ–≥–æ –ø—Ä–µ–¥–µ–ª–∞: –º–æ–∂–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å, –ø–æ–∫–∞ —Ä–µ—Å—É—Ä—Å—ã –ø–æ–∑–≤–æ–ª—è—é—Ç, –¥–æ–±–∞–≤–ª—è—è –≤—Å—ë –Ω–æ–≤—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã.

–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–∂–µ –≤–∞—Ä–∏–∞–Ω—Ç, –Ω–æ –æ–Ω –æ–≥—Ä–∞–Ω–∏—á–µ–Ω "–∂–µ–ª–µ–∑–æ–º" –∏ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —É–±—ã–≤–∞—é—â—É—é —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å. –ù–∞–ø—Ä–∏–º–µ—Ä, Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –¥–∞–ª–∏ 64 –ì–ë –ø–∞–º—è—Ç–∏ ‚Äì –∞ –æ–Ω–æ –º–æ–∂–µ—Ç —É–ø–µ—Ä–µ—Ç—å—Å—è –≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å–±–æ—Ä—â–∏–∫–∞ –º—É—Å–æ—Ä–∞ (GC –¥–æ–ª—å—à–µ —Å–æ–±–∏—Ä–∞–µ—Ç –±–æ–ª—å—à–æ–π heap) –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –Ω–µ —É–º–µ—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø–∞—Ä–∞–ª–ª–µ–ª–∏—Ç—å —Ä–∞–±–æ—Ç—É –Ω–∞ 32 —è–¥—Ä–∞—Ö. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π –º–∞—Å—à—Ç–∞–± –∑–∞—á–∞—Å—Ç—É—é —Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –±–æ–ª–µ–µ –º–æ—â–Ω—É—é –º–∞—à–∏–Ω—É, —á—Ç–æ –º–æ–∂–µ—Ç –æ–∑–Ω–∞—á–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π. –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π –∂–µ ‚Äì –¥–æ–±–∞–≤–∏–ª–∏ –Ω–æ–≤—ã–π –∏–Ω—Å—Ç–∞–Ω—Å, —Ç—Ä–∞—Ñ–∏–∫ –ø–ª–∞–≤–Ω–æ –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏–ª—Å—è, —Å–∏—Å—Ç–µ–º–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –≤ —Ä–∞–±–æ—Ç–µ.

–í—ã–±–∏—Ä–∞–π –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å –¥–ª—è Java-—Å–µ—Ä–≤–∏—Å–∞ –ø—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ —Å–µ—Ä–≤–∏—Å stateless –∏–ª–∏ –º–æ–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å —Å–µ—Å—Å–∏–∏. –ö–æ–Ω–µ—á–Ω–æ, –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —É–±–µ–¥–∏—Å—å, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –º–µ—à–∞–ª–æ –±—ã –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–ø–∏—é. –ï—Å–ª–∏ –∂–µ –µ—Å—Ç—å –∫–∞–∫–æ–µ-—Ç–æ —É–∑–∫–æ–µ –º–µ—Å—Ç–æ, –Ω–µ –ø–æ–∑–≤–æ–ª—è—é—â–µ–µ –ª–µ–≥–∫–æ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–æ–≤–∞—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≤—è–∑–∞–Ω–æ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ), —Ç–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ, –Ω–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –ª—É—á—à–µ –ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ø–æ–¥ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Ä–æ—Å—Ç. –í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ —á–∞—Å—Ç–æ –¥–µ–ª–∞—é—Ç –∫–æ–º–±–∏–Ω–∞—Ü–∏—é: –Ω–µ–º–Ω–æ–≥–æ –ø–æ–¥–Ω—è—Ç—å –ª–∏–º–∏—Ç—ã (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ), —á—Ç–æ–±—ã —Å—Ä–∞–∑—É —Å–Ω—è—Ç—å –æ—Å—Ç—Ä—É—é –±–æ–ª—å, –∏ —Ç—É—Ç –∂–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ, —á—Ç–æ–±—ã –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –ø–∏–∫–µ —Å–∏—Å—Ç–µ–º–∞ —Å–∞–º–∞ –¥–æ–±–∞–≤–ª—è–ª–∞ –Ω–æ–≤—ã–µ –Ω–æ–¥—ã.



---

## ‚ùì 94. –ß—Ç–æ —Ç–∞–∫–æ–µ –≤—ã—Å–æ–∫–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å (High Availability) –∏ –∫–∞–∫ –µ—ë –¥–æ–±–∏—Ç—å—Å—è? –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç–≤–æ–π —Å–µ—Ä–≤–∏—Å –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –ø—Ä–æ—Å—Ç–æ—è ‚Äî –∫–∞–∫–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è —Ç—ã –ø—Ä–∏–º–µ–Ω–∏—à—å?


–í—ã—Å–æ–∫–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å (High Availability, HA) –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–∞–∂–µ –ø—Ä–∏ —Å–±–æ—è—Ö –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. –ü—Ä–æ—â–µ –≥–æ–≤–æ—Ä—è, –º—ã —Å—Ç—Ä–µ–º–∏–º—Å—è –∏—Å–∫–ª—é—á–∏—Ç—å –µ–¥–∏–Ω—É—é —Ç–æ—á–∫—É –æ—Ç–∫–∞–∑–∞ (Single Point of Failure), —á—Ç–æ–±—ã –ø–∞–¥–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —É–∑–ª–∞ –∏–ª–∏ —Å–µ—Ä–≤–∏—Å–∞ –Ω–µ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –ø–æ–ª–Ω–æ–π –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

–ß—Ç–æ–±—ã –¥–æ–±–∏—Ç—å—Å—è HA, –ø—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ –∑–∞–ø—É—Å–∫–∞—é—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. –î–ª—è –Ω–∞—à–µ–≥–æ Java-—Å–µ—Ä–≤–∏—Å–∞ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç –∏–º–µ—Ç—å –Ω–µ –æ–¥–∏–Ω –∏–Ω—Å—Ç–∞–Ω—Å, –∞, —Å–∫–∞–∂–µ–º, –¥–≤–∞ –∏–ª–∏ –±–æ–ª–µ–µ, –æ–±—Å–ª—É–∂–∏–≤–∞—é—â–∏—Ö —Ç—Ä–∞—Ñ–∏–∫ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ. –ò—Ö —Å—Ç–∞–≤—è—Ç –∑–∞ load balancer, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–∫–ª—é—á–∞–µ—Ç –∏–∑ –º–∞—Ä—à—Ä—É—Ç–∞ —É–ø–∞–≤—à–∏–π –∏–Ω—Å—Ç–∞–Ω—Å. –¢–∞–∫, –µ—Å–ª–∏ –æ–¥–∏–Ω —Å–µ—Ä–≤–µ—Ä –ø–æ–π–¥—ë—Ç –≤ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É –∏–ª–∏ —É–º—Ä—ë—Ç, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –≤–æ–∑—å–º—É—Ç –Ω–∞ —Å–µ–±—è –µ–≥–æ —Ä–∞–±–æ—Ç—É ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —ç—Ç–æ–≥–æ –ø–æ—á—Ç–∏ –Ω–µ –∑–∞–º–µ—Ç—è—Ç.

–¢–∞–∫–∂–µ –≤–∞–∂–Ω–æ —Ä–∞–∑–Ω–µ—Å—Ç–∏ —ç—Ç–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –ø–æ —Ä–∞–∑–Ω—ã–º –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–º –∑–æ–Ω–∞–º/—É–∑–ª–∞–º. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ –æ–±–ª–∞–∫–µ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—é—Ç —Å–µ—Ä–≤–∏—Å –º–∏–Ω–∏–º—É–º –≤ –¥–≤—É—Ö –∑–æ–Ω–∞—Ö (AZ) ‚Äì –µ—Å–ª–∏ –≤ –æ–¥–Ω–æ–π —Å–ª—É—á–∏–ª–∞—Å—å –∞–≤–∞—Ä–∏—è, —Ç—Ä–∞—Ñ–∏–∫ –ø–æ–π–¥—ë—Ç –≤ –¥—Ä—É–≥—É—é. –í Kubernetes –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å anti-affinity –∏ topology spread constraints, —á—Ç–æ–±—ã –ø–æ–¥—ã —Å–µ—Ä–≤–∏—Å–∞ –Ω–µ –æ–∫–∞–∑–∞–ª–∏—Å—å –Ω–∞ –æ–¥–Ω–æ–º —Ö–æ—Å—Ç–µ. –ö—Ä–æ–º–µ —É—Ä–æ–≤–Ω—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Å–º–æ—Ç—Ä—è—Ç –∏ –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö: –±–∞–∑—É –¥–µ–ª–∞—é—Ç –∫–ª–∞—Å—Ç–µ—Ä–Ω–æ–π (—Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è master-slave –∏–ª–∏ multi-master), —á—Ç–æ–±—ã –ø–∞–¥–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —É–∑–ª–∞ –ë–î –Ω–µ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–æ —Ä–∞–±–æ—Ç—É. –¢–æ –∂–µ —Å –æ—á–µ—Ä–µ–¥—è–º–∏, –∫—ç—à–∞–º–∏ ‚Äì –≤—Å—ë –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è.

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è HA –≤–∫–ª—é—á–∞—é—Ç –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ/–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —É–ø–∞–≤—à–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä—ã —Ç–∏–ø–∞ Kubernetes —ç—Ç–æ –¥–µ–ª–∞—é—Ç: –µ—Å–ª–∏ –ø–æ–¥ —É–ø–∞–ª, –æ–Ω –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç –Ω–æ–≤—ã–π. –¢–∞–∫–∂–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –º–µ—Ö–∞–Ω–∏–∑–º heartbeat: –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –∫–ª–∞—Å—Ç–µ—Ä–Ω–æ–º –ü–û –Ω–æ–¥—ã –ø–∏–Ω–≥—É—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞, –∏ –µ—Å–ª–∏ –ª–∏–¥–µ—Ä –ø—Ä–æ–ø–∞–ª, –¥—Ä—É–≥–æ–π –±–µ—Ä—ë—Ç –Ω–∞ —Å–µ–±—è –µ–≥–æ —Ä–æ–ª—å (failover).–ü—Ä–∏–º–µ–Ω—è–π –º–∞–∫—Å–∏–º—É–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –ø—Ä–∞–∫—Ç–∏–∫: –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ —Å–µ—Ä–≤–∏—Å–∞ + load balancer, –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–æ–Ω —Ä–∞–∑–º–µ—â–µ–Ω–∏—è, —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —Ö—Ä–∞–Ω–∏–ª–∏—â –∏ –∫—ç—à–µ–π, –ø–ª—é—Å —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –ø–æ–º–æ—â—å—é Chaos Monkey –æ—Ç–∫–ª—é—á–∞—Ç—å —Å–ª—É—á–∞–π–Ω—ã–π —É–∑–µ–ª –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å, —á—Ç–æ –≤—Å—ë –æ–∫). –ò—Ç–æ–≥: –≤—ã—Å–æ–∫–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è –∑–∞ —Å—á—ë—Ç –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏ –∏ –±—ã—Å—Ç—Ä–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ —Å–±–æ–∏.



---

## ‚ùì 95. –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞? –ù–∞–ø—Ä–∏–º–µ—Ä, –∑–Ω–∞–∫–æ–º –ª–∏ —Ç—ã —Å Horizontal Pod Autoscaler –≤ Kubernetes –∏–ª–∏ –∞–≤—Ç–æ-–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω –≤ –æ–±–ª–∞–∫–µ?


–ê–≤—Ç–æ-–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–∏—Å—Ç–µ–º–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—Ç—å –∏–ª–∏ —É–±–∞–≤–ª—è—Ç—å —Ä–µ—Å—É—Ä—Å—ã –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π. –í Kubernetes –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä ‚Äì Horizontal Pod Autoscaler (HPA). –û–Ω –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é CPU utilization, –Ω–æ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –Ω–∞ –ø–∞–º—è—Ç—å –∏–ª–∏ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏) –∏, –µ—Å–ª–∏ –≤–∏–¥–∏—Ç, —á—Ç–æ –Ω–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–≤—ã—à–∞–µ—Ç —Ü–µ–ª–µ–≤–æ–π —É—Ä–æ–≤–µ–Ω—å, —Ç–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ø–ª–∏–∫ –ø–æ–¥–∞, –∞ –µ—Å–ª–∏ –Ω–∞–≥—Ä—É–∑–∫–∞ —É–ø–∞–ª–∞ –Ω–∏–∂–µ –ø–æ—Ä–æ–≥–∞ ‚Äì —É–º–µ–Ω—å—à–∞–µ—Ç.

–ù–∞–ø—Ä–∏–º–µ—Ä, HPA –¥–ª—è Java-—Å–µ—Ä–≤–∏—Å–∞: —Ü–µ–ª–µ–≤–∞—è —É—Ç–∏–ª–∏–∑–∞—Ü–∏—è CPU 50%. –ï—Å–ª–∏ –∫–∞–∂–¥—ã–π –ø–æ–¥ –Ω–∞–≥—Ä—É–∂–µ–Ω –≤—ã—à–µ 50% CPU, HPA –Ω–∞—á–Ω—ë—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ–¥—ã (–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –º–∞–∫—Å–∏–º—É–º–∞). –°–∫–∞–∂–µ–º, —É –Ω–∞—Å –æ–±—ã—á–Ω–æ 3 —Ä–µ–ø–ª–∏–∫–∏, –∞ —Ç—É—Ç –Ω–∞–≥—Ä—É–∑–∫–∞ –≤—ã—Ä–æ—Å–ª–∞ ‚Äì HPA —Ä–∞—Å—à–∏—Ä–∏–ª –¥–æ 6. –ö–æ–≥–¥–∞ –ø–∏–∫ –ø—Ä–æ—à—ë–ª –∏ CPU "–ø—Ä–æ—Å–µ–ª", –æ–Ω –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —Å–æ–∫—Ä–∞—Ç–∏—Ç –æ–±—Ä–∞—Ç–Ω–æ –¥–æ 3, —á—Ç–æ–±—ã —Ä–µ—Å—É—Ä—Å—ã –Ω–µ –ø—Ä–æ—Å—Ç–∞–∏–≤–∞–ª–∏. –í Kubernetes —ç—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å Metrics Server (–¥–ª—è CPU/Memory) –∏–ª–∏ Prometheus Adapter (–¥–ª—è custom-–º–µ—Ç—Ä–∏–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤). –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–≤–æ–¥–∏—Ç—Å—è –∫ –æ–±—ä–µ–∫—Ç—É HorizontalPodAutoscaler, –≥–¥–µ —É–∫–∞–∑—ã–≤–∞–µ—à—å deployment, –º–µ—Ç—Ä–∏–∫—É –∏ –ø—Ä–µ–¥–µ–ª—ã (min/max —Ä–µ–ø–ª–∏–∫, —Ü–µ–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ).

–í –æ–±–ª–∞—á–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö –∞–≤—Ç–æ-–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ VM —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Ö–æ–∂–∏–º –æ–±—Ä–∞–∑–æ–º: –Ω–∞–ø—Ä–∏–º–µ—Ä, AWS Auto Scaling Group –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ CPU –∏–ª–∏ –¥–∞–∂–µ –ø–æ –¥–ª–∏–Ω–µ –æ—á–µ—Ä–µ–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏–π. –û–Ω–∞ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å EC2-–∏–Ω—Å—Ç–∞–Ω—Å—ã –∑–∞ load balancer-–æ–º, –µ—Å–ª–∏ —Å—Ä–µ–¥–Ω—è—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–≤—ã—à–∞–µ—Ç threshold. –ò–ª–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, Lambda-—Ñ—É–Ω–∫—Ü–∏–∏ –≤ AWS —Å–∞–º–∏ –ø–æ —Å–µ–±–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É—é—Ç—Å—è –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π –±–µ–∑ —É—á–∞—Å—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–í–∞–∂–Ω–æ –ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∞–≤—Ç–æ-—Å–∫–µ–π–ª–∏–Ω–≥–∞ —É—á–µ—Å—Ç—å –≤—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞ –Ω–æ–≤—ã—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –∏ "—Ö–æ–ª–æ–¥–Ω—ã–µ —Å—Ç–∞—Ä—Ç—ã". –î–ª—è Java-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∑–∞–ø—É—Å–∫ –º–æ–∂–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å –¥–µ—Å—è—Ç–∫–∏ —Å–µ–∫—É–Ω–¥, –ø–æ—ç—Ç–æ–º—É –Ω–µ–ª—å–∑—è –∂–¥–∞—Ç—å –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ ‚Äì —Å—Ç–∞–≤—è—Ç –ø–æ—Ä–æ–≥–∏ —Å –∑–∞–ø–∞—Å–æ–º, —á—Ç–æ–±—ã –Ω–æ–≤—ã–µ –ø–æ–¥—ã —É—Å–ø–µ–ª–∏ –ø–æ–¥–Ω—è—Ç—å—Å—è –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ —Å—Ç–∞—Ä—ã–µ –Ω–∞—á–Ω—É—Ç —Ç–æ—Ä–º–æ–∑–∏—Ç—å. –¢–∞–∫–∂–µ –Ω—É–∂–Ω–æ –∑–∞–¥–∞—Ç—å —Ä–∞–∑—É–º–Ω—ã–µ –ø—Ä–µ–¥–µ–ª—ã, —á—Ç–æ–±—ã –∞–≤—Ç–æ-—Å–∫–µ–π–ª–∏–Ω–≥ –Ω–µ —É—à—ë–ª –≤ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–∞–≥ –≤ –∫–æ–¥–µ, –≤—ã–∑—ã–≤–∞—é—â–∏–π —É—Ç–µ—á–∫—É –ø–∞–º—è—Ç–∏, –Ω–µ –¥–æ–ª–∂–µ–Ω –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å—Å—è –¥–æ –≤—ã–∫–∞—á–∏–≤–∞–Ω–∏—è –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤). –í —Ü–µ–ª–æ–º, HPA –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –æ–±–ª–µ–≥—á–∞–µ—Ç –∂–∏–∑–Ω—å: –Ω–µ –Ω–∞–¥–æ –≤—Ä—É—á–Ω—É—é —Å–∏–¥–µ—Ç—å –Ω–æ—á—å—é –∏ –¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ–¥—ã ‚Äì –∫–ª–∞—Å—Ç–µ—Ä —Å–∞–º –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫—É.



---

## ‚ùì 96. –ö–∞–∫ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã? –ù–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç, –µ—Å–ª–∏ –æ–¥–∏–Ω –∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤—ã–π–¥–µ—Ç –∏–∑ —Å—Ç—Ä–æ—è? –ö–∞–∫–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å, —á—Ç–æ–±—ã —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–ª–∞ —Ä–∞–±–æ—Ç–∞—Ç—å (—Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è, —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏, –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –∑–∞–ø–∞—Å–Ω–æ–π —Ä–µ—Å—É—Ä—Å)?


–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è –∫–æ–º–±–∏–Ω–∞—Ü–∏–µ–π –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –≥—Ä–∞–º–æ—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫. –ï—Å–ª–∏ –æ–¥–∏–Ω –∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø–∞–¥–∞–µ—Ç, –¥—Ä—É–≥–æ–π –¥–æ–ª–∂–µ–Ω –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç—å –µ–≥–æ –∑–∞–¥–∞—á–∏.

–í–æ-–ø–µ—Ä–≤—ã—Ö, –∫–∞–∫ —É–∂–µ –æ–±—Å—É–∂–¥–∞–ª–∏, –Ω–∞ —É—Ä–æ–≤–Ω–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ + –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –Ω–∞–≥—Ä—É–∑–∫–∏. –¢–æ–≥–¥–∞ –≤—ã—Ö–æ–¥ –∏–∑ —Å—Ç—Ä–æ—è –æ–¥–Ω–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Ç–æ–º—É, —á—Ç–æ LB –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç –∫ –Ω–µ–º—É —Å–ª–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫, –∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ–±—Å–ª—É–∂–∏–≤–∞—é—Ç—Å—è –æ—Å—Ç–∞–≤—à–∏–º–∏—Å—è. –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä —Ç–∏–ø–∞ Kubernetes –ø–æ–∑–∞–±–æ—Ç–∏—Ç—Å—è –æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ —É–ø–∞–≤—à–µ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∏–ª–∏ –ø–æ–¥–Ω—è—Ç–∏–∏ –Ω–æ–≤–æ–≥–æ –≤–º–µ—Å—Ç–æ –Ω–µ–≥–æ.

–í–æ-–≤—Ç–æ—Ä—ã—Ö, —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –∑–∞–ø–∞—Å–Ω—ã–µ —É–∑–ª—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: –æ–±—ã—á–Ω–æ –¥–µ–ª–∞—é—Ç primary-replica —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é. –ï—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä –±–∞–∑—ã —É–ø–∞–ª, –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è (–≤—Ä—É—á–Ω—É—é –∏–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–ª–∞—Å—Ç–µ—Ä–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä) –Ω–∞ —Ä–µ–ø–ª–∏–∫—É, –∫–æ—Ç–æ—Ä–∞—è —Å—Ç–∞–Ω–µ—Ç –Ω–æ–≤–æ–π –æ—Å–Ω–æ–≤–Ω–æ–π. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è –∫—ç—à–µ–π (Redis), –±—Ä–æ–∫–µ—Ä–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π ‚Äì —á–∞—Å—Ç–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç –∫–ª–∞—Å—Ç–µ—Ä –≤ —Ä–µ–∂–∏–º–µ master/slave –∏–ª–∏ quorum, —á—Ç–æ–±—ã –ø—Ä–∏ –≤—ã–ø–∞–¥–µ–Ω–∏–∏ –æ–¥–Ω–æ–≥–æ —É–∑–ª–∞ –∫–ª–∏–µ–Ω—Ç—ã –ø–µ—Ä–µ–∫–ª—é—á–∞–ª–∏—Å—å –Ω–∞ –¥—Ä—É–≥–æ–π. –í –æ–±–ª–∞–∫–µ –µ—Å—Ç—å —É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ —Ä–µ—à–µ–Ω–∏—è ‚Äì —Ç–æ—Ç –∂–µ AWS RDS —É–º–µ–µ—Ç Multi-AZ: –±–∞–∑–∞ —Ç–µ–Ω—å—é —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –≤–æ –≤—Ç–æ—Ä–æ–π AZ, –∏ –ø—Ä–∏ —Å–±–æ–µ –ø–µ—Ä–≤–æ–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π —Ñ–µ–π–ª–æ–≤–µ—Ä.

–í-—Ç—Ä–µ—Ç—å–∏—Ö, –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: –Ω—É–∂–Ω–æ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∏ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—é. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –∑–∞–≤–∏—Å–∏–º—ã–π —Å–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –Ω–∞—à —Å–µ—Ä–≤–∏—Å –Ω–µ –¥–æ–ª–∂–µ–Ω —Å—Ä–∞–∑—É "—É–ø–∞—Å—Ç—å –≤ –æ–±–º–æ—Ä–æ–∫". –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ—Ç—Ä–∞–∏ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π ‚Äì –≤–¥—Ä—É–≥ –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–±–æ–π, –∏ —á–µ—Ä–µ–∑ —Å–µ–∫—É–Ω–¥—É –ø–æ–≤—Ç–æ—Ä –ø—Ä–æ–π–¥—ë—Ç. –ù–æ —á—Ç–æ–±—ã –Ω–µ —É—Å—É–≥—É–±–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É, —Å—Ç–∞–≤–∏–º circuit breaker: –µ—Å–ª–∏ –≤–∏–¥–∏–º, —á—Ç–æ —Å–µ—Ä–≤–∏—Å B –ª–µ–∂–∏—Ç –∏ –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –∫ –Ω–µ–º—É —Ñ–µ–π–ª—è—Ç—Å—è, –º—ã "—Ä–∞–∑–º—ã–∫–∞–µ–º —Ü–µ–ø—å" ‚Äì –≤—Ä–µ–º–µ–Ω–Ω–æ –ø–µ—Ä–µ—Å—Ç–∞—ë–º —Ö–æ–¥–∏—Ç—å –∫ –Ω–µ–º—É –∏ —Å—Ä–∞–∑—É –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—à–∏–±–∫—É/—Ñ–æ–ª–±—ç–∫. –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–∏—Ç—É–∞—Ü–∏—é, —á—Ç–æ —Ç—ã—Å—è—á–∏ –ø–æ—Ç–æ–∫–æ–≤ –≤–∏—Å—è—Ç –≤ –ø–æ–ø—ã—Ç–∫–∞—Ö –¥–æ—Å—Ç—É—á–∞—Ç—å—Å—è –¥–æ —É–ø–∞–≤—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞. –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –∏–º–µ—Ç—å fallback: –Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —Å–µ—Ä–≤–∏—Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –º—ã –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –±–µ–∑ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π, –Ω–æ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–∞–±–æ—Ç–∞–µ—Ç.

–†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ (backups) ‚Äì —ç—Ç–æ —Ç–æ–∂–µ —á–∞—Å—Ç—å –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏, —Ö–æ—Ç—è —Å–∫–æ—Ä–µ–µ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ —Å–µ—Ä—å—ë–∑–Ω—ã—Ö –∞–≤–∞—Ä–∏–π. –ù–∞–ø—Ä–∏–º–µ—Ä, —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã –±–∞–∑—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–æ–¥–Ω—è—Ç—å –Ω–æ–≤—É—é –±–∞–∑—É, –µ—Å–ª–∏ –≤—Å–µ —É–∑–ª—ã –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Ç–µ—Ä–Ω–æ–π –±–∞–∑—ã –≤–¥—Ä—É–≥ –ø–æ—Ç–µ—Ä—è–Ω—ã. –í –∏–¥–µ–∞–ª–µ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è —Ç–∞–∫, —á—Ç–æ–±—ã –ª—é–±–æ–π –æ–¥–∏–Ω–æ—á–Ω—ã–π —Å–±–æ–π –Ω–µ –ø—Ä–∏–≤—ë–ª –∫ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ: –ø–æ—ç—Ç–æ–º—É –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç ‚Äì "—á—Ç–æ –µ—Å–ª–∏ –æ–Ω —É–ø–∞–¥—ë—Ç?" ‚Äì –∏ –¥–æ–±–∞–≤–ª—è–µ–º –ª–∏–±–æ –¥—É–±–ª—å, –ª–∏–±–æ –æ–±—Ö–æ–¥–Ω–æ–π –ø—É—Ç—å. –ò –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º: –Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç –æ—Ç–∫–ª—é—á–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ (chaos engineering), —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–µ–∞–≥–∏—Ä—É—é—Ç (–ø–æ–¥–Ω–∏–º–∞—é—Ç—Å—è, —Ä–µ—Ç—Ä–∞—è—Ç, –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç—Å—è).



---

## ‚ùì 97. –ü—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å –ª–∏ —Ç–µ–±–µ —Å—Ç–∞–ª–∫–∏–≤–∞—Ç—å—Å—è —Å –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã–º–∏ —Å–±–æ—è–º–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ? –ö–∞–∫ —Ç—ã –ø—Ä–æ–≤–æ–¥–∏–ª —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –∏–ª–∏ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –∫ –Ω–∞–≥—Ä—É–∑–∫–∞–º (–º–æ–∂–µ—Ç –±—ã—Ç—å, —Å –ø–æ–º–æ—â—å—é Chaos Monkey –∏–ª–∏ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)?


–î–∞, —Å–±–æ–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ —Å–ª—É—á–∞–ª–∏—Å—å ‚Äì –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç –Ω–∏—Ö –Ω–∏–∫—Ç–æ –Ω–µ –∑–∞—Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω. –ì–ª–∞–≤–Ω–æ–µ ‚Äì –∫–∞–∫ —Å–∏—Å—Ç–µ–º–∞ –∏ –∫–æ–º–∞–Ω–¥–∞ –Ω–∞ –Ω–∏—Ö —Ä–µ–∞–≥–∏—Ä—É—é—Ç. –ü–æ–º–Ω—é —Å–ª—É—á–∞–π: —É–ø–∞–ª —Ü–µ–ª—ã–π —É–∑–µ–ª Kubernetes (–Ω–æ–¥–∞ –≤—ã—à–ª–∞ –∏–∑ —Å—Ç—Ä–æ—è –∏–∑-–∑–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é) –∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–¥–æ–≤ –Ω–∞—à–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ —Ä–∞–∑–æ–º –ø—Ä–æ–ø–∞–ª–∏. –ù–æ —É –Ω–∞—Å –±—ã–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Ä–µ–ø–ª–∏–∫–∏ –Ω–∞ –¥—Ä—É–≥–∏—Ö —É–∑–ª–∞—Ö, –ø–ª—é—Å readiness/liveness-–ø—Ä–æ–±—ã ‚Äì –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –±—ã—Å—Ç—Ä–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–ª –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –Ω–∞ —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –Ω–æ–¥–∞—Ö. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ—á—Ç–∏ –Ω–µ –∑–∞–º–µ—Ç–∏–ª–∏, —Ä–∞–∑–≤–µ —á—Ç–æ –Ω–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö. –≠—Ç–æ—Ç –∏–Ω—Ü–∏–¥–µ–Ω—Ç –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª —Ü–µ–Ω–Ω–æ—Å—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ HA ‚Äì –Ω–∏—á–µ–≥–æ –Ω–µ –ª–µ–≥–ª–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é.

–ß—Ç–æ –∫–∞—Å–∞–µ—Ç—Å—è –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏, –º—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤–Ω–µ–¥—Ä—è–ª–∏ —ç–ª–µ–º–µ–Ω—Ç—ã "chaos engineering". –í –Ω–µ–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–π —Å—Ä–µ–¥–µ (staging) –∑–∞–ø—É—Å–∫–∞–ª–∏ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–∏–ø–∞ Chaos Monkey: —Å–∫—Ä–∏–ø—Ç —Ä–∞–Ω–¥–æ–º–Ω–æ —É–±–∏–≤–∞–ª –ø–æ–¥—ã —Å–µ—Ä–≤–∏—Å–æ–≤ –∏–ª–∏ –æ—Ç–∫–ª—é—á–∞–ª –Ω–æ–¥—ã, –∞ –º—ã —Å–º–æ—Ç—Ä–µ–ª–∏, –≤—ã–¥–µ—Ä–∂–∏—Ç –ª–∏ —Å–∏—Å—Ç–µ–º–∞. –°–Ω–∞—á–∞–ª–∞ –Ω–∞—Ö–æ–¥–∏–ª–∏—Å—å —É–∑–∫–∏–µ –º–µ—Å—Ç–∞ ‚Äì –Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–±–Ω–∞—Ä—É–∂–∏–ª–æ—Å—å, —á—Ç–æ –µ—Å–ª–∏ —É–±–∏—Ç—å –ø–æ–¥ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Ä–µ–ø–ª–∏–∫–µ. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏–ª–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å –ª–æ–≥–∏–∫—É –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∫–æ–Ω–Ω–µ–∫—Ç–∞. –¢–∞–∫–∂–µ —Å–∏–º—É–ª–∏—Ä–æ–≤–∞–ª–∏ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—é: –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ –∑–∞–º–µ–¥–ª—è–ª–∏ –æ—Ç–≤–µ—Ç—ã –æ–¥–Ω–æ–≥–æ –∏–∑ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ (–≤–≤–µ–ª–∏ sleep) –∏ –ø—Ä–æ–≤–µ—Ä—è–ª–∏, —á—Ç–æ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–µ –∑–∞–≤–∏—Å–∞—é—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ ‚Äì —É –Ω–∞—Å —Å—Ç–æ—è–ª–∏ —Ç–∞–π–º–∞—É—Ç—ã –∏ fallback.

–ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º—ã —Ç–æ–∂–µ –ø—Ä–∞–∫—Ç–∏–∫–æ–≤–∞–ª–∏ –ø–µ—Ä–µ–¥ –∫—Ä—É–ø–Ω—ã–º–∏ —Ä–µ–ª–∏–∑–∞–º–∏. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ JMeter –∏ Gatling, —á—Ç–æ–±—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç–æ–∫ –∑–∞–ø—Ä–æ—Å–æ–≤, –ø—Ä–µ–≤—ã—à–∞—é—â–∏–π —Ä–µ–∞–ª—å–Ω—ã–π –ø–∏–∫ –≤ 2-3 —Ä–∞–∑–∞. –¶–µ–ª—å ‚Äì —É–≤–∏–¥–µ—Ç—å, –≥–¥–µ —Å–∏—Å—Ç–µ–º–∞ –Ω–∞—á–Ω—ë—Ç –Ω–µ —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è (bottleneck). –ü–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º —Ç–∞–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä, —É–≤–µ–ª–∏—á–∏–≤–∞–ª–∏ –ª–∏–º–∏—Ç—ã HPA, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–ª–∏ –∑–∞–ø—Ä–æ—Å—ã –∫ –±–∞–∑–µ, –¥–æ–±–∞–≤–ª—è–ª–∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ "–≥–æ—Ä—è—á–∏—Ö" —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö. –û–¥–∏–Ω —Ä–∞–∑ –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã –≤—ã—è–≤–∏–ª–∏, —á—Ç–æ –ø—Ä–∏ –æ—á–µ–Ω—å –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞—à —Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–∞—á–∞–ª –±—Ä–æ—Å–∞—Ç—å –æ—à–∏–±–∫–∏ –∏–∑-–∑–∞ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏ –∑–∞ –≤–Ω–µ—à–Ω–∏–π API ‚Äì –º—ã –¥–æ–±–∞–≤–∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω-–∫–µ—à, –∏ –ø—Ä–æ–±–ª–µ–º–∞ —É—à–ª–∞.

–í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ —Ç–æ–∂–µ –∏–Ω–æ–≥–¥–∞ —É—Å—Ç—Ä–∞–∏–≤–∞–ª–∏ "game days": –ø–ª–∞–Ω–æ–≤–æ –æ—Ç–∫–ª—é—á–∞–ª–∏ –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å —Å–µ—Ä–≤–∏—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã–∫–ª—é—á–∞–ª–∏ –µ–≥–æ Deployment –Ω–∞ –ø–∞—Ä—É –º–∏–Ω—É—Ç) –∏ –ø—Ä–æ–≤–µ—Ä—è–ª–∏, –∫–∞–∫ —Å–∏—Å—Ç–µ–º–∞ –≤–µ–¥—ë—Ç —Å–µ–±—è ‚Äì –¥–æ–ª–∂–Ω—ã —Å—Ä–∞–±–æ—Ç–∞—Ç—å —Ä–µ—Ç—Ä–∞–∏, –∞–ª–µ—Ä—Ç—ã —É–≤–µ–¥–æ–º–∏—Ç—å –∫–æ–º–∞–Ω–¥—É, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ –¥–æ–ª–∂–Ω—ã —Å–∏–ª—å–Ω–æ –ø–æ—Å—Ç—Ä–∞–¥–∞—Ç—å. –¢–∞–∫–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –ø–æ–º–æ–≥–∞—é—Ç —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–µ —Ç–æ–ª—å–∫–æ –∫–æ–¥, –Ω–æ –∏ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –≥–æ—Ç–æ–≤—ã –∫ —Å–±–æ—è–º. –ò –∫–æ–≥–¥–∞ —Å–ª—É—á–∞–µ—Ç—Å—è –Ω–∞—Å—Ç–æ—è—â–∏–π —Å–±–æ–π, —Ç—ã —É–∂–µ –ø—Ä–∏–º–µ—Ä–Ω–æ –∑–Ω–∞–µ—à—å, —á–µ–≥–æ –æ–∂–∏–¥–∞—Ç—å –∏ –∫–∞–∫–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –º–µ—Ä—ã –≤—Å—Ç—É–ø—è—Ç –≤ —Å–∏–ª—É.



---

## ‚ùì 98. –ß—Ç–æ —Ç–∞–∫–æ–µ reverse proxy –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω –≤ –≤–µ–±-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ? –ú–æ–∂–µ—Ç –±—ã—Ç—å, –ø—Ä–∏–≤–µ–¥—ë—à—å –ø—Ä–∏–º–µ—Ä, –∫–∞–∫ –ø—Ä–æ–∫—Å–∏ –∏–ª–∏ API Gateway –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏ –∏ –∫–∞–∫–∏–µ –∑–∞–¥–∞—á–∏ —Ä–µ—à–∞–µ—Ç?


Reverse proxy ‚Äì —ç—Ç–æ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –ø–µ—Ä–µ–∞–¥—Ä–µ—Å—É–µ—Ç –∏—Ö –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä—ã. –ö–ª–∏–µ–Ω—Ç—ã –¥—É–º–∞—é—Ç, —á—Ç–æ –≥–æ–≤–æ—Ä—è—Ç —Å –æ–¥–Ω–∏–º —Å–µ—Ä–≤–µ—Ä–æ–º (–ø—Ä–æ–∫—Å–∏), –∞ —Ç–æ—Ç —É–∂–µ "–∑–∞ –∫—É–ª–∏—Å–∞–º–∏" —Ö–æ–¥–∏—Ç –∫ —Ä–µ–∞–ª—å–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç forward proxy (–∫–æ—Ç–æ—Ä—ã–π —Å—Ç–æ–∏—Ç –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–∫—Å–∏ –¥–ª—è –≤—ã—Ö–æ–¥–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç), reverse proxy —Å—Ç–∞–≤–∏—Ç—Å—è —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã —Å–µ—Ä–≤–µ—Ä–æ–≤ (—Ç–æ –µ—Å—Ç—å –ø–µ—Ä–µ–¥ –Ω–∞—à–∏–º–∏ –±—ç–∫–µ–Ω–¥–∞–º–∏).

–ó–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω: –≤–æ-–ø–µ—Ä–≤—ã—Ö, –¥–ª—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏. –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä ‚Äì Nginx –∏–ª–∏ HAProxy –Ω–∞ –≤—Ö–æ–¥–µ –≤ —Å–∏—Å—Ç–µ–º—É: —É –Ω–∞—Å –µ—Å—Ç—å 10 –∫–æ–ø–∏–π –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞, –º—ã –Ω–µ —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã –∫–ª–∏–µ–Ω—Ç –∑–Ω–∞–ª –ø—Ä–æ –≤—Å–µ 10, –º—ã –¥–∞—ë–º –µ–º—É –∞–¥—Ä–µ—Å –ø—Ä–æ–∫—Å–∏, –∞ –ø—Ä–æ–∫—Å–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –ø–æ 10 —É–∑–ª–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ –∞–ª–≥–æ—Ä–∏—Ç–º—É round-robin –∏–ª–∏ –ø–æ –º–µ—Ç—Ä–∏–∫–µ –Ω–∞–≥—Ä—É–∑–∫–∏). –í–æ-–≤—Ç–æ—Ä—ã—Ö, –ø—Ä–æ–∫—Å–∏ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ TLS (SSL): —Ç–æ –µ—Å—Ç—å –æ–Ω —à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ —Ä–∞—Å—à–∏—Ñ—Ä—É–µ—Ç, –∞ –≤–Ω—É—Ç—Ä—å —É–∂–µ –ø—É—Å—Ç–∏—Ç –æ–±—ã—á–Ω—ã–π HTTP ‚Äì —Å–Ω–∏–º–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤. –í-—Ç—Ä–µ—Ç—å–∏—Ö, –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–∂–∞—Ç–∏–µ: –ø—Ä–æ–∫—Å–∏ –º–æ–∂–µ—Ç –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞—Ç—å —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã, –∫–∞—Ä—Ç–∏–Ω–∫–∏) –∏ –æ—Ç–¥–∞–≤–∞—Ç—å –∏—Ö –±—ã—Å—Ç—Ä–µ–µ, –Ω–µ –¥—ë—Ä–≥–∞—è –±—ç–∫–µ–Ω–¥, –∏–ª–∏ —Å–∂–∏–º–∞—Ç—å –æ—Ç–≤–µ—Ç—ã gzip‚Äô–æ–º –Ω–∞ –ª–µ—Ç—É. –¢–∞–∫–∂–µ —á–µ—Ä–µ–∑ –Ω–µ–≥–æ —É–¥–æ–±–Ω–æ –≤–Ω–µ–¥—Ä—è—Ç—å –∫—Ä–æ—Å—Å-—Å–µ—Ä–≤–∏—Å–Ω—ã–µ –≤–µ—â–∏: –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ (rate limiting), –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äì –≤–º–µ—Å—Ç–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –∫–∞–∂–¥–æ–º –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–µ –º–æ–∂–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –Ω–∞ gateway.

–í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ —á–∞—Å—Ç–æ –≥–æ–≤–æ—Ä—è—Ç –ø—Ä–æ API Gateway ‚Äì –ø–æ —Å—É—Ç–∏ —ç—Ç–æ —É–º–Ω—ã–π reverse proxy. –û–Ω –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã, –∞ –º–æ–∂–µ—Ç –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –ø–æ URL –∏–ª–∏ –ø–æ –¥—Ä—É–≥–∏–º –∞—Ç—Ä–∏–±—É—Ç–∞–º –∫ —Ä–∞–∑–Ω—ã–º —Å–µ—Ä–≤–∏—Å–∞–º. –ù–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–ø—Ä–æ—Å `/api/users` –∏–¥—ë—Ç –≤ —Å–µ—Ä–≤–∏—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∞ `/api/orders` ‚Äì –≤ —Å–µ—Ä–≤–∏—Å –∑–∞–∫–∞–∑–æ–≤. Gateway –º–æ–∂–µ—Ç —Å—Ä–∞–∑—É –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–æ–∫–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –¥–µ–ª–∞—Ç—å —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—é —Ñ–æ—Ä–º–∞—Ç–æ–≤, –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç—ã –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤. –¢–æ –µ—Å—Ç—å –±–µ—Ä—ë—Ç –Ω–∞ —Å–µ–±—è –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏, –∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –∑–∞ –Ω–∏–º —É–∂–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç –±–æ–ª–µ–µ —É–∑–∫–∏–µ –∑–∞–¥–∞—á–∏.

–û—Ç –æ–±—ã—á–Ω–æ–≥–æ —Å–µ—Ç–µ–≤–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–∞ reverse proxy –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è —Ç–µ–º, —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (L7 –≤ –º–æ–¥–µ–ª–∏ OSI). –û–Ω "–ø–æ–Ω–∏–º–∞–µ—Ç" –ø—Ä–æ—Ç–æ–∫–æ–ª HTTP(S), –º–æ–∂–µ—Ç –∑–∞–≥–ª—è–¥—ã–≤–∞—Ç—å –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∏, URL, —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç—Ç–æ–≥–æ –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è. –ê –æ–±—ã—á–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä (—Ä–æ—É—Ç–µ—Ä) –æ–ø–µ—Ä–∏—Ä—É–µ—Ç IP-–∞–¥—Ä–µ—Å–∞–º–∏ –∏ –ø–æ—Ä—Ç–∞–º–∏ (L3/L4), –æ–Ω –Ω–µ —á–∏—Ç–∞–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∑–∞–ø—Ä–æ—Å–æ–≤ ‚Äì –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –ø–∞–∫–µ—Ç—ã –ø–æ —Ç–∞–±–ª–∏—Ü–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤. –ü–æ—ç—Ç–æ–º—É –Ω–∞–º –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ –Ω—É–∂–µ–Ω –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–∫—Å–∏/gateway: –æ–Ω –º–æ–∂–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–æ–ª–µ–∑–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –ø–æ–Ω–∏–º–∞—è –∫–æ–Ω—Ç–µ–∫—Å—Ç HTTP. –í –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Ä–º–∏–Ω–∞—Ö: –ø–æ—á—Ç–∏ –≤ –∫–∞–∂–¥–æ–π –≤–µ–±-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –Ω–∞ –≤—Ö–æ–¥–µ —Å—Ç–æ–∏—Ç –ª–∏–±–æ Nginx/HAProxy, –ª–∏–±–æ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π gateway (Kong, Zuul, Traefik –∏ –¥—Ä.), –∫–æ—Ç–æ—Ä—ã–π —Ä–µ—à–∞–µ—Ç –∑–∞–¥–∞—á–∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω–æ–π —Ç–æ—á–∫–∏.



---

## ‚ùì 99. –ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏ –±–æ–ª–µ–µ —É—Å—Ç–æ–π—á–∏–≤—ã–º –∫ —Å–±–æ—è–º? –ü–æ–≥–æ–≤–æ—Ä–∏–º –ø—Ä–æ —Ä–µ—Ç—Ä–∞–∏ (–ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤) –∏ circuit breaker: –∫–∞–∫ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∏ –∑–∞—á–µ–º –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è?


–í–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏ "—Å–µ—Ä–≤–∏—Å-—Å–µ—Ä–≤–∏—Å" –ø–æ —Å–µ—Ç–∏ –≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Å–±–æ—è: –≤—Ä–µ–º–µ–Ω–Ω—ã–π –≥–ª—é–∫ —Å–µ—Ç–∏, —Å–µ—Ä–≤–∏—Å-—Ü–µ–ª—å –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è. –ß—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Å—Ä–∞–∑—É –ø–æ–ª—É—á–∏–ª –æ—à–∏–±–∫—É –∏–∑-–∑–∞ —Ç–∞–∫–æ–≥–æ –∫—Ä–∞—Ç–∫–æ–≥–æ —Å–±–æ—è, –ø—Ä–∏–º–µ–Ω—è—é—Ç retry ‚Äì –ø–æ–≤—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, —Å–µ—Ä–≤–∏—Å –ê –≤—ã–∑–≤–∞–ª —Å–µ—Ä–≤–∏—Å –ë, –Ω–µ –ø–æ–ª—É—á–∏–ª –æ—Ç–≤–µ—Ç–∞ (—Ç–∞–π–º–∞—É—Ç), —Ç–æ–≥–¥–∞ –ê —á–µ—Ä–µ–∑ —Å–µ–∫—É–Ω–¥—É –ø–æ–ø—Ä–æ–±—É–µ—Ç –µ—â—ë —Ä–∞–∑. –ß–∞—Å—Ç–æ –¥–µ–ª–∞—é—Ç 2-3 –ø–æ–ø—ã—Ç–∫–∏ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –ø–∞—É–∑–æ–π (1—Å, –ø–æ—Ç–æ–º 2—Å, –ø–æ—Ç–æ–º 4—Å). –≠—Ç–æ –ø–æ–≤—ã—à–∞–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —É—Å–ø–µ—Ö–∞, –µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –º–∏–º–æ–ª—ë—Ç–Ω–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–∑–æ–≤–æ–µ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ —Ç–∞–π–º–∞—É—Ç–∞ –∏–ª–∏ –ø–æ—Ç–µ—Ä—è –ø–∞–∫–µ—Ç–∞).

–û–¥–Ω–∞–∫–æ –ø—Ä–æ—Å—Ç–æ–π —Ä–µ—Ç—Ä–∞–π –∏–º–µ–µ—Ç –æ–ø–∞—Å–Ω—ã–π –ø–æ–±–æ—á–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç: –µ—Å–ª–∏ —Å–µ—Ä–≤–∏—Å –ë —Ä–µ–∞–ª—å–Ω–æ —É–ø–∞–ª –∏–ª–∏ —Å–∏–ª—å–Ω–æ —Ç–æ—Ä–º–æ–∑–∏—Ç, –¥–µ—Å—è—Ç–∫–∏ –ø–æ—Ç–æ–∫–æ–≤ –∏–∑ —Å–µ—Ä–≤–∏—Å–∞ –ê –Ω–∞—á–Ω—É—Ç –¥—Ä—É–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã, —É—Å—É–≥—É–±–ª—è—è –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –∏ –±–µ–∑ —Ç–æ–≥–æ –ø—Ä–æ–±–ª–µ–º–Ω—ã–π —Å–µ—Ä–≤–∏—Å –ë. –¢—É—Ç –≤—Å—Ç—É–ø–∞–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω circuit breaker ("–ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å"). Circuit breaker —Å–ª–µ–¥–∏—Ç –∑–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –≤—ã–∑–æ–≤–æ–≤: –Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö N –∑–∞–ø—Ä–æ—Å–æ–≤ M –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—å –Ω–µ—É–¥–∞—á–µ–π. –ï—Å–ª–∏ –ø—Ä–æ—Ü–µ–Ω—Ç –Ω–µ—É–¥–∞—á –ø–µ—Ä–µ–≤–∞–ª–∏–ª –ø–æ—Ä–æ–≥, "–≤—ã–±–∏–≤–∞–µ—Ç –ø—Ä–æ–±–∫–∏" ‚Äì –¥–∞–ª—å–Ω–µ–π—à–∏–µ –∑–∞–ø—Ä–æ—Å—ã –∫ —Å–µ—Ä–≤–∏—Å—É –ë —Å—Ä–∞–∑—É –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è, –∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π –º–≥–Ω–æ–≤–µ–Ω–Ω–æ (–∏–ª–∏ —Å –∑–∞–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–º —Ñ–æ–ª–±—ç–∫–æ–º). –¢–æ –µ—Å—Ç—å –±—Ä–µ–π–∫–µ—Ä –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ Open (—Ä–∞–∑–æ–º–∫–Ω—É—Ç), —Ç–µ–º —Å–∞–º—ã–º –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è –ª–∞–≤–∏–Ω—É —Ä–µ—Ç—Ä–∞–µ–≤ –∫ –ª–µ–∂–∞—â–µ–º—É —Å–µ—Ä–≤–∏—Å—É. –ß–µ—Ä–µ–∑ –∫–∞–∫–æ–µ-—Ç–æ –≤—Ä–µ–º—è (timeout –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –Ω–∞–ø—Ä. 30 —Å–µ–∫) –æ–Ω —á–∞—Å—Ç–∏—á–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç –ø—Ä–æ–±–Ω—ã–π –∑–∞–ø—Ä–æ—Å (Half-Open): –µ—Å–ª–∏ –æ–Ω —É—Å–ø–µ—à–µ–Ω ‚Äì –∑–∞–º–∫–Ω—ë—Ç —Ü–µ–ø—å –æ–±—Ä–∞—Ç–Ω–æ (Closed) –∏ –¥–∞–ª—å—à–µ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–±—ã—á–Ω–æ; –µ—Å–ª–∏ —Å–Ω–æ–≤–∞ –ø—Ä–æ–≤–∞–ª ‚Äì –æ—Å—Ç–∞—ë—Ç—Å—è Open –µ—â—ë –Ω–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª.

–í —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç–∏ —Ä–µ—Ç—Ä–∞–∏ + –±—Ä–µ–π–∫–µ—Ä –ø–æ–∑–≤–æ–ª—è—é—Ç –¥–æ—Å—Ç–∏—á—å –±–∞–ª–∞–Ω—Å–∞: –º—ã –Ω–µ —Å–¥–∞—ë–º—Å—è —Å—Ä–∞–∑—É –ø—Ä–∏ –º–µ–ª–∫–æ–º —Å–±–æ–µ (–±–ª–∞–≥–æ–¥–∞—Ä—è —Ä–µ—Ç—Ä–∞—é), –Ω–æ –µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–∏—Å—Ç–µ–º–Ω–∞—è, –º—ã "–±—ã—Å—Ç—Ä–æ —Ñ–µ–π–ª–∏–º" –∏ —Ä–∞–∑–≥—Ä—É–∂–∞–µ–º —Å–∏—Å—Ç–µ–º—É (–±–ª–∞–≥–æ–¥–∞—Ä—è –±—Ä–µ–π–∫–µ—Ä—É). –í Java-–º–∏—Ä–µ —ç—Ç–∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏ —Ç–∏–ø–∞ Hystrix (–æ—Ç Netflix, —Å–µ–π—á–∞—Å —É–∂–µ deprecated, –Ω–æ –±—ã–ª –æ—á–µ–Ω—å –ø–æ–ø—É–ª—è—Ä–µ–Ω) –∏–ª–∏ –±–æ–ª–µ–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º Resilience4j. –û–Ω–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç —É–¥–æ–±–Ω—ã–π API/–∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏: –º–æ–∂–Ω–æ –æ–±–µ—Ä–Ω—É—Ç—å –≤—ã–∑–æ–≤ –≤–Ω–µ—à–Ω–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –≤ —Ä–µ—Ç—Ä–∞–π —Å –±—Ä–µ–π–∫–µ—Ä–æ–º –∏ –∑–∞–¥–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–º–∞–∫—Å –ø–æ–ø—ã—Ç–æ–∫, –ø–æ—Ä–æ–≥–∏ –æ—à–∏–±–æ–∫). –ü—Ä–∏ –¥–æ–ª–∂–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ–≤—ã—à–∞–µ—Ç —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å: –æ–¥–∏–Ω –∑–∞–≤–∏—Å–∏–º—ã–π —Å–µ—Ä–≤–∏—Å –º–æ–∂–µ—Ç —É–ø–∞—Å—Ç—å, –∞ –Ω–∞—à–∏ —Å–µ—Ä–≤–∏—Å—ã –Ω–µ –ª—è–≥—É—Ç —Ü–µ–ø–æ—á–∫–æ–π –∏–∑-–∑–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤ ‚Äì –ª–∏–±–æ –¥–æ–∂–¥—É—Ç—Å—è –ø–æ—Å–ª–µ –ø–∞—Ä—ã –ø–æ–ø—ã—Ç–æ–∫, –ª–∏–±–æ –±—ã—Å—Ç—Ä–æ –æ—Ç–∫–∞–∂—É—Ç –∏ –ø–æ–π–¥—É—Ç –¥–∞–ª—å—à–µ, –Ω–µ —Ç—Ä–∞—Ç—è —Ä–µ—Å—É—Ä—Å—ã –∑—Ä—è.

–ü–æ–º–∏–º–æ —Ä–µ—Ç—Ä–∞–µ–≤ –∏ –±—Ä–µ–π–∫–µ—Ä–æ–≤, —É–ø–æ–º—è–Ω—É: –µ—Å—Ç—å –∏ –¥—Ä—É–≥–∏–µ —à–∞–±–ª–æ–Ω—ã ‚Äì —Ç–∞–π–º–∞—É—Ç—ã (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, —á—Ç–æ–±—ã –Ω–µ –≤–∏—Å–µ—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ), bulkhead (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø—É–ª–æ–≤ –ø–æ—Ç–æ–∫–æ–≤ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –≤—ã–∑–æ–≤–æ–≤, —á—Ç–æ–±—ã –∑–∞–≤–∏—Å—à–∏–π —Å–µ—Ä–≤–∏—Å –Ω–µ –∑–∞–Ω—è–ª –≤—Å–µ –ø–æ—Ç–æ–∫–∏). –í—Å–µ –æ–Ω–∏ –≤ –∫–æ–º–ø–ª–µ–∫—Å–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ —Ç–æ, —á—Ç–æ–±—ã —Å–±–æ–π –æ–¥–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ –≤–ª–∏—è–ª –Ω–∞ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∏ —Å–∏—Å—Ç–µ–º–∞ –¥–µ–≥—Ä–∞–¥–∏—Ä–æ–≤–∞–ª–∞ gracefully, –∞ –Ω–µ –ø–∞–¥–∞–ª–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é.



---

## ‚ùì 100. –ö–æ–≥–¥–∞ –≥–æ–≤–æ—Ä—è—Ç –æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, —á—Ç–æ –∏–º–µ—é—Ç –≤ –≤–∏–¥—É? –ï—Å–ª–∏ —É —Ç–µ–±—è —Ä–µ–∑–∫–æ —É–≤–µ–ª–∏—á–∏—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–∞–∫ —Ç—ã —É–±–µ–¥–∏—à—å—Å—è, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –≤—ã–¥–µ—Ä–∂–∏—Ç? –†–∞—Å—Å–∫–∞–∂–∏ –æ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–µ –Ω–∞–≥—Ä—É–∑–∫–∏, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏, –≤–æ–∑–º–æ–∂–Ω–æ, –æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∫—ç—à–∏—Ä—É—é—â–∏—Ö —Å–ª–æ—ë–≤.


–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –æ–∑–Ω–∞—á–∞–µ—Ç —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Ä–æ—Å—Ç—É –Ω–∞–≥—Ä—É–∑–∫–∏ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∑–∞–ø—Ä–æ—Å–æ–≤) –ø—É—Ç—ë–º –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤. –ì—Ä—É–±–æ –≥–æ–≤–æ—Ä—è, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å—Ç–∞–ª–æ –≤ 10 —Ä–∞–∑ –±–æ–ª—å—à–µ, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç, –¥–æ–±–∞–≤–∏–≤ –º–æ—â–Ω–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–µ—Ä–≤–µ—Ä–æ–≤), –æ–±—Å–ª—É–∂–∏—Ç—å –∏—Ö –±–µ–∑ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞.

–ß—Ç–æ–±—ã —Å–∏—Å—Ç–µ–º–∞ –≤—ã–¥–µ—Ä–∂–∞–ª–∞ —Ä–µ–∑–∫–∏–π —Ä–æ—Å—Ç, –Ω—É–∂–Ω–æ —É–±–µ–¥–∏–ª—Å—è, —á—Ç–æ –≤—Å–µ –µ—ë –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –∏ –Ω–µ —É–ø–∏—Ä–∞—é—Ç—Å—è –≤ –∫–∞–∫–æ–π-—Ç–æ –æ–¥–∏–Ω —É–∑–µ–ª. –ü–µ—Ä–≤–æ–µ ‚Äì –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π: —Å—Ç–∞–≤–∏–º load balancer/reverse proxy —Å–ø–µ—Ä–µ–¥–∏, –∏ –æ–Ω —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ –º–Ω–æ–∂–µ—Å—Ç–≤—É —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ —Å–µ—Ä–≤–∏—Å–æ–≤. –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–∏—Ç—É–∞—Ü–∏—é, –∫–æ–≥–¥–∞ –æ–¥–∏–Ω —Å–µ—Ä–≤–µ—Ä –∑–∞—Ö–ª—ë–±—ã–≤–∞–µ—Ç—Å—è, –∞ –¥—Ä—É–≥–∏–µ –ø—Ä–æ—Å—Ç–∞–∏–≤–∞—é—Ç. –í—Ç–æ—Ä–æ–µ ‚Äì –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –¥—Ä—É–≥–∏—Ö —Ö—Ä–∞–Ω–∏–ª–∏—â. –≠—Ç–æ —Å–ª–æ–∂–Ω–µ–µ, –Ω–æ –µ—Å—Ç—å –ø–æ–¥—Ö–æ–¥—ã: –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è —á—Ç–µ–Ω–∏—è (—Å—Ç–∞–≤–∏–º –Ω–µ—Å–∫–æ–ª—å–∫–æ read-replica –±–∞–∑ –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —á—Ç–µ–Ω–∏–µ), —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ (–¥–µ–ª–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —Ä–∞–∑–Ω—ã–º —Å–µ—Ä–≤–µ—Ä–∞–º –±–∞–∑—ã), –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ NoSQL-—Ö—Ä–∞–Ω–∏–ª–∏—â, –∫–æ—Ç–æ—Ä—ã–µ –ª—É—á—à–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É—é—Ç—Å—è –Ω–∞ —á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å.

–¢–∞–∫–∂–µ –∫–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç ‚Äì —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —É–∑–∫–∏—Ö –º–µ—Å—Ç. –ù—É–∂–Ω–æ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞—Ç—å –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏, –≥–¥–µ –ø—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏ —Ä–∞—Å—Ç—ë—Ç –æ—á–µ—Ä–µ–¥—å –∏–ª–∏ –∑–∞–¥–µ—Ä–∂–∫–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –±–µ–∑ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –ª–µ–∑–µ—Ç –≤ –±–∞–∑—É –∑–∞ –æ–¥–Ω–∏–º–∏ –∏ —Ç–µ–º–∏ –∂–µ –¥–∞–Ω–Ω—ã–º–∏ ‚Äì —Ä–µ—à–µ–Ω–∏–µ: –≤–Ω–µ–¥—Ä–∏—Ç—å –∫–µ—à–∏—Ä—É—é—â–∏–π —Å–ª–æ–π (Redis –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π cache) –¥–ª—è —Å–∞–º—ã—Ö —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, —á—Ç–æ–±—ã —Å–Ω–∏–∑–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –±–∞–∑—É. –ò–ª–∏, –µ—Å–ª–∏ –≤–Ω–µ—à–Ω–∏–π API —Ç–æ—Ä–º–æ–∑–∏—Ç, –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –µ–≥–æ –≤—ã–∑–æ–≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –æ—Ç–¥–∞–≤–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –∏ –¥–æ–≥—Ä—É–∂–∞—è –¥–∞–Ω–Ω—ã–µ –ø–æ–∑–∂–µ.

–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äì –æ—Ç–¥–µ–ª—å–Ω–∞—è –±–æ–ª—å—à–∞—è —Ç–µ–º–∞: –æ—Ç CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏ (—á—Ç–æ–±—ã –∫–ª–∏–µ–Ω—Ç—ã –∑–∞–±–∏—Ä–∞–ª–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏/JS –∏–∑ –±–ª–∏–∂–∞–π—à–µ–≥–æ –∫ –Ω–∏–º —É–∑–ª–∞) –¥–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫—ç—à–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —Å–∞–º–∏—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö. –•–æ—Ä–æ—à–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å—Ç–∞—Ä–∞–µ—Ç—Å—è –æ—Ç–¥–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–∞–∫ –º–æ–∂–Ω–æ "–±–ª–∏–∂–µ" –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏ –∫–∞–∫ –º–æ–∂–Ω–æ –º–µ–Ω—å—à–µ–π —Ü–µ–Ω–æ–π ‚Äì –Ω–∞–ø—Ä–∏–º–µ—Ä, –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞—Ä–∞–Ω–µ–µ (pre-computation), –∏–º–µ—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è, —á—Ç–æ–±—ã –Ω–µ –¥–µ–ª–∞—Ç—å —Ç—è–∂—ë–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å.

–ò, –∫–æ–Ω–µ—á–Ω–æ, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã–º–∏ —Ç–µ—Å—Ç–∞–º–∏. –°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç: —É–≤–µ–ª–∏—á—å RPS –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∏ –ø–æ—Å–º–æ—Ç—Ä–∏, –≥–¥–µ –Ω–∞—á–Ω—ë—Ç —Ä–∞—Å—Ç–∏ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞. –ü–æ –∏—Ç–æ–≥—É –º–æ–∂–Ω–æ –≤—ã—è–≤–∏—Ç—å, —á—Ç–æ, —Å–∫–∞–∂–µ–º, –Ω—É–∂–µ–Ω –µ—â—ë –æ–¥–∏–Ω –∏–Ω—Å—Ç–∞–Ω—Å —Å–µ—Ä–≤–∏—Å—É X, –∏–ª–∏ –±–∞–∑–∞ —É–ø–∏—Ä–∞–µ—Ç—Å—è –≤ CPU ‚Äì —Ç–æ–≥–¥–∞ –ª–∏–±–æ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –±–æ–ª–µ–µ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç–∞–Ω—Å, –ª–∏–±–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã–Ω–µ—Å—Ç–∏ –∫–∞–∫—É—é-—Ç–æ —á–∞—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –±–∞–∑—É). –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –∏–º–µ–Ω–Ω–æ —Ä–∞–¥–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è: –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –º–æ–∂–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ. –ï—Å–ª–∏ –ø—Ä–∏ —Ä–æ—Å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ —Å—Ç—Ä–∞–¥–∞–µ—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–µ—Ä–≤–∏—Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π ‚Äì –º—ã –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º –∏–º–µ–Ω–Ω–æ –µ–≥–æ, –Ω–µ —Ç—Ä–æ–≥–∞—è –¥—Ä—É–≥–∏–µ. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –ø–æ–¥ "–º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π" –ø–æ–Ω–∏–º–∞—é—Ç —Ç–∞–∫—É—é, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ —ç–ª–∞—Å—Ç–∏—á–Ω–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫—É: —á–µ—Ä–µ–∑ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫—É, –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–∞–∑–±–∏–≤–∫—É –Ω–∞ –º–æ–¥—É–ª–∏, —á—Ç–æ–±—ã –Ω–∏–∫–∞–∫–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ —Å—Ç–∞–ª —Ç–æ—á–∫–æ–π, –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—â–µ–π —Ä–æ—Å—Ç.

```table-of-contents
title: Содержание:
style: nestedList # TOC style (nestedList|inlineFirstLevel)
minLevel: 0 # Include headings from the specified level
maxLevel: 0 # Include headings up to the specified level
includeLinks: true # Make headings clickable
debugInConsole: false # Print debug info in Obsidian console
```

KVM определяется как виртуальная машина на базе ядра, которая является отличным решением для запуска других операционных систем в Linux. Для создания среды виртуальной машины используется эмулятор гипервизора. Требуется настройка аппаратного уровня. KVM работает с процессором компьютера, системной памятью, жестким диском, сетью и параметрами хост-компьютера. В Linux использование KVM безопасно. Вы можете управлять управлением хранилищем, использованием оперативной памяти и питанием. Вы даже можете планировать виртуальные машины в Linux с помощью KVM. Итак, проблема, о которой вы можете подумать, когда захотите перенести и использовать виртуальные машины гипервизора Virtualbox в свою KVM-систему, заключается в том, чтобы начать все сначала, что отнимает много времени и является сложным.

# Виртуальные машины Virtualbox на KVM в Linux

---

KVM написан на [языке программирования C](https://www.ubuntupit.com/best-c-programming-books-available/ "20 Лучших книг по программированию на C, которые должен прочитать каждый программист") и собран под лицензией конфиденциальности GNU GPL. Это отличный гипервизор для установки новой операционной системы на ваш главный компьютер. Но если вам нужно собрать все ранее настроенные виртуальные машины Virtualbox в KVM, это может вызвать головную боль, поскольку Virtual box использует образ .vdi для загрузки операционной системы на главный компьютер. С другой стороны, KVM использует пакет файлов расширения QCOW2 для запуска операционной системы на хост-сервере / компьютере.

Поскольку Virtualbox и KVM оба являются [инструментами виртуализации с открытым исходным кодом](https://www.ubuntupit.com/best-vmware-tools-for-modern-enterprises/ "Топ-30 лучших инструментов VMware для современных предприятий") , в Linux вы можете перенести все свои виртуальные машины Virtualbox в KVM.

Если вы новичок в виртуализации в Linux, пожалуйста, ознакомьтесь с сообщением, в котором я описал методы установки гипервизоров для запуска виртуальных машин в Linux. В этом посте, наряду с основными концепциями и основами Virtualbox и KVM, мы увидим, как использовать виртуальные машины Virtualbox на KVM в Linux.

## Способ 1: Конвертация образа Virtualbox в образ KVM
---

В этом методе мы рассмотрим метод составления списка образов виртуальных машин в Linux и посмотрим, сколько образов имеется в системе. Позже мы преобразуем изображение в файл образа KVM. Шаги довольно простые и изящные. Давайте начнем.
### Просмотр существующих образов VirtualBox**
---

Команда отображения списка образов виртуальных машин VirtualBox, установленных в вашей системе Linux.

```shell
vboxmanage list hdds
```
### Конвертация образа VDI в формат RAW Диска**

---

Теперь мы выберем одну из наших виртуальных машин Virtualbox и преобразуем ее в формат изображения raw. Как я упоминал ранее, VirtualBox использует формат .vdi, поэтому теперь мы преобразуем изображение .vdi в формат raw-изображения. В зависимости от вашего процессора, оперативной памяти и конфигурации оборудования процесс преобразования может занять некоторое время.

Следующая команда выполняет преобразование. Команда сначала выберет образ виртуальной машины с жесткого диска, а затем преобразует файл в изображение RAW.

```shell
vboxmanage clonehd --format RAW /home/james/VirtualBox\ VMs/debian/debian.vdi debian_10_Server.img
```

Поскольку преобразование файла виртуальной машины обычно занимает много времени и ресурсов, поэтому после завершения преобразования, проверьте файл образа RAW и убедитесь, что весь файл был успешно преобразован.

```shell
du -h debian_10_Server.img
```
### Конвертация образа RAW в формат KVM

---

Как только мы закончим преобразование образа виртуальной машины в изображение raw, теперь пришло время преобразовать изображение raw в формат изображения qcow2 KVM. При преобразовании будут сохранены все данные, которые вы использовали в своей виртуальной машине VirtualBox. Пожалуйста, выполните следующую команду, приведенную ниже, чтобы выполнить преобразование в файл образа KVM.

```shell
qemu-img convert -f raw debian_10_Server.img -O qcow2 debian_10_Server.qcow2
```

После завершения преобразования ускорьте процесс, проверив размер файла и его данные на вашем компьютере с Linux.

```shell
du -h debian_10_Server.qcow2 
```
## Способ 2: Конвертация DVI в Qcow2

---

Преобразование образа виртуальной машины VirtualBox VM DVI в формат образа KVM Qcow2 - еще один удобный и мощный метод переноса образа виртуальной машины VirtualBox в Linux KVM. Сначала нам нужно установить `virt` инструмент manager (диспетчер виртуальных машин) в наших дистрибутивах Linux, позволяющий нам выполнять задачи преобразования изображений.

Пожалуйста, выполните приведенные ниже команды в вашей командной строке терминала в соответствии с вашим дистрибутивом, чтобы установить средство управления виртуальными машинами.

>Установка Virtual Machine Manager на Red Hat /Fedora Linux
```shell
sudo dnf -y install qemu-kvm libvirt virt-install bridge-utils

# или 
sudo yum -y install qemu-kvm libvirt virt-install bridge-utils
```

>Установка Virtual Machine Manager на Ubuntu/Debian Linux
```shell
sudo apt-get -y install qemu-kvm libvirt-bin virtinst bridge-utils
```

>Установка Virtual Machine Manager на Arch/Manjaro
```shell
sudo pacman -S qemu libvirt virt-install bridge-utils
```

После завершения установки Virtual Machine Manager вы можете просмотреть каталог виртуальной машины VirtualBox для клонирования вашего текущего образа виртуальной машины.

```shell
cd ~
cd virtualbox VMs/ubuntu-server/
```

Выполните следующую команду в командной строке вашего терминала, чтобы экспортировать текущий образ виртуальной машины VirtualBox VM DVI в вашу файловую систему.

```shell
vboxmanage clonehd box-disk1.vmdk ubuntu.vdi --format vdi
```

Когда предыдущая задача будет выполнена, теперь вы можете запустить следующую команду QEMU, приведенную ниже, для преобразования изображения DVI в изображение Qcow2 для использования в KVM Linux.

```shell
qemu-img convert -f vdi -O qcow2 ubuntu.vdi ubuntu.qcow2
```

Когда преобразование завершится, вы сможете использовать файл образа qcow2 на вашем KVM Linux. После завершения преобразования вы можете попробовать запустить виртуальные машины в KVM. Если что-то пойдет не так, пожалуйста, перезагрузите компьютер и повторите попытку.

# Заключение

---

Как виртуальные машины, так и KVM работают бесперебойно во всех основных системах Linux. Следовательно, вам может потребоваться выполнить миграцию с одного гипервизора на другой без потери каких-либо ранее настроенных данных и сведений о пользователях. Более того, KVM предлагает несколько дополнительных функций, которых нет в Virtualbox. Во всей статье я описал, как использовать виртуальные машины Virtualbox на KVM в Linux.

Пожалуйста, поделитесь им со своими друзьями и сообществом Linux, если вы считаете этот пост полезным и информативным. Вы также можете написать свое мнение относительно этого поста в разделе комментариев.